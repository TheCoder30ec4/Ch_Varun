var TS=Object.defineProperty;var OS=(i,e,n)=>e in i?TS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Ea=(i,e,n)=>OS(i,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function ks(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lf={exports:{}},os={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function xS(){if(cy)return os;cy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:i,type:r,key:c,ref:l!==void 0?l:null,props:o}}return os.Fragment=e,os.jsx=n,os.jsxs=n,os}var fy;function AS(){return fy||(fy=1,lf.exports=xS()),lf.exports}var L=AS(),uf={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function RS(){if(dy)return ge;dy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(T,P,G){this.props=T,this.context=P,this.refs=E,this.updater=G||w}x.prototype.isReactComponent={},x.prototype.setState=function(T,P){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,P,"setState")},x.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function N(){}N.prototype=x.prototype;function I(T,P,G){this.props=T,this.context=P,this.refs=E,this.updater=G||w}var C=I.prototype=new N;C.constructor=I,S(C,x.prototype),C.isPureReactComponent=!0;var Y=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function ae(T,P,G,V,te,oe){return G=oe.ref,{$$typeof:i,type:T,key:P,ref:G!==void 0?G:null,props:oe}}function K(T,P){return ae(T.type,P,void 0,void 0,void 0,T.props)}function Be(T){return typeof T=="object"&&T!==null&&T.$$typeof===i}function St(T){var P={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(G){return P[G]})}var rt=/\/+/g;function Ge(T,P){return typeof T=="object"&&T!==null&&T.key!=null?St(""+T.key):P.toString(36)}function Nt(){}function W(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Nt,Nt):(T.status="pending",T.then(function(P){T.status==="pending"&&(T.status="fulfilled",T.value=P)},function(P){T.status==="pending"&&(T.status="rejected",T.reason=P)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function F(T,P,G,V,te){var oe=typeof T;(oe==="undefined"||oe==="boolean")&&(T=null);var ce=!1;if(T===null)ce=!0;else switch(oe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(T.$$typeof){case i:case e:ce=!0;break;case g:return ce=T._init,F(ce(T._payload),P,G,V,te)}}if(ce)return te=te(T),ce=V===""?"."+Ge(T,0):V,Y(te)?(G="",ce!=null&&(G=ce.replace(rt,"$&/")+"/"),F(te,P,G,"",function(Qt){return Qt})):te!=null&&(Be(te)&&(te=K(te,G+(te.key==null||T&&T.key===te.key?"":(""+te.key).replace(rt,"$&/")+"/")+ce)),P.push(te)),1;ce=0;var Qe=V===""?".":V+":";if(Y(T))for(var Pe=0;Pe<T.length;Pe++)V=T[Pe],oe=Qe+Ge(V,Pe),ce+=F(V,P,G,oe,te);else if(Pe=_(T),typeof Pe=="function")for(T=Pe.call(T),Pe=0;!(V=T.next()).done;)V=V.value,oe=Qe+Ge(V,Pe++),ce+=F(V,P,G,oe,te);else if(oe==="object"){if(typeof T.then=="function")return F(W(T),P,G,V,te);throw P=String(T),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ce}function j(T,P,G){if(T==null)return T;var V=[],te=0;return F(T,V,"","",function(oe){return P.call(G,oe,te++)}),V}function U(T){if(T._status===-1){var P=T._result;P=P(),P.then(function(G){(T._status===0||T._status===-1)&&(T._status=1,T._result=G)},function(G){(T._status===0||T._status===-1)&&(T._status=2,T._result=G)}),T._status===-1&&(T._status=0,T._result=P)}if(T._status===1)return T._result.default;throw T._result}var Z=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function J(){}return ge.Children={map:j,forEach:function(T,P,G){j(T,function(){P.apply(this,arguments)},G)},count:function(T){var P=0;return j(T,function(){P++}),P},toArray:function(T){return j(T,function(P){return P})||[]},only:function(T){if(!Be(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ge.Component=x,ge.Fragment=n,ge.Profiler=l,ge.PureComponent=I,ge.StrictMode=r,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ge.__COMPILER_RUNTIME={__proto__:null,c:function(T){return q.H.useMemoCache(T)}},ge.cache=function(T){return function(){return T.apply(null,arguments)}},ge.cloneElement=function(T,P,G){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var V=S({},T.props),te=T.key,oe=void 0;if(P!=null)for(ce in P.ref!==void 0&&(oe=void 0),P.key!==void 0&&(te=""+P.key),P)!ee.call(P,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&P.ref===void 0||(V[ce]=P[ce]);var ce=arguments.length-2;if(ce===1)V.children=G;else if(1<ce){for(var Qe=Array(ce),Pe=0;Pe<ce;Pe++)Qe[Pe]=arguments[Pe+2];V.children=Qe}return ae(T.type,te,void 0,void 0,oe,V)},ge.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},ge.createElement=function(T,P,G){var V,te={},oe=null;if(P!=null)for(V in P.key!==void 0&&(oe=""+P.key),P)ee.call(P,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(te[V]=P[V]);var ce=arguments.length-2;if(ce===1)te.children=G;else if(1<ce){for(var Qe=Array(ce),Pe=0;Pe<ce;Pe++)Qe[Pe]=arguments[Pe+2];te.children=Qe}if(T&&T.defaultProps)for(V in ce=T.defaultProps,ce)te[V]===void 0&&(te[V]=ce[V]);return ae(T,oe,void 0,void 0,null,te)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(T){return{$$typeof:d,render:T}},ge.isValidElement=Be,ge.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:U}},ge.memo=function(T,P){return{$$typeof:h,type:T,compare:P===void 0?null:P}},ge.startTransition=function(T){var P=q.T,G={};q.T=G;try{var V=T(),te=q.S;te!==null&&te(G,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(J,Z)}catch(oe){Z(oe)}finally{q.T=P}},ge.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ge.use=function(T){return q.H.use(T)},ge.useActionState=function(T,P,G){return q.H.useActionState(T,P,G)},ge.useCallback=function(T,P){return q.H.useCallback(T,P)},ge.useContext=function(T){return q.H.useContext(T)},ge.useDebugValue=function(){},ge.useDeferredValue=function(T,P){return q.H.useDeferredValue(T,P)},ge.useEffect=function(T,P,G){var V=q.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(T,P)},ge.useId=function(){return q.H.useId()},ge.useImperativeHandle=function(T,P,G){return q.H.useImperativeHandle(T,P,G)},ge.useInsertionEffect=function(T,P){return q.H.useInsertionEffect(T,P)},ge.useLayoutEffect=function(T,P){return q.H.useLayoutEffect(T,P)},ge.useMemo=function(T,P){return q.H.useMemo(T,P)},ge.useOptimistic=function(T,P){return q.H.useOptimistic(T,P)},ge.useReducer=function(T,P,G){return q.H.useReducer(T,P,G)},ge.useRef=function(T){return q.H.useRef(T)},ge.useState=function(T){return q.H.useState(T)},ge.useSyncExternalStore=function(T,P,G){return q.H.useSyncExternalStore(T,P,G)},ge.useTransition=function(){return q.H.useTransition()},ge.version="19.1.0",ge}var hy;function Jd(){return hy||(hy=1,uf.exports=RS()),uf.exports}var Ie=Jd(),of={exports:{}},cs={},cf={exports:{}},ff={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function NS(){return my||(my=1,function(i){function e(j,U){var Z=j.length;j.push(U);e:for(;0<Z;){var J=Z-1>>>1,T=j[J];if(0<l(T,U))j[J]=U,j[Z]=T,Z=J;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var U=j[0],Z=j.pop();if(Z!==U){j[0]=Z;e:for(var J=0,T=j.length,P=T>>>1;J<P;){var G=2*(J+1)-1,V=j[G],te=G+1,oe=j[te];if(0>l(V,Z))te<T&&0>l(oe,V)?(j[J]=oe,j[te]=Z,J=te):(j[J]=V,j[G]=Z,J=G);else if(te<T&&0>l(oe,Z))j[J]=oe,j[te]=Z,J=te;else break e}}return U}function l(j,U){var Z=j.sortIndex-U.sortIndex;return Z!==0?Z:j.id-U.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],h=[],g=1,y=null,_=3,w=!1,S=!1,E=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function Y(j){for(var U=n(h);U!==null;){if(U.callback===null)r(h);else if(U.startTime<=j)r(h),U.sortIndex=U.expirationTime,e(m,U);else break;U=n(h)}}function q(j){if(E=!1,Y(j),!S)if(n(m)!==null)S=!0,ee||(ee=!0,Ge());else{var U=n(h);U!==null&&F(q,U.startTime-j)}}var ee=!1,ae=-1,K=5,Be=-1;function St(){return x?!0:!(i.unstable_now()-Be<K)}function rt(){if(x=!1,ee){var j=i.unstable_now();Be=j;var U=!0;try{e:{S=!1,E&&(E=!1,I(ae),ae=-1),w=!0;var Z=_;try{t:{for(Y(j),y=n(m);y!==null&&!(y.expirationTime>j&&St());){var J=y.callback;if(typeof J=="function"){y.callback=null,_=y.priorityLevel;var T=J(y.expirationTime<=j);if(j=i.unstable_now(),typeof T=="function"){y.callback=T,Y(j),U=!0;break t}y===n(m)&&r(m),Y(j)}else r(m);y=n(m)}if(y!==null)U=!0;else{var P=n(h);P!==null&&F(q,P.startTime-j),U=!1}}break e}finally{y=null,_=Z,w=!1}U=void 0}}finally{U?Ge():ee=!1}}}var Ge;if(typeof C=="function")Ge=function(){C(rt)};else if(typeof MessageChannel<"u"){var Nt=new MessageChannel,W=Nt.port2;Nt.port1.onmessage=rt,Ge=function(){W.postMessage(null)}}else Ge=function(){N(rt,0)};function F(j,U){ae=N(function(){j(i.unstable_now())},U)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(j){switch(_){case 1:case 2:case 3:var U=3;break;default:U=_}var Z=_;_=U;try{return j()}finally{_=Z}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=_;_=j;try{return U()}finally{_=Z}},i.unstable_scheduleCallback=function(j,U,Z){var J=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?J+Z:J):Z=J,j){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=Z+T,j={id:g++,callback:U,priorityLevel:j,startTime:Z,expirationTime:T,sortIndex:-1},Z>J?(j.sortIndex=Z,e(h,j),n(m)===null&&j===n(h)&&(E?(I(ae),ae=-1):E=!0,F(q,Z-J))):(j.sortIndex=T,e(m,j),S||w||(S=!0,ee||(ee=!0,Ge()))),j},i.unstable_shouldYield=St,i.unstable_wrapCallback=function(j){var U=_;return function(){var Z=_;_=U;try{return j.apply(this,arguments)}finally{_=Z}}}}(ff)),ff}var py;function jS(){return py||(py=1,cf.exports=NS()),cf.exports}var df={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function CS(){if(gy)return _t;gy=1;var i=Jd();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(m,h,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:m,containerInfo:h,implementation:g}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(m,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(m,h,null,g)},_t.flushSync=function(m){var h=c.T,g=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=h,r.p=g,r.d.f()}},_t.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(m,h))},_t.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},_t.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var g=h.as,y=d(g,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?r.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:w}):g==="script"&&r.d.X(m,{crossOrigin:y,integrity:_,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_t.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=d(h.as,h.crossOrigin);r.d.M(m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(m)},_t.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,y=d(g,h.crossOrigin);r.d.L(m,g,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_t.preloadModule=function(m,h){if(typeof m=="string")if(h){var g=d(h.as,h.crossOrigin);r.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(m)},_t.requestFormReset=function(m){r.d.r(m)},_t.unstable_batchedUpdates=function(m,h){return m(h)},_t.useFormState=function(m,h,g){return c.H.useFormState(m,h,g)},_t.useFormStatus=function(){return c.H.useHostTransitionStatus()},_t.version="19.1.0",_t}var yy;function kS(){if(yy)return df.exports;yy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),df.exports=CS(),df.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function LS(){if(by)return cs;by=1;var i=jS(),e=Jd(),n=kS();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function o(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function c(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(o(t)!==t)throw Error(r(188))}function m(t){var a=t.alternate;if(!a){if(a=o(t),a===null)throw Error(r(188));return a!==t?null:t}for(var s=t,u=a;;){var f=s.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===s)return d(f),t;if(p===u)return d(f),a;p=p.sibling}throw Error(r(188))}if(s.return!==u.return)s=f,u=p;else{for(var b=!1,v=f.child;v;){if(v===s){b=!0,s=f,u=p;break}if(v===u){b=!0,u=f,s=p;break}v=v.sibling}if(!b){for(v=p.child;v;){if(v===s){b=!0,s=p,u=f;break}if(v===u){b=!0,u=p,s=f;break}v=v.sibling}if(!b)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:a}function h(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=h(t),a!==null)return a;t=t.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),C=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Be=Symbol.for("react.activity"),St=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function Ge(t){return t===null||typeof t!="object"?null:(t=rt&&t[rt]||t["@@iterator"],typeof t=="function"?t:null)}var Nt=Symbol.for("react.client.reference");function W(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case q:return"Suspense";case ee:return"SuspenseList";case Be:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case C:return(t.displayName||"Context")+".Provider";case I:return(t._context.displayName||"Context")+".Consumer";case Y:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ae:return a=t.displayName||null,a!==null?a:W(t.type)||"Memo";case K:a=t._payload,t=t._init;try{return W(t(a))}catch{}}return null}var F=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},J=[],T=-1;function P(t){return{current:t}}function G(t){0>T||(t.current=J[T],J[T]=null,T--)}function V(t,a){T++,J[T]=t.current,t.current=a}var te=P(null),oe=P(null),ce=P(null),Qe=P(null);function Pe(t,a){switch(V(ce,a),V(oe,t),V(te,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Pg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Pg(a),t=Ug(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(te),V(te,t)}function Qt(){G(te),G(oe),G(ce)}function Da(t){t.memoizedState!==null&&V(Qe,t);var a=te.current,s=Ug(a,t.type);a!==s&&(V(oe,t),V(te,s))}function ir(t){oe.current===t&&(G(te),G(oe)),Qe.current===t&&(G(Qe),rs._currentValue=Z)}var Zu=Object.prototype.hasOwnProperty,Vu=i.unstable_scheduleCallback,Yu=i.unstable_cancelCallback,n0=i.unstable_shouldYield,a0=i.unstable_requestPaint,Sn=i.unstable_now,r0=i.unstable_getCurrentPriorityLevel,bh=i.unstable_ImmediatePriority,_h=i.unstable_UserBlockingPriority,qs=i.unstable_NormalPriority,i0=i.unstable_LowPriority,vh=i.unstable_IdlePriority,s0=i.log,l0=i.unstable_setDisableYieldValue,di=null,It=null;function Wn(t){if(typeof s0=="function"&&l0(t),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(di,t)}catch{}}var Pt=Math.clz32?Math.clz32:c0,u0=Math.log,o0=Math.LN2;function c0(t){return t>>>=0,t===0?32:31-(u0(t)/o0|0)|0}var Bs=256,Hs=4194304;function $a(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gs(t,a,s){var u=t.pendingLanes;if(u===0)return 0;var f=0,p=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var v=u&134217727;return v!==0?(u=v&~p,u!==0?f=$a(u):(b&=v,b!==0?f=$a(b):s||(s=v&~t,s!==0&&(f=$a(s))))):(v=u&~p,v!==0?f=$a(v):b!==0?f=$a(b):s||(s=u&~t,s!==0&&(f=$a(s)))),f===0?0:a!==0&&a!==f&&(a&p)===0&&(p=f&-f,s=a&-a,p>=s||p===32&&(s&4194048)!==0)?a:f}function hi(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function f0(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wh(){var t=Bs;return Bs<<=1,(Bs&4194048)===0&&(Bs=256),t}function Sh(){var t=Hs;return Hs<<=1,(Hs&62914560)===0&&(Hs=4194304),t}function Fu(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function mi(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function d0(t,a,s,u,f,p){var b=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var v=t.entanglements,O=t.expirationTimes,D=t.hiddenUpdates;for(s=b&~s;0<s;){var z=31-Pt(s),H=1<<z;v[z]=0,O[z]=-1;var $=D[z];if($!==null)for(D[z]=null,z=0;z<$.length;z++){var M=$[z];M!==null&&(M.lane&=-536870913)}s&=~H}u!==0&&Eh(t,u,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(b&~a))}function Eh(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var u=31-Pt(a);t.entangledLanes|=a,t.entanglements[u]=t.entanglements[u]|1073741824|s&4194090}function Th(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var u=31-Pt(s),f=1<<u;f&a|t[u]&a&&(t[u]|=a),s&=~f}}function Xu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oh(){var t=U.p;return t!==0?t:(t=window.event,t===void 0?32:ry(t.type))}function h0(t,a){var s=U.p;try{return U.p=t,a()}finally{U.p=s}}var ea=Math.random().toString(36).slice(2),yt="__reactFiber$"+ea,jt="__reactProps$"+ea,sr="__reactContainer$"+ea,Ju="__reactEvents$"+ea,m0="__reactListeners$"+ea,p0="__reactHandles$"+ea,xh="__reactResources$"+ea,pi="__reactMarker$"+ea;function Ku(t){delete t[yt],delete t[jt],delete t[Ju],delete t[m0],delete t[p0]}function lr(t){var a=t[yt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[sr]||s[yt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=Hg(t);t!==null;){if(s=t[yt])return s;t=Hg(t)}return a}t=s,s=t.parentNode}return null}function ur(t){if(t=t[yt]||t[sr]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function gi(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function or(t){var a=t[xh];return a||(a=t[xh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function it(t){t[pi]=!0}var Ah=new Set,Rh={};function Ma(t,a){cr(t,a),cr(t+"Capture",a)}function cr(t,a){for(Rh[t]=a,t=0;t<a.length;t++)Ah.add(a[t])}var g0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nh={},jh={};function y0(t){return Zu.call(jh,t)?!0:Zu.call(Nh,t)?!1:g0.test(t)?jh[t]=!0:(Nh[t]=!0,!1)}function Zs(t,a,s){if(y0(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function Vs(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Cn(t,a,s,u){if(u===null)t.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+u)}}var Wu,Ch;function fr(t){if(Wu===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Wu=a&&a[1]||"",Ch=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wu+t+Ch}var eo=!1;function to(t,a){if(!t||eo)return"";eo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(M){var $=M}Reflect.construct(t,[],H)}else{try{H.call()}catch(M){$=M}t.call(H.prototype)}}else{try{throw Error()}catch(M){$=M}(H=t())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(M){if(M&&$&&typeof M.stack=="string")return[M.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],v=p[1];if(b&&v){var O=b.split(`
`),D=v.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<D.length&&!D[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===D.length)for(u=O.length-1,f=D.length-1;1<=u&&0<=f&&O[u]!==D[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==D[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==D[f]){var z=`
`+O[u].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=u&&0<=f);break}}}finally{eo=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?fr(s):""}function b0(t){switch(t.tag){case 26:case 27:case 5:return fr(t.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 15:return to(t.type,!1);case 11:return to(t.type.render,!1);case 1:return to(t.type,!0);case 31:return fr("Activity");default:return""}}function kh(t){try{var a="";do a+=b0(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Jt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _0(t){var a=Lh(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),u=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,p=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,p.call(this,b)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Ys(t){t._valueTracker||(t._valueTracker=_0(t))}function Dh(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),u="";return t&&(u=Lh(t)?t.checked?"true":"false":t.value),t=u,t!==s?(a.setValue(t),!0):!1}function Fs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var v0=/[\n"\\]/g;function Kt(t){return t.replace(v0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function no(t,a,s,u,f,p,b,v){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),a!=null?b==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Jt(a)):t.value!==""+Jt(a)&&(t.value=""+Jt(a)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),a!=null?ao(t,b,Jt(a)):s!=null?ao(t,b,Jt(s)):u!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.name=""+Jt(v):t.removeAttribute("name")}function $h(t,a,s,u,f,p,b,v){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;s=s!=null?""+Jt(s):"",a=a!=null?""+Jt(a):s,v||a===t.value||(t.value=a),t.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=v?t.checked:!!u,t.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function ao(t,a,s){a==="number"&&Fs(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function dr(t,a,s,u){if(t=t.options,a){a={};for(var f=0;f<s.length;f++)a["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=a.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&u&&(t[s].defaultSelected=!0)}else{for(s=""+Jt(s),a=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Mh(t,a,s){if(a!=null&&(a=""+Jt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Jt(s):""}function Ih(t,a,s,u){if(a==null){if(u!=null){if(s!=null)throw Error(r(92));if(F(u)){if(1<u.length)throw Error(r(93));u=u[0]}s=u}s==null&&(s=""),a=s}s=Jt(a),t.defaultValue=s,u=t.textContent,u===s&&u!==""&&u!==null&&(t.value=u)}function hr(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var w0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ph(t,a,s){var u=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":u?t.setProperty(a,s):typeof s!="number"||s===0||w0.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Uh(t,a,s){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&s[f]!==u&&Ph(t,f,u)}else for(var p in a)a.hasOwnProperty(p)&&Ph(t,p,a[p])}function ro(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xs(t){return E0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var io=null;function so(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mr=null,pr=null;function zh(t){var a=ur(t);if(a&&(t=a.stateNode)){var s=t[jt]||null;e:switch(t=a.stateNode,a.type){case"input":if(no(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Kt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var u=s[a];if(u!==t&&u.form===t.form){var f=u[jt]||null;if(!f)throw Error(r(90));no(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<s.length;a++)u=s[a],u.form===t.form&&Dh(u)}break e;case"textarea":Mh(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&dr(t,!!s.multiple,a,!1)}}}var lo=!1;function qh(t,a,s){if(lo)return t(a,s);lo=!0;try{var u=t(a);return u}finally{if(lo=!1,(mr!==null||pr!==null)&&(Dl(),mr&&(a=mr,t=pr,pr=mr=null,zh(a),t)))for(a=0;a<t.length;a++)zh(t[a])}}function yi(t,a){var s=t.stateNode;if(s===null)return null;var u=s[jt]||null;if(u===null)return null;s=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,a,typeof s));return s}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=!1;if(kn)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){uo=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{uo=!1}var ta=null,oo=null,Qs=null;function Bh(){if(Qs)return Qs;var t,a=oo,s=a.length,u,f="value"in ta?ta.value:ta.textContent,p=f.length;for(t=0;t<s&&a[t]===f[t];t++);var b=s-t;for(u=1;u<=b&&a[s-u]===f[p-u];u++);return Qs=f.slice(t,1<u?1-u:void 0)}function Js(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ks(){return!0}function Hh(){return!1}function Ct(t){function a(s,u,f,p,b){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(s=t[v],this[v]=s?s(p):p[v]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ks:Hh,this.isPropagationStopped=Hh,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),a}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Ct(Ia),_i=g({},Ia,{view:0,detail:0}),T0=Ct(_i),co,fo,vi,el=g({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vi&&(vi&&t.type==="mousemove"?(co=t.screenX-vi.screenX,fo=t.screenY-vi.screenY):fo=co=0,vi=t),co)},movementY:function(t){return"movementY"in t?t.movementY:fo}}),Gh=Ct(el),O0=g({},el,{dataTransfer:0}),x0=Ct(O0),A0=g({},_i,{relatedTarget:0}),ho=Ct(A0),R0=g({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),N0=Ct(R0),j0=g({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C0=Ct(j0),k0=g({},Ia,{data:0}),Zh=Ct(k0),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M0(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=$0[t])?!!a[t]:!1}function mo(){return M0}var I0=g({},_i,{key:function(t){if(t.key){var a=L0[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Js(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?D0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(t){return t.type==="keypress"?Js(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Js(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P0=Ct(I0),U0=g({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=Ct(U0),z0=g({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),q0=Ct(z0),B0=g({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),H0=Ct(B0),G0=g({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z0=Ct(G0),V0=g({},Ia,{newState:0,oldState:0}),Y0=Ct(V0),F0=[9,13,27,32],po=kn&&"CompositionEvent"in window,wi=null;kn&&"documentMode"in document&&(wi=document.documentMode);var X0=kn&&"TextEvent"in window&&!wi,Yh=kn&&(!po||wi&&8<wi&&11>=wi),Fh=" ",Xh=!1;function Qh(t,a){switch(t){case"keyup":return F0.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gr=!1;function Q0(t,a){switch(t){case"compositionend":return Jh(a);case"keypress":return a.which!==32?null:(Xh=!0,Fh);case"textInput":return t=a.data,t===Fh&&Xh?null:t;default:return null}}function J0(t,a){if(gr)return t==="compositionend"||!po&&Qh(t,a)?(t=Bh(),Qs=oo=ta=null,gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Yh&&a.locale!=="ko"?null:a.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!K0[t.type]:a==="textarea"}function Wh(t,a,s,u){mr?pr?pr.push(u):pr=[u]:mr=u,a=zl(a,"onChange"),0<a.length&&(s=new Ws("onChange","change",null,s,u),t.push({event:s,listeners:a}))}var Si=null,Ei=null;function W0(t){Lg(t,0)}function tl(t){var a=gi(t);if(Dh(a))return t}function em(t,a){if(t==="change")return a}var tm=!1;if(kn){var go;if(kn){var yo="oninput"in document;if(!yo){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),yo=typeof nm.oninput=="function"}go=yo}else go=!1;tm=go&&(!document.documentMode||9<document.documentMode)}function am(){Si&&(Si.detachEvent("onpropertychange",rm),Ei=Si=null)}function rm(t){if(t.propertyName==="value"&&tl(Ei)){var a=[];Wh(a,Ei,t,so(t)),qh(W0,a)}}function ew(t,a,s){t==="focusin"?(am(),Si=a,Ei=s,Si.attachEvent("onpropertychange",rm)):t==="focusout"&&am()}function tw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Ei)}function nw(t,a){if(t==="click")return tl(a)}function aw(t,a){if(t==="input"||t==="change")return tl(a)}function rw(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Ut=typeof Object.is=="function"?Object.is:rw;function Ti(t,a){if(Ut(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),u=Object.keys(a);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!Zu.call(a,f)||!Ut(t[f],a[f]))return!1}return!0}function im(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sm(t,a){var s=im(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=a&&u>=a)return{node:s,offset:a-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=im(s)}}function lm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?lm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function um(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Fs(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=Fs(t.document)}return a}function bo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var iw=kn&&"documentMode"in document&&11>=document.documentMode,yr=null,_o=null,Oi=null,vo=!1;function om(t,a,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;vo||yr==null||yr!==Fs(u)||(u=yr,"selectionStart"in u&&bo(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oi&&Ti(Oi,u)||(Oi=u,u=zl(_o,"onSelect"),0<u.length&&(a=new Ws("onSelect","select",null,a,s),t.push({event:a,listeners:u}),a.target=yr)))}function Pa(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var br={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},wo={},cm={};kn&&(cm=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function Ua(t){if(wo[t])return wo[t];if(!br[t])return t;var a=br[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in cm)return wo[t]=a[s];return t}var fm=Ua("animationend"),dm=Ua("animationiteration"),hm=Ua("animationstart"),sw=Ua("transitionrun"),lw=Ua("transitionstart"),uw=Ua("transitioncancel"),mm=Ua("transitionend"),pm=new Map,So="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");So.push("scrollEnd");function on(t,a){pm.set(t,a),Ma(a,[t])}var gm=new WeakMap;function Wt(t,a){if(typeof t=="object"&&t!==null){var s=gm.get(t);return s!==void 0?s:(a={value:t,source:a,stack:kh(a)},gm.set(t,a),a)}return{value:t,source:a,stack:kh(a)}}var en=[],_r=0,Eo=0;function nl(){for(var t=_r,a=Eo=_r=0;a<t;){var s=en[a];en[a++]=null;var u=en[a];en[a++]=null;var f=en[a];en[a++]=null;var p=en[a];if(en[a++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}p!==0&&ym(s,f,p)}}function al(t,a,s,u){en[_r++]=t,en[_r++]=a,en[_r++]=s,en[_r++]=u,Eo|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function To(t,a,s,u){return al(t,a,s,u),rl(t)}function vr(t,a){return al(t,null,null,a),rl(t)}function ym(t,a,s){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s);for(var f=!1,p=t.return;p!==null;)p.childLanes|=s,u=p.alternate,u!==null&&(u.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&a!==null&&(f=31-Pt(s),t=p.hiddenUpdates,u=t[f],u===null?t[f]=[a]:u.push(a),a.lane=s|536870912),p):null}function rl(t){if(50<Qi)throw Qi=0,jc=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var wr={};function ow(t,a,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,a,s,u){return new ow(t,a,s,u)}function Oo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ln(t,a){var s=t.alternate;return s===null?(s=zt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function bm(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function il(t,a,s,u,f,p){var b=0;if(u=t,typeof t=="function")Oo(t)&&(b=1);else if(typeof t=="string")b=fS(t,s,te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Be:return t=zt(31,s,a,f),t.elementType=Be,t.lanes=p,t;case S:return za(s.children,f,p,a);case E:b=8,f|=24;break;case x:return t=zt(12,s,a,f|2),t.elementType=x,t.lanes=p,t;case q:return t=zt(13,s,a,f),t.elementType=q,t.lanes=p,t;case ee:return t=zt(19,s,a,f),t.elementType=ee,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N:case C:b=10;break e;case I:b=9;break e;case Y:b=11;break e;case ae:b=14;break e;case K:b=16,u=null;break e}b=29,s=Error(r(130,t===null?"null":typeof t,"")),u=null}return a=zt(b,s,a,f),a.elementType=t,a.type=u,a.lanes=p,a}function za(t,a,s,u){return t=zt(7,t,u,a),t.lanes=s,t}function xo(t,a,s){return t=zt(6,t,null,a),t.lanes=s,t}function Ao(t,a,s){return a=zt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Sr=[],Er=0,sl=null,ll=0,tn=[],nn=0,qa=null,Dn=1,$n="";function Ba(t,a){Sr[Er++]=ll,Sr[Er++]=sl,sl=t,ll=a}function _m(t,a,s){tn[nn++]=Dn,tn[nn++]=$n,tn[nn++]=qa,qa=t;var u=Dn;t=$n;var f=32-Pt(u)-1;u&=~(1<<f),s+=1;var p=32-Pt(a)+f;if(30<p){var b=f-f%5;p=(u&(1<<b)-1).toString(32),u>>=b,f-=b,Dn=1<<32-Pt(a)+f|s<<f|u,$n=p+t}else Dn=1<<p|s<<f|u,$n=t}function Ro(t){t.return!==null&&(Ba(t,1),_m(t,1,0))}function No(t){for(;t===sl;)sl=Sr[--Er],Sr[Er]=null,ll=Sr[--Er],Sr[Er]=null;for(;t===qa;)qa=tn[--nn],tn[nn]=null,$n=tn[--nn],tn[nn]=null,Dn=tn[--nn],tn[nn]=null}var Et=null,Ve=null,Re=!1,Ha=null,En=!1,jo=Error(r(519));function Ga(t){var a=Error(r(418,""));throw Ri(Wt(a,t)),jo}function vm(t){var a=t.stateNode,s=t.type,u=t.memoizedProps;switch(a[yt]=t,a[jt]=u,s){case"dialog":Ee("cancel",a),Ee("close",a);break;case"iframe":case"object":case"embed":Ee("load",a);break;case"video":case"audio":for(s=0;s<Ki.length;s++)Ee(Ki[s],a);break;case"source":Ee("error",a);break;case"img":case"image":case"link":Ee("error",a),Ee("load",a);break;case"details":Ee("toggle",a);break;case"input":Ee("invalid",a),$h(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ys(a);break;case"select":Ee("invalid",a);break;case"textarea":Ee("invalid",a),Ih(a,u.value,u.defaultValue,u.children),Ys(a)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||u.suppressHydrationWarning===!0||Ig(a.textContent,s)?(u.popover!=null&&(Ee("beforetoggle",a),Ee("toggle",a)),u.onScroll!=null&&Ee("scroll",a),u.onScrollEnd!=null&&Ee("scrollend",a),u.onClick!=null&&(a.onclick=ql),a=!0):a=!1,a||Ga(t)}function wm(t){for(Et=t.return;Et;)switch(Et.tag){case 5:case 13:En=!1;return;case 27:case 3:En=!0;return;default:Et=Et.return}}function xi(t){if(t!==Et)return!1;if(!Re)return wm(t),Re=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Vc(t.type,t.memoizedProps)),s=!s),s&&Ve&&Ga(t),wm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){Ve=fn(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}Ve=null}}else a===27?(a=Ve,ya(t.type)?(t=Qc,Qc=null,Ve=t):Ve=a):Ve=Et?fn(t.stateNode.nextSibling):null;return!0}function Ai(){Ve=Et=null,Re=!1}function Sm(){var t=Ha;return t!==null&&(Dt===null?Dt=t:Dt.push.apply(Dt,t),Ha=null),t}function Ri(t){Ha===null?Ha=[t]:Ha.push(t)}var Co=P(null),Za=null,Mn=null;function na(t,a,s){V(Co,a._currentValue),a._currentValue=s}function In(t){t._currentValue=Co.current,G(Co)}function ko(t,a,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),t===s)break;t=t.return}}function Lo(t,a,s,u){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;e:for(;p!==null;){var v=p;p=f;for(var O=0;O<a.length;O++)if(v.context===a[O]){p.lanes|=s,v=p.alternate,v!==null&&(v.lanes|=s),ko(p.return,s,t),u||(b=null);break e}p=v.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=s,p=b.alternate,p!==null&&(p.lanes|=s),ko(b,s,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Ni(t,a,s,u){t=null;for(var f=a,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var v=f.type;Ut(f.pendingProps.value,b.value)||(t!==null?t.push(v):t=[v])}}else if(f===Qe.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(rs):t=[rs])}f=f.return}t!==null&&Lo(a,t,s,u),a.flags|=262144}function ul(t){for(t=t.firstContext;t!==null;){if(!Ut(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Va(t){Za=t,Mn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return Em(Za,t)}function ol(t,a){return Za===null&&Va(t),Em(t,a)}function Em(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Mn===null){if(t===null)throw Error(r(308));Mn=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Mn=Mn.next=a;return s}var cw=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,u){t.push(u)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},fw=i.unstable_scheduleCallback,dw=i.unstable_NormalPriority,tt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Do(){return{controller:new cw,data:new Map,refCount:0}}function ji(t){t.refCount--,t.refCount===0&&fw(dw,function(){t.controller.abort()})}var Ci=null,$o=0,Tr=0,Or=null;function hw(t,a){if(Ci===null){var s=Ci=[];$o=0,Tr=Ic(),Or={status:"pending",value:void 0,then:function(u){s.push(u)}}}return $o++,a.then(Tm,Tm),a}function Tm(){if(--$o===0&&Ci!==null){Or!==null&&(Or.status="fulfilled");var t=Ci;Ci=null,Tr=0,Or=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function mw(t,a){var s=[],u={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<s.length;f++)(0,s[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),u}var Om=j.S;j.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&hw(t,a),Om!==null&&Om(t,a)};var Ya=P(null);function Mo(){var t=Ya.current;return t!==null?t:ze.pooledCache}function cl(t,a){a===null?V(Ya,Ya.current):V(Ya,a.pool)}function xm(){var t=Mo();return t===null?null:{parent:tt._currentValue,pool:t}}var ki=Error(r(460)),Am=Error(r(474)),fl=Error(r(542)),Io={then:function(){}};function Rm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dl(){}function Nm(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(dl,dl),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Cm(t),t;default:if(typeof a.status=="string")a.then(dl,dl);else{if(t=ze,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Cm(t),t}throw Li=a,ki}}var Li=null;function jm(){if(Li===null)throw Error(r(459));var t=Li;return Li=null,t}function Cm(t){if(t===ki||t===fl)throw Error(r(483))}var aa=!1;function Po(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uo(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ra(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ia(t,a,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ce&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=rl(t),ym(t,null,s),a}return al(t,u,a,s),rl(t)}function Di(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var u=a.lanes;u&=t.pendingLanes,s|=u,a.lanes=s,Th(t,s)}}function zo(t,a){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,s=s.next}while(s!==null);p===null?f=p=a:p=p.next=a}else f=p=a;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var qo=!1;function $i(){if(qo){var t=Or;if(t!==null)throw t}}function Mi(t,a,s,u){qo=!1;var f=t.updateQueue;aa=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,v=f.shared.pending;if(v!==null){f.shared.pending=null;var O=v,D=O.next;O.next=null,b===null?p=D:b.next=D,b=O;var z=t.alternate;z!==null&&(z=z.updateQueue,v=z.lastBaseUpdate,v!==b&&(v===null?z.firstBaseUpdate=D:v.next=D,z.lastBaseUpdate=O))}if(p!==null){var H=f.baseState;b=0,z=D=O=null,v=p;do{var $=v.lane&-536870913,M=$!==v.lane;if(M?(Te&$)===$:(u&$)===$){$!==0&&$===Tr&&(qo=!0),z!==null&&(z=z.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var he=t,fe=v;$=a;var Me=s;switch(fe.tag){case 1:if(he=fe.payload,typeof he=="function"){H=he.call(Me,H,$);break e}H=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,$=typeof he=="function"?he.call(Me,H,$):he,$==null)break e;H=g({},H,$);break e;case 2:aa=!0}}$=v.callback,$!==null&&(t.flags|=64,M&&(t.flags|=8192),M=f.callbacks,M===null?f.callbacks=[$]:M.push($))}else M={lane:$,tag:v.tag,payload:v.payload,callback:v.callback,next:null},z===null?(D=z=M,O=H):z=z.next=M,b|=$;if(v=v.next,v===null){if(v=f.shared.pending,v===null)break;M=v,v=M.next,M.next=null,f.lastBaseUpdate=M,f.shared.pending=null}}while(!0);z===null&&(O=H),f.baseState=O,f.firstBaseUpdate=D,f.lastBaseUpdate=z,p===null&&(f.shared.lanes=0),ha|=b,t.lanes=b,t.memoizedState=H}}function km(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Lm(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)km(s[t],a)}var xr=P(null),hl=P(0);function Dm(t,a){t=Gn,V(hl,t),V(xr,a),Gn=t|a.baseLanes}function Bo(){V(hl,Gn),V(xr,xr.current)}function Ho(){Gn=hl.current,G(xr),G(hl)}var sa=0,_e=null,De=null,Je=null,ml=!1,Ar=!1,Fa=!1,pl=0,Ii=0,Rr=null,pw=0;function Fe(){throw Error(r(321))}function Go(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Ut(t[s],a[s]))return!1;return!0}function Zo(t,a,s,u,f,p){return sa=p,_e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=t===null||t.memoizedState===null?yp:bp,Fa=!1,p=s(u,f),Fa=!1,Ar&&(p=Mm(a,s,u,f)),$m(t),p}function $m(t){j.H=wl;var a=De!==null&&De.next!==null;if(sa=0,Je=De=_e=null,ml=!1,Ii=0,Rr=null,a)throw Error(r(300));t===null||st||(t=t.dependencies,t!==null&&ul(t)&&(st=!0))}function Mm(t,a,s,u){_e=t;var f=0;do{if(Ar&&(Rr=null),Ii=0,Ar=!1,25<=f)throw Error(r(301));if(f+=1,Je=De=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}j.H=Sw,p=a(s,u)}while(Ar);return p}function gw(){var t=j.H,a=t.useState()[0];return a=typeof a.then=="function"?Pi(a):a,t=t.useState()[0],(De!==null?De.memoizedState:null)!==t&&(_e.flags|=1024),a}function Vo(){var t=pl!==0;return pl=0,t}function Yo(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Fo(t){if(ml){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}ml=!1}sa=0,Je=De=_e=null,Ar=!1,Ii=pl=0,Rr=null}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?_e.memoizedState=Je=t:Je=Je.next=t,Je}function Ke(){if(De===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var a=Je===null?_e.memoizedState:Je.next;if(a!==null)Je=a,De=t;else{if(t===null)throw _e.alternate===null?Error(r(467)):Error(r(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Je===null?_e.memoizedState=Je=t:Je=Je.next=t}return Je}function Xo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pi(t){var a=Ii;return Ii+=1,Rr===null&&(Rr=[]),t=Nm(Rr,t,a),a=_e,(Je===null?a.memoizedState:Je.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?yp:bp),t}function gl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pi(t);if(t.$$typeof===C)return bt(t)}throw Error(r(438,String(t)))}function Qo(t){var a=null,s=_e.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Xo(),_e.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),u=0;u<t;u++)s[u]=St;return a.index++,s}function Pn(t,a){return typeof a=="function"?a(t):a}function yl(t){var a=Ke();return Jo(a,De,t)}function Jo(t,a,s){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var f=t.baseQueue,p=u.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}a.baseQueue=f=p,u.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{a=f.next;var v=b=null,O=null,D=a,z=!1;do{var H=D.lane&-536870913;if(H!==D.lane?(Te&H)===H:(sa&H)===H){var $=D.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),H===Tr&&(z=!0);else if((sa&$)===$){D=D.next,$===Tr&&(z=!0);continue}else H={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},O===null?(v=O=H,b=p):O=O.next=H,_e.lanes|=$,ha|=$;H=D.action,Fa&&s(p,H),p=D.hasEagerState?D.eagerState:s(p,H)}else $={lane:H,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},O===null?(v=O=$,b=p):O=O.next=$,_e.lanes|=H,ha|=H;D=D.next}while(D!==null&&D!==a);if(O===null?b=p:O.next=v,!Ut(p,t.memoizedState)&&(st=!0,z&&(s=Or,s!==null)))throw s;t.memoizedState=p,t.baseState=b,t.baseQueue=O,u.lastRenderedState=p}return f===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function Ko(t){var a=Ke(),s=a.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,f=s.pending,p=a.memoizedState;if(f!==null){s.pending=null;var b=f=f.next;do p=t(p,b.action),b=b.next;while(b!==f);Ut(p,a.memoizedState)||(st=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),s.lastRenderedState=p}return[p,u]}function Im(t,a,s){var u=_e,f=Ke(),p=Re;if(p){if(s===void 0)throw Error(r(407));s=s()}else s=a();var b=!Ut((De||f).memoizedState,s);b&&(f.memoizedState=s,st=!0),f=f.queue;var v=zm.bind(null,u,f,t);if(Ui(2048,8,v,[t]),f.getSnapshot!==a||b||Je!==null&&Je.memoizedState.tag&1){if(u.flags|=2048,Nr(9,bl(),Um.bind(null,u,f,s,a),null),ze===null)throw Error(r(349));p||(sa&124)!==0||Pm(u,a,s)}return s}function Pm(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=_e.updateQueue,a===null?(a=Xo(),_e.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Um(t,a,s,u){a.value=s,a.getSnapshot=u,qm(a)&&Bm(t)}function zm(t,a,s){return s(function(){qm(a)&&Bm(t)})}function qm(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Ut(t,s)}catch{return!0}}function Bm(t){var a=vr(t,2);a!==null&&Zt(a,t,2)}function Wo(t){var a=kt();if(typeof t=="function"){var s=t;if(t=s(),Fa){Wn(!0);try{s()}finally{Wn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:t},a}function Hm(t,a,s,u){return t.baseState=s,Jo(t,De,typeof u=="function"?u:Pn)}function yw(t,a,s,u,f){if(vl(t))throw Error(r(485));if(t=a.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};j.T!==null?s(!0):p.isTransition=!1,u(p),s=a.pending,s===null?(p.next=a.pending=p,Gm(a,p)):(p.next=s.next,a.pending=s.next=p)}}function Gm(t,a){var s=a.action,u=a.payload,f=t.state;if(a.isTransition){var p=j.T,b={};j.T=b;try{var v=s(f,u),O=j.S;O!==null&&O(b,v),Zm(t,a,v)}catch(D){ec(t,a,D)}finally{j.T=p}}else try{p=s(f,u),Zm(t,a,p)}catch(D){ec(t,a,D)}}function Zm(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){Vm(t,a,u)},function(u){return ec(t,a,u)}):Vm(t,a,s)}function Vm(t,a,s){a.status="fulfilled",a.value=s,Ym(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Gm(t,s)))}function ec(t,a,s){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=s,Ym(a),a=a.next;while(a!==u)}t.action=null}function Ym(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Fm(t,a){return a}function Xm(t,a){if(Re){var s=ze.formState;if(s!==null){e:{var u=_e;if(Re){if(Ve){t:{for(var f=Ve,p=En;f.nodeType!==8;){if(!p){f=null;break t}if(f=fn(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Ve=fn(f.nextSibling),u=f.data==="F!";break e}}Ga(u)}u=!1}u&&(a=s[0])}}return s=kt(),s.memoizedState=s.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:a},s.queue=u,s=mp.bind(null,_e,u),u.dispatch=s,u=Wo(!1),p=ic.bind(null,_e,!1,u.queue),u=kt(),f={state:a,dispatch:null,action:t,pending:null},u.queue=f,s=yw.bind(null,_e,f,p,s),f.dispatch=s,u.memoizedState=t,[a,s,!1]}function Qm(t){var a=Ke();return Jm(a,De,t)}function Jm(t,a,s){if(a=Jo(t,a,Fm)[0],t=yl(Pn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Pi(a)}catch(b){throw b===ki?fl:b}else u=a;a=Ke();var f=a.queue,p=f.dispatch;return s!==a.memoizedState&&(_e.flags|=2048,Nr(9,bl(),bw.bind(null,f,s),null)),[u,p,t]}function bw(t,a){t.action=a}function Km(t){var a=Ke(),s=De;if(s!==null)return Jm(a,s,t);Ke(),a=a.memoizedState,s=Ke();var u=s.queue.dispatch;return s.memoizedState=t,[a,u,!1]}function Nr(t,a,s,u){return t={tag:t,create:s,deps:u,inst:a,next:null},a=_e.updateQueue,a===null&&(a=Xo(),_e.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,a.lastEffect=t),t}function bl(){return{destroy:void 0,resource:void 0}}function Wm(){return Ke().memoizedState}function _l(t,a,s,u){var f=kt();u=u===void 0?null:u,_e.flags|=t,f.memoizedState=Nr(1|a,bl(),s,u)}function Ui(t,a,s,u){var f=Ke();u=u===void 0?null:u;var p=f.memoizedState.inst;De!==null&&u!==null&&Go(u,De.memoizedState.deps)?f.memoizedState=Nr(a,p,s,u):(_e.flags|=t,f.memoizedState=Nr(1|a,p,s,u))}function ep(t,a){_l(8390656,8,t,a)}function tp(t,a){Ui(2048,8,t,a)}function np(t,a){return Ui(4,2,t,a)}function ap(t,a){return Ui(4,4,t,a)}function rp(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function ip(t,a,s){s=s!=null?s.concat([t]):null,Ui(4,4,rp.bind(null,a,t),s)}function tc(){}function sp(t,a){var s=Ke();a=a===void 0?null:a;var u=s.memoizedState;return a!==null&&Go(a,u[1])?u[0]:(s.memoizedState=[t,a],t)}function lp(t,a){var s=Ke();a=a===void 0?null:a;var u=s.memoizedState;if(a!==null&&Go(a,u[1]))return u[0];if(u=t(),Fa){Wn(!0);try{t()}finally{Wn(!1)}}return s.memoizedState=[u,a],u}function nc(t,a,s){return s===void 0||(sa&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=cg(),_e.lanes|=t,ha|=t,s)}function up(t,a,s,u){return Ut(s,a)?s:xr.current!==null?(t=nc(t,s,u),Ut(t,a)||(st=!0),t):(sa&42)===0?(st=!0,t.memoizedState=s):(t=cg(),_e.lanes|=t,ha|=t,a)}function op(t,a,s,u,f){var p=U.p;U.p=p!==0&&8>p?p:8;var b=j.T,v={};j.T=v,ic(t,!1,a,s);try{var O=f(),D=j.S;if(D!==null&&D(v,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var z=mw(O,u);zi(t,a,z,Gt(t))}else zi(t,a,u,Gt(t))}catch(H){zi(t,a,{then:function(){},status:"rejected",reason:H},Gt())}finally{U.p=p,j.T=b}}function _w(){}function ac(t,a,s,u){if(t.tag!==5)throw Error(r(476));var f=cp(t).queue;op(t,f,a,Z,s===null?_w:function(){return fp(t),s(u)})}function cp(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:Z},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function fp(t){var a=cp(t).next.queue;zi(t,a,{},Gt())}function rc(){return bt(rs)}function dp(){return Ke().memoizedState}function hp(){return Ke().memoizedState}function vw(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=Gt();t=ra(s);var u=ia(a,t,s);u!==null&&(Zt(u,a,s),Di(u,a,s)),a={cache:Do()},t.payload=a;return}a=a.return}}function ww(t,a,s){var u=Gt();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},vl(t)?pp(a,s):(s=To(t,a,s,u),s!==null&&(Zt(s,t,u),gp(s,a,u)))}function mp(t,a,s){var u=Gt();zi(t,a,s,u)}function zi(t,a,s,u){var f={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(vl(t))pp(a,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,v=p(b,s);if(f.hasEagerState=!0,f.eagerState=v,Ut(v,b))return al(t,a,f,0),ze===null&&nl(),!1}catch{}finally{}if(s=To(t,a,f,u),s!==null)return Zt(s,t,u),gp(s,a,u),!0}return!1}function ic(t,a,s,u){if(u={lane:2,revertLane:Ic(),action:u,hasEagerState:!1,eagerState:null,next:null},vl(t)){if(a)throw Error(r(479))}else a=To(t,s,u,2),a!==null&&Zt(a,t,2)}function vl(t){var a=t.alternate;return t===_e||a!==null&&a===_e}function pp(t,a){Ar=ml=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function gp(t,a,s){if((s&4194048)!==0){var u=a.lanes;u&=t.pendingLanes,s|=u,a.lanes=s,Th(t,s)}}var wl={readContext:bt,use:gl,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe},yp={readContext:bt,use:gl,useCallback:function(t,a){return kt().memoizedState=[t,a===void 0?null:a],t},useContext:bt,useEffect:ep,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,_l(4194308,4,rp.bind(null,a,t),s)},useLayoutEffect:function(t,a){return _l(4194308,4,t,a)},useInsertionEffect:function(t,a){_l(4,2,t,a)},useMemo:function(t,a){var s=kt();a=a===void 0?null:a;var u=t();if(Fa){Wn(!0);try{t()}finally{Wn(!1)}}return s.memoizedState=[u,a],u},useReducer:function(t,a,s){var u=kt();if(s!==void 0){var f=s(a);if(Fa){Wn(!0);try{s(a)}finally{Wn(!1)}}}else f=a;return u.memoizedState=u.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},u.queue=t,t=t.dispatch=ww.bind(null,_e,t),[u.memoizedState,t]},useRef:function(t){var a=kt();return t={current:t},a.memoizedState=t},useState:function(t){t=Wo(t);var a=t.queue,s=mp.bind(null,_e,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:tc,useDeferredValue:function(t,a){var s=kt();return nc(s,t,a)},useTransition:function(){var t=Wo(!1);return t=op.bind(null,_e,t.queue,!0,!1),kt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var u=_e,f=kt();if(Re){if(s===void 0)throw Error(r(407));s=s()}else{if(s=a(),ze===null)throw Error(r(349));(Te&124)!==0||Pm(u,a,s)}f.memoizedState=s;var p={value:s,getSnapshot:a};return f.queue=p,ep(zm.bind(null,u,p,t),[t]),u.flags|=2048,Nr(9,bl(),Um.bind(null,u,p,s,a),null),s},useId:function(){var t=kt(),a=ze.identifierPrefix;if(Re){var s=$n,u=Dn;s=(u&~(1<<32-Pt(u)-1)).toString(32)+s,a=""+a+"R"+s,s=pl++,0<s&&(a+="H"+s.toString(32)),a+=""}else s=pw++,a=""+a+"r"+s.toString(32)+"";return t.memoizedState=a},useHostTransitionStatus:rc,useFormState:Xm,useActionState:Xm,useOptimistic:function(t){var a=kt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ic.bind(null,_e,!0,s),s.dispatch=a,[t,a]},useMemoCache:Qo,useCacheRefresh:function(){return kt().memoizedState=vw.bind(null,_e)}},bp={readContext:bt,use:gl,useCallback:sp,useContext:bt,useEffect:tp,useImperativeHandle:ip,useInsertionEffect:np,useLayoutEffect:ap,useMemo:lp,useReducer:yl,useRef:Wm,useState:function(){return yl(Pn)},useDebugValue:tc,useDeferredValue:function(t,a){var s=Ke();return up(s,De.memoizedState,t,a)},useTransition:function(){var t=yl(Pn)[0],a=Ke().memoizedState;return[typeof t=="boolean"?t:Pi(t),a]},useSyncExternalStore:Im,useId:dp,useHostTransitionStatus:rc,useFormState:Qm,useActionState:Qm,useOptimistic:function(t,a){var s=Ke();return Hm(s,De,t,a)},useMemoCache:Qo,useCacheRefresh:hp},Sw={readContext:bt,use:gl,useCallback:sp,useContext:bt,useEffect:tp,useImperativeHandle:ip,useInsertionEffect:np,useLayoutEffect:ap,useMemo:lp,useReducer:Ko,useRef:Wm,useState:function(){return Ko(Pn)},useDebugValue:tc,useDeferredValue:function(t,a){var s=Ke();return De===null?nc(s,t,a):up(s,De.memoizedState,t,a)},useTransition:function(){var t=Ko(Pn)[0],a=Ke().memoizedState;return[typeof t=="boolean"?t:Pi(t),a]},useSyncExternalStore:Im,useId:dp,useHostTransitionStatus:rc,useFormState:Km,useActionState:Km,useOptimistic:function(t,a){var s=Ke();return De!==null?Hm(s,De,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Qo,useCacheRefresh:hp},jr=null,qi=0;function Sl(t){var a=qi;return qi+=1,jr===null&&(jr=[]),Nm(jr,t,a)}function Bi(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function El(t,a){throw a.$$typeof===y?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function _p(t){var a=t._init;return a(t._payload)}function vp(t){function a(R,A){if(t){var k=R.deletions;k===null?(R.deletions=[A],R.flags|=16):k.push(A)}}function s(R,A){if(!t)return null;for(;A!==null;)a(R,A),A=A.sibling;return null}function u(R){for(var A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function f(R,A){return R=Ln(R,A),R.index=0,R.sibling=null,R}function p(R,A,k){return R.index=k,t?(k=R.alternate,k!==null?(k=k.index,k<A?(R.flags|=67108866,A):k):(R.flags|=67108866,A)):(R.flags|=1048576,A)}function b(R){return t&&R.alternate===null&&(R.flags|=67108866),R}function v(R,A,k,B){return A===null||A.tag!==6?(A=xo(k,R.mode,B),A.return=R,A):(A=f(A,k),A.return=R,A)}function O(R,A,k,B){var re=k.type;return re===S?z(R,A,k.props.children,B,k.key):A!==null&&(A.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===K&&_p(re)===A.type)?(A=f(A,k.props),Bi(A,k),A.return=R,A):(A=il(k.type,k.key,k.props,null,R.mode,B),Bi(A,k),A.return=R,A)}function D(R,A,k,B){return A===null||A.tag!==4||A.stateNode.containerInfo!==k.containerInfo||A.stateNode.implementation!==k.implementation?(A=Ao(k,R.mode,B),A.return=R,A):(A=f(A,k.children||[]),A.return=R,A)}function z(R,A,k,B,re){return A===null||A.tag!==7?(A=za(k,R.mode,B,re),A.return=R,A):(A=f(A,k),A.return=R,A)}function H(R,A,k){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=xo(""+A,R.mode,k),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _:return k=il(A.type,A.key,A.props,null,R.mode,k),Bi(k,A),k.return=R,k;case w:return A=Ao(A,R.mode,k),A.return=R,A;case K:var B=A._init;return A=B(A._payload),H(R,A,k)}if(F(A)||Ge(A))return A=za(A,R.mode,k,null),A.return=R,A;if(typeof A.then=="function")return H(R,Sl(A),k);if(A.$$typeof===C)return H(R,ol(R,A),k);El(R,A)}return null}function $(R,A,k,B){var re=A!==null?A.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return re!==null?null:v(R,A,""+k,B);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===re?O(R,A,k,B):null;case w:return k.key===re?D(R,A,k,B):null;case K:return re=k._init,k=re(k._payload),$(R,A,k,B)}if(F(k)||Ge(k))return re!==null?null:z(R,A,k,B,null);if(typeof k.then=="function")return $(R,A,Sl(k),B);if(k.$$typeof===C)return $(R,A,ol(R,k),B);El(R,k)}return null}function M(R,A,k,B,re){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return R=R.get(k)||null,v(A,R,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case _:return R=R.get(B.key===null?k:B.key)||null,O(A,R,B,re);case w:return R=R.get(B.key===null?k:B.key)||null,D(A,R,B,re);case K:var ve=B._init;return B=ve(B._payload),M(R,A,k,B,re)}if(F(B)||Ge(B))return R=R.get(k)||null,z(A,R,B,re,null);if(typeof B.then=="function")return M(R,A,k,Sl(B),re);if(B.$$typeof===C)return M(R,A,k,ol(A,B),re);El(A,B)}return null}function he(R,A,k,B){for(var re=null,ve=null,le=A,de=A=0,ut=null;le!==null&&de<k.length;de++){le.index>de?(ut=le,le=null):ut=le.sibling;var xe=$(R,le,k[de],B);if(xe===null){le===null&&(le=ut);break}t&&le&&xe.alternate===null&&a(R,le),A=p(xe,A,de),ve===null?re=xe:ve.sibling=xe,ve=xe,le=ut}if(de===k.length)return s(R,le),Re&&Ba(R,de),re;if(le===null){for(;de<k.length;de++)le=H(R,k[de],B),le!==null&&(A=p(le,A,de),ve===null?re=le:ve.sibling=le,ve=le);return Re&&Ba(R,de),re}for(le=u(le);de<k.length;de++)ut=M(le,R,de,k[de],B),ut!==null&&(t&&ut.alternate!==null&&le.delete(ut.key===null?de:ut.key),A=p(ut,A,de),ve===null?re=ut:ve.sibling=ut,ve=ut);return t&&le.forEach(function(Sa){return a(R,Sa)}),Re&&Ba(R,de),re}function fe(R,A,k,B){if(k==null)throw Error(r(151));for(var re=null,ve=null,le=A,de=A=0,ut=null,xe=k.next();le!==null&&!xe.done;de++,xe=k.next()){le.index>de?(ut=le,le=null):ut=le.sibling;var Sa=$(R,le,xe.value,B);if(Sa===null){le===null&&(le=ut);break}t&&le&&Sa.alternate===null&&a(R,le),A=p(Sa,A,de),ve===null?re=Sa:ve.sibling=Sa,ve=Sa,le=ut}if(xe.done)return s(R,le),Re&&Ba(R,de),re;if(le===null){for(;!xe.done;de++,xe=k.next())xe=H(R,xe.value,B),xe!==null&&(A=p(xe,A,de),ve===null?re=xe:ve.sibling=xe,ve=xe);return Re&&Ba(R,de),re}for(le=u(le);!xe.done;de++,xe=k.next())xe=M(le,R,de,xe.value,B),xe!==null&&(t&&xe.alternate!==null&&le.delete(xe.key===null?de:xe.key),A=p(xe,A,de),ve===null?re=xe:ve.sibling=xe,ve=xe);return t&&le.forEach(function(ES){return a(R,ES)}),Re&&Ba(R,de),re}function Me(R,A,k,B){if(typeof k=="object"&&k!==null&&k.type===S&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:e:{for(var re=k.key;A!==null;){if(A.key===re){if(re=k.type,re===S){if(A.tag===7){s(R,A.sibling),B=f(A,k.props.children),B.return=R,R=B;break e}}else if(A.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===K&&_p(re)===A.type){s(R,A.sibling),B=f(A,k.props),Bi(B,k),B.return=R,R=B;break e}s(R,A);break}else a(R,A);A=A.sibling}k.type===S?(B=za(k.props.children,R.mode,B,k.key),B.return=R,R=B):(B=il(k.type,k.key,k.props,null,R.mode,B),Bi(B,k),B.return=R,R=B)}return b(R);case w:e:{for(re=k.key;A!==null;){if(A.key===re)if(A.tag===4&&A.stateNode.containerInfo===k.containerInfo&&A.stateNode.implementation===k.implementation){s(R,A.sibling),B=f(A,k.children||[]),B.return=R,R=B;break e}else{s(R,A);break}else a(R,A);A=A.sibling}B=Ao(k,R.mode,B),B.return=R,R=B}return b(R);case K:return re=k._init,k=re(k._payload),Me(R,A,k,B)}if(F(k))return he(R,A,k,B);if(Ge(k)){if(re=Ge(k),typeof re!="function")throw Error(r(150));return k=re.call(k),fe(R,A,k,B)}if(typeof k.then=="function")return Me(R,A,Sl(k),B);if(k.$$typeof===C)return Me(R,A,ol(R,k),B);El(R,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,A!==null&&A.tag===6?(s(R,A.sibling),B=f(A,k),B.return=R,R=B):(s(R,A),B=xo(k,R.mode,B),B.return=R,R=B),b(R)):s(R,A)}return function(R,A,k,B){try{qi=0;var re=Me(R,A,k,B);return jr=null,re}catch(le){if(le===ki||le===fl)throw le;var ve=zt(29,le,null,R.mode);return ve.lanes=B,ve.return=R,ve}finally{}}}var Cr=vp(!0),wp=vp(!1),an=P(null),Tn=null;function la(t){var a=t.alternate;V(nt,nt.current&1),V(an,t),Tn===null&&(a===null||xr.current!==null||a.memoizedState!==null)&&(Tn=t)}function Sp(t){if(t.tag===22){if(V(nt,nt.current),V(an,t),Tn===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Tn=t)}}else ua()}function ua(){V(nt,nt.current),V(an,an.current)}function Un(t){G(an),Tn===t&&(Tn=null),G(nt)}var nt=P(0);function Tl(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Xc(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function sc(t,a,s,u){a=t.memoizedState,s=s(u,a),s=s==null?a:g({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var lc={enqueueSetState:function(t,a,s){t=t._reactInternals;var u=Gt(),f=ra(u);f.payload=a,s!=null&&(f.callback=s),a=ia(t,f,u),a!==null&&(Zt(a,t,u),Di(a,t,u))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var u=Gt(),f=ra(u);f.tag=1,f.payload=a,s!=null&&(f.callback=s),a=ia(t,f,u),a!==null&&(Zt(a,t,u),Di(a,t,u))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=Gt(),u=ra(s);u.tag=2,a!=null&&(u.callback=a),a=ia(t,u,s),a!==null&&(Zt(a,t,s),Di(a,t,s))}};function Ep(t,a,s,u,f,p,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!Ti(s,u)||!Ti(f,p):!0}function Tp(t,a,s,u){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,u),a.state!==t&&lc.enqueueReplaceState(a,a.state,null)}function Xa(t,a){var s=a;if("ref"in a){s={};for(var u in a)u!=="ref"&&(s[u]=a[u])}if(t=t.defaultProps){s===a&&(s=g({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}var Ol=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Op(t){Ol(t)}function xp(t){console.error(t)}function Ap(t){Ol(t)}function xl(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Rp(t,a,s){try{var u=t.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function uc(t,a,s){return s=ra(s),s.tag=3,s.payload={element:null},s.callback=function(){xl(t,a)},s}function Np(t){return t=ra(t),t.tag=3,t}function jp(t,a,s,u){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;t.payload=function(){return f(p)},t.callback=function(){Rp(a,s,u)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Rp(a,s,u),typeof f!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function Ew(t,a,s,u,f){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=s.alternate,a!==null&&Ni(a,s,f,!0),s=an.current,s!==null){switch(s.tag){case 13:return Tn===null?kc():s.alternate===null&&Ye===0&&(Ye=3),s.flags&=-257,s.flags|=65536,s.lanes=f,u===Io?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([u]):a.add(u),Dc(t,u,f)),!1;case 22:return s.flags|=65536,u===Io?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([u]):s.add(u)),Dc(t,u,f)),!1}throw Error(r(435,s.tag))}return Dc(t,u,f),kc(),!1}if(Re)return a=an.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==jo&&(t=Error(r(422),{cause:u}),Ri(Wt(t,s)))):(u!==jo&&(a=Error(r(423),{cause:u}),Ri(Wt(a,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,u=Wt(u,s),f=uc(t.stateNode,u,f),zo(t,f),Ye!==4&&(Ye=2)),!1;var p=Error(r(520),{cause:u});if(p=Wt(p,s),Xi===null?Xi=[p]:Xi.push(p),Ye!==4&&(Ye=2),a===null)return!0;u=Wt(u,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=uc(s.stateNode,u,t),zo(s,t),!1;case 1:if(a=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ma===null||!ma.has(p))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Np(f),jp(f,t,s,u),zo(s,f),!1}s=s.return}while(s!==null);return!1}var Cp=Error(r(461)),st=!1;function dt(t,a,s,u){a.child=t===null?wp(a,null,s,u):Cr(a,t.child,s,u)}function kp(t,a,s,u,f){s=s.render;var p=a.ref;if("ref"in u){var b={};for(var v in u)v!=="ref"&&(b[v]=u[v])}else b=u;return Va(a),u=Zo(t,a,s,b,p,f),v=Vo(),t!==null&&!st?(Yo(t,a,f),zn(t,a,f)):(Re&&v&&Ro(a),a.flags|=1,dt(t,a,u,f),a.child)}function Lp(t,a,s,u,f){if(t===null){var p=s.type;return typeof p=="function"&&!Oo(p)&&p.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=p,Dp(t,a,p,u,f)):(t=il(s.type,null,u,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!gc(t,f)){var b=p.memoizedProps;if(s=s.compare,s=s!==null?s:Ti,s(b,u)&&t.ref===a.ref)return zn(t,a,f)}return a.flags|=1,t=Ln(p,u),t.ref=a.ref,t.return=a,a.child=t}function Dp(t,a,s,u,f){if(t!==null){var p=t.memoizedProps;if(Ti(p,u)&&t.ref===a.ref)if(st=!1,a.pendingProps=u=p,gc(t,f))(t.flags&131072)!==0&&(st=!0);else return a.lanes=t.lanes,zn(t,a,f)}return oc(t,a,s,u,f)}function $p(t,a,s){var u=a.pendingProps,f=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=p!==null?p.baseLanes|s:s,t!==null){for(f=a.child=t.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;a.childLanes=p&~u}else a.childLanes=0,a.child=null;return Mp(t,a,u,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&cl(a,p!==null?p.cachePool:null),p!==null?Dm(a,p):Bo(),Sp(a);else return a.lanes=a.childLanes=536870912,Mp(t,a,p!==null?p.baseLanes|s:s,s)}else p!==null?(cl(a,p.cachePool),Dm(a,p),ua(),a.memoizedState=null):(t!==null&&cl(a,null),Bo(),ua());return dt(t,a,f,s),a.child}function Mp(t,a,s,u){var f=Mo();return f=f===null?null:{parent:tt._currentValue,pool:f},a.memoizedState={baseLanes:s,cachePool:f},t!==null&&cl(a,null),Bo(),Sp(a),t!==null&&Ni(t,a,u,!0),null}function Al(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function oc(t,a,s,u,f){return Va(a),s=Zo(t,a,s,u,void 0,f),u=Vo(),t!==null&&!st?(Yo(t,a,f),zn(t,a,f)):(Re&&u&&Ro(a),a.flags|=1,dt(t,a,s,f),a.child)}function Ip(t,a,s,u,f,p){return Va(a),a.updateQueue=null,s=Mm(a,u,s,f),$m(t),u=Vo(),t!==null&&!st?(Yo(t,a,p),zn(t,a,p)):(Re&&u&&Ro(a),a.flags|=1,dt(t,a,s,p),a.child)}function Pp(t,a,s,u,f){if(Va(a),a.stateNode===null){var p=wr,b=s.contextType;typeof b=="object"&&b!==null&&(p=bt(b)),p=new s(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=lc,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},Po(a),b=s.contextType,p.context=typeof b=="object"&&b!==null?bt(b):wr,p.state=a.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(sc(a,s,b,u),p.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&lc.enqueueReplaceState(p,p.state,null),Mi(a,u,p,f),$i(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(t===null){p=a.stateNode;var v=a.memoizedProps,O=Xa(s,v);p.props=O;var D=p.context,z=s.contextType;b=wr,typeof z=="object"&&z!==null&&(b=bt(z));var H=s.getDerivedStateFromProps;z=typeof H=="function"||typeof p.getSnapshotBeforeUpdate=="function",v=a.pendingProps!==v,z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v||D!==b)&&Tp(a,p,u,b),aa=!1;var $=a.memoizedState;p.state=$,Mi(a,u,p,f),$i(),D=a.memoizedState,v||$!==D||aa?(typeof H=="function"&&(sc(a,s,H,u),D=a.memoizedState),(O=aa||Ep(a,s,O,u,$,D,b))?(z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=D),p.props=u,p.state=D,p.context=b,u=O):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,Uo(t,a),b=a.memoizedProps,z=Xa(s,b),p.props=z,H=a.pendingProps,$=p.context,D=s.contextType,O=wr,typeof D=="object"&&D!==null&&(O=bt(D)),v=s.getDerivedStateFromProps,(D=typeof v=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==H||$!==O)&&Tp(a,p,u,O),aa=!1,$=a.memoizedState,p.state=$,Mi(a,u,p,f),$i();var M=a.memoizedState;b!==H||$!==M||aa||t!==null&&t.dependencies!==null&&ul(t.dependencies)?(typeof v=="function"&&(sc(a,s,v,u),M=a.memoizedState),(z=aa||Ep(a,s,z,u,$,M,O)||t!==null&&t.dependencies!==null&&ul(t.dependencies))?(D||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,M,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,M,O)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=M),p.props=u,p.state=M,p.context=O,u=z):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(a.flags|=1024),u=!1)}return p=u,Al(t,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&u?(a.child=Cr(a,t.child,null,f),a.child=Cr(a,null,s,f)):dt(t,a,s,f),a.memoizedState=p.state,t=a.child):t=zn(t,a,f),t}function Up(t,a,s,u){return Ai(),a.flags|=256,dt(t,a,s,u),a.child}var cc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fc(t){return{baseLanes:t,cachePool:xm()}}function dc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=rn),t}function zp(t,a,s){var u=a.pendingProps,f=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),b&&(f=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,t===null){if(Re){if(f?la(a):ua(),Re){var v=Ve,O;if(O=v){e:{for(O=v,v=En;O.nodeType!==8;){if(!v){v=null;break e}if(O=fn(O.nextSibling),O===null){v=null;break e}}v=O}v!==null?(a.memoizedState={dehydrated:v,treeContext:qa!==null?{id:Dn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},O=zt(18,null,null,0),O.stateNode=v,O.return=a,a.child=O,Et=a,Ve=null,O=!0):O=!1}O||Ga(a)}if(v=a.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Xc(v)?a.lanes=32:a.lanes=536870912,null;Un(a)}return v=u.children,u=u.fallback,f?(ua(),f=a.mode,v=Rl({mode:"hidden",children:v},f),u=za(u,f,s,null),v.return=a,u.return=a,v.sibling=u,a.child=v,f=a.child,f.memoizedState=fc(s),f.childLanes=dc(t,b,s),a.memoizedState=cc,u):(la(a),hc(a,v))}if(O=t.memoizedState,O!==null&&(v=O.dehydrated,v!==null)){if(p)a.flags&256?(la(a),a.flags&=-257,a=mc(t,a,s)):a.memoizedState!==null?(ua(),a.child=t.child,a.flags|=128,a=null):(ua(),f=u.fallback,v=a.mode,u=Rl({mode:"visible",children:u.children},v),f=za(f,v,s,null),f.flags|=2,u.return=a,f.return=a,u.sibling=f,a.child=u,Cr(a,t.child,null,s),u=a.child,u.memoizedState=fc(s),u.childLanes=dc(t,b,s),a.memoizedState=cc,a=f);else if(la(a),Xc(v)){if(b=v.nextSibling&&v.nextSibling.dataset,b)var D=b.dgst;b=D,u=Error(r(419)),u.stack="",u.digest=b,Ri({value:u,source:null,stack:null}),a=mc(t,a,s)}else if(st||Ni(t,a,s,!1),b=(s&t.childLanes)!==0,st||b){if(b=ze,b!==null&&(u=s&-s,u=(u&42)!==0?1:Xu(u),u=(u&(b.suspendedLanes|s))!==0?0:u,u!==0&&u!==O.retryLane))throw O.retryLane=u,vr(t,u),Zt(b,t,u),Cp;v.data==="$?"||kc(),a=mc(t,a,s)}else v.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=O.treeContext,Ve=fn(v.nextSibling),Et=a,Re=!0,Ha=null,En=!1,t!==null&&(tn[nn++]=Dn,tn[nn++]=$n,tn[nn++]=qa,Dn=t.id,$n=t.overflow,qa=a),a=hc(a,u.children),a.flags|=4096);return a}return f?(ua(),f=u.fallback,v=a.mode,O=t.child,D=O.sibling,u=Ln(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,D!==null?f=Ln(D,f):(f=za(f,v,s,null),f.flags|=2),f.return=a,u.return=a,u.sibling=f,a.child=u,u=f,f=a.child,v=t.child.memoizedState,v===null?v=fc(s):(O=v.cachePool,O!==null?(D=tt._currentValue,O=O.parent!==D?{parent:D,pool:D}:O):O=xm(),v={baseLanes:v.baseLanes|s,cachePool:O}),f.memoizedState=v,f.childLanes=dc(t,b,s),a.memoizedState=cc,u):(la(a),s=t.child,t=s.sibling,s=Ln(s,{mode:"visible",children:u.children}),s.return=a,s.sibling=null,t!==null&&(b=a.deletions,b===null?(a.deletions=[t],a.flags|=16):b.push(t)),a.child=s,a.memoizedState=null,s)}function hc(t,a){return a=Rl({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Rl(t,a){return t=zt(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function mc(t,a,s){return Cr(a,t.child,null,s),t=hc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function qp(t,a,s){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a),ko(t.return,a,s)}function pc(t,a,s,u,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=s,p.tailMode=f)}function Bp(t,a,s){var u=a.pendingProps,f=u.revealOrder,p=u.tail;if(dt(t,a,u.children,s),u=nt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qp(t,s,a);else if(t.tag===19)qp(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(V(nt,u),f){case"forwards":for(s=a.child,f=null;s!==null;)t=s.alternate,t!==null&&Tl(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=a.child,a.child=null):(f=s.sibling,s.sibling=null),pc(a,!1,f,s,p);break;case"backwards":for(s=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Tl(t)===null){a.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}pc(a,!0,s,null,p);break;case"together":pc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function zn(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),ha|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Ni(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,s=Ln(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Ln(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function gc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&ul(t)))}function Tw(t,a,s){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),na(a,tt,t.memoizedState.cache),Ai();break;case 27:case 5:Da(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:na(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(la(a),a.flags|=128,null):(s&a.child.childLanes)!==0?zp(t,a,s):(la(a),t=zn(t,a,s),t!==null?t.sibling:null);la(a);break;case 19:var f=(t.flags&128)!==0;if(u=(s&a.childLanes)!==0,u||(Ni(t,a,s,!1),u=(s&a.childLanes)!==0),f){if(u)return Bp(t,a,s);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),V(nt,nt.current),u)break;return null;case 22:case 23:return a.lanes=0,$p(t,a,s);case 24:na(a,tt,t.memoizedState.cache)}return zn(t,a,s)}function Hp(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)st=!0;else{if(!gc(t,s)&&(a.flags&128)===0)return st=!1,Tw(t,a,s);st=(t.flags&131072)!==0}else st=!1,Re&&(a.flags&1048576)!==0&&_m(a,ll,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var u=a.elementType,f=u._init;if(u=f(u._payload),a.type=u,typeof u=="function")Oo(u)?(t=Xa(u,t),a.tag=1,a=Pp(null,a,u,t,s)):(a.tag=0,a=oc(null,a,u,t,s));else{if(u!=null){if(f=u.$$typeof,f===Y){a.tag=11,a=kp(null,a,u,t,s);break e}else if(f===ae){a.tag=14,a=Lp(null,a,u,t,s);break e}}throw a=W(u)||u,Error(r(306,a,""))}}return a;case 0:return oc(t,a,a.type,a.pendingProps,s);case 1:return u=a.type,f=Xa(u,a.pendingProps),Pp(t,a,u,f,s);case 3:e:{if(Pe(a,a.stateNode.containerInfo),t===null)throw Error(r(387));u=a.pendingProps;var p=a.memoizedState;f=p.element,Uo(t,a),Mi(a,u,null,s);var b=a.memoizedState;if(u=b.cache,na(a,tt,u),u!==p.cache&&Lo(a,[tt],s,!0),$i(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Up(t,a,u,s);break e}else if(u!==f){f=Wt(Error(r(424)),a),Ri(f),a=Up(t,a,u,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ve=fn(t.firstChild),Et=a,Re=!0,Ha=null,En=!0,s=wp(a,null,u,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ai(),u===f){a=zn(t,a,s);break e}dt(t,a,u,s)}a=a.child}return a;case 26:return Al(t,a),t===null?(s=Yg(a.type,null,a.pendingProps,null))?a.memoizedState=s:Re||(s=a.type,t=a.pendingProps,u=Bl(ce.current).createElement(s),u[yt]=a,u[jt]=t,mt(u,s,t),it(u),a.stateNode=u):a.memoizedState=Yg(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Da(a),t===null&&Re&&(u=a.stateNode=Gg(a.type,a.pendingProps,ce.current),Et=a,En=!0,f=Ve,ya(a.type)?(Qc=f,Ve=fn(u.firstChild)):Ve=f),dt(t,a,a.pendingProps.children,s),Al(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Re&&((f=u=Ve)&&(u=Kw(u,a.type,a.pendingProps,En),u!==null?(a.stateNode=u,Et=a,Ve=fn(u.firstChild),En=!1,f=!0):f=!1),f||Ga(a)),Da(a),f=a.type,p=a.pendingProps,b=t!==null?t.memoizedProps:null,u=p.children,Vc(f,p)?u=null:b!==null&&Vc(f,b)&&(a.flags|=32),a.memoizedState!==null&&(f=Zo(t,a,gw,null,null,s),rs._currentValue=f),Al(t,a),dt(t,a,u,s),a.child;case 6:return t===null&&Re&&((t=s=Ve)&&(s=Ww(s,a.pendingProps,En),s!==null?(a.stateNode=s,Et=a,Ve=null,t=!0):t=!1),t||Ga(a)),null;case 13:return zp(t,a,s);case 4:return Pe(a,a.stateNode.containerInfo),u=a.pendingProps,t===null?a.child=Cr(a,null,u,s):dt(t,a,u,s),a.child;case 11:return kp(t,a,a.type,a.pendingProps,s);case 7:return dt(t,a,a.pendingProps,s),a.child;case 8:return dt(t,a,a.pendingProps.children,s),a.child;case 12:return dt(t,a,a.pendingProps.children,s),a.child;case 10:return u=a.pendingProps,na(a,a.type,u.value),dt(t,a,u.children,s),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,Va(a),f=bt(f),u=u(f),a.flags|=1,dt(t,a,u,s),a.child;case 14:return Lp(t,a,a.type,a.pendingProps,s);case 15:return Dp(t,a,a.type,a.pendingProps,s);case 19:return Bp(t,a,s);case 31:return u=a.pendingProps,s=a.mode,u={mode:u.mode,children:u.children},t===null?(s=Rl(u,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=Ln(t.child,u),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return $p(t,a,s);case 24:return Va(a),u=bt(tt),t===null?(f=Mo(),f===null&&(f=ze,p=Do(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=s),f=p),a.memoizedState={parent:u,cache:f},Po(a),na(a,tt,f)):((t.lanes&s)!==0&&(Uo(t,a),Mi(a,null,null,s),$i()),f=t.memoizedState,p=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),na(a,tt,u)):(u=p.cache,na(a,tt,u),u!==f.cache&&Lo(a,[tt],s,!0))),dt(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function qn(t){t.flags|=4}function Gp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Kg(a)){if(a=an.current,a!==null&&((Te&4194048)===Te?Tn!==null:(Te&62914560)!==Te&&(Te&536870912)===0||a!==Tn))throw Li=Io,Am;t.flags|=8192}}function Nl(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Sh():536870912,t.lanes|=a,$r|=a)}function Hi(t,a){if(!Re)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ze(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(a)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=s,a}function Ow(t,a,s){var u=a.pendingProps;switch(No(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(a),null;case 1:return Ze(a),null;case 3:return s=a.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),In(tt),Qt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(xi(a)?qn(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Sm())),Ze(a),null;case 26:return s=a.memoizedState,t===null?(qn(a),s!==null?(Ze(a),Gp(a,s)):(Ze(a),a.flags&=-16777217)):s?s!==t.memoizedState?(qn(a),Ze(a),Gp(a,s)):(Ze(a),a.flags&=-16777217):(t.memoizedProps!==u&&qn(a),Ze(a),a.flags&=-16777217),null;case 27:ir(a),s=ce.current;var f=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==u&&qn(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Ze(a),null}t=te.current,xi(a)?vm(a):(t=Gg(f,u,s),a.stateNode=t,qn(a))}return Ze(a),null;case 5:if(ir(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&qn(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Ze(a),null}if(t=te.current,xi(a))vm(a);else{switch(f=Bl(ce.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?f.createElement(s,{is:u.is}):f.createElement(s)}}t[yt]=a,t[jt]=u;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=t;e:switch(mt(t,s,u),s){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&qn(a)}}return Ze(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==u&&qn(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(t=ce.current,xi(a)){if(t=a.stateNode,s=a.memoizedProps,u=null,f=Et,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}t[yt]=a,t=!!(t.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||Ig(t.nodeValue,s)),t||Ga(a)}else t=Bl(t).createTextNode(u),t[yt]=a,a.stateNode=t}return Ze(a),null;case 13:if(u=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=xi(a),u!==null&&u.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[yt]=a}else Ai(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ze(a),f=!1}else f=Sm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Un(a),a):(Un(a),null)}if(Un(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=u!==null,t=t!==null&&t.memoizedState!==null,s){u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),Nl(a,a.updateQueue),Ze(a),null;case 4:return Qt(),t===null&&qc(a.stateNode.containerInfo),Ze(a),null;case 10:return In(a.type),Ze(a),null;case 19:if(G(nt),f=a.memoizedState,f===null)return Ze(a),null;if(u=(a.flags&128)!==0,p=f.rendering,p===null)if(u)Hi(f,!1);else{if(Ye!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=Tl(t),p!==null){for(a.flags|=128,Hi(f,!1),t=p.updateQueue,a.updateQueue=t,Nl(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)bm(s,t),s=s.sibling;return V(nt,nt.current&1|2),a.child}t=t.sibling}f.tail!==null&&Sn()>kl&&(a.flags|=128,u=!0,Hi(f,!1),a.lanes=4194304)}else{if(!u)if(t=Tl(p),t!==null){if(a.flags|=128,u=!0,t=t.updateQueue,a.updateQueue=t,Nl(a,t),Hi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Re)return Ze(a),null}else 2*Sn()-f.renderingStartTime>kl&&s!==536870912&&(a.flags|=128,u=!0,Hi(f,!1),a.lanes=4194304);f.isBackwards?(p.sibling=a.child,a.child=p):(t=f.last,t!==null?t.sibling=p:a.child=p,f.last=p)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Sn(),a.sibling=null,t=nt.current,V(nt,u?t&1|2:t&1),a):(Ze(a),null);case 22:case 23:return Un(a),Ho(),u=a.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(s&536870912)!==0&&(a.flags&128)===0&&(Ze(a),a.subtreeFlags&6&&(a.flags|=8192)):Ze(a),s=a.updateQueue,s!==null&&Nl(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==s&&(a.flags|=2048),t!==null&&G(Ya),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),In(tt),Ze(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function xw(t,a){switch(No(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return In(tt),Qt(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return ir(a),null;case 13:if(Un(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ai()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return G(nt),null;case 4:return Qt(),null;case 10:return In(a.type),null;case 22:case 23:return Un(a),Ho(),t!==null&&G(Ya),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return In(tt),null;case 25:return null;default:return null}}function Zp(t,a){switch(No(a),a.tag){case 3:In(tt),Qt();break;case 26:case 27:case 5:ir(a);break;case 4:Qt();break;case 13:Un(a);break;case 19:G(nt);break;case 10:In(a.type);break;case 22:case 23:Un(a),Ho(),t!==null&&G(Ya);break;case 24:In(tt)}}function Gi(t,a){try{var s=a.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var f=u.next;s=f;do{if((s.tag&t)===t){u=void 0;var p=s.create,b=s.inst;u=p(),b.destroy=u}s=s.next}while(s!==f)}}catch(v){Ue(a,a.return,v)}}function oa(t,a,s){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&t)===t){var b=u.inst,v=b.destroy;if(v!==void 0){b.destroy=void 0,f=a;var O=s,D=v;try{D()}catch(z){Ue(f,O,z)}}}u=u.next}while(u!==p)}}catch(z){Ue(a,a.return,z)}}function Vp(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Lm(a,s)}catch(u){Ue(t,t.return,u)}}}function Yp(t,a,s){s.props=Xa(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(u){Ue(t,a,u)}}function Zi(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof s=="function"?t.refCleanup=s(u):s.current=u}}catch(f){Ue(t,a,f)}}function On(t,a){var s=t.ref,u=t.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(f){Ue(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Ue(t,a,f)}else s.current=null}function Fp(t){var a=t.type,s=t.memoizedProps,u=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(f){Ue(t,t.return,f)}}function yc(t,a,s){try{var u=t.stateNode;Yw(u,t.type,s,a),u[jt]=a}catch(f){Ue(t,t.return,f)}}function Xp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ya(t.type)||t.tag===4}function bc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ya(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,a,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ql));else if(u!==4&&(u===27&&ya(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(_c(t,a,s),t=t.sibling;t!==null;)_c(t,a,s),t=t.sibling}function jl(t,a,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(u!==4&&(u===27&&ya(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(jl(t,a,s),t=t.sibling;t!==null;)jl(t,a,s),t=t.sibling}function Qp(t){var a=t.stateNode,s=t.memoizedProps;try{for(var u=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);mt(a,u,s),a[yt]=t,a[jt]=s}catch(p){Ue(t,t.return,p)}}var Bn=!1,Xe=!1,vc=!1,Jp=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Aw(t,a){if(t=t.containerInfo,Gc=Fl,t=um(t),bo(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var b=0,v=-1,O=-1,D=0,z=0,H=t,$=null;t:for(;;){for(var M;H!==s||f!==0&&H.nodeType!==3||(v=b+f),H!==p||u!==0&&H.nodeType!==3||(O=b+u),H.nodeType===3&&(b+=H.nodeValue.length),(M=H.firstChild)!==null;)$=H,H=M;for(;;){if(H===t)break t;if($===s&&++D===f&&(v=b),$===p&&++z===u&&(O=b),(M=H.nextSibling)!==null)break;H=$,$=H.parentNode}H=M}s=v===-1||O===-1?null:{start:v,end:O}}else s=null}s=s||{start:0,end:0}}else s=null;for(Zc={focusedElem:t,selectionRange:s},Fl=!1,lt=a;lt!==null;)if(a=lt,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,lt=t;else for(;lt!==null;){switch(a=lt,p=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=a,f=p.memoizedProps,p=p.memoizedState,u=s.stateNode;try{var he=Xa(s.type,f,s.elementType===s.type);t=u.getSnapshotBeforeUpdate(he,p),u.__reactInternalSnapshotBeforeUpdate=t}catch(fe){Ue(s,s.return,fe)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Fc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Fc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,lt=t;break}lt=a.return}}function Kp(t,a,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:ca(t,s),u&4&&Gi(5,s);break;case 1:if(ca(t,s),u&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(b){Ue(s,s.return,b)}else{var f=Xa(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Ue(s,s.return,b)}}u&64&&Vp(s),u&512&&Zi(s,s.return);break;case 3:if(ca(t,s),u&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Lm(t,a)}catch(b){Ue(s,s.return,b)}}break;case 27:a===null&&u&4&&Qp(s);case 26:case 5:ca(t,s),a===null&&u&4&&Fp(s),u&512&&Zi(s,s.return);break;case 12:ca(t,s);break;case 13:ca(t,s),u&4&&tg(t,s),u&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Mw.bind(null,s),eS(t,s))));break;case 22:if(u=s.memoizedState!==null||Bn,!u){a=a!==null&&a.memoizedState!==null||Xe,f=Bn;var p=Xe;Bn=u,(Xe=a)&&!p?fa(t,s,(s.subtreeFlags&8772)!==0):ca(t,s),Bn=f,Xe=p}break;case 30:break;default:ca(t,s)}}function Wp(t){var a=t.alternate;a!==null&&(t.alternate=null,Wp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ku(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var He=null,Lt=!1;function Hn(t,a,s){for(s=s.child;s!==null;)eg(t,a,s),s=s.sibling}function eg(t,a,s){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(di,s)}catch{}switch(s.tag){case 26:Xe||On(s,a),Hn(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Xe||On(s,a);var u=He,f=Lt;ya(s.type)&&(He=s.stateNode,Lt=!1),Hn(t,a,s),es(s.stateNode),He=u,Lt=f;break;case 5:Xe||On(s,a);case 6:if(u=He,f=Lt,He=null,Hn(t,a,s),He=u,Lt=f,He!==null)if(Lt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(s.stateNode)}catch(p){Ue(s,a,p)}else try{He.removeChild(s.stateNode)}catch(p){Ue(s,a,p)}break;case 18:He!==null&&(Lt?(t=He,Bg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),us(t)):Bg(He,s.stateNode));break;case 4:u=He,f=Lt,He=s.stateNode.containerInfo,Lt=!0,Hn(t,a,s),He=u,Lt=f;break;case 0:case 11:case 14:case 15:Xe||oa(2,s,a),Xe||oa(4,s,a),Hn(t,a,s);break;case 1:Xe||(On(s,a),u=s.stateNode,typeof u.componentWillUnmount=="function"&&Yp(s,a,u)),Hn(t,a,s);break;case 21:Hn(t,a,s);break;case 22:Xe=(u=Xe)||s.memoizedState!==null,Hn(t,a,s),Xe=u;break;default:Hn(t,a,s)}}function tg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{us(t)}catch(s){Ue(a,a.return,s)}}function Rw(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Jp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Jp),a;default:throw Error(r(435,t.tag))}}function wc(t,a){var s=Rw(t);a.forEach(function(u){var f=Iw.bind(null,t,u);s.has(u)||(s.add(u),u.then(f,f))})}function qt(t,a){var s=a.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u],p=t,b=a,v=b;e:for(;v!==null;){switch(v.tag){case 27:if(ya(v.type)){He=v.stateNode,Lt=!1;break e}break;case 5:He=v.stateNode,Lt=!1;break e;case 3:case 4:He=v.stateNode.containerInfo,Lt=!0;break e}v=v.return}if(He===null)throw Error(r(160));eg(p,b,f),He=null,Lt=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)ng(a,t),a=a.sibling}var cn=null;function ng(t,a){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qt(a,t),Bt(t),u&4&&(oa(3,t,t.return),Gi(3,t),oa(5,t,t.return));break;case 1:qt(a,t),Bt(t),u&512&&(Xe||s===null||On(s,s.return)),u&64&&Bn&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var f=cn;if(qt(a,t),Bt(t),u&512&&(Xe||s===null||On(s,s.return)),u&4){var p=s!==null?s.memoizedState:null;if(u=t.memoizedState,s===null)if(u===null)if(t.stateNode===null){e:{u=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[pi]||p[yt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),mt(p,u,s),p[yt]=t,it(p),u=p;break e;case"link":var b=Qg("link","href",f).get(u+(s.href||""));if(b){for(var v=0;v<b.length;v++)if(p=b[v],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(v,1);break t}}p=f.createElement(u),mt(p,u,s),f.head.appendChild(p);break;case"meta":if(b=Qg("meta","content",f).get(u+(s.content||""))){for(v=0;v<b.length;v++)if(p=b[v],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(v,1);break t}}p=f.createElement(u),mt(p,u,s),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[yt]=t,it(p),u=p}t.stateNode=u}else Jg(f,t.type,t.stateNode);else t.stateNode=Xg(f,u,t.memoizedProps);else p!==u?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,u===null?Jg(f,t.type,t.stateNode):Xg(f,u,t.memoizedProps)):u===null&&t.stateNode!==null&&yc(t,t.memoizedProps,s.memoizedProps)}break;case 27:qt(a,t),Bt(t),u&512&&(Xe||s===null||On(s,s.return)),s!==null&&u&4&&yc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(qt(a,t),Bt(t),u&512&&(Xe||s===null||On(s,s.return)),t.flags&32){f=t.stateNode;try{hr(f,"")}catch(M){Ue(t,t.return,M)}}u&4&&t.stateNode!=null&&(f=t.memoizedProps,yc(t,f,s!==null?s.memoizedProps:f)),u&1024&&(vc=!0);break;case 6:if(qt(a,t),Bt(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,s=t.stateNode;try{s.nodeValue=u}catch(M){Ue(t,t.return,M)}}break;case 3:if(Zl=null,f=cn,cn=Hl(a.containerInfo),qt(a,t),cn=f,Bt(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{us(a.containerInfo)}catch(M){Ue(t,t.return,M)}vc&&(vc=!1,ag(t));break;case 4:u=cn,cn=Hl(t.stateNode.containerInfo),qt(a,t),Bt(t),cn=u;break;case 12:qt(a,t),Bt(t);break;case 13:qt(a,t),Bt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ac=Sn()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,wc(t,u)));break;case 22:f=t.memoizedState!==null;var O=s!==null&&s.memoizedState!==null,D=Bn,z=Xe;if(Bn=D||f,Xe=z||O,qt(a,t),Xe=z,Bn=D,Bt(t),u&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(s===null||O||Bn||Xe||Qa(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){O=s=a;try{if(p=O.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{v=O.stateNode;var H=O.memoizedProps.style,$=H!=null&&H.hasOwnProperty("display")?H.display:null;v.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(M){Ue(O,O.return,M)}}}else if(a.tag===6){if(s===null){O=a;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(M){Ue(O,O.return,M)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=t.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,wc(t,s))));break;case 19:qt(a,t),Bt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,wc(t,u)));break;case 30:break;case 21:break;default:qt(a,t),Bt(t)}}function Bt(t){var a=t.flags;if(a&2){try{for(var s,u=t.return;u!==null;){if(Xp(u)){s=u;break}u=u.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var f=s.stateNode,p=bc(t);jl(t,p,f);break;case 5:var b=s.stateNode;s.flags&32&&(hr(b,""),s.flags&=-33);var v=bc(t);jl(t,v,b);break;case 3:case 4:var O=s.stateNode.containerInfo,D=bc(t);_c(t,D,O);break;default:throw Error(r(161))}}catch(z){Ue(t,t.return,z)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function ag(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;ag(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ca(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Kp(t,a.alternate,a),a=a.sibling}function Qa(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:oa(4,a,a.return),Qa(a);break;case 1:On(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Yp(a,a.return,s),Qa(a);break;case 27:es(a.stateNode);case 26:case 5:On(a,a.return),Qa(a);break;case 22:a.memoizedState===null&&Qa(a);break;case 30:Qa(a);break;default:Qa(a)}t=t.sibling}}function fa(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=t,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:fa(f,p,s),Gi(4,p);break;case 1:if(fa(f,p,s),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(D){Ue(u,u.return,D)}if(u=p,f=u.updateQueue,f!==null){var v=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)km(O[f],v)}catch(D){Ue(u,u.return,D)}}s&&b&64&&Vp(p),Zi(p,p.return);break;case 27:Qp(p);case 26:case 5:fa(f,p,s),s&&u===null&&b&4&&Fp(p),Zi(p,p.return);break;case 12:fa(f,p,s);break;case 13:fa(f,p,s),s&&b&4&&tg(f,p);break;case 22:p.memoizedState===null&&fa(f,p,s),Zi(p,p.return);break;case 30:break;default:fa(f,p,s)}a=a.sibling}}function Sc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&ji(s))}function Ec(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ji(t))}function xn(t,a,s,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)rg(t,a,s,u),a=a.sibling}function rg(t,a,s,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:xn(t,a,s,u),f&2048&&Gi(9,a);break;case 1:xn(t,a,s,u);break;case 3:xn(t,a,s,u),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ji(t)));break;case 12:if(f&2048){xn(t,a,s,u),t=a.stateNode;try{var p=a.memoizedProps,b=p.id,v=p.onPostCommit;typeof v=="function"&&v(b,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){Ue(a,a.return,O)}}else xn(t,a,s,u);break;case 13:xn(t,a,s,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?xn(t,a,s,u):Vi(t,a):p._visibility&2?xn(t,a,s,u):(p._visibility|=2,kr(t,a,s,u,(a.subtreeFlags&10256)!==0)),f&2048&&Sc(b,a);break;case 24:xn(t,a,s,u),f&2048&&Ec(a.alternate,a);break;default:xn(t,a,s,u)}}function kr(t,a,s,u,f){for(f=f&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=t,b=a,v=s,O=u,D=b.flags;switch(b.tag){case 0:case 11:case 15:kr(p,b,v,O,f),Gi(8,b);break;case 23:break;case 22:var z=b.stateNode;b.memoizedState!==null?z._visibility&2?kr(p,b,v,O,f):Vi(p,b):(z._visibility|=2,kr(p,b,v,O,f)),f&&D&2048&&Sc(b.alternate,b);break;case 24:kr(p,b,v,O,f),f&&D&2048&&Ec(b.alternate,b);break;default:kr(p,b,v,O,f)}a=a.sibling}}function Vi(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,u=a,f=u.flags;switch(u.tag){case 22:Vi(s,u),f&2048&&Sc(u.alternate,u);break;case 24:Vi(s,u),f&2048&&Ec(u.alternate,u);break;default:Vi(s,u)}a=a.sibling}}var Yi=8192;function Lr(t){if(t.subtreeFlags&Yi)for(t=t.child;t!==null;)ig(t),t=t.sibling}function ig(t){switch(t.tag){case 26:Lr(t),t.flags&Yi&&t.memoizedState!==null&&hS(cn,t.memoizedState,t.memoizedProps);break;case 5:Lr(t);break;case 3:case 4:var a=cn;cn=Hl(t.stateNode.containerInfo),Lr(t),cn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Yi,Yi=16777216,Lr(t),Yi=a):Lr(t));break;default:Lr(t)}}function sg(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Fi(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var u=a[s];lt=u,ug(u,t)}sg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lg(t),t=t.sibling}function lg(t){switch(t.tag){case 0:case 11:case 15:Fi(t),t.flags&2048&&oa(9,t,t.return);break;case 3:Fi(t);break;case 12:Fi(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Cl(t)):Fi(t);break;default:Fi(t)}}function Cl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var u=a[s];lt=u,ug(u,t)}sg(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:oa(8,a,a.return),Cl(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Cl(a));break;default:Cl(a)}t=t.sibling}}function ug(t,a){for(;lt!==null;){var s=lt;switch(s.tag){case 0:case 11:case 15:oa(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ji(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,lt=u;else e:for(s=t;lt!==null;){u=lt;var f=u.sibling,p=u.return;if(Wp(u),u===s){lt=null;break e}if(f!==null){f.return=p,lt=f;break e}lt=p}}}var Nw={getCacheForType:function(t){var a=bt(tt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},jw=typeof WeakMap=="function"?WeakMap:Map,Ce=0,ze=null,Se=null,Te=0,ke=0,Ht=null,da=!1,Dr=!1,Tc=!1,Gn=0,Ye=0,ha=0,Ja=0,Oc=0,rn=0,$r=0,Xi=null,Dt=null,xc=!1,Ac=0,kl=1/0,Ll=null,ma=null,ht=0,pa=null,Mr=null,Ir=0,Rc=0,Nc=null,og=null,Qi=0,jc=null;function Gt(){if((Ce&2)!==0&&Te!==0)return Te&-Te;if(j.T!==null){var t=Tr;return t!==0?t:Ic()}return Oh()}function cg(){rn===0&&(rn=(Te&536870912)===0||Re?wh():536870912);var t=an.current;return t!==null&&(t.flags|=32),rn}function Zt(t,a,s){(t===ze&&(ke===2||ke===9)||t.cancelPendingCommit!==null)&&(Pr(t,0),ga(t,Te,rn,!1)),mi(t,s),((Ce&2)===0||t!==ze)&&(t===ze&&((Ce&2)===0&&(Ja|=s),Ye===4&&ga(t,Te,rn,!1)),An(t))}function fg(t,a,s){if((Ce&6)!==0)throw Error(r(327));var u=!s&&(a&124)===0&&(a&t.expiredLanes)===0||hi(t,a),f=u?Lw(t,a):Lc(t,a,!0),p=u;do{if(f===0){Dr&&!u&&ga(t,a,0,!1);break}else{if(s=t.current.alternate,p&&!Cw(s)){f=Lc(t,a,!1),p=!1;continue}if(f===2){if(p=a,t.errorRecoveryDisabledLanes&p)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var v=t;f=Xi;var O=v.current.memoizedState.isDehydrated;if(O&&(Pr(v,b).flags|=256),b=Lc(v,b,!1),b!==2){if(Tc&&!O){v.errorRecoveryDisabledLanes|=p,Ja|=p,f=4;break e}p=Dt,Dt=f,p!==null&&(Dt===null?Dt=p:Dt.push.apply(Dt,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){Pr(t,0),ga(t,a,0,!0);break}e:{switch(u=t,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ga(u,a,rn,!da);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Ac+300-Sn(),10<f)){if(ga(u,a,rn,!da),Gs(u,0,!0)!==0)break e;u.timeoutHandle=zg(dg.bind(null,u,s,Dt,Ll,xc,a,rn,Ja,$r,da,p,2,-0,0),f);break e}dg(u,s,Dt,Ll,xc,a,rn,Ja,$r,da,p,0,-0,0)}}break}while(!0);An(t)}function dg(t,a,s,u,f,p,b,v,O,D,z,H,$,M){if(t.timeoutHandle=-1,H=a.subtreeFlags,(H&8192||(H&16785408)===16785408)&&(as={stylesheets:null,count:0,unsuspend:dS},ig(a),H=mS(),H!==null)){t.cancelPendingCommit=H(_g.bind(null,t,a,p,s,u,f,b,v,O,z,1,$,M)),ga(t,p,b,!D);return}_g(t,a,p,s,u,f,b,v,O)}function Cw(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var f=s[u],p=f.getSnapshot;f=f.value;try{if(!Ut(p(),f))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ga(t,a,s,u){a&=~Oc,a&=~Ja,t.suspendedLanes|=a,t.pingedLanes&=~a,u&&(t.warmLanes|=a),u=t.expirationTimes;for(var f=a;0<f;){var p=31-Pt(f),b=1<<p;u[p]=-1,f&=~b}s!==0&&Eh(t,s,a)}function Dl(){return(Ce&6)===0?(Ji(0),!1):!0}function Cc(){if(Se!==null){if(ke===0)var t=Se.return;else t=Se,Mn=Za=null,Fo(t),jr=null,qi=0,t=Se;for(;t!==null;)Zp(t.alternate,t),t=t.return;Se=null}}function Pr(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Xw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Cc(),ze=t,Se=s=Ln(t.current,null),Te=a,ke=0,Ht=null,da=!1,Dr=hi(t,a),Tc=!1,$r=rn=Oc=Ja=ha=Ye=0,Dt=Xi=null,xc=!1,(a&8)!==0&&(a|=a&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=a;0<u;){var f=31-Pt(u),p=1<<f;a|=t[f],u&=~p}return Gn=a,nl(),s}function hg(t,a){_e=null,j.H=wl,a===ki||a===fl?(a=jm(),ke=3):a===Am?(a=jm(),ke=4):ke=a===Cp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ht=a,Se===null&&(Ye=1,xl(t,Wt(a,t.current)))}function mg(){var t=j.H;return j.H=wl,t===null?wl:t}function pg(){var t=j.A;return j.A=Nw,t}function kc(){Ye=4,da||(Te&4194048)!==Te&&an.current!==null||(Dr=!0),(ha&134217727)===0&&(Ja&134217727)===0||ze===null||ga(ze,Te,rn,!1)}function Lc(t,a,s){var u=Ce;Ce|=2;var f=mg(),p=pg();(ze!==t||Te!==a)&&(Ll=null,Pr(t,a)),a=!1;var b=Ye;e:do try{if(ke!==0&&Se!==null){var v=Se,O=Ht;switch(ke){case 8:Cc(),b=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(a=!0);var D=ke;if(ke=0,Ht=null,Ur(t,v,O,D),s&&Dr){b=0;break e}break;default:D=ke,ke=0,Ht=null,Ur(t,v,O,D)}}kw(),b=Ye;break}catch(z){hg(t,z)}while(!0);return a&&t.shellSuspendCounter++,Mn=Za=null,Ce=u,j.H=f,j.A=p,Se===null&&(ze=null,Te=0,nl()),b}function kw(){for(;Se!==null;)gg(Se)}function Lw(t,a){var s=Ce;Ce|=2;var u=mg(),f=pg();ze!==t||Te!==a?(Ll=null,kl=Sn()+500,Pr(t,a)):Dr=hi(t,a);e:do try{if(ke!==0&&Se!==null){a=Se;var p=Ht;t:switch(ke){case 1:ke=0,Ht=null,Ur(t,a,p,1);break;case 2:case 9:if(Rm(p)){ke=0,Ht=null,yg(a);break}a=function(){ke!==2&&ke!==9||ze!==t||(ke=7),An(t)},p.then(a,a);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Rm(p)?(ke=0,Ht=null,yg(a)):(ke=0,Ht=null,Ur(t,a,p,7));break;case 5:var b=null;switch(Se.tag){case 26:b=Se.memoizedState;case 5:case 27:var v=Se;if(!b||Kg(b)){ke=0,Ht=null;var O=v.sibling;if(O!==null)Se=O;else{var D=v.return;D!==null?(Se=D,$l(D)):Se=null}break t}}ke=0,Ht=null,Ur(t,a,p,5);break;case 6:ke=0,Ht=null,Ur(t,a,p,6);break;case 8:Cc(),Ye=6;break e;default:throw Error(r(462))}}Dw();break}catch(z){hg(t,z)}while(!0);return Mn=Za=null,j.H=u,j.A=f,Ce=s,Se!==null?0:(ze=null,Te=0,nl(),Ye)}function Dw(){for(;Se!==null&&!n0();)gg(Se)}function gg(t){var a=Hp(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,a===null?$l(t):Se=a}function yg(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=Ip(s,a,a.pendingProps,a.type,void 0,Te);break;case 11:a=Ip(s,a,a.pendingProps,a.type.render,a.ref,Te);break;case 5:Fo(a);default:Zp(s,a),a=Se=bm(a,Gn),a=Hp(s,a,Gn)}t.memoizedProps=t.pendingProps,a===null?$l(t):Se=a}function Ur(t,a,s,u){Mn=Za=null,Fo(a),jr=null,qi=0;var f=a.return;try{if(Ew(t,f,a,s,Te)){Ye=1,xl(t,Wt(s,t.current)),Se=null;return}}catch(p){if(f!==null)throw Se=f,p;Ye=1,xl(t,Wt(s,t.current)),Se=null;return}a.flags&32768?(Re||u===1?t=!0:Dr||(Te&536870912)!==0?t=!1:(da=t=!0,(u===2||u===9||u===3||u===6)&&(u=an.current,u!==null&&u.tag===13&&(u.flags|=16384))),bg(a,t)):$l(a)}function $l(t){var a=t;do{if((a.flags&32768)!==0){bg(a,da);return}t=a.return;var s=Ow(a.alternate,a,Gn);if(s!==null){Se=s;return}if(a=a.sibling,a!==null){Se=a;return}Se=a=t}while(a!==null);Ye===0&&(Ye=5)}function bg(t,a){do{var s=xw(t.alternate,t);if(s!==null){s.flags&=32767,Se=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Se=t;return}Se=t=s}while(t!==null);Ye=6,Se=null}function _g(t,a,s,u,f,p,b,v,O){t.cancelPendingCommit=null;do Ml();while(ht!==0);if((Ce&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(p=a.lanes|a.childLanes,p|=Eo,d0(t,s,p,b,v,O),t===ze&&(Se=ze=null,Te=0),Mr=a,pa=t,Ir=s,Rc=p,Nc=f,og=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Pw(qs,function(){return Tg(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,f=U.p,U.p=2,b=Ce,Ce|=4;try{Aw(t,a,s)}finally{Ce=b,U.p=f,j.T=u}}ht=1,vg(),wg(),Sg()}}function vg(){if(ht===1){ht=0;var t=pa,a=Mr,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=j.T,j.T=null;var u=U.p;U.p=2;var f=Ce;Ce|=4;try{ng(a,t);var p=Zc,b=um(t.containerInfo),v=p.focusedElem,O=p.selectionRange;if(b!==v&&v&&v.ownerDocument&&lm(v.ownerDocument.documentElement,v)){if(O!==null&&bo(v)){var D=O.start,z=O.end;if(z===void 0&&(z=D),"selectionStart"in v)v.selectionStart=D,v.selectionEnd=Math.min(z,v.value.length);else{var H=v.ownerDocument||document,$=H&&H.defaultView||window;if($.getSelection){var M=$.getSelection(),he=v.textContent.length,fe=Math.min(O.start,he),Me=O.end===void 0?fe:Math.min(O.end,he);!M.extend&&fe>Me&&(b=Me,Me=fe,fe=b);var R=sm(v,fe),A=sm(v,Me);if(R&&A&&(M.rangeCount!==1||M.anchorNode!==R.node||M.anchorOffset!==R.offset||M.focusNode!==A.node||M.focusOffset!==A.offset)){var k=H.createRange();k.setStart(R.node,R.offset),M.removeAllRanges(),fe>Me?(M.addRange(k),M.extend(A.node,A.offset)):(k.setEnd(A.node,A.offset),M.addRange(k))}}}}for(H=[],M=v;M=M.parentNode;)M.nodeType===1&&H.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<H.length;v++){var B=H[v];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}Fl=!!Gc,Zc=Gc=null}finally{Ce=f,U.p=u,j.T=s}}t.current=a,ht=2}}function wg(){if(ht===2){ht=0;var t=pa,a=Mr,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=j.T,j.T=null;var u=U.p;U.p=2;var f=Ce;Ce|=4;try{Kp(t,a.alternate,a)}finally{Ce=f,U.p=u,j.T=s}}ht=3}}function Sg(){if(ht===4||ht===3){ht=0,a0();var t=pa,a=Mr,s=Ir,u=og;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ht=5:(ht=0,Mr=pa=null,Eg(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ma=null),Qu(s),a=a.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(di,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=j.T,f=U.p,U.p=2,j.T=null;try{for(var p=t.onRecoverableError,b=0;b<u.length;b++){var v=u[b];p(v.value,{componentStack:v.stack})}}finally{j.T=a,U.p=f}}(Ir&3)!==0&&Ml(),An(t),f=t.pendingLanes,(s&4194090)!==0&&(f&42)!==0?t===jc?Qi++:(Qi=0,jc=t):Qi=0,Ji(0)}}function Eg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ji(a)))}function Ml(t){return vg(),wg(),Sg(),Tg()}function Tg(){if(ht!==5)return!1;var t=pa,a=Rc;Rc=0;var s=Qu(Ir),u=j.T,f=U.p;try{U.p=32>s?32:s,j.T=null,s=Nc,Nc=null;var p=pa,b=Ir;if(ht=0,Mr=pa=null,Ir=0,(Ce&6)!==0)throw Error(r(331));var v=Ce;if(Ce|=4,lg(p.current),rg(p,p.current,b,s),Ce=v,Ji(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(di,p)}catch{}return!0}finally{U.p=f,j.T=u,Eg(t,a)}}function Og(t,a,s){a=Wt(s,a),a=uc(t.stateNode,a,2),t=ia(t,a,2),t!==null&&(mi(t,2),An(t))}function Ue(t,a,s){if(t.tag===3)Og(t,t,s);else for(;a!==null;){if(a.tag===3){Og(a,t,s);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ma===null||!ma.has(u))){t=Wt(s,t),s=Np(2),u=ia(a,s,2),u!==null&&(jp(s,u,a,t),mi(u,2),An(u));break}}a=a.return}}function Dc(t,a,s){var u=t.pingCache;if(u===null){u=t.pingCache=new jw;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(s)||(Tc=!0,f.add(s),t=$w.bind(null,t,a,s),a.then(t,t))}function $w(t,a,s){var u=t.pingCache;u!==null&&u.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ze===t&&(Te&s)===s&&(Ye===4||Ye===3&&(Te&62914560)===Te&&300>Sn()-Ac?(Ce&2)===0&&Pr(t,0):Oc|=s,$r===Te&&($r=0)),An(t)}function xg(t,a){a===0&&(a=Sh()),t=vr(t,a),t!==null&&(mi(t,a),An(t))}function Mw(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),xg(t,s)}function Iw(t,a){var s=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),xg(t,s)}function Pw(t,a){return Vu(t,a)}var Il=null,zr=null,$c=!1,Pl=!1,Mc=!1,Ka=0;function An(t){t!==zr&&t.next===null&&(zr===null?Il=zr=t:zr=zr.next=t),Pl=!0,$c||($c=!0,zw())}function Ji(t,a){if(!Mc&&Pl){Mc=!0;do for(var s=!1,u=Il;u!==null;){if(t!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var b=u.suspendedLanes,v=u.pingedLanes;p=(1<<31-Pt(42|t)+1)-1,p&=f&~(b&~v),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,jg(u,p))}else p=Te,p=Gs(u,u===ze?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||hi(u,p)||(s=!0,jg(u,p));u=u.next}while(s);Mc=!1}}function Uw(){Ag()}function Ag(){Pl=$c=!1;var t=0;Ka!==0&&(Fw()&&(t=Ka),Ka=0);for(var a=Sn(),s=null,u=Il;u!==null;){var f=u.next,p=Rg(u,a);p===0?(u.next=null,s===null?Il=f:s.next=f,f===null&&(zr=s)):(s=u,(t!==0||(p&3)!==0)&&(Pl=!0)),u=f}Ji(t)}function Rg(t,a){for(var s=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var b=31-Pt(p),v=1<<b,O=f[b];O===-1?((v&s)===0||(v&u)!==0)&&(f[b]=f0(v,a)):O<=a&&(t.expiredLanes|=v),p&=~v}if(a=ze,s=Te,s=Gs(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,s===0||t===a&&(ke===2||ke===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Yu(u),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||hi(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(u!==null&&Yu(u),Qu(s)){case 2:case 8:s=_h;break;case 32:s=qs;break;case 268435456:s=vh;break;default:s=qs}return u=Ng.bind(null,t),s=Vu(s,u),t.callbackPriority=a,t.callbackNode=s,a}return u!==null&&u!==null&&Yu(u),t.callbackPriority=2,t.callbackNode=null,2}function Ng(t,a){if(ht!==0&&ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Ml()&&t.callbackNode!==s)return null;var u=Te;return u=Gs(t,t===ze?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(fg(t,u,a),Rg(t,Sn()),t.callbackNode!=null&&t.callbackNode===s?Ng.bind(null,t):null)}function jg(t,a){if(Ml())return null;fg(t,a,!0)}function zw(){Qw(function(){(Ce&6)!==0?Vu(bh,Uw):Ag()})}function Ic(){return Ka===0&&(Ka=wh()),Ka}function Cg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xs(""+t)}function kg(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function qw(t,a,s,u,f){if(a==="submit"&&s&&s.stateNode===f){var p=Cg((f[jt]||null).action),b=u.submitter;b&&(a=(a=b[jt]||null)?Cg(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var v=new Ws("action","action",null,u,f);t.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ka!==0){var O=b?kg(f,b):new FormData(f);ac(s,{pending:!0,data:O,method:f.method,action:p},null,O)}}else typeof p=="function"&&(v.preventDefault(),O=b?kg(f,b):new FormData(f),ac(s,{pending:!0,data:O,method:f.method,action:p},p,O))},currentTarget:f}]})}}for(var Pc=0;Pc<So.length;Pc++){var Uc=So[Pc],Bw=Uc.toLowerCase(),Hw=Uc[0].toUpperCase()+Uc.slice(1);on(Bw,"on"+Hw)}on(fm,"onAnimationEnd"),on(dm,"onAnimationIteration"),on(hm,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(sw,"onTransitionRun"),on(lw,"onTransitionStart"),on(uw,"onTransitionCancel"),on(mm,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ki));function Lg(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],f=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var v=u[b],O=v.instance,D=v.currentTarget;if(v=v.listener,O!==p&&f.isPropagationStopped())break e;p=v,f.currentTarget=D;try{p(f)}catch(z){Ol(z)}f.currentTarget=null,p=O}else for(b=0;b<u.length;b++){if(v=u[b],O=v.instance,D=v.currentTarget,v=v.listener,O!==p&&f.isPropagationStopped())break e;p=v,f.currentTarget=D;try{p(f)}catch(z){Ol(z)}f.currentTarget=null,p=O}}}}function Ee(t,a){var s=a[Ju];s===void 0&&(s=a[Ju]=new Set);var u=t+"__bubble";s.has(u)||(Dg(a,t,2,!1),s.add(u))}function zc(t,a,s){var u=0;a&&(u|=4),Dg(s,t,u,a)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function qc(t){if(!t[Ul]){t[Ul]=!0,Ah.forEach(function(s){s!=="selectionchange"&&(Gw.has(s)||zc(s,!1,t),zc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Ul]||(a[Ul]=!0,zc("selectionchange",!1,a))}}function Dg(t,a,s,u){switch(ry(a)){case 2:var f=yS;break;case 8:f=bS;break;default:f=tf}s=f.bind(null,a,s,t),f=void 0,!uo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(a,s,{capture:!0,passive:f}):t.addEventListener(a,s,!0):f!==void 0?t.addEventListener(a,s,{passive:f}):t.addEventListener(a,s,!1)}function Bc(t,a,s,u,f){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var v=u.stateNode.containerInfo;if(v===f)break;if(b===4)for(b=u.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;v!==null;){if(b=lr(v),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){u=p=b;continue e}v=v.parentNode}}u=u.return}qh(function(){var D=p,z=so(s),H=[];e:{var $=pm.get(t);if($!==void 0){var M=Ws,he=t;switch(t){case"keypress":if(Js(s)===0)break e;case"keydown":case"keyup":M=P0;break;case"focusin":he="focus",M=ho;break;case"focusout":he="blur",M=ho;break;case"beforeblur":case"afterblur":M=ho;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=q0;break;case fm:case dm:case hm:M=N0;break;case mm:M=H0;break;case"scroll":case"scrollend":M=T0;break;case"wheel":M=Z0;break;case"copy":case"cut":case"paste":M=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Vh;break;case"toggle":case"beforetoggle":M=Y0}var fe=(a&4)!==0,Me=!fe&&(t==="scroll"||t==="scrollend"),R=fe?$!==null?$+"Capture":null:$;fe=[];for(var A=D,k;A!==null;){var B=A;if(k=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||k===null||R===null||(B=yi(A,R),B!=null&&fe.push(Wi(A,B,k))),Me)break;A=A.return}0<fe.length&&($=new M($,he,null,s,z),H.push({event:$,listeners:fe}))}}if((a&7)===0){e:{if($=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",$&&s!==io&&(he=s.relatedTarget||s.fromElement)&&(lr(he)||he[sr]))break e;if((M||$)&&($=z.window===z?z:($=z.ownerDocument)?$.defaultView||$.parentWindow:window,M?(he=s.relatedTarget||s.toElement,M=D,he=he?lr(he):null,he!==null&&(Me=o(he),fe=he.tag,he!==Me||fe!==5&&fe!==27&&fe!==6)&&(he=null)):(M=null,he=D),M!==he)){if(fe=Gh,B="onMouseLeave",R="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(fe=Vh,B="onPointerLeave",R="onPointerEnter",A="pointer"),Me=M==null?$:gi(M),k=he==null?$:gi(he),$=new fe(B,A+"leave",M,s,z),$.target=Me,$.relatedTarget=k,B=null,lr(z)===D&&(fe=new fe(R,A+"enter",he,s,z),fe.target=k,fe.relatedTarget=Me,B=fe),Me=B,M&&he)t:{for(fe=M,R=he,A=0,k=fe;k;k=qr(k))A++;for(k=0,B=R;B;B=qr(B))k++;for(;0<A-k;)fe=qr(fe),A--;for(;0<k-A;)R=qr(R),k--;for(;A--;){if(fe===R||R!==null&&fe===R.alternate)break t;fe=qr(fe),R=qr(R)}fe=null}else fe=null;M!==null&&$g(H,$,M,fe,!1),he!==null&&Me!==null&&$g(H,Me,he,fe,!0)}}e:{if($=D?gi(D):window,M=$.nodeName&&$.nodeName.toLowerCase(),M==="select"||M==="input"&&$.type==="file")var re=em;else if(Kh($))if(tm)re=aw;else{re=tw;var ve=ew}else M=$.nodeName,!M||M.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?D&&ro(D.elementType)&&(re=em):re=nw;if(re&&(re=re(t,D))){Wh(H,re,s,z);break e}ve&&ve(t,$,D),t==="focusout"&&D&&$.type==="number"&&D.memoizedProps.value!=null&&ao($,"number",$.value)}switch(ve=D?gi(D):window,t){case"focusin":(Kh(ve)||ve.contentEditable==="true")&&(yr=ve,_o=D,Oi=null);break;case"focusout":Oi=_o=yr=null;break;case"mousedown":vo=!0;break;case"contextmenu":case"mouseup":case"dragend":vo=!1,om(H,s,z);break;case"selectionchange":if(iw)break;case"keydown":case"keyup":om(H,s,z)}var le;if(po)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else gr?Qh(t,s)&&(de="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(de="onCompositionStart");de&&(Yh&&s.locale!=="ko"&&(gr||de!=="onCompositionStart"?de==="onCompositionEnd"&&gr&&(le=Bh()):(ta=z,oo="value"in ta?ta.value:ta.textContent,gr=!0)),ve=zl(D,de),0<ve.length&&(de=new Zh(de,t,null,s,z),H.push({event:de,listeners:ve}),le?de.data=le:(le=Jh(s),le!==null&&(de.data=le)))),(le=X0?Q0(t,s):J0(t,s))&&(de=zl(D,"onBeforeInput"),0<de.length&&(ve=new Zh("onBeforeInput","beforeinput",null,s,z),H.push({event:ve,listeners:de}),ve.data=le)),qw(H,t,D,s,z)}Lg(H,a)})}function Wi(t,a,s){return{instance:t,listener:a,currentTarget:s}}function zl(t,a){for(var s=a+"Capture",u=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=yi(t,s),f!=null&&u.unshift(Wi(t,f,p)),f=yi(t,a),f!=null&&u.push(Wi(t,f,p))),t.tag===3)return u;t=t.return}return[]}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function $g(t,a,s,u,f){for(var p=a._reactName,b=[];s!==null&&s!==u;){var v=s,O=v.alternate,D=v.stateNode;if(v=v.tag,O!==null&&O===u)break;v!==5&&v!==26&&v!==27||D===null||(O=D,f?(D=yi(s,p),D!=null&&b.unshift(Wi(s,D,O))):f||(D=yi(s,p),D!=null&&b.push(Wi(s,D,O)))),s=s.return}b.length!==0&&t.push({event:a,listeners:b})}var Zw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function Mg(t){return(typeof t=="string"?t:""+t).replace(Zw,`
`).replace(Vw,"")}function Ig(t,a){return a=Mg(a),Mg(t)===a}function ql(){}function $e(t,a,s,u,f,p){switch(s){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||hr(t,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&hr(t,""+u);break;case"className":Vs(t,"class",u);break;case"tabIndex":Vs(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vs(t,s,u);break;case"style":Uh(t,u,p);break;case"data":if(a!=="object"){Vs(t,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=Xs(""+u),t.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(a!=="input"&&$e(t,a,"name",f.name,f,null),$e(t,a,"formEncType",f.formEncType,f,null),$e(t,a,"formMethod",f.formMethod,f,null),$e(t,a,"formTarget",f.formTarget,f,null)):($e(t,a,"encType",f.encType,f,null),$e(t,a,"method",f.method,f,null),$e(t,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=Xs(""+u),t.setAttribute(s,u);break;case"onClick":u!=null&&(t.onclick=ql);break;case"onScroll":u!=null&&Ee("scroll",t);break;case"onScrollEnd":u!=null&&Ee("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}s=Xs(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""+u):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":u===!0?t.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,u):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(s,u):t.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(s):t.setAttribute(s,u);break;case"popover":Ee("beforetoggle",t),Ee("toggle",t),Zs(t,"popover",u);break;case"xlinkActuate":Cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Cn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Cn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Cn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Cn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zs(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=S0.get(s)||s,Zs(t,s,u))}}function Hc(t,a,s,u,f,p){switch(s){case"style":Uh(t,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof u=="string"?hr(t,u):(typeof u=="number"||typeof u=="bigint")&&hr(t,""+u);break;case"onScroll":u!=null&&Ee("scroll",t);break;case"onScrollEnd":u!=null&&Ee("scrollend",t);break;case"onClick":u!=null&&(t.onclick=ql);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),a=s.slice(2,f?s.length-7:void 0),p=t[jt]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(a,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,u,f);break e}s in t?t[s]=u:u===!0?t.setAttribute(s,""):Zs(t,s,u)}}}function mt(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",t),Ee("load",t);var u=!1,f=!1,p;for(p in s)if(s.hasOwnProperty(p)){var b=s[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:$e(t,a,p,b,s,null)}}f&&$e(t,a,"srcSet",s.srcSet,s,null),u&&$e(t,a,"src",s.src,s,null);return;case"input":Ee("invalid",t);var v=p=b=f=null,O=null,D=null;for(u in s)if(s.hasOwnProperty(u)){var z=s[u];if(z!=null)switch(u){case"name":f=z;break;case"type":b=z;break;case"checked":O=z;break;case"defaultChecked":D=z;break;case"value":p=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,a));break;default:$e(t,a,u,z,s,null)}}$h(t,p,v,O,D,b,f,!1),Ys(t);return;case"select":Ee("invalid",t),u=b=p=null;for(f in s)if(s.hasOwnProperty(f)&&(v=s[f],v!=null))switch(f){case"value":p=v;break;case"defaultValue":b=v;break;case"multiple":u=v;default:$e(t,a,f,v,s,null)}a=p,s=b,t.multiple=!!u,a!=null?dr(t,!!u,a,!1):s!=null&&dr(t,!!u,s,!0);return;case"textarea":Ee("invalid",t),p=f=u=null;for(b in s)if(s.hasOwnProperty(b)&&(v=s[b],v!=null))switch(b){case"value":u=v;break;case"defaultValue":f=v;break;case"children":p=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:$e(t,a,b,v,s,null)}Ih(t,u,f,p),Ys(t);return;case"option":for(O in s)if(s.hasOwnProperty(O)&&(u=s[O],u!=null))switch(O){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:$e(t,a,O,u,s,null)}return;case"dialog":Ee("beforetoggle",t),Ee("toggle",t),Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":Ee("load",t);break;case"video":case"audio":for(u=0;u<Ki.length;u++)Ee(Ki[u],t);break;case"image":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"embed":case"source":case"link":Ee("error",t),Ee("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in s)if(s.hasOwnProperty(D)&&(u=s[D],u!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:$e(t,a,D,u,s,null)}return;default:if(ro(a)){for(z in s)s.hasOwnProperty(z)&&(u=s[z],u!==void 0&&Hc(t,a,z,u,s,void 0));return}}for(v in s)s.hasOwnProperty(v)&&(u=s[v],u!=null&&$e(t,a,v,u,s,null))}function Yw(t,a,s,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,v=null,O=null,D=null,z=null;for(M in s){var H=s[M];if(s.hasOwnProperty(M)&&H!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":O=H;default:u.hasOwnProperty(M)||$e(t,a,M,null,u,H)}}for(var $ in u){var M=u[$];if(H=s[$],u.hasOwnProperty($)&&(M!=null||H!=null))switch($){case"type":p=M;break;case"name":f=M;break;case"checked":D=M;break;case"defaultChecked":z=M;break;case"value":b=M;break;case"defaultValue":v=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,a));break;default:M!==H&&$e(t,a,$,M,u,H)}}no(t,b,v,O,D,z,p,f);return;case"select":M=b=v=$=null;for(p in s)if(O=s[p],s.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":M=O;default:u.hasOwnProperty(p)||$e(t,a,p,null,u,O)}for(f in u)if(p=u[f],O=s[f],u.hasOwnProperty(f)&&(p!=null||O!=null))switch(f){case"value":$=p;break;case"defaultValue":v=p;break;case"multiple":b=p;default:p!==O&&$e(t,a,f,p,u,O)}a=v,s=b,u=M,$!=null?dr(t,!!s,$,!1):!!u!=!!s&&(a!=null?dr(t,!!s,a,!0):dr(t,!!s,s?[]:"",!1));return;case"textarea":M=$=null;for(v in s)if(f=s[v],s.hasOwnProperty(v)&&f!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:$e(t,a,v,null,u,f)}for(b in u)if(f=u[b],p=s[b],u.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":$=f;break;case"defaultValue":M=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&$e(t,a,b,f,u,p)}Mh(t,$,M);return;case"option":for(var he in s)if($=s[he],s.hasOwnProperty(he)&&$!=null&&!u.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:$e(t,a,he,null,u,$)}for(O in u)if($=u[O],M=s[O],u.hasOwnProperty(O)&&$!==M&&($!=null||M!=null))switch(O){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:$e(t,a,O,$,u,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in s)$=s[fe],s.hasOwnProperty(fe)&&$!=null&&!u.hasOwnProperty(fe)&&$e(t,a,fe,null,u,$);for(D in u)if($=u[D],M=s[D],u.hasOwnProperty(D)&&$!==M&&($!=null||M!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,a));break;default:$e(t,a,D,$,u,M)}return;default:if(ro(a)){for(var Me in s)$=s[Me],s.hasOwnProperty(Me)&&$!==void 0&&!u.hasOwnProperty(Me)&&Hc(t,a,Me,void 0,u,$);for(z in u)$=u[z],M=s[z],!u.hasOwnProperty(z)||$===M||$===void 0&&M===void 0||Hc(t,a,z,$,u,M);return}}for(var R in s)$=s[R],s.hasOwnProperty(R)&&$!=null&&!u.hasOwnProperty(R)&&$e(t,a,R,null,u,$);for(H in u)$=u[H],M=s[H],!u.hasOwnProperty(H)||$===M||$==null&&M==null||$e(t,a,H,$,u,M)}var Gc=null,Zc=null;function Bl(t){return t.nodeType===9?t:t.ownerDocument}function Pg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ug(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Vc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Yc=null;function Fw(){var t=window.event;return t&&t.type==="popstate"?t===Yc?!1:(Yc=t,!0):(Yc=null,!1)}var zg=typeof setTimeout=="function"?setTimeout:void 0,Xw=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(t){return qg.resolve(null).then(t).catch(Jw)}:zg;function Jw(t){setTimeout(function(){throw t})}function ya(t){return t==="head"}function Bg(t,a){var s=a,u=0,f=0;do{var p=s.nextSibling;if(t.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(0<u&&8>u){s=u;var b=t.ownerDocument;if(s&1&&es(b.documentElement),s&2&&es(b.body),s&4)for(s=b.head,es(s),b=s.firstChild;b;){var v=b.nextSibling,O=b.nodeName;b[pi]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||s.removeChild(b),b=v}}if(f===0){t.removeChild(p),us(a);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:u=s.charCodeAt(0)-48;else u=0;s=p}while(s);us(a)}function Fc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Fc(s),Ku(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Kw(t,a,s,u){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[pi])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=fn(t.nextSibling),t===null)break}return null}function Ww(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=fn(t.nextSibling),t===null))return null;return t}function Xc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function eS(t,a){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")a();else{var u=function(){a(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function fn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var Qc=null;function Hg(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function Gg(t,a,s){switch(a=Bl(s),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function es(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ku(t)}var sn=new Map,Zg=new Set;function Hl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zn=U.d;U.d={f:tS,r:nS,D:aS,C:rS,L:iS,m:sS,X:uS,S:lS,M:oS};function tS(){var t=Zn.f(),a=Dl();return t||a}function nS(t){var a=ur(t);a!==null&&a.tag===5&&a.type==="form"?fp(a):Zn.r(t)}var Br=typeof document>"u"?null:document;function Vg(t,a,s){var u=Br;if(u&&typeof a=="string"&&a){var f=Kt(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),Zg.has(f)||(Zg.add(f),t={rel:t,crossOrigin:s,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),mt(a,"link",t),it(a),u.head.appendChild(a)))}}function aS(t){Zn.D(t),Vg("dns-prefetch",t,null)}function rS(t,a){Zn.C(t,a),Vg("preconnect",t,a)}function iS(t,a,s){Zn.L(t,a,s);var u=Br;if(u&&t&&a){var f='link[rel="preload"][as="'+Kt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Kt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Kt(s.imageSizes)+'"]')):f+='[href="'+Kt(t)+'"]';var p=f;switch(a){case"style":p=Hr(t);break;case"script":p=Gr(t)}sn.has(p)||(t=g({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),sn.set(p,t),u.querySelector(f)!==null||a==="style"&&u.querySelector(ts(p))||a==="script"&&u.querySelector(ns(p))||(a=u.createElement("link"),mt(a,"link",t),it(a),u.head.appendChild(a)))}}function sS(t,a){Zn.m(t,a);var s=Br;if(s&&t){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Kt(u)+'"][href="'+Kt(t)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Gr(t)}if(!sn.has(p)&&(t=g({rel:"modulepreload",href:t},a),sn.set(p,t),s.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ns(p)))return}u=s.createElement("link"),mt(u,"link",t),it(u),s.head.appendChild(u)}}}function lS(t,a,s){Zn.S(t,a,s);var u=Br;if(u&&t){var f=or(u).hoistableStyles,p=Hr(t);a=a||"default";var b=f.get(p);if(!b){var v={loading:0,preload:null};if(b=u.querySelector(ts(p)))v.loading=5;else{t=g({rel:"stylesheet",href:t,"data-precedence":a},s),(s=sn.get(p))&&Jc(t,s);var O=b=u.createElement("link");it(O),mt(O,"link",t),O._p=new Promise(function(D,z){O.onload=D,O.onerror=z}),O.addEventListener("load",function(){v.loading|=1}),O.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Gl(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:v},f.set(p,b)}}}function uS(t,a){Zn.X(t,a);var s=Br;if(s&&t){var u=or(s).hoistableScripts,f=Gr(t),p=u.get(f);p||(p=s.querySelector(ns(f)),p||(t=g({src:t,async:!0},a),(a=sn.get(f))&&Kc(t,a),p=s.createElement("script"),it(p),mt(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function oS(t,a){Zn.M(t,a);var s=Br;if(s&&t){var u=or(s).hoistableScripts,f=Gr(t),p=u.get(f);p||(p=s.querySelector(ns(f)),p||(t=g({src:t,async:!0,type:"module"},a),(a=sn.get(f))&&Kc(t,a),p=s.createElement("script"),it(p),mt(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Yg(t,a,s,u){var f=(f=ce.current)?Hl(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Hr(s.href),s=or(f).hoistableStyles,u=s.get(a),u||(u={type:"style",instance:null,count:0,state:null},s.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Hr(s.href);var p=or(f).hoistableStyles,b=p.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,b),(p=f.querySelector(ts(t)))&&!p._p&&(b.instance=p,b.state.loading=5),sn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},sn.set(t,s),p||cS(f,t,s,b.state))),a&&u===null)throw Error(r(528,""));return b}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gr(s),s=or(f).hoistableScripts,u=s.get(a),u||(u={type:"script",instance:null,count:0,state:null},s.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Hr(t){return'href="'+Kt(t)+'"'}function ts(t){return'link[rel="stylesheet"]['+t+"]"}function Fg(t){return g({},t,{"data-precedence":t.precedence,precedence:null})}function cS(t,a,s,u){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=t.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),mt(a,"link",s),it(a),t.head.appendChild(a))}function Gr(t){return'[src="'+Kt(t)+'"]'}function ns(t){return"script[async]"+t}function Xg(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var u=t.querySelector('style[data-href~="'+Kt(s.href)+'"]');if(u)return a.instance=u,it(u),u;var f=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),it(u),mt(u,"style",f),Gl(u,s.precedence,t),a.instance=u;case"stylesheet":f=Hr(s.href);var p=t.querySelector(ts(f));if(p)return a.state.loading|=4,a.instance=p,it(p),p;u=Fg(s),(f=sn.get(f))&&Jc(u,f),p=(t.ownerDocument||t).createElement("link"),it(p);var b=p;return b._p=new Promise(function(v,O){b.onload=v,b.onerror=O}),mt(p,"link",u),a.state.loading|=4,Gl(p,s.precedence,t),a.instance=p;case"script":return p=Gr(s.src),(f=t.querySelector(ns(p)))?(a.instance=f,it(f),f):(u=s,(f=sn.get(p))&&(u=g({},s),Kc(u,f)),t=t.ownerDocument||t,f=t.createElement("script"),it(f),mt(f,"link",u),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Gl(u,s.precedence,t));return a.instance}function Gl(t,a,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,b=0;b<u.length;b++){var v=u[b];if(v.dataset.precedence===a)p=v;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Jc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Kc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Zl=null;function Qg(t,a,s){if(Zl===null){var u=new Map,f=Zl=new Map;f.set(s,u)}else f=Zl,u=f.get(s),u||(u=new Map,f.set(s,u));if(u.has(t))return u;for(u.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var p=s[f];if(!(p[pi]||p[yt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=t+b;var v=u.get(b);v?v.push(p):u.set(b,[p])}}return u}function Jg(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function fS(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Kg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var as=null;function dS(){}function hS(t,a,s){if(as===null)throw Error(r(475));var u=as;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Hr(s.href),p=t.querySelector(ts(f));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=Vl.bind(u),t.then(u,u)),a.state.loading|=4,a.instance=p,it(p);return}p=t.ownerDocument||t,s=Fg(s),(f=sn.get(f))&&Jc(s,f),p=p.createElement("link"),it(p);var b=p;b._p=new Promise(function(v,O){b.onload=v,b.onerror=O}),mt(p,"link",s),a.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Vl.bind(u),t.addEventListener("load",a),t.addEventListener("error",a))}}function mS(){if(as===null)throw Error(r(475));var t=as;return t.stylesheets&&t.count===0&&Wc(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Wc(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Vl(){if(this.count--,this.count===0){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yl=null;function Wc(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yl=new Map,a.forEach(pS,t),Yl=null,Vl.call(t))}function pS(t,a){if(!(a.state.loading&4)){var s=Yl.get(t);if(s)var u=s.get(null);else{s=new Map,Yl.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),u=b)}u&&s.set(null,u)}f=a.instance,b=f.getAttribute("data-precedence"),p=s.get(b)||u,p===u&&s.set(null,f),s.set(b,f),this.count++,u=Vl.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var rs={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function gS(t,a,s,u,f,p,b,v){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.hiddenUpdates=Fu(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Wg(t,a,s,u,f,p,b,v,O,D,z,H){return t=new gS(t,a,s,b,v,O,D,H),a=1,p===!0&&(a|=24),p=zt(3,null,null,a),t.current=p,p.stateNode=t,a=Do(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:s,cache:a},Po(p),t}function ey(t){return t?(t=wr,t):wr}function ty(t,a,s,u,f,p){f=ey(f),u.context===null?u.context=f:u.pendingContext=f,u=ra(a),u.payload={element:s},p=p===void 0?null:p,p!==null&&(u.callback=p),s=ia(t,u,a),s!==null&&(Zt(s,t,a),Di(s,t,a))}function ny(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function ef(t,a){ny(t,a),(t=t.alternate)&&ny(t,a)}function ay(t){if(t.tag===13){var a=vr(t,67108864);a!==null&&Zt(a,t,67108864),ef(t,67108864)}}var Fl=!0;function yS(t,a,s,u){var f=j.T;j.T=null;var p=U.p;try{U.p=2,tf(t,a,s,u)}finally{U.p=p,j.T=f}}function bS(t,a,s,u){var f=j.T;j.T=null;var p=U.p;try{U.p=8,tf(t,a,s,u)}finally{U.p=p,j.T=f}}function tf(t,a,s,u){if(Fl){var f=nf(u);if(f===null)Bc(t,a,u,Xl,s),iy(t,u);else if(vS(f,t,a,s,u))u.stopPropagation();else if(iy(t,u),a&4&&-1<_S.indexOf(t)){for(;f!==null;){var p=ur(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=$a(p.pendingLanes);if(b!==0){var v=p;for(v.pendingLanes|=2,v.entangledLanes|=2;b;){var O=1<<31-Pt(b);v.entanglements[1]|=O,b&=~O}An(p),(Ce&6)===0&&(kl=Sn()+500,Ji(0))}}break;case 13:v=vr(p,2),v!==null&&Zt(v,p,2),Dl(),ef(p,2)}if(p=nf(u),p===null&&Bc(t,a,u,Xl,s),p===f)break;f=p}f!==null&&u.stopPropagation()}else Bc(t,a,u,null,s)}}function nf(t){return t=so(t),af(t)}var Xl=null;function af(t){if(Xl=null,t=lr(t),t!==null){var a=o(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=c(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Xl=t,null}function ry(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(r0()){case bh:return 2;case _h:return 8;case qs:case i0:return 32;case vh:return 268435456;default:return 32}default:return 32}}var rf=!1,ba=null,_a=null,va=null,is=new Map,ss=new Map,wa=[],_S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iy(t,a){switch(t){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":is.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(a.pointerId)}}function ls(t,a,s,u,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:s,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},a!==null&&(a=ur(a),a!==null&&ay(a)),t):(t.eventSystemFlags|=u,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function vS(t,a,s,u,f){switch(a){case"focusin":return ba=ls(ba,t,a,s,u,f),!0;case"dragenter":return _a=ls(_a,t,a,s,u,f),!0;case"mouseover":return va=ls(va,t,a,s,u,f),!0;case"pointerover":var p=f.pointerId;return is.set(p,ls(is.get(p)||null,t,a,s,u,f)),!0;case"gotpointercapture":return p=f.pointerId,ss.set(p,ls(ss.get(p)||null,t,a,s,u,f)),!0}return!1}function sy(t){var a=lr(t.target);if(a!==null){var s=o(a);if(s!==null){if(a=s.tag,a===13){if(a=c(s),a!==null){t.blockedOn=a,h0(t.priority,function(){if(s.tag===13){var u=Gt();u=Xu(u);var f=vr(s,u);f!==null&&Zt(f,s,u),ef(s,u)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ql(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=nf(t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);io=u,s.target.dispatchEvent(u),io=null}else return a=ur(s),a!==null&&ay(a),t.blockedOn=s,!1;a.shift()}return!0}function ly(t,a,s){Ql(t)&&s.delete(a)}function wS(){rf=!1,ba!==null&&Ql(ba)&&(ba=null),_a!==null&&Ql(_a)&&(_a=null),va!==null&&Ql(va)&&(va=null),is.forEach(ly),ss.forEach(ly)}function Jl(t,a){t.blockedOn===a&&(t.blockedOn=null,rf||(rf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,wS)))}var Kl=null;function uy(t){Kl!==t&&(Kl=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Kl===t&&(Kl=null);for(var a=0;a<t.length;a+=3){var s=t[a],u=t[a+1],f=t[a+2];if(typeof u!="function"){if(af(u||s)===null)continue;break}var p=ur(s);p!==null&&(t.splice(a,3),a-=3,ac(p,{pending:!0,data:f,method:s.method,action:u},u,f))}}))}function us(t){function a(O){return Jl(O,t)}ba!==null&&Jl(ba,t),_a!==null&&Jl(_a,t),va!==null&&Jl(va,t),is.forEach(a),ss.forEach(a);for(var s=0;s<wa.length;s++){var u=wa[s];u.blockedOn===t&&(u.blockedOn=null)}for(;0<wa.length&&(s=wa[0],s.blockedOn===null);)sy(s),s.blockedOn===null&&wa.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var f=s[u],p=s[u+1],b=f[jt]||null;if(typeof p=="function")b||uy(s);else if(b){var v=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[jt]||null)v=b.formAction;else if(af(f)!==null)continue}else v=b.action;typeof v=="function"?s[u+1]=v:(s.splice(u,3),u-=3),uy(s)}}}function sf(t){this._internalRoot=t}Wl.prototype.render=sf.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var s=a.current,u=Gt();ty(s,u,t,a,null,null)},Wl.prototype.unmount=sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;ty(t.current,2,null,t,null,null),Dl(),a[sr]=null}};function Wl(t){this._internalRoot=t}Wl.prototype.unstable_scheduleHydration=function(t){if(t){var a=Oh();t={blockedOn:null,target:t,priority:a};for(var s=0;s<wa.length&&a!==0&&a<wa[s].priority;s++);wa.splice(s,0,t),s===0&&sy(t)}};var oy=e.version;if(oy!=="19.1.0")throw Error(r(527,oy,"19.1.0"));U.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=m(a),t=t!==null?h(t):null,t=t===null?null:t.stateNode,t};var SS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{di=eu.inject(SS),It=eu}catch{}}return cs.createRoot=function(t,a){if(!l(t))throw Error(r(299));var s=!1,u="",f=Op,p=xp,b=Ap,v=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(v=a.unstable_transitionCallbacks)),a=Wg(t,1,!1,null,null,s,u,f,p,b,v,null),t[sr]=a.current,qc(t),new sf(a)},cs.hydrateRoot=function(t,a,s){if(!l(t))throw Error(r(299));var u=!1,f="",p=Op,b=xp,v=Ap,O=null,D=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(O=s.unstable_transitionCallbacks),s.formState!==void 0&&(D=s.formState)),a=Wg(t,1,!0,a,s??null,u,f,p,b,v,O,D),a.context=ey(null),s=a.current,u=Gt(),u=Xu(u),f=ra(u),f.callback=null,ia(s,f,u),s=u,a.current.lanes=s,mi(a,s),An(a),t[sr]=a.current,qc(t),new Wl(a)},cs.version="19.1.0",cs}var _y;function DS(){if(_y)return of.exports;_y=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),of.exports=LS(),of.exports}var $S=DS();const MS=()=>L.jsxs("header",{className:"navbar",children:[L.jsxs("div",{className:"navbar-left",children:[L.jsx("div",{className:"logo",children:L.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{d:"M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z",fill:"currentColor"})})}),L.jsx("h2",{className:"name",children:"Ch Varun"})]}),L.jsxs("div",{className:"navbar-right",children:[L.jsxs("nav",{className:"nav-links",children:[L.jsx("a",{href:"#home",children:"Home"}),L.jsx("a",{href:"#skills",children:"Skills"}),L.jsx("a",{href:"#experience",children:"Experience"}),L.jsx("a",{href:"#projects",children:"Projects"}),L.jsx("a",{href:"#contact",children:"Contact"})]}),L.jsxs("div",{className:"nav-buttons",children:[L.jsx("a",{href:"https://github.com/TheCoder30ec4",target:"_blank",rel:"noopener noreferrer",className:"btn icon-btn","aria-label":"GitHub",children:L.jsx("svg",{viewBox:"0 0 16 16",fill:"currentColor",height:"1em",width:"1em",children:L.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})}),L.jsx("a",{href:"#contact",className:"btn btn-primary",children:"Let's Talk"})]})]})]}),IS=Symbol("Let zodToJsonSchema decide on which parser to use"),PS={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},US=i=>({...PS,...i}),zS=i=>{const e=US(i),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,l])=>[l._def,{def:l._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function C_(i,e,n,r){r!=null&&r.errorMessages&&n&&(i.errorMessage={...i.errorMessage,[e]:n})}function Le(i,e,n,r,l){i[e]=n,C_(i,e,r,l)}var Ae;(function(i){i.assertEqual=l=>{};function e(l){}i.assertIs=e;function n(l){throw new Error}i.assertNever=n,i.arrayToEnum=l=>{const o={};for(const c of l)o[c]=c;return o},i.getValidEnumValues=l=>{const o=i.objectKeys(l).filter(d=>typeof l[l[d]]!="number"),c={};for(const d of o)c[d]=l[d];return i.objectValues(c)},i.objectValues=l=>i.objectKeys(l).map(function(o){return l[o]}),i.objectKeys=typeof Object.keys=="function"?l=>Object.keys(l):l=>{const o=[];for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&o.push(c);return o},i.find=(l,o)=>{for(const c of l)if(o(c))return c},i.isInteger=typeof Number.isInteger=="function"?l=>Number.isInteger(l):l=>typeof l=="number"&&Number.isFinite(l)&&Math.floor(l)===l;function r(l,o=" | "){return l.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}i.joinValues=r,i.jsonStringifyReplacer=(l,o)=>typeof o=="bigint"?o.toString():o})(Ae||(Ae={}));var vy;(function(i){i.mergeShapes=(e,n)=>({...e,...n})})(vy||(vy={}));const ie=Ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xa=i=>{switch(typeof i){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return Number.isNaN(i)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(i)?ie.array:i===null?ie.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ie.promise:typeof Map<"u"&&i instanceof Map?ie.map:typeof Set<"u"&&i instanceof Set?ie.set:typeof Date<"u"&&i instanceof Date?ie.date:ie.object;default:return ie.unknown}},X=Ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Kn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},l=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(l);else if(c.code==="invalid_return_type")l(c.returnTypeError);else if(c.code==="invalid_arguments")l(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let d=r,m=0;for(;m<c.path.length;){const h=c.path[m];m===c.path.length-1?(d[h]=d[h]||{_errors:[]},d[h]._errors.push(n(c))):d[h]=d[h]||{_errors:[]},d=d[h],m++}}};return l(this),r}static assert(e){if(!(e instanceof Kn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const l of this.issues)l.path.length>0?(n[l.path[0]]=n[l.path[0]]||[],n[l.path[0]].push(e(l))):r.push(e(l));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Kn.create=i=>new Kn(i);const Nd=(i,e)=>{let n;switch(i.code){case X.invalid_type:i.received===ie.undefined?n="Required":n=`Expected ${i.expected}, received ${i.received}`;break;case X.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(i.expected,Ae.jsonStringifyReplacer)}`;break;case X.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ae.joinValues(i.keys,", ")}`;break;case X.invalid_union:n="Invalid input";break;case X.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ae.joinValues(i.options)}`;break;case X.invalid_enum_value:n=`Invalid enum value. Expected ${Ae.joinValues(i.options)}, received '${i.received}'`;break;case X.invalid_arguments:n="Invalid function arguments";break;case X.invalid_return_type:n="Invalid function return type";break;case X.invalid_date:n="Invalid date";break;case X.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(n=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?n=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?n=`Invalid input: must end with "${i.validation.endsWith}"`:Ae.assertNever(i.validation):i.validation!=="regex"?n=`Invalid ${i.validation}`:n="Invalid";break;case X.too_small:i.type==="array"?n=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?n=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?n=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?n=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:n="Invalid input";break;case X.too_big:i.type==="array"?n=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?n=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?n=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?n=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?n=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:n="Invalid input";break;case X.custom:n="Invalid input";break;case X.invalid_intersection_types:n="Intersection results could not be merged";break;case X.not_multiple_of:n=`Number must be a multiple of ${i.multipleOf}`;break;case X.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ae.assertNever(i)}return{message:n}};let qS=Nd;function BS(){return qS}const HS=i=>{const{data:e,path:n,errorMaps:r,issueData:l}=i,o=[...n,...l.path||[]],c={...l,path:o};if(l.message!==void 0)return{...l,path:o,message:l.message};let d="";const m=r.filter(h=>!!h).slice().reverse();for(const h of m)d=h(c,{data:e,defaultError:d}).message;return{...l,path:o,message:d}};function ne(i,e){const n=BS(),r=HS({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,n,n===Nd?void 0:Nd].filter(l=>!!l)});i.common.issues.push(r)}class Ft{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const l of n){if(l.status==="aborted")return me;l.status==="dirty"&&e.dirty(),r.push(l.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const l of n){const o=await l.key,c=await l.value;r.push({key:o,value:c})}return Ft.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const l of n){const{key:o,value:c}=l;if(o.status==="aborted"||c.status==="aborted")return me;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||l.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const me=Object.freeze({status:"aborted"}),ps=i=>({status:"dirty",value:i}),un=i=>({status:"valid",value:i}),wy=i=>i.status==="aborted",Sy=i=>i.status==="dirty",Wr=i=>i.status==="valid",hu=i=>typeof Promise<"u"&&i instanceof Promise;var se;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(se||(se={}));class ja{constructor(e,n,r,l){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=l}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ey=(i,e)=>{if(Wr(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Kn(i.common.issues);return this._error=n,this._error}}};function we(i){if(!i)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:l}=i;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:l}:{errorMap:(c,d)=>{const{message:m}=i;return c.code==="invalid_enum_value"?{message:m??d.defaultError}:typeof d.data>"u"?{message:m??r??d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:m??n??d.defaultError}},description:l}}class Oe{get description(){return this._def.description}_getType(e){return xa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:xa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ft,ctx:{common:e.parent.common,data:e.data,parsedType:xa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(hu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xa(e)},l=this._parseSync({data:e,path:r.path,parent:r});return Ey(r,l)}"~validate"(e){var r,l;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xa(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return Wr(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(l=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&l.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>Wr(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xa(e)},l=this._parse({data:e,path:r.path,parent:r}),o=await(hu(l)?l:Promise.resolve(l));return Ey(r,o)}refine(e,n){const r=l=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(l):n;return this._refinement((l,o)=>{const c=e(l),d=()=>o.addIssue({code:X.custom,...r(l)});return typeof Promise<"u"&&c instanceof Promise?c.then(m=>m?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,n){return this._refinement((r,l)=>e(r)?!0:(l.addIssue(typeof n=="function"?n(r,l):n),!1))}_refinement(e){return new ti({schema:this,typeName:Q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Xn.create(this,this._def)}nullable(){return ni.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return jn.create(this)}promise(){return yu.create(this,this._def)}or(e){return pu.create([this,e],this._def)}and(e){return gu.create(this,e,this._def)}transform(e){return new ti({...we(this._def),schema:this,typeName:Q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new kd({...we(this._def),innerType:this,defaultValue:n,typeName:Q.ZodDefault})}brand(){return new dE({typeName:Q.ZodBranded,type:this,...we(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ld({...we(this._def),innerType:this,catchValue:n,typeName:Q.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Kd.create(this,e)}readonly(){return Dd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const GS=/^c[^\s-]{8,}$/i,ZS=/^[0-9a-z]+$/,VS=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FS=/^[a-z0-9_-]{21}$/i,XS=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,QS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,KS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hf;const WS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aE=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rE=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,k_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",iE=new RegExp(`^${k_}$`);function L_(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const n=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function sE(i){return new RegExp(`^${L_(i)}$`)}function lE(i){let e=`${k_}T${L_(i)}`;const n=[];return n.push(i.local?"Z?":"Z"),i.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function uE(i,e){return!!((e==="v4"||!e)&&WS.test(i)||(e==="v6"||!e)&&tE.test(i))}function oE(i,e){if(!XS.test(i))return!1;try{const[n]=i.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),l=JSON.parse(atob(r));return!(typeof l!="object"||l===null||"typ"in l&&(l==null?void 0:l.typ)!=="JWT"||!l.alg||e&&l.alg!==e)}catch{return!1}}function cE(i,e){return!!((e==="v4"||!e)&&eE.test(i)||(e==="v6"||!e)&&nE.test(i))}class Yn extends Oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_type,expected:ie.string,received:o.parsedType}),me}const r=new Ft;let l;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,d=e.data.length<o.value;(c||d)&&(l=this._getOrReturnCtx(e,l),c?ne(l,{code:X.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&ne(l,{code:X.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")JS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"email",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")hf||(hf=new RegExp(KS,"u")),hf.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"emoji",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")YS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"uuid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")FS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"nanoid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")GS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"cuid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")ZS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"cuid2",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")VS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"ulid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{l=this._getOrReturnCtx(e,l),ne(l,{validation:"url",code:X.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"regex",code:X.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?lE(o).test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?iE.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?sE(o).test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?QS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"duration",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?uE(e.data,o.version)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"ip",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?oE(e.data,o.alg)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"jwt",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?cE(e.data,o.version)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"cidr",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?aE.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"base64",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?rE.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"base64url",code:X.invalid_string,message:o.message}),r.dirty()):Ae.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(l=>e.test(l),{validation:n,code:X.invalid_string,...se.errToObj(r)})}_addCheck(e){return new Yn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...se.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...se.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...se.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...se.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...se.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...se.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...se.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...se.errToObj(n)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Yn.create=i=>new Yn({checks:[],typeName:Q.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...we(i)});function fE(i,e){const n=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,l=n>r?n:r,o=Number.parseInt(i.toFixed(l).replace(".","")),c=Number.parseInt(e.toFixed(l).replace(".",""));return o%c/10**l}class Es extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_type,expected:ie.number,received:o.parsedType}),me}let r;const l=new Ft;for(const o of this._def.checks)o.kind==="int"?Ae.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:X.invalid_type,expected:"integer",received:"float",message:o.message}),l.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),l.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),l.dirty()):o.kind==="multipleOf"?fE(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.not_multiple_of,multipleOf:o.value,message:o.message}),l.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:X.not_finite,message:o.message}),l.dirty()):Ae.assertNever(o);return{status:l.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,se.toString(n))}setLimit(e,n,r,l){return new Es({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:se.toString(l)}]})}_addCheck(e){return new Es({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ae.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Es.create=i=>new Es({checks:[],typeName:Q.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...we(i)});class Ts extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ie.bigint)return this._getInvalidInput(e);let r;const l=new Ft;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),l.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),l.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.not_multiple_of,multipleOf:o.value,message:o.message}),l.dirty()):Ae.assertNever(o);return{status:l.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ne(n,{code:X.invalid_type,expected:ie.bigint,received:n.parsedType}),me}gte(e,n){return this.setLimit("min",e,!0,se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,se.toString(n))}setLimit(e,n,r,l){return new Ts({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:se.toString(l)}]})}_addCheck(e){return new Ts({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ts.create=i=>new Ts({checks:[],typeName:Q.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...we(i)});class Ty extends Oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.boolean,received:r.parsedType}),me}return un(e.data)}}Ty.create=i=>new Ty({typeName:Q.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...we(i)});class mu extends Oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_type,expected:ie.date,received:o.parsedType}),me}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_date}),me}const r=new Ft;let l;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Ae.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}mu.create=i=>new mu({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:Q.ZodDate,...we(i)});class Oy extends Oe{_parse(e){if(this._getType(e)!==ie.symbol){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.symbol,received:r.parsedType}),me}return un(e.data)}}Oy.create=i=>new Oy({typeName:Q.ZodSymbol,...we(i)});class xy extends Oe{_parse(e){if(this._getType(e)!==ie.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.undefined,received:r.parsedType}),me}return un(e.data)}}xy.create=i=>new xy({typeName:Q.ZodUndefined,...we(i)});class Ay extends Oe{_parse(e){if(this._getType(e)!==ie.null){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.null,received:r.parsedType}),me}return un(e.data)}}Ay.create=i=>new Ay({typeName:Q.ZodNull,...we(i)});class jd extends Oe{constructor(){super(...arguments),this._any=!0}_parse(e){return un(e.data)}}jd.create=i=>new jd({typeName:Q.ZodAny,...we(i)});class Ry extends Oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return un(e.data)}}Ry.create=i=>new Ry({typeName:Q.ZodUnknown,...we(i)});class Ca extends Oe{_parse(e){const n=this._getOrReturnCtx(e);return ne(n,{code:X.invalid_type,expected:ie.never,received:n.parsedType}),me}}Ca.create=i=>new Ca({typeName:Q.ZodNever,...we(i)});class Ny extends Oe{_parse(e){if(this._getType(e)!==ie.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.void,received:r.parsedType}),me}return un(e.data)}}Ny.create=i=>new Ny({typeName:Q.ZodVoid,...we(i)});class jn extends Oe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),l=this._def;if(n.parsedType!==ie.array)return ne(n,{code:X.invalid_type,expected:ie.array,received:n.parsedType}),me;if(l.exactLength!==null){const c=n.data.length>l.exactLength.value,d=n.data.length<l.exactLength.value;(c||d)&&(ne(n,{code:c?X.too_big:X.too_small,minimum:d?l.exactLength.value:void 0,maximum:c?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),r.dirty())}if(l.minLength!==null&&n.data.length<l.minLength.value&&(ne(n,{code:X.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),r.dirty()),l.maxLength!==null&&n.data.length>l.maxLength.value&&(ne(n,{code:X.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,d)=>l.type._parseAsync(new ja(n,c,n.path,d)))).then(c=>Ft.mergeArray(r,c));const o=[...n.data].map((c,d)=>l.type._parseSync(new ja(n,c,n.path,d)));return Ft.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new jn({...this._def,minLength:{value:e,message:se.toString(n)}})}max(e,n){return new jn({...this._def,maxLength:{value:e,message:se.toString(n)}})}length(e,n){return new jn({...this._def,exactLength:{value:e,message:se.toString(n)}})}nonempty(e){return this.min(1,e)}}jn.create=(i,e)=>new jn({type:i,minLength:null,maxLength:null,exactLength:null,typeName:Q.ZodArray,...we(e)});function Vr(i){if(i instanceof We){const e={};for(const n in i.shape){const r=i.shape[n];e[n]=Xn.create(Vr(r))}return new We({...i._def,shape:()=>e})}else return i instanceof jn?new jn({...i._def,type:Vr(i.element)}):i instanceof Xn?Xn.create(Vr(i.unwrap())):i instanceof ni?ni.create(Vr(i.unwrap())):i instanceof tr?tr.create(i.items.map(e=>Vr(e))):i}class We extends Oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ae.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ie.object){const h=this._getOrReturnCtx(e);return ne(h,{code:X.invalid_type,expected:ie.object,received:h.parsedType}),me}const{status:r,ctx:l}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof Ca&&this._def.unknownKeys==="strip"))for(const h in l.data)c.includes(h)||d.push(h);const m=[];for(const h of c){const g=o[h],y=l.data[h];m.push({key:{status:"valid",value:h},value:g._parse(new ja(l,y,l.path,h)),alwaysSet:h in l.data})}if(this._def.catchall instanceof Ca){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of d)m.push({key:{status:"valid",value:g},value:{status:"valid",value:l.data[g]}});else if(h==="strict")d.length>0&&(ne(l,{code:X.unrecognized_keys,keys:d}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of d){const y=l.data[g];m.push({key:{status:"valid",value:g},value:h._parse(new ja(l,y,l.path,g)),alwaysSet:g in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of m){const y=await g.key,_=await g.value;h.push({key:y,value:_,alwaysSet:g.alwaysSet})}return h}).then(h=>Ft.mergeObjectSync(r,h)):Ft.mergeObjectSync(r,m)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new We({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var o,c;const l=((c=(o=this._def).errorMap)==null?void 0:c.call(o,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:se.errToObj(e).message??l}:{message:l}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Q.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const n={};for(const r of Ae.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new We({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ae.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new We({...this._def,shape:()=>n})}deepPartial(){return Vr(this)}partial(e){const n={};for(const r of Ae.objectKeys(this.shape)){const l=this.shape[r];e&&!e[r]?n[r]=l:n[r]=l.optional()}return new We({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ae.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Xn;)o=o._def.innerType;n[r]=o}return new We({...this._def,shape:()=>n})}keyof(){return D_(Ae.objectKeys(this.shape))}}We.create=(i,e)=>new We({shape:()=>i,unknownKeys:"strip",catchall:Ca.create(),typeName:Q.ZodObject,...we(e)});We.strictCreate=(i,e)=>new We({shape:()=>i,unknownKeys:"strict",catchall:Ca.create(),typeName:Q.ZodObject,...we(e)});We.lazycreate=(i,e)=>new We({shape:i,unknownKeys:"strip",catchall:Ca.create(),typeName:Q.ZodObject,...we(e)});class pu extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function l(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const c=o.map(d=>new Kn(d.ctx.common.issues));return ne(n,{code:X.invalid_union,unionErrors:c}),me}if(n.common.async)return Promise.all(r.map(async o=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(l);{let o;const c=[];for(const m of r){const h={...n,common:{...n.common,issues:[]},parent:null},g=m._parseSync({data:n.data,path:n.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!o&&(o={result:g,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const d=c.map(m=>new Kn(m));return ne(n,{code:X.invalid_union,unionErrors:d}),me}}get options(){return this._def.options}}pu.create=(i,e)=>new pu({options:i,typeName:Q.ZodUnion,...we(e)});function Cd(i,e){const n=xa(i),r=xa(e);if(i===e)return{valid:!0,data:i};if(n===ie.object&&r===ie.object){const l=Ae.objectKeys(e),o=Ae.objectKeys(i).filter(d=>l.indexOf(d)!==-1),c={...i,...e};for(const d of o){const m=Cd(i[d],e[d]);if(!m.valid)return{valid:!1};c[d]=m.data}return{valid:!0,data:c}}else if(n===ie.array&&r===ie.array){if(i.length!==e.length)return{valid:!1};const l=[];for(let o=0;o<i.length;o++){const c=i[o],d=e[o],m=Cd(c,d);if(!m.valid)return{valid:!1};l.push(m.data)}return{valid:!0,data:l}}else return n===ie.date&&r===ie.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class gu extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),l=(o,c)=>{if(wy(o)||wy(c))return me;const d=Cd(o.value,c.value);return d.valid?((Sy(o)||Sy(c))&&n.dirty(),{status:n.value,value:d.data}):(ne(r,{code:X.invalid_intersection_types}),me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>l(o,c)):l(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}gu.create=(i,e,n)=>new gu({left:i,right:e,typeName:Q.ZodIntersection,...we(n)});class tr extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.array)return ne(r,{code:X.invalid_type,expected:ie.array,received:r.parsedType}),me;if(r.data.length<this._def.items.length)return ne(r,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&r.data.length>this._def.items.length&&(ne(r,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((c,d)=>{const m=this._def.items[d]||this._def.rest;return m?m._parse(new ja(r,c,r.path,d)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>Ft.mergeArray(n,c)):Ft.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new tr({...this._def,rest:e})}}tr.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tr({items:i,typeName:Q.ZodTuple,rest:null,...we(e)})};class jy extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.map)return ne(r,{code:X.invalid_type,expected:ie.map,received:r.parsedType}),me;const l=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([d,m],h)=>({key:l._parse(new ja(r,d,r.path,[h,"key"])),value:o._parse(new ja(r,m,r.path,[h,"value"]))}));if(r.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const m of c){const h=await m.key,g=await m.value;if(h.status==="aborted"||g.status==="aborted")return me;(h.status==="dirty"||g.status==="dirty")&&n.dirty(),d.set(h.value,g.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const m of c){const h=m.key,g=m.value;if(h.status==="aborted"||g.status==="aborted")return me;(h.status==="dirty"||g.status==="dirty")&&n.dirty(),d.set(h.value,g.value)}return{status:n.value,value:d}}}}jy.create=(i,e,n)=>new jy({valueType:e,keyType:i,typeName:Q.ZodMap,...we(n)});class Os extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.set)return ne(r,{code:X.invalid_type,expected:ie.set,received:r.parsedType}),me;const l=this._def;l.minSize!==null&&r.data.size<l.minSize.value&&(ne(r,{code:X.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),n.dirty()),l.maxSize!==null&&r.data.size>l.maxSize.value&&(ne(r,{code:X.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),n.dirty());const o=this._def.valueType;function c(m){const h=new Set;for(const g of m){if(g.status==="aborted")return me;g.status==="dirty"&&n.dirty(),h.add(g.value)}return{status:n.value,value:h}}const d=[...r.data.values()].map((m,h)=>o._parse(new ja(r,m,r.path,h)));return r.common.async?Promise.all(d).then(m=>c(m)):c(d)}min(e,n){return new Os({...this._def,minSize:{value:e,message:se.toString(n)}})}max(e,n){return new Os({...this._def,maxSize:{value:e,message:se.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Os.create=(i,e)=>new Os({valueType:i,minSize:null,maxSize:null,typeName:Q.ZodSet,...we(e)});class Cy extends Oe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Cy.create=(i,e)=>new Cy({getter:i,typeName:Q.ZodLazy,...we(e)});class ky extends Oe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ne(n,{received:n.data,code:X.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}ky.create=(i,e)=>new ky({value:i,typeName:Q.ZodLiteral,...we(e)});function D_(i,e){return new ei({values:i,typeName:Q.ZodEnum,...we(e)})}class ei extends Oe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{expected:Ae.joinValues(r),received:n.parsedType,code:X.invalid_type}),me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{received:n.data,code:X.invalid_enum_value,options:r}),me}return un(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ei.create(e,{...this._def,...n})}exclude(e,n=this._def){return ei.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ei.create=D_;class Ly extends Oe{_parse(e){const n=Ae.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ie.string&&r.parsedType!==ie.number){const l=Ae.objectValues(n);return ne(r,{expected:Ae.joinValues(l),received:r.parsedType,code:X.invalid_type}),me}if(this._cache||(this._cache=new Set(Ae.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const l=Ae.objectValues(n);return ne(r,{received:r.data,code:X.invalid_enum_value,options:l}),me}return un(e.data)}get enum(){return this._def.values}}Ly.create=(i,e)=>new Ly({values:i,typeName:Q.ZodNativeEnum,...we(e)});class yu extends Oe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ie.promise&&n.common.async===!1)return ne(n,{code:X.invalid_type,expected:ie.promise,received:n.parsedType}),me;const r=n.parsedType===ie.promise?n.data:Promise.resolve(n.data);return un(r.then(l=>this._def.type.parseAsync(l,{path:n.path,errorMap:n.common.contextualErrorMap})))}}yu.create=(i,e)=>new yu({type:i,typeName:Q.ZodPromise,...we(e)});class ti extends Oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),l=this._def.effect||null,o={addIssue:c=>{ne(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),l.type==="preprocess"){const c=l.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async d=>{if(n.value==="aborted")return me;const m=await this._def.schema._parseAsync({data:d,path:r.path,parent:r});return m.status==="aborted"?me:m.status==="dirty"||n.value==="dirty"?ps(m.value):m});{if(n.value==="aborted")return me;const d=this._def.schema._parseSync({data:c,path:r.path,parent:r});return d.status==="aborted"?me:d.status==="dirty"||n.value==="dirty"?ps(d.value):d}}if(l.type==="refinement"){const c=d=>{const m=l.refinement(d,o);if(r.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(r.common.async===!1){const d=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return d.status==="aborted"?me:(d.status==="dirty"&&n.dirty(),c(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(d=>d.status==="aborted"?me:(d.status==="dirty"&&n.dirty(),c(d.value).then(()=>({status:n.value,value:d.value}))))}if(l.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Wr(c))return me;const d=l.transform(c.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>Wr(c)?Promise.resolve(l.transform(c.value,o)).then(d=>({status:n.value,value:d})):me);Ae.assertNever(l)}}ti.create=(i,e,n)=>new ti({schema:i,typeName:Q.ZodEffects,effect:e,...we(n)});ti.createWithPreprocess=(i,e,n)=>new ti({schema:e,effect:{type:"preprocess",transform:i},typeName:Q.ZodEffects,...we(n)});class Xn extends Oe{_parse(e){return this._getType(e)===ie.undefined?un(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xn.create=(i,e)=>new Xn({innerType:i,typeName:Q.ZodOptional,...we(e)});class ni extends Oe{_parse(e){return this._getType(e)===ie.null?un(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ni.create=(i,e)=>new ni({innerType:i,typeName:Q.ZodNullable,...we(e)});class kd extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ie.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}kd.create=(i,e)=>new kd({innerType:i,typeName:Q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...we(e)});class Ld extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},l=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hu(l)?l.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Kn(r.common.issues)},input:r.data})})):{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Kn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ld.create=(i,e)=>new Ld({innerType:i,typeName:Q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...we(e)});class Dy extends Oe{_parse(e){if(this._getType(e)!==ie.nan){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.nan,received:r.parsedType}),me}return{status:"valid",value:e.data}}}Dy.create=i=>new Dy({typeName:Q.ZodNaN,...we(i)});class dE extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Kd extends Oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?me:o.status==="dirty"?(n.dirty(),ps(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const l=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?me:l.status==="dirty"?(n.dirty(),{status:"dirty",value:l.value}):this._def.out._parseSync({data:l.value,path:r.path,parent:r})}}static create(e,n){return new Kd({in:e,out:n,typeName:Q.ZodPipeline})}}class Dd extends Oe{_parse(e){const n=this._def.innerType._parse(e),r=l=>(Wr(l)&&(l.value=Object.freeze(l.value)),l);return hu(n)?n.then(l=>r(l)):r(n)}unwrap(){return this._def.innerType}}Dd.create=(i,e)=>new Dd({innerType:i,typeName:Q.ZodReadonly,...we(e)});var Q;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(Q||(Q={}));const Au=Yn.create,$y=jd.create;Ca.create;const $_=jn.create,Ls=We.create;pu.create;gu.create;tr.create;ei.create;yu.create;Xn.create;ni.create;function hE(){return{}}function mE(i,e){var r,l,o;const n={type:"array"};return(r=i.type)!=null&&r._def&&((o=(l=i.type)==null?void 0:l._def)==null?void 0:o.typeName)!==Q.ZodAny&&(n.items=je(i.type._def,{...e,currentPath:[...e.currentPath,"items"]})),i.minLength&&Le(n,"minItems",i.minLength.value,i.minLength.message,e),i.maxLength&&Le(n,"maxItems",i.maxLength.value,i.maxLength.message,e),i.exactLength&&(Le(n,"minItems",i.exactLength.value,i.exactLength.message,e),Le(n,"maxItems",i.exactLength.value,i.exactLength.message,e)),n}function pE(i,e){const n={type:"integer",format:"int64"};if(!i.checks)return n;for(const r of i.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Le(n,"minimum",r.value,r.message,e):Le(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Le(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Le(n,"maximum",r.value,r.message,e):Le(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Le(n,"maximum",r.value,r.message,e));break;case"multipleOf":Le(n,"multipleOf",r.value,r.message,e);break}return n}function gE(){return{type:"boolean"}}function M_(i,e){return je(i.type._def,e)}const yE=(i,e)=>je(i.innerType._def,e);function I_(i,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((l,o)=>I_(i,e,l))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return bE(i,e)}}const bE=(i,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of i.checks)switch(r.kind){case"min":Le(n,"minimum",r.value,r.message,e);break;case"max":Le(n,"maximum",r.value,r.message,e);break}return n};function _E(i,e){return{...je(i.innerType._def,e),default:i.defaultValue()}}function vE(i,e){return e.effectStrategy==="input"?je(i.schema._def,e):{}}function wE(i){return{type:"string",enum:Array.from(i.values)}}const SE=i=>"type"in i&&i.type==="string"?!1:"allOf"in i;function EE(i,e){const n=[je(i.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),je(i.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return n.forEach(o=>{if(SE(o))l.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:d,...m}=o;c=m}else r=void 0;l.push(c)}}),l.length?{allOf:l,...r}:void 0}function TE(i,e){const n=typeof i.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(i.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[i.value]}:{type:n==="bigint"?"integer":n,const:i.value}}let mf;const dn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(mf===void 0&&(mf=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),mf),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function P_(i,e){const n={type:"string"};if(i.checks)for(const r of i.checks)switch(r.kind){case"min":Le(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Le(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":hn(n,"email",r.message,e);break;case"format:idn-email":hn(n,"idn-email",r.message,e);break;case"pattern:zod":Tt(n,dn.email,r.message,e);break}break;case"url":hn(n,"uri",r.message,e);break;case"uuid":hn(n,"uuid",r.message,e);break;case"regex":Tt(n,r.regex,r.message,e);break;case"cuid":Tt(n,dn.cuid,r.message,e);break;case"cuid2":Tt(n,dn.cuid2,r.message,e);break;case"startsWith":Tt(n,RegExp(`^${pf(r.value,e)}`),r.message,e);break;case"endsWith":Tt(n,RegExp(`${pf(r.value,e)}$`),r.message,e);break;case"datetime":hn(n,"date-time",r.message,e);break;case"date":hn(n,"date",r.message,e);break;case"time":hn(n,"time",r.message,e);break;case"duration":hn(n,"duration",r.message,e);break;case"length":Le(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Le(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Tt(n,RegExp(pf(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&hn(n,"ipv4",r.message,e),r.version!=="v4"&&hn(n,"ipv6",r.message,e);break}case"base64url":Tt(n,dn.base64url,r.message,e);break;case"jwt":Tt(n,dn.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Tt(n,dn.ipv4Cidr,r.message,e),r.version!=="v4"&&Tt(n,dn.ipv6Cidr,r.message,e);break}case"emoji":Tt(n,dn.emoji(),r.message,e);break;case"ulid":{Tt(n,dn.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{hn(n,"binary",r.message,e);break}case"contentEncoding:base64":{Le(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Tt(n,dn.base64,r.message,e);break}}break}case"nanoid":Tt(n,dn.nanoid,r.message,e)}return n}function pf(i,e){return e.patternStrategy==="escape"?xE(i):i}const OE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function xE(i){let e="";for(let n=0;n<i.length;n++)OE.has(i[n])||(e+="\\"),e+=i[n];return e}function hn(i,e,n,r){var l;i.format||(l=i.anyOf)!=null&&l.some(o=>o.format)?(i.anyOf||(i.anyOf=[]),i.format&&(i.anyOf.push({format:i.format,...i.errorMessage&&r.errorMessages&&{errorMessage:{format:i.errorMessage.format}}}),delete i.format,i.errorMessage&&(delete i.errorMessage.format,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Le(i,"format",e,n,r)}function Tt(i,e,n,r){var l;i.pattern||(l=i.allOf)!=null&&l.some(o=>o.pattern)?(i.allOf||(i.allOf=[]),i.pattern&&(i.allOf.push({pattern:i.pattern,...i.errorMessage&&r.errorMessages&&{errorMessage:{pattern:i.errorMessage.pattern}}}),delete i.pattern,i.errorMessage&&(delete i.errorMessage.pattern,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.allOf.push({pattern:My(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Le(i,"pattern",My(e,r),n,r)}function My(i,e){var m;if(!e.applyRegexFlags||!i.flags)return i.source;const n={i:i.flags.includes("i"),m:i.flags.includes("m"),s:i.flags.includes("s")},r=n.i?i.source.toLowerCase():i.source;let l="",o=!1,c=!1,d=!1;for(let h=0;h<r.length;h++){if(o){l+=r[h],o=!1;continue}if(n.i){if(c){if(r[h].match(/[a-z]/)){d?(l+=r[h],l+=`${r[h-2]}-${r[h]}`.toUpperCase(),d=!1):r[h+1]==="-"&&((m=r[h+2])!=null&&m.match(/[a-z]/))?(l+=r[h],d=!0):l+=`${r[h]}${r[h].toUpperCase()}`;continue}}else if(r[h].match(/[a-z]/)){l+=`[${r[h]}${r[h].toUpperCase()}]`;continue}}if(n.m){if(r[h]==="^"){l+=`(^|(?<=[\r
]))`;continue}else if(r[h]==="$"){l+=`($|(?=[\r
]))`;continue}}if(n.s&&r[h]==="."){l+=c?`${r[h]}\r
`:`[${r[h]}\r
]`;continue}l+=r[h],r[h]==="\\"?o=!0:c&&r[h]==="]"?c=!1:!c&&r[h]==="["&&(c=!0)}try{new RegExp(l)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),i.source}return l}function U_(i,e){var r,l,o,c,d,m;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=i.keyType)==null?void 0:r._def.typeName)===Q.ZodEnum)return{type:"object",required:i.keyType._def.values,properties:i.keyType._def.values.reduce((h,g)=>({...h,[g]:je(i.valueType._def,{...e,currentPath:[...e.currentPath,"properties",g]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:je(i.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((l=i.keyType)==null?void 0:l._def.typeName)===Q.ZodString&&((o=i.keyType._def.checks)!=null&&o.length)){const{type:h,...g}=P_(i.keyType._def,e);return{...n,propertyNames:g}}else{if(((c=i.keyType)==null?void 0:c._def.typeName)===Q.ZodEnum)return{...n,propertyNames:{enum:i.keyType._def.values}};if(((d=i.keyType)==null?void 0:d._def.typeName)===Q.ZodBranded&&i.keyType._def.type._def.typeName===Q.ZodString&&((m=i.keyType._def.type._def.checks)!=null&&m.length)){const{type:h,...g}=M_(i.keyType._def,e);return{...n,propertyNames:g}}}return n}function AE(i,e){if(e.mapStrategy==="record")return U_(i,e);const n=je(i.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=je(i.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function RE(i){const e=i.values,r=Object.keys(i.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),l=Array.from(new Set(r.map(o=>typeof o)));return{type:l.length===1?l[0]==="string"?"string":"number":["string","number"],enum:r}}function NE(){return{not:{}}}function jE(i){return i.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const bu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function CE(i,e){if(e.target==="openApi3")return Iy(i,e);const n=i.options instanceof Map?Array.from(i.options.values()):i.options;if(n.every(r=>r._def.typeName in bu&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((l,o)=>{const c=bu[o._def.typeName];return c&&!l.includes(c)?[...l,c]:l},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((l,o)=>{const c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...l,c];case"bigint":return[...l,"integer"];case"object":if(o._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(r.length===n.length){const l=r.filter((o,c,d)=>d.indexOf(o)===c);return{type:l.length>1?l:l[0],enum:n.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,l)=>[...r,...l._def.values.filter(o=>!r.includes(o))],[])};return Iy(i,e)}const Iy=(i,e)=>{const n=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((r,l)=>je(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${l}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function kE(i,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(i.innerType._def.typeName)&&(!i.innerType._def.checks||!i.innerType._def.checks.length))return e.target==="openApi3"?{type:bu[i.innerType._def.typeName],nullable:!0}:{type:[bu[i.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=je(i.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=je(i.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function LE(i,e){const n={type:"number"};if(!i.checks)return n;for(const r of i.checks)switch(r.kind){case"int":n.type="integer",C_(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Le(n,"minimum",r.value,r.message,e):Le(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Le(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Le(n,"maximum",r.value,r.message,e):Le(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Le(n,"maximum",r.value,r.message,e));break;case"multipleOf":Le(n,"multipleOf",r.value,r.message,e);break}return n}function DE(i,e){const n=e.target==="openAi",r={type:"object",properties:{}},l=[],o=i.shape();for(const d in o){let m=o[d];if(m===void 0||m._def===void 0)continue;let h=ME(m);h&&n&&(m instanceof Xn&&(m=m._def.innerType),m.isNullable()||(m=m.nullable()),h=!1);const g=je(m._def,{...e,currentPath:[...e.currentPath,"properties",d],propertyPath:[...e.currentPath,"properties",d]});g!==void 0&&(r.properties[d]=g,h||l.push(d))}l.length&&(r.required=l);const c=$E(i,e);return c!==void 0&&(r.additionalProperties=c),r}function $E(i,e){if(i.catchall._def.typeName!=="ZodNever")return je(i.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(i.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function ME(i){try{return i.isOptional()}catch{return!0}}const IE=(i,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return je(i.innerType._def,e);const n=je(i.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},PE=(i,e)=>{if(e.pipeStrategy==="input")return je(i.in._def,e);if(e.pipeStrategy==="output")return je(i.out._def,e);const n=je(i.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=je(i.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(l=>l!==void 0)}};function UE(i,e){return je(i.type._def,e)}function zE(i,e){const r={type:"array",uniqueItems:!0,items:je(i.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return i.minSize&&Le(r,"minItems",i.minSize.value,i.minSize.message,e),i.maxSize&&Le(r,"maxItems",i.maxSize.value,i.maxSize.message,e),r}function qE(i,e){return i.rest?{type:"array",minItems:i.items.length,items:i.items.map((n,r)=>je(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:je(i.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:i.items.length,maxItems:i.items.length,items:i.items.map((n,r)=>je(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function BE(){return{not:{}}}function HE(){return{}}const GE=(i,e)=>je(i.innerType._def,e),ZE=(i,e,n)=>{switch(e){case Q.ZodString:return P_(i,n);case Q.ZodNumber:return LE(i,n);case Q.ZodObject:return DE(i,n);case Q.ZodBigInt:return pE(i,n);case Q.ZodBoolean:return gE();case Q.ZodDate:return I_(i,n);case Q.ZodUndefined:return BE();case Q.ZodNull:return jE(n);case Q.ZodArray:return mE(i,n);case Q.ZodUnion:case Q.ZodDiscriminatedUnion:return CE(i,n);case Q.ZodIntersection:return EE(i,n);case Q.ZodTuple:return qE(i,n);case Q.ZodRecord:return U_(i,n);case Q.ZodLiteral:return TE(i,n);case Q.ZodEnum:return wE(i);case Q.ZodNativeEnum:return RE(i);case Q.ZodNullable:return kE(i,n);case Q.ZodOptional:return IE(i,n);case Q.ZodMap:return AE(i,n);case Q.ZodSet:return zE(i,n);case Q.ZodLazy:return()=>i.getter()._def;case Q.ZodPromise:return UE(i,n);case Q.ZodNaN:case Q.ZodNever:return NE();case Q.ZodEffects:return vE(i,n);case Q.ZodAny:return hE();case Q.ZodUnknown:return HE();case Q.ZodDefault:return _E(i,n);case Q.ZodBranded:return M_(i,n);case Q.ZodReadonly:return GE(i,n);case Q.ZodCatch:return yE(i,n);case Q.ZodPipeline:return PE(i,n);case Q.ZodFunction:case Q.ZodVoid:case Q.ZodSymbol:return;default:return(r=>{})()}};function je(i,e,n=!1){var d;const r=e.seen.get(i);if(e.override){const m=(d=e.override)==null?void 0:d.call(e,i,e,r,n);if(m!==IS)return m}if(r&&!n){const m=VE(r,e);if(m!==void 0)return m}const l={def:i,path:e.currentPath,jsonSchema:void 0};e.seen.set(i,l);const o=ZE(i,i.typeName,e),c=typeof o=="function"?je(o(),e):o;if(c&&FE(i,e,c),e.postProcess){const m=e.postProcess(c,i,e);return l.jsonSchema=c,m}return l.jsonSchema=c,c}const VE=(i,e)=>{switch(e.$refStrategy){case"root":return{$ref:i.path.join("/")};case"relative":return{$ref:YE(e.currentPath,i.path)};case"none":case"seen":return i.path.length<e.currentPath.length&&i.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},YE=(i,e)=>{let n=0;for(;n<i.length&&n<e.length&&i[n]===e[n];n++);return[(i.length-n).toString(),...e.slice(n)].join("/")},FE=(i,e,n)=>(i.description&&(n.description=i.description,e.markdownDescription&&(n.markdownDescription=i.description)),n),Ds=(i,e)=>{const n=zS(e),r=void 0,l=e==null?void 0:e.name,o=je(i._def,n,!1)??{},c=l===void 0?r?{...o,[n.definitionPath]:r}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,l].join("/"),[n.definitionPath]:{...r,[l]:o}};return n.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c};function Py(i,e=Wd){i=i.trim();const n=i.indexOf("```");if(n===-1)return e(i);let r=i.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const l=r.indexOf("```");let o=r;return l!==-1&&(o=r.substring(0,l)),e(o.trim())}function Wd(i){if(typeof i>"u")return null;try{return JSON.parse(i)}catch{}let e="";const n=[];let r=!1,l=!1;for(let o of i){if(r)o==='"'&&!l?r=!1:o===`
`&&!l?o="\\n":o==="\\"?l=!l:l=!1;else if(o==='"')r=!0,l=!1;else if(o==="{")n.push("}");else if(o==="[")n.push("]");else if(o==="}"||o==="]")if(n&&n[n.length-1]===o)n.pop();else return null;e+=o}r&&(e+='"');for(let o=n.length-1;o>=0;o-=1)e+=n[o];try{return JSON.parse(e)}catch{return null}}var gf,Uy;function XE(){return Uy||(Uy=1,gf=function(i,e){if(typeof i!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,i.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),gf}var QE=XE();const JE=ks(QE);var tu={exports:{}},zy;function KE(){if(zy)return tu.exports;zy=1;const i=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,l=/[_.\- ]+/,o=new RegExp("^"+l.source),c=new RegExp(l.source+r.source,"gu"),d=new RegExp("\\d+"+r.source,"gu"),m=(_,w,S)=>{let E=!1,x=!1,N=!1;for(let I=0;I<_.length;I++){const C=_[I];E&&i.test(C)?(_=_.slice(0,I)+"-"+_.slice(I),E=!1,N=x,x=!0,I++):x&&N&&e.test(C)?(_=_.slice(0,I-1)+"-"+_.slice(I-1),N=x,x=!1,E=!0):(E=w(C)===C&&S(C)!==C,N=x,x=S(C)===C&&w(C)!==C)}return _},h=(_,w)=>(n.lastIndex=0,_.replace(n,S=>w(S))),g=(_,w)=>(c.lastIndex=0,d.lastIndex=0,_.replace(c,(S,E)=>w(E)).replace(d,S=>w(S))),y=(_,w)=>{if(!(typeof _=="string"||Array.isArray(_)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(_)?_=_.map(N=>N.trim()).filter(N=>N.length).join("-"):_=_.trim(),_.length===0)return"";const S=w.locale===!1?N=>N.toLowerCase():N=>N.toLocaleLowerCase(w.locale),E=w.locale===!1?N=>N.toUpperCase():N=>N.toLocaleUpperCase(w.locale);return _.length===1?w.pascalCase?E(_):S(_):(_!==S(_)&&(_=m(_,S,E)),_=_.replace(o,""),w.preserveConsecutiveUppercase?_=h(_,S):_=S(_),w.pascalCase&&(_=E(_.charAt(0))+_.slice(1)),g(_,E))};return tu.exports=y,tu.exports.default=y,tu.exports}KE();function WE(i,e){return(e==null?void 0:e[i])||JE(i)}function e1(i,e,n){const r={};for(const l in i)Object.hasOwn(i,l)&&(r[e(l,n)]=i[l]);return r}function qy(i){return Array.isArray(i)?[...i]:{...i}}function t1(i,e){const n=qy(i);for(const[r,l]of Object.entries(e)){const[o,...c]=r.split(".").reverse();let d=n;for(const m of c.reverse()){if(d[m]===void 0)break;d[m]=qy(d[m]),d=d[m]}d[o]!==void 0&&(d[o]={lc:1,type:"secret",id:[l]})}return n}function z_(i){const e=Object.getPrototypeOf(i);return typeof i.lc_name=="function"&&(typeof e.lc_name!="function"||i.lc_name()!==e.lc_name())?i.lc_name():i.name}class nr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,z_(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var l;return(l=this.lc_serializable_keys)==null?void 0:l.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof nr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((l,o)=>(l[o]=o in this?this[o]:this.lc_kwargs[o],l),{});for(let l=Object.getPrototypeOf(this);l;l=Object.getPrototypeOf(l))Object.assign(e,Reflect.get(l,"lc_aliases",this)),Object.assign(n,Reflect.get(l,"lc_secrets",this)),Object.assign(r,Reflect.get(l,"lc_attributes",this));return Object.keys(n).forEach(l=>{let o=this,c=r;const[d,...m]=l.split(".").reverse();for(const h of m.reverse()){if(!(h in o)||o[h]===void 0)return;(!(h in c)||c[h]===void 0)&&(typeof o[h]=="object"&&o[h]!=null?c[h]={}:Array.isArray(o[h])&&(c[h]=[])),o=o[h],c=c[h]}d in o&&o[d]!==void 0&&(c[d]=c[d]||o[d])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:e1(Object.keys(n).length?t1(r,n):r,WE,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function xs(i){return typeof i=="object"&&i!==null&&"type"in i&&typeof i.type=="string"&&"source_type"in i&&(i.source_type==="url"||i.source_type==="base64"||i.source_type==="text"||i.source_type==="id")}function n1(i){return xs(i)&&i.source_type==="url"&&"url"in i&&typeof i.url=="string"}function a1(i){return xs(i)&&i.source_type==="base64"&&"data"in i&&typeof i.data=="string"}function r1(i){if(xs(i)){if(i.source_type==="url")return{type:"image_url",image_url:{url:i.url}};if(i.source_type==="base64"){if(!i.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${i.mime_type};base64,${i.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function si(i,e){return typeof i=="string"?i===""?e:typeof e=="string"?i+e:Array.isArray(e)&&e.some(n=>xs(n))?[{type:"text",source_type:"text",text:i},...e]:[{type:"text",text:i},...e]:Array.isArray(e)?Ru(i,e)??[...i,...e]:e===""?i:Array.isArray(i)&&i.some(n=>xs(n))?[...i,{type:"file",source_type:"text",text:e}]:[...i,{type:"text",text:e}]}function i1(i,e){return i==="error"||e==="error"?"error":"success"}function s1(i,e){function n(r,l){if(typeof r!="object"||r===null||r===void 0)return r;if(l>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(c=>n(c,l+1));const o={};for(const c of Object.keys(r))o[c]=n(r[c],l+1);return o}return JSON.stringify(n(i,0),null,2)}class li extends nr{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=s1(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function At(i,e){const n={...i};for(const[r,l]of Object.entries(e))if(n[r]==null)n[r]=l;else{if(l==null)continue;if(typeof n[r]!=typeof l||Array.isArray(n[r])!==Array.isArray(l))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=l}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=At(n[r],l);else if(Array.isArray(n[r]))n[r]=Ru(n[r],l);else{if(n[r]===l)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Ru(i,e){if(!(i===void 0&&e===void 0)){if(i===void 0||e===void 0)return i||e;{const n=[...i];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const l=n.findIndex(o=>o.index===r.index);l!==-1?n[l]=At(n[l],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function l1(i,e){if(!i&&!e)throw new Error("Cannot merge two undefined objects.");if(!i||!e)return i||e;if(typeof i!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof i}
Right ${typeof e}`);if(typeof i=="string"&&typeof e=="string")return i+e;if(Array.isArray(i)&&Array.isArray(e))return Ru(i,e);if(typeof i=="object"&&typeof e=="object")return At(i,e);if(i===e)return i;throw new Error(`Can not merge objects of different types.
Left ${i}
Right ${e}`)}class ui extends li{}function u1(i){return typeof i.role=="string"}function Nu(i){return typeof(i==null?void 0:i._getType)=="function"}function o1(i){return Nu(i)&&typeof i.concat=="function"}class c1 extends li{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class eh extends ui{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new eh({content:si(this.content,e.content),additional_kwargs:At(this.additional_kwargs,e.additional_kwargs),response_metadata:At(this.response_metadata,e.response_metadata),artifact:l1(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:i1(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function f1(i){const e=[],n=[];for(const r of i)if(r.function){const l=r.function.name;try{const o=JSON.parse(r.function.arguments),c={name:l||"",args:o||{},id:r.id};e.push(c)}catch{n.push({name:l,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class $d extends li{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var l;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const o=(l=r.additional_kwargs)==null?void 0:l.tool_calls,c=r.tool_calls;o!=null&&o.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&c===void 0){const[d,m]=f1(o);r.tool_calls=d??[],r.invalid_tool_calls=m??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function th(i){return i._getType()==="ai"}function By(i){return i._getType()==="ai"}class rr extends ui{constructor(e){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],l=[];for(const o of e.tool_call_chunks){let c={};try{if(c=Wd(o.args||"{}"),c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:o.name??"",args:c,id:o.id,type:"tool_call"})}catch{l.push({name:o.name,args:o.args,id:o.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:r,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,l,o,c,d,m,h,g,y,_,w,S,E,x,N,I,C,Y,q,ee,ae,K,Be,St,rt,Ge,Nt,W,F,j,U,Z,J,T,P,G,V,te,oe,ce;const n={content:si(this.content,e.content),additional_kwargs:At(this.additional_kwargs,e.additional_kwargs),response_metadata:At(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Qe=Ru(this.tool_call_chunks,e.tool_call_chunks);Qe!==void 0&&Qe.length>0&&(n.tool_call_chunks=Qe)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Qe={...(((l=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:l.audio)!==void 0||((c=(o=e.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:c.audio)!==void 0)&&{audio:(((m=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:m.audio)??0)+(((g=(h=e.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:g.audio)??0)},...(((_=(y=this.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:_.cache_read)!==void 0||((S=(w=e.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:S.cache_read)!==void 0)&&{cache_read:(((x=(E=this.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:x.cache_read)??0)+(((I=(N=e.usage_metadata)==null?void 0:N.input_token_details)==null?void 0:I.cache_read)??0)},...(((Y=(C=this.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:Y.cache_creation)!==void 0||((ee=(q=e.usage_metadata)==null?void 0:q.input_token_details)==null?void 0:ee.cache_creation)!==void 0)&&{cache_creation:(((K=(ae=this.usage_metadata)==null?void 0:ae.input_token_details)==null?void 0:K.cache_creation)??0)+(((St=(Be=e.usage_metadata)==null?void 0:Be.input_token_details)==null?void 0:St.cache_creation)??0)}},Pe={...(((Ge=(rt=this.usage_metadata)==null?void 0:rt.output_token_details)==null?void 0:Ge.audio)!==void 0||((W=(Nt=e.usage_metadata)==null?void 0:Nt.output_token_details)==null?void 0:W.audio)!==void 0)&&{audio:(((j=(F=this.usage_metadata)==null?void 0:F.output_token_details)==null?void 0:j.audio)??0)+(((Z=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:Z.audio)??0)},...(((T=(J=this.usage_metadata)==null?void 0:J.output_token_details)==null?void 0:T.reasoning)!==void 0||((G=(P=e.usage_metadata)==null?void 0:P.output_token_details)==null?void 0:G.reasoning)!==void 0)&&{reasoning:(((te=(V=this.usage_metadata)==null?void 0:V.output_token_details)==null?void 0:te.reasoning)??0)+(((ce=(oe=e.usage_metadata)==null?void 0:oe.output_token_details)==null?void 0:ce.reasoning)??0)}},Qt=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Da=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ir={input_tokens:Qt.input_tokens+Da.input_tokens,output_tokens:Qt.output_tokens+Da.output_tokens,total_tokens:Qt.total_tokens+Da.total_tokens,...Object.keys(Qe).length>0&&{input_token_details:Qe},...Object.keys(Pe).length>0&&{output_token_details:Pe}};n.usage_metadata=ir}return new rr(n)}}class ju extends li{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return ju}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Cu extends ui{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Cu({content:si(this.content,e.content),additional_kwargs:At(this.additional_kwargs,e.additional_kwargs),response_metadata:At(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class ku extends ui{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new ku({content:si(this.content,e.content),additional_kwargs:At(this.additional_kwargs,e.additional_kwargs),response_metadata:At(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Lu extends li{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,n){super(e,n)}}class Du extends ui{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,n){super(e,n)}concat(e){return new Du({content:si(this.content,e.content),additional_kwargs:At(this.additional_kwargs,e.additional_kwargs),response_metadata:At(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class Hy extends li{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,n){super(e,n)}}class As extends ui{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,n){super(e,n)}concat(e){return new As({content:si(this.content,e.content),additional_kwargs:At(this.additional_kwargs,e.additional_kwargs),response_metadata:At(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function q_(i,e){return i.lc_error_code=e,i.message=`${i.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,i}function B_(i){return!!(i&&typeof i=="object"&&"type"in i&&i.type==="tool_call")}class d1 extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function h1(i){return B_(i)?i:typeof i.id=="string"&&i.type==="function"&&typeof i.function=="object"&&i.function!==null&&"arguments"in i.function&&typeof i.function.arguments=="string"&&"name"in i.function&&typeof i.function.name=="string"?{id:i.id,args:JSON.parse(i.function.arguments),name:i.function.name,type:"tool_call"}:i}function m1(i){return typeof i=="object"&&i!=null&&i.lc===1&&Array.isArray(i.id)&&i.kwargs!=null&&typeof i.kwargs=="object"}function yf(i){let e,n;if(m1(i)){const r=i.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=i.kwargs}else{const{type:r,...l}=i;e=r,n=l}if(e==="human"||e==="user")return new Lu(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...l}=n;if(!Array.isArray(r))return new $d(n);const o=r.map(h1);return new $d({...l,tool_calls:o})}else{if(e==="system")return new Hy(n);if(e==="developer")return new Hy({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new c1({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw q_(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(i,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function gs(i){if(typeof i=="string")return new Lu(i);if(Nu(i))return i;if(Array.isArray(i)){const[e,n]=i;return yf({type:e,content:n})}else if(u1(i)){const{role:e,...n}=i;return yf({...n,type:e})}else return yf(i)}function H_(i,e="Human",n="AI"){const r=[];for(const l of i){let o;if(l._getType()==="human")o=e;else if(l._getType()==="ai")o=n;else if(l._getType()==="system")o="System";else if(l._getType()==="function")o="Function";else if(l._getType()==="tool")o="Tool";else if(l._getType()==="generic")o=l.role;else throw new Error(`Got unsupported message type: ${l._getType()}`);const c=l.name?`${l.name}, `:"",d=typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2);r.push(`${o}: ${c}${d}`)}return r.join(`
`)}function p1(i){var n;const e=i._getType();if(e==="human")return new Du({...i});if(e==="ai"){let r={...i};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(l=>({...l,type:"tool_call_chunk",index:void 0,args:JSON.stringify(l.args)}))}),new rr({...r})}else{if(e==="system")return new As({...i});if(e==="function")return new ku({...i});if(ju.isInstance(i))return new Cu({...i});throw new Error("Unknown message type.")}}var fs={exports:{}},bf={},_f,Gy;function g1(){if(Gy)return _f;Gy=1;function i(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return _f=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var l=this;return this._timer=setTimeout(function(){l._attempts++,l._operationTimeoutCb&&(l._timeout=setTimeout(function(){l._operationTimeoutCb(l._attempts)},l._operationTimeout),l._options.unref&&l._timeout.unref()),l._fn(l._attempts)},r),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},i.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},i.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,r=0,l=0;l<this._errors.length;l++){var o=this._errors[l],c=o.message,d=(e[c]||0)+1;e[c]=d,d>=r&&(n=o,r=d)}return n},_f}var Zy;function y1(){return Zy||(Zy=1,function(i){var e=g1();i.operation=function(n){var r=i.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},i.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var l in n)r[l]=n[l];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],c=0;c<r.retries;c++)o.push(this.createTimeout(c,r));return n&&n.forever&&!o.length&&o.push(this.createTimeout(c,r)),o.sort(function(d,m){return d-m}),o},i.createTimeout=function(n,r){var l=r.randomize?Math.random()+1:1,o=Math.round(l*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return o=Math.min(o,r.maxTimeout),o},i.wrap=function(n,r,l){if(r instanceof Array&&(l=r,r=null),!l){l=[];for(var o in n)typeof n[o]=="function"&&l.push(o)}for(var c=0;c<l.length;c++){var d=l[c],m=n[d];n[d]=(function(g){var y=i.operation(r),_=Array.prototype.slice.call(arguments,1),w=_.pop();_.push(function(S){y.retry(S)||(S&&(arguments[0]=y.mainError()),w.apply(this,arguments))}),y.attempt(function(){g.apply(n,_)})}).bind(n,m),n[d].options=r}}}(bf)),bf}var vf,Vy;function b1(){return Vy||(Vy=1,vf=y1()),vf}var Yy;function _1(){if(Yy)return fs.exports;Yy=1;const i=b1(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const r=(c,d,m)=>{const h=m.retries-(d-1);return c.attemptNumber=d,c.retriesLeft=h,c},l=c=>e.includes(c),o=(c,d)=>new Promise((m,h)=>{d={onFailedAttempt:()=>{},retries:10,...d};const g=i.operation(d);g.attempt(async y=>{try{m(await c(y))}catch(_){if(!(_ instanceof Error)){h(new TypeError(`Non-error was thrown: "${_}". You should only throw errors.`));return}if(_ instanceof n)g.stop(),h(_.originalError);else if(_ instanceof TypeError&&!l(_.message))g.stop(),h(_);else{r(_,y,d);try{await d.onFailedAttempt(_)}catch(w){h(w);return}g.retry(_)||h(g.mainError())}}})});return fs.exports=o,fs.exports.default=o,fs.exports.AbortError=n,fs.exports}var v1=_1();const _u=ks(v1),w1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ys(i){return typeof i=="string"&&w1.test(i)}var pt=[];for(var wf=0;wf<256;++wf)pt.push((wf+256).toString(16).slice(1));function S1(i,e=0){return(pt[i[e+0]]+pt[i[e+1]]+pt[i[e+2]]+pt[i[e+3]]+"-"+pt[i[e+4]]+pt[i[e+5]]+"-"+pt[i[e+6]]+pt[i[e+7]]+"-"+pt[i[e+8]]+pt[i[e+9]]+"-"+pt[i[e+10]]+pt[i[e+11]]+pt[i[e+12]]+pt[i[e+13]]+pt[i[e+14]]+pt[i[e+15]]).toLowerCase()}var nu,E1=new Uint8Array(16);function T1(){if(!nu&&(nu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nu(E1)}var O1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Fy={randomUUID:O1};function xt(i,e,n){if(Fy.randomUUID&&!i)return Fy.randomUUID();i=i||{};var r=i.random||(i.rng||T1)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,S1(r)}var au={},Sf={exports:{}},Xy;function x1(){return Xy||(Xy=1,function(i){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function l(m,h,g){this.fn=m,this.context=h,this.once=g||!1}function o(m,h,g,y,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var w=new l(g,y||m,_),S=n?n+h:h;return m._events[S]?m._events[S].fn?m._events[S]=[m._events[S],w]:m._events[S].push(w):(m._events[S]=w,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new r:delete m._events[h]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],g,y;if(this._eventsCount===0)return h;for(y in g=this._events)e.call(g,y)&&h.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},d.prototype.listeners=function(h){var g=n?n+h:h,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,w=y.length,S=new Array(w);_<w;_++)S[_]=y[_].fn;return S},d.prototype.listenerCount=function(h){var g=n?n+h:h,y=this._events[g];return y?y.fn?1:y.length:0},d.prototype.emit=function(h,g,y,_,w,S){var E=n?n+h:h;if(!this._events[E])return!1;var x=this._events[E],N=arguments.length,I,C;if(x.fn){switch(x.once&&this.removeListener(h,x.fn,void 0,!0),N){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,g),!0;case 3:return x.fn.call(x.context,g,y),!0;case 4:return x.fn.call(x.context,g,y,_),!0;case 5:return x.fn.call(x.context,g,y,_,w),!0;case 6:return x.fn.call(x.context,g,y,_,w,S),!0}for(C=1,I=new Array(N-1);C<N;C++)I[C-1]=arguments[C];x.fn.apply(x.context,I)}else{var Y=x.length,q;for(C=0;C<Y;C++)switch(x[C].once&&this.removeListener(h,x[C].fn,void 0,!0),N){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,g);break;case 3:x[C].fn.call(x[C].context,g,y);break;case 4:x[C].fn.call(x[C].context,g,y,_);break;default:if(!I)for(q=1,I=new Array(N-1);q<N;q++)I[q-1]=arguments[q];x[C].fn.apply(x[C].context,I)}}return!0},d.prototype.on=function(h,g,y){return o(this,h,g,y,!1)},d.prototype.once=function(h,g,y){return o(this,h,g,y,!0)},d.prototype.removeListener=function(h,g,y,_){var w=n?n+h:h;if(!this._events[w])return this;if(!g)return c(this,w),this;var S=this._events[w];if(S.fn)S.fn===g&&(!_||S.once)&&(!y||S.context===y)&&c(this,w);else{for(var E=0,x=[],N=S.length;E<N;E++)(S[E].fn!==g||_&&!S[E].once||y&&S[E].context!==y)&&x.push(S[E]);x.length?this._events[w]=x.length===1?x[0]:x:c(this,w)}return this},d.prototype.removeAllListeners=function(h){var g;return h?(g=n?n+h:h,this._events[g]&&c(this,g)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,i.exports=d}(Sf)),Sf.exports}var ds={exports:{}},Ef,Qy;function A1(){return Qy||(Qy=1,Ef=(i,e)=>(e=e||(()=>{}),i.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})))),Ef}var Jy;function R1(){if(Jy)return ds.exports;Jy=1;const i=A1();class e extends Error{constructor(l){super(l),this.name="TimeoutError"}}const n=(r,l,o)=>new Promise((c,d)=>{if(typeof l!="number"||l<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(l===1/0){c(r);return}const m=setTimeout(()=>{if(typeof o=="function"){try{c(o())}catch(y){d(y)}return}const h=typeof o=="string"?o:`Promise timed out after ${l} milliseconds`,g=o instanceof Error?o:new e(h);typeof r.cancel=="function"&&r.cancel(),d(g)},l);i(r.then(c,d),()=>{clearTimeout(m)})});return ds.exports=n,ds.exports.default=n,ds.exports.TimeoutError=e,ds.exports}var ru={},iu={},Ky;function N1(){if(Ky)return iu;Ky=1,Object.defineProperty(iu,"__esModule",{value:!0});function i(e,n,r){let l=0,o=e.length;for(;o>0;){const c=o/2|0;let d=l+c;r(e[d],n)<=0?(l=++d,o-=c+1):o=c}return l}return iu.default=i,iu}var Wy;function j1(){if(Wy)return ru;Wy=1,Object.defineProperty(ru,"__esModule",{value:!0});const i=N1();class e{constructor(){this._queue=[]}enqueue(r,l){l=Object.assign({priority:0},l);const o={priority:l.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=l.priority){this._queue.push(o);return}const c=i.default(this._queue,o,(d,m)=>m.priority-d.priority);this._queue.splice(c,0,o)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(l=>l.priority===r.priority).map(l=>l.run)}get size(){return this._queue.length}}return ru.default=e,ru}var eb;function C1(){if(eb)return au;eb=1,Object.defineProperty(au,"__esModule",{value:!0});const i=x1(),e=R1(),n=j1(),r=()=>{},l=new e.TimeoutError;class o extends i{constructor(d){var m,h,g,y;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,d=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},d),!(typeof d.intervalCap=="number"&&d.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(m=d.intervalCap)===null||m===void 0?void 0:m.toString())!==null&&h!==void 0?h:""}\` (${typeof d.intervalCap})`);if(d.interval===void 0||!(Number.isFinite(d.interval)&&d.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(y=(g=d.interval)===null||g===void 0?void 0:g.toString())!==null&&y!==void 0?y:""}\` (${typeof d.interval})`);this._carryoverConcurrencyCount=d.carryoverConcurrencyCount,this._isIntervalIgnored=d.intervalCap===1/0||d.interval===0,this._intervalCap=d.intervalCap,this._interval=d.interval,this._queue=new d.queueClass,this._queueClass=d.queueClass,this.concurrency=d.concurrency,this._timeout=d.timeout,this._throwOnTimeout=d.throwOnTimeout===!0,this._isPaused=d.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const d=Date.now();if(this._intervalId===void 0){const m=this._intervalEnd-d;if(m<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},m)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const d=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const m=this._queue.dequeue();return m?(this.emit("active"),m(),d&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(d){if(!(typeof d=="number"&&d>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${d}\` (${typeof d})`);this._concurrency=d,this._processQueue()}async add(d,m={}){return new Promise((h,g)=>{const y=async()=>{this._pendingCount++,this._intervalCount++;try{const _=this._timeout===void 0&&m.timeout===void 0?d():e.default(Promise.resolve(d()),m.timeout===void 0?this._timeout:m.timeout,()=>{(m.throwOnTimeout===void 0?this._throwOnTimeout:m.throwOnTimeout)&&g(l)});h(await _)}catch(_){g(_)}this._next()};this._queue.enqueue(y,m),this._tryToStartAnother(),this.emit("add")})}async addAll(d,m){return Promise.all(d.map(async h=>this.add(h,m)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(d=>{const m=this._resolveEmpty;this._resolveEmpty=()=>{m(),d()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(d=>{const m=this._resolveIdle;this._resolveIdle=()=>{m(),d()}})}get size(){return this._queue.size}sizeBy(d){return this._queue.filter(d).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(d){this._timeout=d}}return au.default=o,au}var k1=C1();const Qn=ks(k1),L1=(...i)=>fetch(...i),G_=Symbol.for("ls:fetch_implementation"),D1=()=>{const i=globalThis[G_];return i?typeof i=="function"&&"Headers"in i&&"Request"in i&&"Response"in i:!1},ue=i=>async(...e)=>{if(i||Rn("DEBUG")==="true"){const[r,l]=e;console.log(` ${(l==null?void 0:l.method)||"GET"} ${r}`)}const n=await(globalThis[G_]??L1)(...e);return(i||Rn("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},$1=[400,401,403,404,405,406,407,408],M1=[409];let tb=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in Qn?this.queue=new Qn.default({concurrency:this.maxConcurrency}):this.queue=new Qn({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>_u(()=>e(...n).catch(l=>{throw l instanceof Error?l:new Error(l)}),{async onFailedAttempt(l){if(l.message.startsWith("Cancel")||l.message.startsWith("TimeoutError")||l.message.startsWith("AbortError")||(l==null?void 0:l.code)==="ECONNABORTED")throw l;const o=l==null?void 0:l.response,c=o==null?void 0:o.status;if(c){if($1.includes(+c))throw l;if(M1.includes(+c))return;r&&await r(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((l,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>ue(this.debug)(...e).then(n=>n.ok?n:Promise.reject(n)))}};function nb(i){return typeof(i==null?void 0:i._getType)=="function"}function ab(i){const e={type:i._getType(),data:{content:i.content}};return i!=null&&i.additional_kwargs&&Object.keys(i.additional_kwargs).length>0&&(e.data.additional_kwargs={...i.additional_kwargs}),e}function pe(i,e){if(!ys(i)){const n=e!==void 0?`Invalid UUID for ${e}: ${i}`:`Invalid UUID: ${i}`;throw new Error(n)}return i}const rb={};function Z_(i){rb[i]||(console.warn(i),rb[i]=!0)}var su={exports:{}},Tf,ib;function $u(){if(ib)return Tf;ib=1;const i="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,l=e-6;return Tf={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:l,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:i,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Tf}var Of,sb;function Mu(){if(sb)return Of;sb=1;var i={};return Of=typeof process=="object"&&i&&i.NODE_DEBUG&&/\bsemver\b/i.test(i.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Of}var lb;function $s(){return lb||(lb=1,function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:l}=$u(),o=Mu();e=i.exports={};const c=e.re=[],d=e.safeRe=[],m=e.src=[],h=e.safeSrc=[],g=e.t={};let y=0;const _="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",l],[_,r]],S=x=>{for(const[N,I]of w)x=x.split(`${N}*`).join(`${N}{0,${I}}`).split(`${N}+`).join(`${N}{1,${I}}`);return x},E=(x,N,I)=>{const C=S(N),Y=y++;o(x,Y,N),g[x]=Y,m[Y]=N,h[Y]=C,c[Y]=new RegExp(N,I?"g":void 0),d[Y]=new RegExp(C,I?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),E("MAINVERSION",`(${m[g.NUMERICIDENTIFIER]})\\.(${m[g.NUMERICIDENTIFIER]})\\.(${m[g.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${m[g.NUMERICIDENTIFIERLOOSE]})\\.(${m[g.NUMERICIDENTIFIERLOOSE]})\\.(${m[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${m[g.NONNUMERICIDENTIFIER]}|${m[g.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${m[g.NONNUMERICIDENTIFIER]}|${m[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${m[g.PRERELEASEIDENTIFIER]}(?:\\.${m[g.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${m[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${m[g.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${_}+`),E("BUILD",`(?:\\+(${m[g.BUILDIDENTIFIER]}(?:\\.${m[g.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${m[g.MAINVERSION]}${m[g.PRERELEASE]}?${m[g.BUILD]}?`),E("FULL",`^${m[g.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${m[g.MAINVERSIONLOOSE]}${m[g.PRERELEASELOOSE]}?${m[g.BUILD]}?`),E("LOOSE",`^${m[g.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${m[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${m[g.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${m[g.XRANGEIDENTIFIER]})(?:\\.(${m[g.XRANGEIDENTIFIER]})(?:\\.(${m[g.XRANGEIDENTIFIER]})(?:${m[g.PRERELEASE]})?${m[g.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${m[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[g.XRANGEIDENTIFIERLOOSE]})(?:${m[g.PRERELEASELOOSE]})?${m[g.BUILD]}?)?)?`),E("XRANGE",`^${m[g.GTLT]}\\s*${m[g.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${m[g.GTLT]}\\s*${m[g.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),E("COERCE",`${m[g.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",m[g.COERCEPLAIN]+`(?:${m[g.PRERELEASE]})?(?:${m[g.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",m[g.COERCE],!0),E("COERCERTLFULL",m[g.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${m[g.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",E("TILDE",`^${m[g.LONETILDE]}${m[g.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${m[g.LONETILDE]}${m[g.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${m[g.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",E("CARET",`^${m[g.LONECARET]}${m[g.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${m[g.LONECARET]}${m[g.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${m[g.GTLT]}\\s*(${m[g.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${m[g.GTLT]}\\s*(${m[g.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${m[g.GTLT]}\\s*(${m[g.LOOSEPLAIN]}|${m[g.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${m[g.XRANGEPLAIN]})\\s+-\\s+(${m[g.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${m[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${m[g.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(su,su.exports)),su.exports}var xf,ub;function nh(){if(ub)return xf;ub=1;const i=Object.freeze({loose:!0}),e=Object.freeze({});return xf=r=>r?typeof r!="object"?i:r:e,xf}var Af,ob;function V_(){if(ob)return Af;ob=1;const i=/^[0-9]+$/,e=(r,l)=>{const o=i.test(r),c=i.test(l);return o&&c&&(r=+r,l=+l),r===l?0:o&&!c?-1:c&&!o?1:r<l?-1:1};return Af={compareIdentifiers:e,rcompareIdentifiers:(r,l)=>e(l,r)},Af}var Rf,cb;function Rt(){if(cb)return Rf;cb=1;const i=Mu(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=$u(),{safeRe:r,t:l}=$s(),o=nh(),{compareIdentifiers:c}=V_();class d{constructor(h,g){if(g=o(g),h instanceof d){if(h.loose===!!g.loose&&h.includePrerelease===!!g.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>e)throw new TypeError(`version is longer than ${e} characters`);i("SemVer",h,g),this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease;const y=h.trim().match(g.loose?r[l.LOOSE]:r[l.FULL]);if(!y)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+y[1],this.minor=+y[2],this.patch=+y[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");y[4]?this.prerelease=y[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const w=+_;if(w>=0&&w<n)return w}return _}):this.prerelease=[],this.build=y[5]?y[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(i("SemVer.compare",this.version,this.options,h),!(h instanceof d)){if(typeof h=="string"&&h===this.version)return 0;h=new d(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof d||(h=new d(h,this.options)),c(this.major,h.major)||c(this.minor,h.minor)||c(this.patch,h.patch)}comparePre(h){if(h instanceof d||(h=new d(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let g=0;do{const y=this.prerelease[g],_=h.prerelease[g];if(i("prerelease compare",g,y,_),y===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(y===void 0)return-1;if(y===_)continue;return c(y,_)}while(++g)}compareBuild(h){h instanceof d||(h=new d(h,this.options));let g=0;do{const y=this.build[g],_=h.build[g];if(i("build compare",g,y,_),y===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(y===void 0)return-1;if(y===_)continue;return c(y,_)}while(++g)}inc(h,g,y){if(h.startsWith("pre")){if(!g&&y===!1)throw new Error("invalid increment argument: identifier is empty");if(g){const _=`-${g}`.match(this.options.loose?r[l.PRERELEASELOOSE]:r[l.PRERELEASE]);if(!_||_[1]!==g)throw new Error(`invalid identifier: ${g}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",g,y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",g,y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",g,y),this.inc("pre",g,y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",g,y),this.inc("pre",g,y);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(y)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let w=this.prerelease.length;for(;--w>=0;)typeof this.prerelease[w]=="number"&&(this.prerelease[w]++,w=-2);if(w===-1){if(g===this.prerelease.join(".")&&y===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(g){let w=[g,_];y===!1&&(w=[g]),c(this.prerelease[0],g)===0?isNaN(this.prerelease[1])&&(this.prerelease=w):this.prerelease=w}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Rf=d,Rf}var Nf,fb;function oi(){if(fb)return Nf;fb=1;const i=Rt();return Nf=(n,r,l=!1)=>{if(n instanceof i)return n;try{return new i(n,r)}catch(o){if(!l)return null;throw o}},Nf}var jf,db;function I1(){if(db)return jf;db=1;const i=oi();return jf=(n,r)=>{const l=i(n,r);return l?l.version:null},jf}var Cf,hb;function P1(){if(hb)return Cf;hb=1;const i=oi();return Cf=(n,r)=>{const l=i(n.trim().replace(/^[=v]+/,""),r);return l?l.version:null},Cf}var kf,mb;function U1(){if(mb)return kf;mb=1;const i=Rt();return kf=(n,r,l,o,c)=>{typeof l=="string"&&(c=o,o=l,l=void 0);try{return new i(n instanceof i?n.version:n,l).inc(r,o,c).version}catch{return null}},kf}var Lf,pb;function z1(){if(pb)return Lf;pb=1;const i=oi();return Lf=(n,r)=>{const l=i(n,null,!0),o=i(r,null,!0),c=l.compare(o);if(c===0)return null;const d=c>0,m=d?l:o,h=d?o:l,g=!!m.prerelease.length;if(!!h.prerelease.length&&!g){if(!h.patch&&!h.minor)return"major";if(h.compareMain(m)===0)return h.minor&&!h.patch?"minor":"patch"}const _=g?"pre":"";return l.major!==o.major?_+"major":l.minor!==o.minor?_+"minor":l.patch!==o.patch?_+"patch":"prerelease"},Lf}var Df,gb;function q1(){if(gb)return Df;gb=1;const i=Rt();return Df=(n,r)=>new i(n,r).major,Df}var $f,yb;function B1(){if(yb)return $f;yb=1;const i=Rt();return $f=(n,r)=>new i(n,r).minor,$f}var Mf,bb;function H1(){if(bb)return Mf;bb=1;const i=Rt();return Mf=(n,r)=>new i(n,r).patch,Mf}var If,_b;function G1(){if(_b)return If;_b=1;const i=oi();return If=(n,r)=>{const l=i(n,r);return l&&l.prerelease.length?l.prerelease:null},If}var Pf,vb;function _n(){if(vb)return Pf;vb=1;const i=Rt();return Pf=(n,r,l)=>new i(n,l).compare(new i(r,l)),Pf}var Uf,wb;function Z1(){if(wb)return Uf;wb=1;const i=_n();return Uf=(n,r,l)=>i(r,n,l),Uf}var zf,Sb;function V1(){if(Sb)return zf;Sb=1;const i=_n();return zf=(n,r)=>i(n,r,!0),zf}var qf,Eb;function ah(){if(Eb)return qf;Eb=1;const i=Rt();return qf=(n,r,l)=>{const o=new i(n,l),c=new i(r,l);return o.compare(c)||o.compareBuild(c)},qf}var Bf,Tb;function Y1(){if(Tb)return Bf;Tb=1;const i=ah();return Bf=(n,r)=>n.sort((l,o)=>i(l,o,r)),Bf}var Hf,Ob;function F1(){if(Ob)return Hf;Ob=1;const i=ah();return Hf=(n,r)=>n.sort((l,o)=>i(o,l,r)),Hf}var Gf,xb;function Iu(){if(xb)return Gf;xb=1;const i=_n();return Gf=(n,r,l)=>i(n,r,l)>0,Gf}var Zf,Ab;function rh(){if(Ab)return Zf;Ab=1;const i=_n();return Zf=(n,r,l)=>i(n,r,l)<0,Zf}var Vf,Rb;function Y_(){if(Rb)return Vf;Rb=1;const i=_n();return Vf=(n,r,l)=>i(n,r,l)===0,Vf}var Yf,Nb;function F_(){if(Nb)return Yf;Nb=1;const i=_n();return Yf=(n,r,l)=>i(n,r,l)!==0,Yf}var Ff,jb;function ih(){if(jb)return Ff;jb=1;const i=_n();return Ff=(n,r,l)=>i(n,r,l)>=0,Ff}var Xf,Cb;function sh(){if(Cb)return Xf;Cb=1;const i=_n();return Xf=(n,r,l)=>i(n,r,l)<=0,Xf}var Qf,kb;function X_(){if(kb)return Qf;kb=1;const i=Y_(),e=F_(),n=Iu(),r=ih(),l=rh(),o=sh();return Qf=(d,m,h,g)=>{switch(m){case"===":return typeof d=="object"&&(d=d.version),typeof h=="object"&&(h=h.version),d===h;case"!==":return typeof d=="object"&&(d=d.version),typeof h=="object"&&(h=h.version),d!==h;case"":case"=":case"==":return i(d,h,g);case"!=":return e(d,h,g);case">":return n(d,h,g);case">=":return r(d,h,g);case"<":return l(d,h,g);case"<=":return o(d,h,g);default:throw new TypeError(`Invalid operator: ${m}`)}},Qf}var Jf,Lb;function X1(){if(Lb)return Jf;Lb=1;const i=Rt(),e=oi(),{safeRe:n,t:r}=$s();return Jf=(o,c)=>{if(o instanceof i)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;c=c||{};let d=null;if(!c.rtl)d=o.match(c.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const w=c.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let S;for(;(S=w.exec(o))&&(!d||d.index+d[0].length!==o.length);)(!d||S.index+S[0].length!==d.index+d[0].length)&&(d=S),w.lastIndex=S.index+S[1].length+S[2].length;w.lastIndex=-1}if(d===null)return null;const m=d[2],h=d[3]||"0",g=d[4]||"0",y=c.includePrerelease&&d[5]?`-${d[5]}`:"",_=c.includePrerelease&&d[6]?`+${d[6]}`:"";return e(`${m}.${h}.${g}${y}${_}`,c)},Jf}var Kf,Db;function Q1(){if(Db)return Kf;Db=1;class i{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return Kf=i,Kf}var Wf,$b;function vn(){if($b)return Wf;$b=1;const i=/\s+/g;class e{constructor(F,j){if(j=l(j),F instanceof e)return F.loose===!!j.loose&&F.includePrerelease===!!j.includePrerelease?F:new e(F.raw,j);if(F instanceof o)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=F.trim().replace(i," "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(Z=>!E(Z[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const Z of this.set)if(Z.length===1&&x(Z[0])){this.set=[Z];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const j=this.set[F];for(let U=0;U<j.length;U++)U>0&&(this.formatted+=" "),this.formatted+=j[U].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const U=((this.options.includePrerelease&&w)|(this.options.loose&&S))+":"+F,Z=r.get(U);if(Z)return Z;const J=this.options.loose,T=J?m[h.HYPHENRANGELOOSE]:m[h.HYPHENRANGE];F=F.replace(T,Ge(this.options.includePrerelease)),c("hyphen replace",F),F=F.replace(m[h.COMPARATORTRIM],g),c("comparator trim",F),F=F.replace(m[h.TILDETRIM],y),c("tilde trim",F),F=F.replace(m[h.CARETTRIM],_),c("caret trim",F);let P=F.split(" ").map(oe=>I(oe,this.options)).join(" ").split(/\s+/).map(oe=>rt(oe,this.options));J&&(P=P.filter(oe=>(c("loose invalid filter",oe,this.options),!!oe.match(m[h.COMPARATORLOOSE])))),c("range list",P);const G=new Map,V=P.map(oe=>new o(oe,this.options));for(const oe of V){if(E(oe))return[oe];G.set(oe.value,oe)}G.size>1&&G.has("")&&G.delete("");const te=[...G.values()];return r.set(U,te),te}intersects(F,j){if(!(F instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>N(U,j)&&F.set.some(Z=>N(Z,j)&&U.every(J=>Z.every(T=>J.intersects(T,j)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new d(F,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(Nt(this.set[j],F,this.options))return!0;return!1}}Wf=e;const n=Q1(),r=new n,l=nh(),o=Pu(),c=Mu(),d=Rt(),{safeRe:m,t:h,comparatorTrimReplace:g,tildeTrimReplace:y,caretTrimReplace:_}=$s(),{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:S}=$u(),E=W=>W.value==="<0.0.0-0",x=W=>W.value==="",N=(W,F)=>{let j=!0;const U=W.slice();let Z=U.pop();for(;j&&U.length;)j=U.every(J=>Z.intersects(J,F)),Z=U.pop();return j},I=(W,F)=>(c("comp",W,F),W=ee(W,F),c("caret",W),W=Y(W,F),c("tildes",W),W=K(W,F),c("xrange",W),W=St(W,F),c("stars",W),W),C=W=>!W||W.toLowerCase()==="x"||W==="*",Y=(W,F)=>W.trim().split(/\s+/).map(j=>q(j,F)).join(" "),q=(W,F)=>{const j=F.loose?m[h.TILDELOOSE]:m[h.TILDE];return W.replace(j,(U,Z,J,T,P)=>{c("tilde",W,U,Z,J,T,P);let G;return C(Z)?G="":C(J)?G=`>=${Z}.0.0 <${+Z+1}.0.0-0`:C(T)?G=`>=${Z}.${J}.0 <${Z}.${+J+1}.0-0`:P?(c("replaceTilde pr",P),G=`>=${Z}.${J}.${T}-${P} <${Z}.${+J+1}.0-0`):G=`>=${Z}.${J}.${T} <${Z}.${+J+1}.0-0`,c("tilde return",G),G})},ee=(W,F)=>W.trim().split(/\s+/).map(j=>ae(j,F)).join(" "),ae=(W,F)=>{c("caret",W,F);const j=F.loose?m[h.CARETLOOSE]:m[h.CARET],U=F.includePrerelease?"-0":"";return W.replace(j,(Z,J,T,P,G)=>{c("caret",W,Z,J,T,P,G);let V;return C(J)?V="":C(T)?V=`>=${J}.0.0${U} <${+J+1}.0.0-0`:C(P)?J==="0"?V=`>=${J}.${T}.0${U} <${J}.${+T+1}.0-0`:V=`>=${J}.${T}.0${U} <${+J+1}.0.0-0`:G?(c("replaceCaret pr",G),J==="0"?T==="0"?V=`>=${J}.${T}.${P}-${G} <${J}.${T}.${+P+1}-0`:V=`>=${J}.${T}.${P}-${G} <${J}.${+T+1}.0-0`:V=`>=${J}.${T}.${P}-${G} <${+J+1}.0.0-0`):(c("no pr"),J==="0"?T==="0"?V=`>=${J}.${T}.${P}${U} <${J}.${T}.${+P+1}-0`:V=`>=${J}.${T}.${P}${U} <${J}.${+T+1}.0-0`:V=`>=${J}.${T}.${P} <${+J+1}.0.0-0`),c("caret return",V),V})},K=(W,F)=>(c("replaceXRanges",W,F),W.split(/\s+/).map(j=>Be(j,F)).join(" ")),Be=(W,F)=>{W=W.trim();const j=F.loose?m[h.XRANGELOOSE]:m[h.XRANGE];return W.replace(j,(U,Z,J,T,P,G)=>{c("xRange",W,U,Z,J,T,P,G);const V=C(J),te=V||C(T),oe=te||C(P),ce=oe;return Z==="="&&ce&&(Z=""),G=F.includePrerelease?"-0":"",V?Z===">"||Z==="<"?U="<0.0.0-0":U="*":Z&&ce?(te&&(T=0),P=0,Z===">"?(Z=">=",te?(J=+J+1,T=0,P=0):(T=+T+1,P=0)):Z==="<="&&(Z="<",te?J=+J+1:T=+T+1),Z==="<"&&(G="-0"),U=`${Z+J}.${T}.${P}${G}`):te?U=`>=${J}.0.0${G} <${+J+1}.0.0-0`:oe&&(U=`>=${J}.${T}.0${G} <${J}.${+T+1}.0-0`),c("xRange return",U),U})},St=(W,F)=>(c("replaceStars",W,F),W.trim().replace(m[h.STAR],"")),rt=(W,F)=>(c("replaceGTE0",W,F),W.trim().replace(m[F.includePrerelease?h.GTE0PRE:h.GTE0],"")),Ge=W=>(F,j,U,Z,J,T,P,G,V,te,oe,ce)=>(C(U)?j="":C(Z)?j=`>=${U}.0.0${W?"-0":""}`:C(J)?j=`>=${U}.${Z}.0${W?"-0":""}`:T?j=`>=${j}`:j=`>=${j}${W?"-0":""}`,C(V)?G="":C(te)?G=`<${+V+1}.0.0-0`:C(oe)?G=`<${V}.${+te+1}.0-0`:ce?G=`<=${V}.${te}.${oe}-${ce}`:W?G=`<${V}.${te}.${+oe+1}-0`:G=`<=${G}`,`${j} ${G}`.trim()),Nt=(W,F,j)=>{for(let U=0;U<W.length;U++)if(!W[U].test(F))return!1;if(F.prerelease.length&&!j.includePrerelease){for(let U=0;U<W.length;U++)if(c(W[U].semver),W[U].semver!==o.ANY&&W[U].semver.prerelease.length>0){const Z=W[U].semver;if(Z.major===F.major&&Z.minor===F.minor&&Z.patch===F.patch)return!0}return!1}return!0};return Wf}var ed,Mb;function Pu(){if(Mb)return ed;Mb=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(g,y){if(y=n(y),g instanceof e){if(g.loose===!!y.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),c("comparator",g,y),this.options=y,this.loose=!!y.loose,this.parse(g),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(g){const y=this.options.loose?r[l.COMPARATORLOOSE]:r[l.COMPARATOR],_=g.match(y);if(!_)throw new TypeError(`Invalid comparator: ${g}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new d(_[2],this.options.loose):this.semver=i}toString(){return this.value}test(g){if(c("Comparator.test",g,this.options.loose),this.semver===i||g===i)return!0;if(typeof g=="string")try{g=new d(g,this.options)}catch{return!1}return o(g,this.operator,this.semver,this.options)}intersects(g,y){if(!(g instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new m(g.value,y).test(this.value):g.operator===""?g.value===""?!0:new m(this.value,y).test(g.semver):(y=n(y),y.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||o(this.semver,"<",g.semver,y)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||o(this.semver,">",g.semver,y)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}ed=e;const n=nh(),{safeRe:r,t:l}=$s(),o=X_(),c=Mu(),d=Rt(),m=vn();return ed}var td,Ib;function Uu(){if(Ib)return td;Ib=1;const i=vn();return td=(n,r,l)=>{try{r=new i(r,l)}catch{return!1}return r.test(n)},td}var nd,Pb;function J1(){if(Pb)return nd;Pb=1;const i=vn();return nd=(n,r)=>new i(n,r).set.map(l=>l.map(o=>o.value).join(" ").trim().split(" ")),nd}var ad,Ub;function K1(){if(Ub)return ad;Ub=1;const i=Rt(),e=vn();return ad=(r,l,o)=>{let c=null,d=null,m=null;try{m=new e(l,o)}catch{return null}return r.forEach(h=>{m.test(h)&&(!c||d.compare(h)===-1)&&(c=h,d=new i(c,o))}),c},ad}var rd,zb;function W1(){if(zb)return rd;zb=1;const i=Rt(),e=vn();return rd=(r,l,o)=>{let c=null,d=null,m=null;try{m=new e(l,o)}catch{return null}return r.forEach(h=>{m.test(h)&&(!c||d.compare(h)===1)&&(c=h,d=new i(c,o))}),c},rd}var id,qb;function eT(){if(qb)return id;qb=1;const i=Rt(),e=vn(),n=Iu();return id=(l,o)=>{l=new e(l,o);let c=new i("0.0.0");if(l.test(c)||(c=new i("0.0.0-0"),l.test(c)))return c;c=null;for(let d=0;d<l.set.length;++d){const m=l.set[d];let h=null;m.forEach(g=>{const y=new i(g.semver.version);switch(g.operator){case">":y.prerelease.length===0?y.patch++:y.prerelease.push(0),y.raw=y.format();case"":case">=":(!h||n(y,h))&&(h=y);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),h&&(!c||n(c,h))&&(c=h)}return c&&l.test(c)?c:null},id}var sd,Bb;function tT(){if(Bb)return sd;Bb=1;const i=vn();return sd=(n,r)=>{try{return new i(n,r).range||"*"}catch{return null}},sd}var ld,Hb;function lh(){if(Hb)return ld;Hb=1;const i=Rt(),e=Pu(),{ANY:n}=e,r=vn(),l=Uu(),o=Iu(),c=rh(),d=sh(),m=ih();return ld=(g,y,_,w)=>{g=new i(g,w),y=new r(y,w);let S,E,x,N,I;switch(_){case">":S=o,E=d,x=c,N=">",I=">=";break;case"<":S=c,E=m,x=o,N="<",I="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(g,y,w))return!1;for(let C=0;C<y.set.length;++C){const Y=y.set[C];let q=null,ee=null;if(Y.forEach(ae=>{ae.semver===n&&(ae=new e(">=0.0.0")),q=q||ae,ee=ee||ae,S(ae.semver,q.semver,w)?q=ae:x(ae.semver,ee.semver,w)&&(ee=ae)}),q.operator===N||q.operator===I||(!ee.operator||ee.operator===N)&&E(g,ee.semver))return!1;if(ee.operator===I&&x(g,ee.semver))return!1}return!0},ld}var ud,Gb;function nT(){if(Gb)return ud;Gb=1;const i=lh();return ud=(n,r,l)=>i(n,r,">",l),ud}var od,Zb;function aT(){if(Zb)return od;Zb=1;const i=lh();return od=(n,r,l)=>i(n,r,"<",l),od}var cd,Vb;function rT(){if(Vb)return cd;Vb=1;const i=vn();return cd=(n,r,l)=>(n=new i(n,l),r=new i(r,l),n.intersects(r,l)),cd}var fd,Yb;function iT(){if(Yb)return fd;Yb=1;const i=Uu(),e=_n();return fd=(n,r,l)=>{const o=[];let c=null,d=null;const m=n.sort((_,w)=>e(_,w,l));for(const _ of m)i(_,r,l)?(d=_,c||(c=_)):(d&&o.push([c,d]),d=null,c=null);c&&o.push([c,null]);const h=[];for(const[_,w]of o)_===w?h.push(_):!w&&_===m[0]?h.push("*"):w?_===m[0]?h.push(`<=${w}`):h.push(`${_} - ${w}`):h.push(`>=${_}`);const g=h.join(" || "),y=typeof r.raw=="string"?r.raw:String(r);return g.length<y.length?g:r},fd}var dd,Fb;function sT(){if(Fb)return dd;Fb=1;const i=vn(),e=Pu(),{ANY:n}=e,r=Uu(),l=_n(),o=(y,_,w={})=>{if(y===_)return!0;y=new i(y,w),_=new i(_,w);let S=!1;e:for(const E of y.set){for(const x of _.set){const N=m(E,x,w);if(S=S||N!==null,N)continue e}if(S)return!1}return!0},c=[new e(">=0.0.0-0")],d=[new e(">=0.0.0")],m=(y,_,w)=>{if(y===_)return!0;if(y.length===1&&y[0].semver===n){if(_.length===1&&_[0].semver===n)return!0;w.includePrerelease?y=c:y=d}if(_.length===1&&_[0].semver===n){if(w.includePrerelease)return!0;_=d}const S=new Set;let E,x;for(const K of y)K.operator===">"||K.operator===">="?E=h(E,K,w):K.operator==="<"||K.operator==="<="?x=g(x,K,w):S.add(K.semver);if(S.size>1)return null;let N;if(E&&x){if(N=l(E.semver,x.semver,w),N>0)return null;if(N===0&&(E.operator!==">="||x.operator!=="<="))return null}for(const K of S){if(E&&!r(K,String(E),w)||x&&!r(K,String(x),w))return null;for(const Be of _)if(!r(K,String(Be),w))return!1;return!0}let I,C,Y,q,ee=x&&!w.includePrerelease&&x.semver.prerelease.length?x.semver:!1,ae=E&&!w.includePrerelease&&E.semver.prerelease.length?E.semver:!1;ee&&ee.prerelease.length===1&&x.operator==="<"&&ee.prerelease[0]===0&&(ee=!1);for(const K of _){if(q=q||K.operator===">"||K.operator===">=",Y=Y||K.operator==="<"||K.operator==="<=",E){if(ae&&K.semver.prerelease&&K.semver.prerelease.length&&K.semver.major===ae.major&&K.semver.minor===ae.minor&&K.semver.patch===ae.patch&&(ae=!1),K.operator===">"||K.operator===">="){if(I=h(E,K,w),I===K&&I!==E)return!1}else if(E.operator===">="&&!r(E.semver,String(K),w))return!1}if(x){if(ee&&K.semver.prerelease&&K.semver.prerelease.length&&K.semver.major===ee.major&&K.semver.minor===ee.minor&&K.semver.patch===ee.patch&&(ee=!1),K.operator==="<"||K.operator==="<="){if(C=g(x,K,w),C===K&&C!==x)return!1}else if(x.operator==="<="&&!r(x.semver,String(K),w))return!1}if(!K.operator&&(x||E)&&N!==0)return!1}return!(E&&Y&&!x&&N!==0||x&&q&&!E&&N!==0||ae||ee)},h=(y,_,w)=>{if(!y)return _;const S=l(y.semver,_.semver,w);return S>0?y:S<0||_.operator===">"&&y.operator===">="?_:y},g=(y,_,w)=>{if(!y)return _;const S=l(y.semver,_.semver,w);return S<0?y:S>0||_.operator==="<"&&y.operator==="<="?_:y};return dd=o,dd}var hd,Xb;function lT(){if(Xb)return hd;Xb=1;const i=$s(),e=$u(),n=Rt(),r=V_(),l=oi(),o=I1(),c=P1(),d=U1(),m=z1(),h=q1(),g=B1(),y=H1(),_=G1(),w=_n(),S=Z1(),E=V1(),x=ah(),N=Y1(),I=F1(),C=Iu(),Y=rh(),q=Y_(),ee=F_(),ae=ih(),K=sh(),Be=X_(),St=X1(),rt=Pu(),Ge=vn(),Nt=Uu(),W=J1(),F=K1(),j=W1(),U=eT(),Z=tT(),J=lh(),T=nT(),P=aT(),G=rT(),V=iT(),te=sT();return hd={parse:l,valid:o,clean:c,inc:d,diff:m,major:h,minor:g,patch:y,prerelease:_,compare:w,rcompare:S,compareLoose:E,compareBuild:x,sort:N,rsort:I,gt:C,lt:Y,eq:q,neq:ee,gte:ae,lte:K,cmp:Be,coerce:St,Comparator:rt,Range:Ge,satisfies:Nt,toComparators:W,maxSatisfying:F,minSatisfying:j,minVersion:U,validRange:Z,outside:J,gtr:T,ltr:P,intersects:G,simplifyRange:V,subset:te,SemVer:n,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},hd}lT();function Ta(i){if(!i||i.split("/").length>2||i.startsWith("/")||i.endsWith("/")||i.split(":").length>2)throw new Error(`Invalid identifier format: ${i}`);const[e,n]=i.split(":"),r=n||"latest";if(e.includes("/")){const[l,o]=e.split("/",2);if(!l||!o)throw new Error(`Invalid identifier format: ${i}`);return[l,o,r]}else{if(!e)throw new Error(`Invalid identifier format: ${i}`);return["-",e,r]}}class uT extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function ye(i,e,n){let r;if(i.ok){n&&(r=await i.text());return}r=await i.text();const l=`Failed to ${e}. Received status [${i.status}]: ${i.statusText}. Server response: ${r}`;if(i.status===409)throw new uT(l);const o=new Error(l);throw o.status=i.status,o}var Qb="[...]",oT={result:"[Circular]"},vu=[],Fr=[];const cT=new TextEncoder;function fT(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function lu(i){return cT.encode(i)}function Vt(i,e,n,r,l){var o;try{const c=JSON.stringify(i,n,r);return lu(c)}catch(c){if(!((o=c.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),lu("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof l>"u"&&(l=fT()),Md(i,"",0,[],void 0,0,l);let d;try{Fr.length===0?d=JSON.stringify(i,n,r):d=JSON.stringify(i,dT(n),r)}catch{return lu("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;vu.length!==0;){const m=vu.pop();m.length===4?Object.defineProperty(m[0],m[1],m[3]):m[0][m[1]]=m[2]}}return lu(d)}}function md(i,e,n,r){var l=Object.getOwnPropertyDescriptor(r,n);l.get!==void 0?l.configurable?(Object.defineProperty(r,n,{value:i}),vu.push([r,n,e,l])):Fr.push([e,n,i]):(r[n]=i,vu.push([r,n,e]))}function Md(i,e,n,r,l,o,c){o+=1;var d;if(typeof i=="object"&&i!==null){for(d=0;d<r.length;d++)if(r[d]===i){md(oT,i,e,l);return}if(typeof c.depthLimit<"u"&&o>c.depthLimit){md(Qb,i,e,l);return}if(typeof c.edgesLimit<"u"&&n+1>c.edgesLimit){md(Qb,i,e,l);return}if(r.push(i),Array.isArray(i))for(d=0;d<i.length;d++)Md(i[d],d,d,r,i,o,c);else{var m=Object.keys(i);for(d=0;d<m.length;d++){var h=m[d];Md(i[h],h,d,r,i,o,c)}}r.pop()}}function dT(i){return i=typeof i<"u"?i:function(e,n){return n},function(e,n){if(Fr.length>0)for(var r=0;r<Fr.length;r++){var l=Fr[r];if(l[1]===e&&l[0]===n){n=l[2],Fr.splice(r,1);break}}return i.call(this,e,n)}}function Jb(i){const e=K_(),n=OT(),r=i.extra??{},l=r.metadata;return i.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...n,...n.revision_id||i.revision_id?{revision_id:i.revision_id??n.revision_id}:{},...l}},i}const hT=i=>{const e=(i==null?void 0:i.toString())??Rn("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},mT=i=>{const n=i.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function pT(i){const e=[];for await(const n of i)e.push(n);return e}function pd(i){if(i!==void 0)return i.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const gT=async i=>{if((i==null?void 0:i.status)===429){const e=parseInt(i.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function Kb(i){return typeof i=="number"?Number(i.toFixed(4)):i}class yT{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let n;const r=new Promise(o=>{n=o}),l=Vt(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:n,itemPromise:r,size:l}),this.sizeBytes+=l,r}pop(e){var l;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let r=0;for(;r+(((l=this.peek())==null?void 0:l.size)??0)<e&&this.items.length>0;){const o=this.items.shift();o&&(n.push(o),r+=o.size,this.sizeBytes-=o.size)}if(n.length===0&&this.items.length>0){const o=this.items.shift();n.push(o),r+=o.size,this.sizeBytes-=o.size}return[n.map(o=>({action:o.action,item:o.payload})),()=>n.forEach(o=>o.itemPromiseResolve())]}}const bT=20971520,_T=2500;class Rs{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new yT}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Na("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Na("LANGSMITH_DEBUG")==="true"});const n=Rs.getDefaultClientConfig();if(this.tracingSampleRate=hT(e.tracingSamplingRate),this.apiUrl=pd(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=pd(e.apiKey??n.apiKey),this.webUrl=pd(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new tb({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new tb({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:gT,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=Rn("API_KEY"),n=Rn("ENDPOINT")??"https://api.smith.langchain.com",r=Rn("HIDE_INPUTS")==="true",l=Rn("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:l}}getHostUrl(){return this.webUrl?this.webUrl:mT(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Q_}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",l=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(ue(this.debug),l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(o,`Failed to fetch ${e}`),o}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let l=Number(n.get("offset"))||0;const o=Number(n.get("limit"))||100;for(;;){n.set("offset",String(l)),n.set("limit",String(o));const c=`${this.apiUrl}${e}?${n}`,d=await this.caller.call(ue(this.debug),c,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(d,`Failed to fetch ${e}`);const m=r?r(await d.json()):await d.json();if(m.length===0||(yield m,m.length<o))break;l+=m.length}}async*_getCursorPaginatedList(e,n=null,r="POST",l="runs"){const o=n?{...n}:{};for(;;){const d=await(await this.caller.call(ue(this.debug),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!d||!d[l])break;yield d[l];const m=d.cursors;if(!m||!m.next)break;o.cursor=m.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const l of e)this.filteredPostUuids.has(l.id)?this.filteredPostUuids.delete(l.id):r.push(l);return r}else{const r=[];for(const l of e){const o=l.trace_id??l.id;this.filteredPostUuids.has(o)||(l.id===o?this._shouldSample()?r.push(l):this.filteredPostUuids.add(o):r.push(l))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??bT}async _getMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const n=[];for(;this.autoBatchQueue.items.length>0;){const[r,l]=this.autoBatchQueue.pop(e);if(!r.length){l();break}const o=this._processBatch(r,l).catch(console.error);n.push(o)}return Promise.all(n)}async _processBatch(e,n){var r;if(!e.length){n();return}try{const l={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();(r=o==null?void 0:o.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(l):await this.batchIngestRuns(l)}finally{n()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=Jb(e.item));const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const e=await this.caller.call(ue(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(_T),...this.fetchOptions});await ye(e,"get server info");const n=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const l=await this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&l.trace_id!==void 0&&l.dotted_order!==void 0){this.processRunOperation({action:"create",item:l}).catch(console.error);return}const o=Jb(l),c=await this.caller.call(ue(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:Vt(o,`Creating run with id: ${o.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;let r=await Promise.all((e==null?void 0:e.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[]),l=await Promise.all((n==null?void 0:n.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[]);if(r.length>0&&l.length>0){const d=r.reduce((h,g)=>(g.id&&(h[g.id]=g),h),{}),m=[];for(const h of l)h.id!==void 0&&d[h.id]?d[h.id]={...d[h.id],...h}:m.push(h);r=Object.values(d),l=m}const o={post:r,patch:l};if(!o.post.length&&!o.patch.length)return;const c={post:[],patch:[]};for(const d of["post","patch"]){const m=d,h=o[m].reverse();let g=h.pop();for(;g!==void 0;)c[m].push(g),g=h.pop()}if(c.post.length>0||c.patch.length>0){const d=c.post.map(m=>m.id).concat(c.patch.map(m=>m.id)).join(",");await this._postBatchIngestRuns(Vt(c,`Ingesting runs with ids: ${d}`))}}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(ue(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;const r={};let l=[];for(const g of e??[]){const y=await this.prepareRunCreateOrUpdateInputs(g);y.id!==void 0&&y.attachments!==void 0&&(r[y.id]=y.attachments),delete y.attachments,l.push(y)}let o=[];for(const g of n??[])o.push(await this.prepareRunCreateOrUpdateInputs(g));if(l.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(l.length>0&&o.length>0){const g=l.reduce((_,w)=>(w.id&&(_[w.id]=w),_),{}),y=[];for(const _ of o)_.id!==void 0&&g[_.id]?g[_.id]={...g[_.id],..._}:y.push(_);l=Object.values(g),o=y}if(l.length===0&&o.length===0)return;const m=[],h=[];for(const[g,y]of[["post",l],["patch",o]])for(const _ of y){const{inputs:w,outputs:S,events:E,attachments:x,...N}=_,I={inputs:w,outputs:S,events:E},C=Vt(N,`Serializing for multipart ingestion of run with id: ${N.id}`);h.push({name:`${g}.${N.id}`,payload:new Blob([C],{type:`application/json; length=${C.length}`})});for(const[Y,q]of Object.entries(I)){if(q===void 0)continue;const ee=Vt(q,`Serializing ${Y} for multipart ingestion of run with id: ${N.id}`);h.push({name:`${g}.${N.id}.${Y}`,payload:new Blob([ee],{type:`application/json; length=${ee.length}`})})}if(N.id!==void 0){const Y=r[N.id];if(Y){delete r[N.id];for(const[q,ee]of Object.entries(Y)){let ae,K;if(Array.isArray(ee)?[ae,K]=ee:(ae=ee.mimeType,K=ee.data),q.includes(".")){console.warn(`Skipping attachment '${q}' for run ${N.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}h.push({name:`attachment.${N.id}.${q}`,payload:new Blob([K],{type:`${ae}; length=${K.byteLength}`})})}}}m.push(`trace=${N.trace_id},id=${N.id}`)}await this._sendMultipartRequest(h,m.join("; "))}async _createNodeFetchBody(e,n){const r=[];for(const c of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${c.name}"\r
`,`Content-Type: ${c.payload.type}\r
\r
`])),r.push(c.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(o){const c=async d=>{typeof d=="string"?o.enqueue(r.encode(d)):o.enqueue(d)};for(const d of e){await c(`--${n}\r
`),await c(`Content-Disposition: form-data; name="${d.name}"\r
`),await c(`Content-Type: ${d.payload.type}\r
\r
`);const h=d.payload.stream().getReader();try{let g;for(;!(g=await h.read()).done;)o.enqueue(g.value)}finally{h.releaseLock()}await c(`\r
`)}await c(`--${n}--\r
`),o.close()}})}async _sendMultipartRequest(e,n){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),l=await(D1()?this._createNodeFetchBody(e,r):this._createMultipartStream(e,r)),o=await this.batchIngestCaller.call(ue(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:l,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(o,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${n}`)}}async updateRun(e,n){pe(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const l={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:l,body:Vt(n,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(o,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){pe(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let l;n.session_id?l=n.session_id:r!=null&&r.projectName?l=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?l=r==null?void 0:r.projectId:l=(await this.readProject({projectName:Rn("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${l}/r/${n.id}?poll=true`}else if(e!==void 0){const l=await this.readRun(e);if(!l.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${l.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var o;const n=await pT(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},l={};n.sort((c,d)=>((c==null?void 0:c.dotted_order)??"").localeCompare((d==null?void 0:d.dotted_order)??""));for(const c of n){if(c.parent_run_id===null||c.parent_run_id===void 0)throw new Error(`Child run ${c.id} has no parent`);(o=c.dotted_order)!=null&&o.startsWith(e.dotted_order??"")&&c.id!==e.id&&(c.parent_run_id in r||(r[c.parent_run_id]=[]),r[c.parent_run_id].push(c),l[c.id]=c)}e.child_runs=r[e.id]||[];for(const c in r)c!==e.id&&(l[c].child_runs=r[c]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:l,traceId:o,referenceExampleId:c,startTime:d,executionOrder:m,isRoot:h,runType:g,error:y,id:_,query:w,filter:S,traceFilter:E,treeFilter:x,limit:N,select:I,order:C}=e;let Y=[];if(n&&(Y=Array.isArray(n)?n:[n]),r){const K=Array.isArray(r)?r:[r],Be=await Promise.all(K.map(St=>this.readProject({projectName:St}).then(rt=>rt.id)));Y.push(...Be)}const q=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],ee={session:Y.length?Y:null,run_type:g,reference_example:c,query:w,filter:S,trace_filter:E,tree_filter:x,execution_order:m,parent_run:l,start_time:d?d.toISOString():null,error:y,id:_,limit:N,trace:o,select:I||q,is_root:h,order:C};let ae=0;for await(const K of this._getCursorPaginatedList("/runs/query",ee))if(N){if(ae>=N)break;if(K.length+ae>N){yield*K.slice(0,N-ae);break}ae+=K.length,yield*K}else yield*K}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:l,filter:o,startTime:c,endTime:d,limit:m,offset:h}=e,y={session_id:n||(await this.readProject({projectName:r})).id,group_by:l,filter:o,start_time:c?c.toISOString():null,end_time:d?d.toISOString():null,limit:Number(m)||100};let _=Number(h)||0;const w="/runs/group",S=`${this.apiUrl}${w}`;for(;;){const E={...y,offset:_},x=Object.fromEntries(Object.entries(E).filter(([q,ee])=>ee!==void 0)),N=await this.caller.call(ue(),S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(x),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(N,`Failed to fetch ${w}`);const I=await N.json(),{groups:C,total:Y}=I;if(C.length===0)break;for(const q of C)yield q;if(_+=C.length,_>=Y)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:l,projectNames:o,projectIds:c,referenceExampleIds:d,startTime:m,endTime:h,error:g,query:y,filter:_,traceFilter:w,treeFilter:S,isRoot:E,dataSourceType:x}){let N=c||[];o&&(N=[...c||[],...await Promise.all(o.map(ee=>this.readProject({projectName:ee}).then(ae=>ae.id)))]);const C=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:l,session:N,reference_example:d,start_time:m,end_time:h,error:g,query:y,filter:_,trace_filter:w,tree_filter:S,is_root:E,data_source_type:x}).filter(([ee,ae])=>ae!==void 0));return await(await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(C),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||xt()};pe(e);const o=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){pe(e);const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(n,"unshare run",!0)}async readRunSharedLink(e){pe(e);const r=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const c of n)r.append("id",c);return pe(e),await(await this.caller.call(ue(this.debug),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),pe(e);const l=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return l.url=`${this.getHostUrl()}/public/${l.share_token}/d`,l}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};pe(e);const o=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){pe(e);const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(n,"unshare dataset",!0)}async readSharedDataset(e){return pe(e),await(await this.caller.call(ue(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const l=new URLSearchParams;Object.entries(r).forEach(([d,m])=>{Array.isArray(m)?m.forEach(h=>l.append(d,h)):l.append(d,m)});const o=await this.caller.call(ue(this.debug),`${this.apiUrl}/public/${e}/examples?${l.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),c=await o.json();if(!o.ok)throw"detail"in c?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(c.detail)?c.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return c.map(d=>({...d,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:l=!1,projectExtra:o=null,referenceDatasetId:c=null}){const d=l?"?upsert=true":"",m=`${this.apiUrl}/sessions${d}`,h=o||{};r&&(h.metadata=r);const g={name:e,extra:h,description:n};c!==null&&(g.reference_dataset_id=c);const y=await this.caller.call(ue(this.debug),m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(y,"create project"),await y.json()}async updateProject(e,{name:n=null,description:r=null,metadata:l=null,projectExtra:o=null,endTime:c=null}){const d=`${this.apiUrl}/sessions/${e}`;let m=o;l&&(m={...m||{},metadata:l});const h={name:n,extra:m,description:r,end_time:c?new Date(c).toISOString():null},g=await this.caller.call(ue(this.debug),d,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(g,"update project"),await g.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const l=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)pe(e),r+=`/${e}`;else if(n!==void 0)l.append("name",n);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(ue(this.debug),`${this.apiUrl}${r}?${l}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const c=await o.json();return o.ok?Array.isArray(c)?c.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let l="/sessions";const o=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)pe(e),l+=`/${e}`;else if(n!==void 0)o.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const c=await this._get(l,o);let d;if(Array.isArray(c)){if(c.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);d=c[0]}else d=c;return d}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:l,referenceDatasetName:o,referenceFree:c,metadata:d}={}){const m=new URLSearchParams;if(e!==void 0)for(const h of e)m.append("id",h);if(n!==void 0&&m.append("name",n),r!==void 0&&m.append("name_contains",r),l!==void 0)m.append("reference_dataset",l);else if(o!==void 0){const h=await this.readDataset({datasetName:o});m.append("reference_dataset",h.id)}c!==void 0&&m.append("reference_free",c.toString()),d!==void 0&&m.append("metadata",JSON.stringify(d));for await(const h of this._getPaginated("/sessions",m))yield*h}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,pe(r);const l=await this.caller.call(ue(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(l,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:l,description:o,dataType:c,name:d}){const m=`${this.apiUrl}/datasets/upload`,h=new FormData;h.append("file",e,n),r.forEach(_=>{h.append("input_keys",_)}),l.forEach(_=>{h.append("output_keys",_)}),o&&h.append("description",o),c&&h.append("data_type",c),d&&h.append("name",d);const g=await this.caller.call(ue(this.debug),m,{method:"POST",headers:this.headers,body:h,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(g,"upload CSV"),await g.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:l,outputsSchema:o,metadata:c}={}){const d={name:e,description:n,extra:c?{metadata:c}:void 0};r&&(d.data_type=r),l&&(d.inputs_schema_definition=l),o&&(d.outputs_schema_definition=o);const m=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(m,"create dataset"),await m.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const l=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)pe(e),r+=`/${e}`;else if(n!==void 0)l.append("name",n);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,l);let c;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);c=o[0]}else c=o;return c}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:l}){let o=e;if(o===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:n})).id);const c=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof l=="string"?l:l.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,c)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(d=>JSON.parse(d))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:l,datasetNameContains:o,metadata:c}={}){const d="/datasets",m=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const h of r)m.append("id",h);l!==void 0&&m.append("name",l),o!==void 0&&m.append("name_contains",o),c!==void 0&&m.append("metadata",JSON.stringify(c));for await(const h of this._getPaginated(d,m))yield*h}async updateDataset(e){const{datasetId:n,datasetName:r,...l}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const o=n??(await this.readDataset({datasetName:r})).id;pe(o);const c=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,"update dataset"),await c.json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:l,tag:o}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const c=n??(await this.readDataset({datasetName:r})).id;pe(c);const d=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${c}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof l=="string"?l:l.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(d,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",l=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(l=(await this.readDataset({datasetName:n})).id),l!==void 0)pe(l),r+=`/${l}`;else throw new Error("Must provide datasetName or datasetId");const o=await this.caller.call(ue(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let l=e;if(!l&&!n)throw new Error("Must provide either datasetName or datasetId");if(l&&n)throw new Error("Must provide either datasetName or datasetId, not both");l||(l=(await this.readDataset({datasetName:n})).id),pe(l);const o={tag:r},c=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${l}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"index dataset"),await c.json()}async similarExamples(e,n,r,{filter:l}={}){const o={limit:r,inputs:e};l!==void 0&&(o.filter=l),pe(n);const c=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,"fetch similar examples"),(await c.json()).examples}async createExample(e,n,r){var g;if(Wb(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let l=n?r==null?void 0:r.datasetId:e.dataset_id;const o=n?r==null?void 0:r.datasetName:e.dataset_name;if(l===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(l!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");l===void 0&&(l=(await this.readDataset({datasetName:o})).id);const c=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let d;Wb(e)?d=e:d={inputs:e,outputs:n,created_at:c==null?void 0:c.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const m=await this._uploadExamplesMultipart(l,[d]);return await this.readExample(((g=m.example_ids)==null?void 0:g[0])??xt())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const I=e;let C=I[0].dataset_id;const Y=I[0].dataset_name;if(C===void 0&&Y===void 0)throw new Error("Must provide either datasetName or datasetId");if(C!==void 0&&Y!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");C===void 0&&(C=(await this.readDataset({datasetName:Y})).id);const q=await this._uploadExamplesMultipart(C,I);return await Promise.all(q.example_ids.map(ae=>this.readExample(ae)))}const{inputs:n,outputs:r,metadata:l,splits:o,sourceRunIds:c,useSourceRunIOs:d,useSourceRunAttachments:m,attachments:h,exampleIds:g,datasetId:y,datasetName:_}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let w=y;const S=_;if(w===void 0&&S===void 0)throw new Error("Must provide either datasetName or datasetId");if(w!==void 0&&S!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");w===void 0&&(w=(await this.readDataset({datasetName:S})).id);const E=n.map((I,C)=>({dataset_id:w,inputs:I,outputs:r==null?void 0:r[C],metadata:l==null?void 0:l[C],split:o==null?void 0:o[C],id:g==null?void 0:g[C],attachments:h==null?void 0:h[C],source_run_id:c==null?void 0:c[C],use_source_run_io:d==null?void 0:d[C],use_source_run_attachments:m==null?void 0:m[C]})),x=await this._uploadExamplesMultipart(w,E);return await Promise.all(x.example_ids.map(I=>this.readExample(I)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const l=e.map(c=>nb(c)?ab(c):c),o=nb(n)?ab(n):n;return this.createExample({input:l},{output:o},r)}async readExample(e){pe(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:l,...o}=r,c=o;return l&&(c.attachments=Object.entries(l).reduce((d,[m,h])=>(d[m.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},d),{})),c}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:l,splits:o,inlineS3Urls:c,metadata:d,limit:m,offset:h,filter:g,includeAttachments:y}={}){let _;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)_=e;else if(n!==void 0)_=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const w=new URLSearchParams({dataset:_}),S=l?typeof l=="string"?l:l==null?void 0:l.toISOString():void 0;S&&w.append("as_of",S);const E=c??!0;if(w.append("inline_s3_urls",E.toString()),r!==void 0)for(const N of r)w.append("id",N);if(o!==void 0)for(const N of o)w.append("splits",N);if(d!==void 0){const N=JSON.stringify(d);w.append("metadata",N)}m!==void 0&&w.append("limit",m.toString()),h!==void 0&&w.append("offset",h.toString()),g!==void 0&&w.append("filter",g),y===!0&&["attachment_urls","outputs","metadata"].forEach(N=>w.append("select",N));let x=0;for await(const N of this._getPaginated("/examples",w)){for(const I of N){const{attachment_urls:C,...Y}=I,q=Y;C&&(q.attachments=Object.entries(C).reduce((ee,[ae,K])=>(ee[ae.slice(11)]={presigned_url:K.presigned_url,mime_type:K.mime_type||void 0},ee),{})),yield q,x++}if(m!==void 0&&x>=m)break}}async deleteExample(e){pe(e);const n=`/examples/${e}`,r=await this.caller.call(ue(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,`delete ${n}`),await r.json()}async updateExample(e,n){let r;n?r=e:r=e.id,pe(r);let l;n?l={id:r,...n}:l=e;let o;return l.dataset_id!==void 0?o=l.dataset_id:o=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(o,[l])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:l}){let o;if(e?o=e:o=(await this.readDataset({datasetName:n})).id,pe(o),r&&l||!r&&!l)throw new Error("Exactly one of asOf and tag must be specified.");const c=new URLSearchParams;r!==void 0&&c.append("as_of",typeof r=="string"?r:r.toISOString()),l!==void 0&&c.append("tag",l);const d=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${o}/version?${c.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(d,"read dataset version"),await d.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let l;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?l=(await this.readDataset({datasetName:n})).id:l=e,pe(l);const o=new URLSearchParams,c=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return c&&o.append("as_of",c),await this._get(`/datasets/${l}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:l,remove:o=!1}){let c;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?c=(await this.readDataset({datasetName:n})).id:c=e,pe(c);const d={split_name:r,examples:l.map(h=>(pe(h),h)),remove:o},m=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${c}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(m,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:l,referenceExample:o}={loadChildRuns:!1}){Z_("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof e=="string")c=await this.readRun(e,{loadChildRuns:l});else if(typeof e=="object"&&"id"in e)c=e;else throw new Error(`Invalid run type: ${typeof e}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(o=await this.readExample(c.reference_example_id));const d=await n.evaluateRun(c,o),[m,h]=await this._logEvaluationFeedback(d,c,r);return h[0]}async createFeedback(e,n,{score:r,value:l,correction:o,comment:c,sourceInfo:d,feedbackSourceType:m="api",sourceRunId:h,feedbackId:g,feedbackConfig:y,projectId:_,comparativeExperimentId:w}){var I;if(!e&&!_)throw new Error("One of runId or projectId must be provided");if(e&&_)throw new Error("Only one of runId or projectId can be provided");const S={type:m??"api",metadata:d??{}};h!==void 0&&(S==null?void 0:S.metadata)!==void 0&&!S.metadata.__run&&(S.metadata.__run={run_id:h}),(S==null?void 0:S.metadata)!==void 0&&((I=S.metadata.__run)==null?void 0:I.run_id)!==void 0&&pe(S.metadata.__run.run_id);const E={id:g??xt(),run_id:e,key:n,score:Kb(r),value:l,correction:o,comment:c,feedback_source:S,comparative_experiment_id:w,feedbackConfig:y,session_id:_},x=`${this.apiUrl}/feedback`,N=await this.caller.call(ue(this.debug),x,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(E),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(N,"create feedback",!0),E}async updateFeedback(e,{score:n,value:r,correction:l,comment:o}){const c={};n!=null&&(c.score=Kb(n)),r!=null&&(c.value=r),l!=null&&(c.correction=l),o!=null&&(c.comment=o),pe(e);const d=await this.caller.call(ue(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(d,"update feedback",!0)}async readFeedback(e){pe(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){pe(e);const n=`/feedback/${e}`,r=await this.caller.call(ue(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const l=new URLSearchParams;if(e&&l.append("run",e.join(",")),n)for(const o of n)l.append("key",o);if(r)for(const o of r)l.append("source",o);for await(const o of this._getPaginated("/feedback",l))yield*o}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:l}={}){const o={run_id:e,feedback_key:n,feedback_config:l};return r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3},await(await this.caller.call(ue(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:l,description:o,metadata:c,id:d}){var g;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const m={id:d,name:e,experiment_ids:n,reference_dataset_id:r,description:o,created_at:(g=l??new Date)==null?void 0:g.toISOString(),extra:{}};return c&&(m.extra.metadata=c),await(await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){pe(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const l=this._selectEvalResults(e),o=[];for(const c of l){let d=r||{};c.evaluatorInfo&&(d={...c.evaluatorInfo,...d});let m=null;c.targetRunId?m=c.targetRunId:n&&(m=n.id),o.push(await this.createFeedback(m,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:d,sourceRunId:c.sourceRunId,feedbackConfig:c.feedbackConfig,feedbackSourceType:"model"}))}return[l,o]}async logEvaluationFeedback(e,n,r){const[l]=await this._logEvaluationFeedback(e,n,r);return l}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:l,limit:o}=e,c=new URLSearchParams;n&&n.forEach((m,h)=>{pe(m,`queueIds[${h}]`),c.append("ids",m)}),r&&c.append("name",r),l&&c.append("name_contains",l),c.append("limit",(o!==void 0?Math.min(o,100):100).toString());let d=0;for await(const m of this._getPaginated("/annotation-queues",c))if(yield*m,d++,o!==void 0&&d>=o)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:l,rubricInstructions:o}=e,c={name:n,description:r,id:l||xt(),rubric_instructions:o},d=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(c).filter(([h,g])=>g!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(d,"create annotation queue"),await d.json()}async readAnnotationQueue(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(n,"read annotation queue"),await n.json()}async updateAnnotationQueue(e,n){const{name:r,description:l,rubricInstructions:o}=n,c=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:l,rubric_instructions:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((l,o)=>pe(l,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${pe(e,"queueId")}/run`,l=await this.caller.call(ue(this.debug),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(l,"get run from annotation queue"),await l.json()}async deleteRunFromAnnotationQueue(e,n){const r=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}/runs/${pe(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(n,"get size from annotation queue"),await n.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const l=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),o=new Error(`Error ${n.status}: ${n.statusText}
${l}`);throw o.statusCode=n.status,o}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,l,o]=Ta(e),c=await this.caller.call(ue(this.debug),`${this.apiUrl}/likes/${r}/${l}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,`${n?"like":"unlike"} prompt`),await c.json()}async _getPromptUrl(e){const[n,r,l]=Ta(e);if(await this._currentTenantIsOwner(n)){const o=await this._getSettings();return l!=="latest"?`${this.getHostUrl()}/prompts/${r}/${l.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return l!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${l.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,l=>l.repos))yield*r}async getPrompt(e){const[n,r,l]=Ta(e),o=await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await ye(o,"get prompt");const c=await o.json();return c.repo?c.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[l,o,c]=Ta(e);if(!await this._currentTenantIsOwner(l))throw await this._ownerConflictError("create a prompt",l);const d={repo_handle:o,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},m=await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(m,"create prompt");const{repo:h}=await m.json();return h}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[l,o,c]=Ta(e),d=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${l}/${o}`):r==null?void 0:r.parentCommitHash,m={manifest:JSON.parse(JSON.stringify(n)),parent_commit:d},h=await this.caller.call(ue(this.debug),`${this.apiUrl}/commits/${l}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(h,"create commit");const g=await h.json();return this._getPromptUrl(`${l}/${o}${g.commit_hash?`:${g.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var d;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const m of n){const h=m.id,g={...m.metadata&&{metadata:m.metadata},...m.split&&{split:m.split}},y=Vt(g,`Serializing body for example with id: ${h}`),_=new Blob([y],{type:"application/json"});if(r.append(h,_),m.inputs){const w=Vt(m.inputs,`Serializing inputs for example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.inputs`,S)}if(m.outputs){const w=Vt(m.outputs,`Serializing outputs whle updating example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.outputs`,S)}if(m.attachments)for(const[w,S]of Object.entries(m.attachments)){let E,x;Array.isArray(S)?[E,x]=S:(E=S.mimeType,x=S.data);const N=new Blob([x],{type:`${E}; length=${x.byteLength}`});r.append(`${h}.attachment.${w}`,N)}if(m.attachments_operations){const w=Vt(m.attachments_operations,`Serializing attachments while updating example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.attachments_operations`,S)}}const l=e??((d=n[0])==null?void 0:d.dataset_id);return await(await this.caller.call(ue(this.debug),`${this.apiUrl}/v1/platform/datasets/${l}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const c of n){const d=(c.id??xt()).toString(),m={created_at:c.created_at,...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split},...c.source_run_id&&{source_run_id:c.source_run_id},...c.use_source_run_io&&{use_source_run_io:c.use_source_run_io},...c.use_source_run_attachments&&{use_source_run_attachments:c.use_source_run_attachments}},h=Vt(m,`Serializing body for uploaded example with id: ${d}`),g=new Blob([h],{type:"application/json"});if(r.append(d,g),c.inputs){const y=Vt(c.inputs,`Serializing inputs for uploaded example with id: ${d}`),_=new Blob([y],{type:"application/json"});r.append(`${d}.inputs`,_)}if(c.outputs){const y=Vt(c.outputs,`Serializing outputs for uploaded example with id: ${d}`),_=new Blob([y],{type:"application/json"});r.append(`${d}.outputs`,_)}if(c.attachments)for(const[y,_]of Object.entries(c.attachments)){let w,S;Array.isArray(_)?[w,S]=_:(w=_.mimeType,S=_.data);const E=new Blob([S],{type:`${w}; length=${S.byteLength}`});r.append(`${d}.attachment.${y}`,E)}}const l=await this.caller.call(ue(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r});return await ye(l,"upload examples"),await l.json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,l]=Ta(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((n==null?void 0:n.description)!==void 0&&(o.description=n.description),(n==null?void 0:n.readme)!==void 0&&(o.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(o.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(o.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(o.is_archived=n.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const c=await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/${r}/${l}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,"update prompt"),c.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,l]=Ta(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,l,o]=Ta(e),c=await this.caller.call(ue(this.debug),`${this.apiUrl}/commits/${r}/${l}/${o}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"pull prompt commit");const d=await c.json();return{owner:r,repo:l,commit_hash:d.commit_hash,manifest:d.manifest,examples:d.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(l=>l!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:l}=n,[o,c]=this.parseTokenOrUrl(e,r),d=new Rs({apiUrl:o,apiKey:"placeholder"}),m=await d.readSharedDataset(c),h=l||m.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const g=await d.listSharedExamples(c),y=await this.createDataset(h,{description:m.description,dataType:m.data_type||"kv",inputsSchema:m.inputs_schema_definition??void 0,outputsSchema:m.outputs_schema_definition??void 0});try{await this.createExamples({inputs:g.map(_=>_.inputs),outputs:g.flatMap(_=>_.outputs?[_.outputs]:[]),datasetId:y.id})}catch(_){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),_}}parseTokenOrUrl(e,n,r=2,l="dataset"){try{return pe(e),[n,e]}catch{}try{const c=new URL(e).pathname.split("/").filter(d=>d!=="");if(c.length>=r){const d=c[c.length-r];return[n,d]}else throw new Error(`Invalid public ${l} URL: ${e}`)}catch{throw new Error(`Invalid public ${l} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}function Wb(i){return"dataset_id"in i||"dataset_name"in i}const Q_="0.3.30";var bs={};let Vn;const vT=()=>typeof window<"u"&&typeof window.document<"u",wT=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",ST=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),J_=()=>typeof Deno<"u",ET=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!J_(),TT=()=>Vn||(vT()?Vn="browser":ET()?Vn="node":wT()?Vn="webworker":ST()?Vn="jsdom":J_()?Vn="deno":Vn="other",Vn);let gd;function K_(){if(gd===void 0){const i=TT(),e=AT();gd={library:"langsmith",runtime:i,sdk:"langsmith-js",sdk_version:Q_,...e}}return gd}function OT(){const i=xT()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,l]of Object.entries(i))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof l=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=l:e[r]=l);return e}function xT(){try{return typeof process<"u"&&bs?Object.entries(bs).reduce((i,[e,n])=>(i[e]=String(n),i),{}):void 0}catch{return}}function Na(i){try{return typeof process<"u"?bs==null?void 0:bs[i]:void 0}catch{return}}function Rn(i){return Na(`LANGSMITH_${i}`)||Na(`LANGCHAIN_${i}`)}let yd;function AT(){if(yd!==void 0)return yd;const i=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of i){const r=Na(n);r!==void 0&&(e[n]=r)}return yd=e,e}const RT=i=>!!["TRACING_V2","TRACING"].find(n=>Rn(n)==="true"),bd=Symbol.for("lc:context_variables");function NT(i){return i.replace(/[-:.]/g,"")}function jT(i,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return NT(`${new Date(i).toISOString().slice(0,-1)}${r}Z`)+e}class wu{constructor(e,n,r){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r}static fromHeader(e){const n=e.split(",");let r={},l=[],o;for(const c of n){const[d,m]=c.split("="),h=decodeURIComponent(m);d==="langsmith-metadata"?r=JSON.parse(h):d==="langsmith-tags"?l=h.split(","):d==="langsmith-project"&&(o=h)}return new wu(r,l,o)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class Yt{constructor(e){var d;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),W_(e)){Object.assign(this,{...e});return}const n=Yt.getDefaultConfig(),{metadata:r,...l}=e,o=l.client??Yt.getSharedClient(),c={...r,...(d=l==null?void 0:l.extra)==null?void 0:d.metadata};if(l.extra={...l.extra,metadata:c},Object.assign(this,{...n,...l,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const m=jT(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+m:this.dotted_order=m}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:xt(),run_type:"chain",project_name:Rn("PROJECT")??Na("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:Na("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Na("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Yt.sharedClient||(Yt.sharedClient=new Rs),Yt.sharedClient}createChild(e){var m,h,g,y,_,w;const n=this.child_execution_order+1,r=new Yt({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});bd in this&&(r[bd]=this[bd]);const l=Symbol.for("lc:child_config"),o=((m=e.extra)==null?void 0:m[l])??this.extra[l];if(kT(o)){const S={...o},E=CT(S.callbacks)?(g=(h=S.callbacks).copy)==null?void 0:g.call(h):void 0;E&&(Object.assign(E,{_parentRunId:r.id}),(w=(_=(y=E.handlers)==null?void 0:y.find(ev))==null?void 0:_.updateFromRunTree)==null||w.call(_,r),S.callbacks=E),r.extra[l]=S}const c=new Set;let d=this;for(;d!=null&&!c.has(d.id);)c.add(d.id),d.child_execution_order=Math.max(d.child_execution_order,n),d=d.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),l){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,l&&Object.keys(l).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...l}}:{metadata:l})}_convertToCreate(e,n,r=!0){var m;const l=e.extra??{};if(l.runtime||(l.runtime={}),n)for(const[h,g]of Object.entries(n))l.runtime[h]||(l.runtime[h]=g);let o,c;return r?(c=(m=e.parent_run)==null?void 0:m.id,o=[]):(o=e.child_runs.map(h=>this._convertToCreate(h,n,r)),c=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:l,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:c,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const n=K_(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){Z_("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const l of this.child_runs)await l.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var h,g,y,_;const r=e==null?void 0:e.callbacks;let l,o,c,d=RT();if(r){const w=((h=r==null?void 0:r.getParentRunId)==null?void 0:h.call(r))??"",S=(g=r==null?void 0:r.handlers)==null?void 0:g.find(E=>(E==null?void 0:E.name)=="langchain_tracer");l=(y=S==null?void 0:S.getRun)==null?void 0:y.call(S,w),o=S==null?void 0:S.projectName,c=S==null?void 0:S.client,d=d||!!S}return l?new Yt({name:l.name,id:l.id,trace_id:l.trace_id,dotted_order:l.dotted_order,client:c,tracingEnabled:d,project_name:o,tags:[...new Set(((l==null?void 0:l.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(_=l==null?void 0:l.extra)==null?void 0:_.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new Yt({...n,client:c,tracingEnabled:d,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var h;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,l=r["langsmith-trace"];if(!l||typeof l!="string")return;const o=l.trim(),c=o.split(".").map(g=>{const[y,_]=g.split("Z");return{strTime:y,time:Date.parse(y+"Z"),uuid:_}}),d=c[0].uuid,m={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(h=c.at(-1))==null?void 0:h.uuid,trace_id:d,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const g=wu.fromHeader(r.baggage);m.metadata=g.metadata,m.tags=g.tags,m.project_name=g.project_name}return new Yt(m)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new wu((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name).toHeader()};if(e)for(const[l,o]of Object.entries(n))e.set(l,o);return n}}Object.defineProperty(Yt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function W_(i){return i!==void 0&&typeof i.createChild=="function"&&typeof i.postRun=="function"}function ev(i){return typeof i=="object"&&i!=null&&typeof i.name=="string"&&i.name==="langchain_tracer"}function e_(i){return Array.isArray(i)&&i.some(e=>ev(e))}function CT(i){return typeof i=="object"&&i!=null&&Array.isArray(i.handlers)}function kT(i){var e;return i!==void 0&&typeof i.callbacks=="object"&&(e_((e=i.callbacks)==null?void 0:e.handlers)||e_(i.callbacks))}let LT=class{getStore(){}run(e,n){return n()}};const _d=Symbol.for("ls:tracing_async_local_storage"),DT=new LT;let $T=class{getInstance(){return globalThis[_d]??DT}initializeGlobalInstance(e){globalThis[_d]===void 0&&(globalThis[_d]=e)}};const MT=new $T;function IT(i=!1){const e=MT.getInstance().getStore();if(!i&&!W_(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function uh(i){return typeof i=="function"&&"langsmith:traceable"in i}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const PT=Object.prototype.hasOwnProperty;function Id(i,e){return PT.call(i,e)}function Pd(i){if(Array.isArray(i)){const n=new Array(i.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(i);let e=[];for(let n in i)Id(i,n)&&e.push(n);return e}function Nn(i){switch(typeof i){case"object":return JSON.parse(JSON.stringify(i));case"undefined":return null;default:return i}}function Ud(i){let e=0;const n=i.length;let r;for(;e<n;){if(r=i.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Zr(i){return i.indexOf("/")===-1&&i.indexOf("~")===-1?i:i.replace(/~/g,"~0").replace(/\//g,"~1")}function UT(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}function zd(i){if(i===void 0)return!0;if(i){if(Array.isArray(i)){for(let n=0,r=i.length;n<r;n++)if(zd(i[n]))return!0}else if(typeof i=="object"){const n=Pd(i),r=n.length;for(var e=0;e<r;e++)if(zd(i[n[e]]))return!0}}return!1}function t_(i,e){const n=[i];for(const r in e){const l=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof l<"u"&&n.push(`${r}: ${l}`)}return n.join(`
`)}class zT extends Error{constructor(e,n,r,l,o){super(t_(e,{name:n,index:r,operation:l,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=t_(e,{name:n,index:r,operation:l,tree:o})}}const et=zT,Xr={add:function(i,e,n){return i[e]=this.value,{newDocument:n}},remove:function(i,e,n){var r=i[e];return delete i[e],{newDocument:n,removed:r}},replace:function(i,e,n){var r=i[e];return i[e]=this.value,{newDocument:n,removed:r}},move:function(i,e,n){let r=qd(n,this.path);r&&(r=Nn(r));const l=_s(n,{op:"remove",path:this.from}).removed;return _s(n,{op:"add",path:this.path,value:l}),{newDocument:n,removed:r}},copy:function(i,e,n){const r=qd(n,this.from);return _s(n,{op:"add",path:this.path,value:Nn(r)}),{newDocument:n}},test:function(i,e,n){return{newDocument:n,test:Eu(i[e],this.value)}},_get:function(i,e,n){return this.value=i[e],{newDocument:n}}};var qT={add:function(i,e,n){return Ud(e)?i.splice(e,0,this.value):i[e]=this.value,{newDocument:n,index:e}},remove:function(i,e,n){var r=i.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(i,e,n){var r=i[e];return i[e]=this.value,{newDocument:n,removed:r}},move:Xr.move,copy:Xr.copy,test:Xr.test,_get:Xr._get};function qd(i,e){if(e=="")return i;var n={op:"_get",path:e};return _s(i,n),n.value}function _s(i,e,n=!1,r=!0,l=!0,o=0){if(n&&(typeof n=="function"?n(e,0,i,e.path):Bd(e,0)),e.path===""){let c={newDocument:i};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=i,c;if(e.op==="move"||e.op==="copy")return c.newDocument=qd(i,e.from),e.op==="move"&&(c.removed=i),c;if(e.op==="test"){if(c.test=Eu(i,e.value),c.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,e,i);return c.newDocument=i,c}else{if(e.op==="remove")return c.removed=i,c.newDocument=null,c;if(e.op==="_get")return e.value=i,c;if(n)throw new et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,i);return c}}else{r||(i=Nn(i));const d=(e.path||"").split("/");let m=i,h=1,g=d.length,y,_,w;for(typeof n=="function"?w=n:w=Bd;;){if(_=d[h],_&&_.indexOf("~")!=-1&&(_=UT(_)),l&&(_=="__proto__"||_=="prototype"&&h>0&&d[h-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&y===void 0&&(m[_]===void 0?y=d.slice(0,h).join("/"):h==g-1&&(y=e.path),y!==void 0&&w(e,0,i,y)),h++,Array.isArray(m)){if(_==="-")_=m.length;else{if(n&&!Ud(_))throw new et("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,i);Ud(_)&&(_=~~_)}if(h>=g){if(n&&e.op==="add"&&_>m.length)throw new et("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,i);const S=qT[e.op].call(e,m,_,i);if(S.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,e,i);return S}}else if(h>=g){const S=Xr[e.op].call(e,m,_,i);if(S.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,e,i);return S}if(m=m[_],n&&h<g&&(!m||typeof m!="object"))throw new et("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,i)}}}function Su(i,e,n,r=!0,l=!0){if(n&&!Array.isArray(e))throw new et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(i=Nn(i));const o=new Array(e.length);for(let c=0,d=e.length;c<d;c++)o[c]=_s(i,e[c],n,!0,l,c),i=o[c].newDocument;return o.newDocument=i,o}function Bd(i,e,n,r){if(typeof i!="object"||i===null||Array.isArray(i))throw new et("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,i,n);if(Xr[i.op]){if(typeof i.path!="string")throw new et("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,i,n);if(i.path.indexOf("/")!==0&&i.path.length>0)throw new et('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,i,n);if((i.op==="move"||i.op==="copy")&&typeof i.from!="string")throw new et("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,i,n);if((i.op==="add"||i.op==="replace"||i.op==="test")&&i.value===void 0)throw new et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,i,n);if((i.op==="add"||i.op==="replace"||i.op==="test")&&zd(i.value))throw new et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,i,n);if(n){if(i.op=="add"){var l=i.path.split("/").length,o=r.split("/").length;if(l!==o+1&&l!==o)throw new et("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,i,n)}else if(i.op==="replace"||i.op==="remove"||i.op==="_get"){if(i.path!==r)throw new et("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,i,n)}else if(i.op==="move"||i.op==="copy"){var c={op:"_get",path:i.from,value:void 0},d=BT([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new et("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,i,n)}}}else throw new et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,i,n)}function BT(i,e,n){try{if(!Array.isArray(i))throw new et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Su(Nn(e),Nn(i),n||!0);else{n=n||Bd;for(var r=0;r<i.length;r++)n(i[r],r,e,void 0)}}catch(l){if(l instanceof et)return l;throw l}}function Eu(i,e){if(i===e)return!0;if(i&&e&&typeof i=="object"&&typeof e=="object"){var n=Array.isArray(i),r=Array.isArray(e),l,o,c;if(n&&r){if(o=i.length,o!=e.length)return!1;for(l=o;l--!==0;)if(!Eu(i[l],e[l]))return!1;return!0}if(n!=r)return!1;var d=Object.keys(i);if(o=d.length,o!==Object.keys(e).length)return!1;for(l=o;l--!==0;)if(!e.hasOwnProperty(d[l]))return!1;for(l=o;l--!==0;)if(c=d[l],!Eu(i[c],e[c]))return!1;return!0}return i!==i&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function tv(i,e,n,r,l){if(e!==i){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=Pd(e),c=Pd(i),d=!1,m=c.length-1;m>=0;m--){var h=c[m],g=i[h];if(Id(e,h)&&!(e[h]===void 0&&g!==void 0&&Array.isArray(e)===!1)){var y=e[h];typeof g=="object"&&g!=null&&typeof y=="object"&&y!=null&&Array.isArray(g)===Array.isArray(y)?tv(g,y,n,r+"/"+Zr(h),l):g!==y&&(l&&n.push({op:"test",path:r+"/"+Zr(h),value:Nn(g)}),n.push({op:"replace",path:r+"/"+Zr(h),value:Nn(y)}))}else Array.isArray(i)===Array.isArray(e)?(l&&n.push({op:"test",path:r+"/"+Zr(h),value:Nn(g)}),n.push({op:"remove",path:r+"/"+Zr(h)}),d=!0):(l&&n.push({op:"test",path:r,value:i}),n.push({op:"replace",path:r,value:e}))}if(!(!d&&o.length==c.length))for(var m=0;m<o.length;m++){var h=o[m];!Id(i,h)&&e[h]!==void 0&&n.push({op:"add",path:r+"/"+Zr(h),value:Nn(e[h])})}}}function HT(i,e,n=!1){var r=[];return tv(i,e,r,"",n),r}var vd={};const GT=()=>typeof window<"u"&&typeof window.document<"u",ZT=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",VT=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),oh=()=>typeof Deno<"u",YT=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!oh(),FT=()=>{let i;return GT()?i="browser":YT()?i="node":ZT()?i="webworker":VT()?i="jsdom":oh()?i="deno":i="other",i};let wd;async function XT(){return wd===void 0&&(wd={library:"langchain-js",runtime:FT()}),wd}function Jn(i){try{return typeof process<"u"?vd==null?void 0:vd[i]:oh()?Deno==null?void 0:Deno.env.get(i):void 0}catch{return}}class QT{}function JT(i){return"lc_prefer_streaming"in i&&i.lc_prefer_streaming}class Ms extends QT{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,z_(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Jn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return nr.prototype.toJSON.call(this)}toJSONNotImplemented(){return nr.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends Ms{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:xt()}),Object.assign(this,e)}}return new n}}const KT=i=>{const e=i;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function Sd(i,e){return i&&!Array.isArray(i)&&typeof i=="object"?i:{[e]:i}}function WT(i){return i.replace(/[-:.]/g,"")}function eO(i,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return WT(`${new Date(i).toISOString().slice(0,-1)}${r}Z`)+e}function hs(i){return typeof i._addRunToRunMap=="function"}class Is extends Ms{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=eO(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const l=this.runMap.get(r.parent_run_id);l&&(this._addChildRun(l,r),l.child_execution_order=Math.max(l.child_execution_order,r.child_execution_order),r.trace_id=l.trace_id,l.dotted_order!==void 0&&(r.dotted_order=[l.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,l,o,c,d,m){const h=this._getExecutionOrder(l),g=Date.now(),y=d?{...o,metadata:d}:o,_={id:r,name:m??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{prompts:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:y??{},tags:c||[]};return this._addRunToRunMap(_)}async handleLLMStart(e,n,r,l,o,c,d,m){var g,y;const h=this.runMap.get(r)??this._createRunForLLMStart(e,n,r,l,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,h)),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}_createRunForChatModelStart(e,n,r,l,o,c,d,m){const h=this._getExecutionOrder(l),g=Date.now(),y=d?{...o,metadata:d}:o,_={id:r,name:m??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{messages:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:y??{},tags:c||[]};return this._addRunToRunMap(_)}async handleChatModelStart(e,n,r,l,o,c,d,m){var g,y;const h=this.runMap.get(r)??this._createRunForChatModelStart(e,n,r,l,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,h)),await((y=this.onLLMStart)==null?void 0:y.call(this,h)),h}async handleLLMEnd(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.outputs=e,c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleLLMError(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForChainStart(e,n,r,l,o,c,d,m){const h=this._getExecutionOrder(l),g=Date.now(),y={id:r,name:m??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:n,execution_order:h,child_execution_order:h,run_type:d??"chain",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(y)}async handleChainStart(e,n,r,l,o,c,d,m){var g,y;const h=this.runMap.get(r)??this._createRunForChainStart(e,n,r,l,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,h)),await((y=this.onChainStart)==null?void 0:y.call(this,h)),h}async handleChainEnd(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.outputs=Sd(e,"output"),c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=Sd(o.inputs,"input")),await((d=this.onChainEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleChainError(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=Sd(o.inputs,"input")),await((d=this.onChainError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForToolStart(e,n,r,l,o,c,d){const m=this._getExecutionOrder(l),h=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:l,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{input:n},execution_order:m,child_execution_order:m,run_type:"tool",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleToolStart(e,n,r,l,o,c,d){var h,g;const m=this.runMap.get(r)??this._createRunForToolStart(e,n,r,l,o,c,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,m)),await((g=this.onToolStart)==null?void 0:g.call(this,m)),m}async handleToolEnd(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onToolEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onToolError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var o;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const l=r;l.actions=l.actions||[],l.actions.push(e),l.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(e,n){var l;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((l=this.onAgentEnd)==null?void 0:l.call(this,r)))}_createRunForRetrieverStart(e,n,r,l,o,c,d){const m=this._getExecutionOrder(l),h=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:l,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{query:n},execution_order:m,child_execution_order:m,run_type:"retriever",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleRetrieverStart(e,n,r,l,o,c,d){var h,g;const m=this.runMap.get(r)??this._createRunForRetrieverStart(e,n,r,l,o,c,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,m)),await((g=this.onRetrieverStart)==null?void 0:g.call(this,m)),m}async handleRetrieverEnd(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var l;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((l=this.onText)==null?void 0:l.call(this,r)))}async handleLLMNewToken(e,n,r,l,o,c){var m;const d=this.runMap.get(r);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return d.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:c==null?void 0:c.chunk}}),await((m=this.onLLMNewToken)==null?void 0:m.call(this,d,e,{chunk:c==null?void 0:c.chunk})),d}}var fu={exports:{}};fu.exports;var n_;function tO(){return n_||(n_=1,function(i){const n=(o=0)=>c=>`\x1B[${38+o};5;${c}m`,r=(o=0)=>(c,d,m)=>`\x1B[${38+o};2;${c};${d};${m}m`;function l(){const o=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[d,m]of Object.entries(c)){for(const[h,g]of Object.entries(m))c[h]={open:`\x1B[${g[0]}m`,close:`\x1B[${g[1]}m`},m[h]=c[h],o.set(g[0],g[1]);Object.defineProperty(c,d,{value:m,enumerable:!1})}return Object.defineProperty(c,"codes",{value:o,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi256=n(),c.color.ansi16m=r(),c.bgColor.ansi256=n(10),c.bgColor.ansi16m=r(10),Object.defineProperties(c,{rgbToAnsi256:{value:(d,m,h)=>d===m&&m===h?d<8?16:d>248?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(m/255*5)+Math.round(h/255*5),enumerable:!1},hexToRgb:{value:d=>{const m=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(d.toString(16));if(!m)return[0,0,0];let{colorString:h}=m.groups;h.length===3&&(h=h.split("").map(y=>y+y).join(""));const g=Number.parseInt(h,16);return[g>>16&255,g>>8&255,g&255]},enumerable:!1},hexToAnsi256:{value:d=>c.rgbToAnsi256(...c.hexToRgb(d)),enumerable:!1}}),c}Object.defineProperty(i,"exports",{enumerable:!0,get:l})}(fu)),fu.exports}var nO=tO();const nv=ks(nO);function Ot(i,e){return`${i.open}${e}${i.close}`}function ln(i,e){try{return JSON.stringify(i,null,2)}catch{return e}}function a_(i){return typeof i=="string"?i.trim():i==null?i:ln(i,i.toString())}function Oa(i){if(!i.end_time)return"";const e=i.end_time-i.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:$t}=nv;class r_ extends Is{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const l=this.runMap.get(r.parent_run_id);if(l)n.push(l),r=l;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((l,o,c)=>{const d=`${l.execution_order}:${l.run_type}:${l.name}`;return o===c.length-1?Ot(nv.bold,d):d}).join(" > ");return Ot($t.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.green,"[chain/start]")} [${n}] Entering Chain run with input: ${ln(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[chain/end]")} [${n}] [${Oa(e)}] Exiting Chain run with output: ${ln(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[chain/error]")} [${n}] [${Oa(e)}] Chain run errored with error: ${ln(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(l=>l.trim())}:e.inputs;console.log(`${Ot($t.green,"[llm/start]")} [${n}] Entering LLM run with input: ${ln(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[llm/end]")} [${n}] [${Oa(e)}] Exiting LLM run with output: ${ln(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[llm/error]")} [${n}] [${Oa(e)}] LLM run errored with error: ${ln(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.green,"[tool/start]")} [${n}] Entering Tool run with input: "${a_(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[tool/end]")} [${n}] [${Oa(e)}] Exiting Tool run with output: "${a_((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[tool/error]")} [${n}] [${Oa(e)}] Tool run errored with error: ${ln(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${ln(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[retriever/end]")} [${n}] [${Oa(e)}] Exiting Retriever run with output: ${ln(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[retriever/error]")} [${n}] [${Oa(e)}] Retriever run errored with error: ${ln(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Ot($t.blue,"[agent/action]")} [${r}] Agent selected action: ${ln(n.actions[n.actions.length-1],"[action]")}`)}}let Ed;const aO=()=>{if(Ed===void 0){const i=Jn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Ed=new Rs(i)}return Ed};class vs extends Is{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:l}=e;this.projectName=r??Jn("LANGCHAIN_PROJECT")??Jn("LANGCHAIN_SESSION"),this.exampleId=n,this.client=l??aO();const o=vs.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await XT()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const l=[n];for(;l.length>0;){const o=l.shift();!o||r.has(o.id)||(r.add(o.id),this.runMap.set(o.id,o),o.child_runs&&l.push(...o.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const n={},r=[];for(const[l,o]of this.runMap){const c=new Yt({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[l]=c,r.push([l,o.dotted_order])}r.sort((l,o)=>!l[1]||!o[1]?0:l[1].localeCompare(o[1]));for(const[l]of r){const o=this.runMap.get(l),c=n[l];if(!(!o||!c)&&o.parent_run_id){const d=n[o.parent_run_id];d&&(d.child_runs.push(c),c.parent_run=d)}}return n[e]}static getTraceableRunTree(){try{return IT(!0)}catch{return}}}const av=Symbol.for("ls:tracing_async_local_storage"),du=Symbol.for("lc:context_variables"),rO=i=>{globalThis[av]=i},Ns=()=>globalThis[av];let ws;function iO(){const i="default"in Qn?Qn.default:Qn;return new i({autoStart:!0,concurrency:1})}function sO(){return typeof ws>"u"&&(ws=iO()),ws}async function at(i,e){if(e===!0){const n=Ns();n!==void 0?await n.run(void 0,async()=>i()):await i()}else ws=sO(),ws.add(async()=>{const n=Ns();n!==void 0?await n.run(void 0,async()=>i()):await i()})}const lO=i=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Jn(n)==="true");function rv(i){var r;const e=Ns();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[du])==null?void 0:r[i]}const uO=Symbol("lc:configure_hooks"),oO=()=>rv(uO)||[];class cO{setHandler(e){return this.setHandlers([e])}}class zu{constructor(e,n,r,l,o,c,d,m){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:m})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,n,this.runId,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class fO extends zu{getChild(e){const n=new Mt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw l}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${l}`),n.raiseError)throw e}},n.awaitHandlers)))}}class i_ extends zu{async handleLLMNewToken(e,n,r,l,o,c){await Promise.all(this.handlers.map(d=>at(async()=>{var m;if(!d.ignoreLLM)try{await((m=d.handleLLMNewToken)==null?void 0:m.call(d,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,c))}catch(h){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMNewToken: ${h}`),d.raiseError)throw h}},d.awaitHandlers)))}async handleLLMError(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleLLMEnd(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class dO extends zu{getChild(e){const n=new Mt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleChainEnd(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}}class hO extends zu{getChild(e){const n=new Mt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}}class Mt extends cO{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,l=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(n.map(async(h,g)=>{const y=g===0&&r?r:xt();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return hs(_)&&_._createRunForLLMStart(e,[h],y,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w;try{await((w=_.handleLLMStart)==null?void 0:w.call(_,e,[h],y,this._parentRunId,o,this.tags,this.metadata,m))}catch(S){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${S}`),_.raiseError)throw S}},_.awaitHandlers)})),new i_(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,l=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(n.map(async(h,g)=>{const y=g===0&&r?r:xt();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return hs(_)&&_._createRunForChatModelStart(e,[h],y,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w,S;try{if(_.handleChatModelStart)await((w=_.handleChatModelStart)==null?void 0:w.call(_,e,[h],y,this._parentRunId,o,this.tags,this.metadata,m));else if(_.handleLLMStart){const E=H_(h);await((S=_.handleLLMStart)==null?void 0:S.call(_,e,[E],y,this._parentRunId,o,this.tags,this.metadata,m))}}catch(E){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${E}`),_.raiseError)throw E}},_.awaitHandlers)})),new i_(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=xt(),l=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreChain)return hs(m)&&m._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,l,d),at(async()=>{var h;try{await((h=m.handleChainStart)==null?void 0:h.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,l,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleChainStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new dO(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=xt(),l=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreAgent)return hs(m)&&m._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var h;try{await((h=m.handleToolStart)==null?void 0:h.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleToolStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new hO(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=xt(),l=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreRetriever)return hs(m)&&m._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var h;try{await((h=m.handleRetrieverStart)==null?void 0:h.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleRetrieverStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new fO(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreCustomEvent)try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,n,r,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new Mt(this._parentRunId);for(const l of this.handlers){const o=this.inheritableHandlers.includes(l);r.addHandler(l,o)}for(const l of this.tags){const o=this.inheritableTags.includes(l);r.addTags([l],o)}for(const l of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(l);r.addMetadata({[l]:this.metadata[l]},o)}for(const l of e)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===l.name)||r.addHandler(l,n);return r}static fromHandlers(e){class n extends Ms{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:xt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,l,o,c,d){return this._configureSync(e,n,r,l,o,c,d)}static _configureSync(e,n,r,l,o,c,d){var _,w;let m;(e||n)&&(Array.isArray(e)||!e?(m=new Mt,m.setHandlers((e==null?void 0:e.map(Tu))??[],!0)):m=e,m=m.copy(Array.isArray(n)?n.map(Tu):n==null?void 0:n.handlers,!1));const h=Jn("LANGCHAIN_VERBOSE")==="true"||(d==null?void 0:d.verbose),g=((_=vs.getTraceableRunTree())==null?void 0:_.tracingEnabled)||lO(),y=g||(Jn("LANGCHAIN_TRACING")??!1);if(h||y){if(m||(m=new Mt),h&&!m.handlers.some(S=>S.name===r_.prototype.name)){const S=new r_;m.addHandler(S,!0)}if(y&&!m.handlers.some(S=>S.name==="langchain_tracer")&&g){const S=new vs;m.addHandler(S,!0),m._parentRunId=((w=vs.getTraceableRunTree())==null?void 0:w.id)??m._parentRunId}}for(const{contextVar:S,inheritable:E=!0,handlerClass:x,envVar:N}of oO()){const I=N&&Jn(N)==="true"&&x;let C;const Y=S!==void 0?rv(S):void 0;Y&&KT(Y)?C=Y:I&&(C=new x({})),C!==void 0&&(m||(m=new Mt),m.handlers.some(q=>q.name===C.name)||m.addHandler(C,E))}return(r||l)&&m&&(m.addTags(r??[]),m.addTags(l??[],!1)),(o||c)&&m&&(m.addMetadata(o??{}),m.addMetadata(c??{},!1)),m}}function Tu(i){return"name"in i?i:Ms.fromMethods(i)}class mO{getStore(){}run(e,n){return n()}enterWith(e){}}const pO=new mO,s_=Symbol.for("lc:child_config");class gO{getInstance(){return Ns()??pO}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[s_]}runWithConfig(e,n,r){var g;const l=Mt._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),c=o.getStore(),d=l==null?void 0:l.getParentRunId(),m=(g=l==null?void 0:l.handlers)==null?void 0:g.find(y=>(y==null?void 0:y.name)==="langchain_tracer");let h;return m&&d?h=m.convertToRunTree(d):r||(h=new Yt({name:"<runnable_lambda>",tracingEnabled:!1})),h&&(h.extra={...h.extra,[s_]:e}),c!==void 0&&c[du]!==void 0&&(h===void 0&&(h={}),h[du]=c[du]),o.run(h,n)}initializeGlobalInstance(e){Ns()===void 0&&rO(e)}}const ka=new gO,Td=25;async function pn(i){return Mt._configureSync(i==null?void 0:i.callbacks,void 0,i==null?void 0:i.tags,void 0,i==null?void 0:i.metadata)}function l_(...i){const e={};for(const n of i.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const l=e[r]??[];e[r]=[...new Set(l.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const l=e.callbacks,o=n.callbacks;if(Array.isArray(o))if(!l)e.callbacks=o;else if(Array.isArray(l))e.callbacks=l.concat(o);else{const c=l.copy();for(const d of o)c.addHandler(Tu(d),!0);e.callbacks=c}else if(o)if(!l)e.callbacks=o;else if(Array.isArray(l)){const c=o.copy();for(const d of l)c.addHandler(Tu(d),!0);e.callbacks=c}else e.callbacks=new Mt(o._parentRunId,{handlers:l.handlers.concat(o.handlers),inheritableHandlers:l.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(l.tags.concat(o.tags))),inheritableTags:Array.from(new Set(l.inheritableTags.concat(o.inheritableTags))),metadata:{...l.metadata,...o.metadata}})}else{const l=r;e[l]=n[l]??e[l]}return e}const yO=new Set(["string","number","boolean"]);function Ne(i){var r;const e=ka.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:l,runName:o,...c}=e;n=Object.entries(c).reduce((d,[m,h])=>(h!==void 0&&(d[m]=h),d),n)}if(i&&(n=Object.entries(i).reduce((l,[o,c])=>(c!==void 0&&(l[o]=c),l),n)),n!=null&&n.configurable)for(const l of Object.keys(n.configurable))yO.has(typeof n.configurable[l])&&!((r=n.metadata)!=null&&r[l])&&(n.metadata||(n.metadata={}),n.metadata[l]=n.configurable[l]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const l=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,l])):n.signal=l,delete n.timeout}return n}function vt(i={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:l,configurable:o,runId:c}={}){const d=Ne(i);return e!==void 0&&(delete d.runName,d.callbacks=e),r!==void 0&&(d.recursionLimit=r),n!==void 0&&(d.maxConcurrency=n),l!==void 0&&(d.runName=l),o!==void 0&&(d.configurable={...d.configurable,...o}),c!==void 0&&delete d.runId,d}function ai(i){return i?{configurable:i.configurable,recursionLimit:i.recursionLimit,callbacks:i.callbacks,tags:i.tags,metadata:i.metadata,maxConcurrency:i.maxConcurrency,timeout:i.timeout,signal:i.signal}:void 0}async function La(i,e){if(e===void 0)return i;let n;return Promise.race([i.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,l)=>{n=()=>{l(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&l(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class Xt extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new Xt({start(r){return l();function l(){return n.read().then(({done:o,value:c})=>{if(o){r.close();return}return r.enqueue(c),l()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new Xt({async pull(n){const{value:r,done:l}=await e.next();l&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function iv(i,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(l){for(;;)if(l.length===0){const o=await i.next();for(const c of n)c.push(o)}else{if(l[0].done)return;yield l.shift().value}})}function gn(i,e){if(Array.isArray(i)&&Array.isArray(e))return i.concat(e);if(typeof i=="string"&&typeof e=="string")return i+e;if(typeof i=="number"&&typeof e=="number")return i+e;if("concat"in i&&typeof i.concat=="function")return i.concat(e);if(typeof i=="object"&&typeof e=="object"){const n={...i};for(const[r,l]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=gn(n[r],l):n[r]=l;return n}else throw new Error(`Cannot concat ${typeof i} and ${typeof e}`)}class ci{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,l)=>{ka.runWithConfig(ai(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,l):this.firstResult.then(o=>r(void 0),l)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?ka.runWithConfig(ai(this.config),this.signal?async()=>La(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function bO(i,e,n,r,...l){const o=new ci({generator:e,startSetup:n,signal:r}),c=await o.setup;return{output:i(o,c,...l),setup:c}}class Aa{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=Su({},n);return new js({ops:n,state:r[r.length-1].newDocument})}}class js extends Aa{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=Su(this.state,e.ops);return new js({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=Su({},e.ops);return new js({ops:e.ops,state:n[n.length-1].newDocument})}}const _O=i=>i.name==="log_stream_tracer";async function u_(i,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=i;if(["retriever","llm","prompt"].includes(i.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function o_(i,e){const{outputs:n}=i;return e==="original"||["retriever","llm","prompt"].includes(i.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function vO(i){return i!==void 0&&i.message!==void 0}class c_ extends Is{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Xt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(l=>{var o;return(o=this.includeTags)==null?void 0:o.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(l=>{var o;return!((o=this.excludeTags)!=null&&o.includes(l))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const l=this.keyMapByRunId[e];l&&await this.writer.write(new Aa({ops:[{op:"add",path:`/logs/${l}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var l;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Aa({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await u_(e,this._schemaFormat)),await this.writer.write(new Aa({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await u_(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await o_(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const l=new Aa({ops:r});await this.writer.write(l)}finally{if(e.id===this.rootId){const n=new Aa({ops:[{op:"replace",path:"/final_output",value:await o_(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const l=this.keyMapByRunId[e.id];if(l===void 0)return;const o=e.inputs.messages!==void 0;let c;o?vO(r==null?void 0:r.chunk)?c=r==null?void 0:r.chunk:c=new rr({id:`run-${e.id}`,content:n}):c=n;const d=new Aa({ops:[{op:"add",path:`/logs/${l}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${l}/streamed_output/-`,value:c}]});await this.writer.write(d)}}const f_="__run";class ri{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new ri({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class ii extends ri{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new ii({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function uu({name:i,serialized:e}){return i!==void 0?i:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const wO=i=>i.name==="event_stream_tracer";class SO extends Is{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Xt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(l=>{var o;return(o=this.includeTags)==null?void 0:o.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(l=>{var o;return!((o=this.excludeTags)!=null&&o.includes(l))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const l=this.runInfoMap.get(e);if(l===void 0){yield r.value;return}function o(d,m){return d==="llm"&&typeof m=="string"?new ri({text:m}):m}let c=this.tappedPromises.get(e);if(c===void 0){let d;c=new Promise(m=>{d=m}),this.tappedPromises.set(e,c);try{const m={event:`on_${l.runType}_stream`,run_id:e,name:l.name,tags:l.tags,metadata:l.metadata,data:{}};await this.send({...m,data:{chunk:o(l.runType,r.value)}},l),yield r.value;for await(const h of n)l.runType!=="tool"&&l.runType!=="retriever"&&await this.send({...m,data:{chunk:o(l.runType,h)}},l),yield h}finally{d()}}else{yield r.value;for await(const d of n)yield d}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var c,d;const n=uu(e),r=e.inputs.messages!==void 0?"chat_model":"llm",l={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,l);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},l)}async onLLMNewToken(e,n,r){const l=this.runInfoMap.get(e.id);let o,c;if(l===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(l.runType==="chat_model")c="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new rr({content:n,id:`run-${e.id}`}):o=r.chunk.message;else if(l.runType==="llm")c="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new ri({text:n}):o=r.chunk;else throw new Error(`Unexpected run type ${l.runType}`);await this.send({event:c,data:{chunk:o},run_id:e.id,name:l.name,tags:l.tags,metadata:l.metadata},l)}}async onLLMEnd(e){var c,d,m;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const l=(c=e.outputs)==null?void 0:c.generations;let o;if(n.runType==="chat_model"){for(const h of l??[]){if(o!==void 0)break;o=(d=h[0])==null?void 0:d.message}r="on_chat_model_end"}else if(n.runType==="llm")o={generations:l==null?void 0:l.map(h=>h.map(g=>({text:g.text,generationInfo:g.generationInfo}))),llmOutput:((m=e.outputs)==null?void 0:m.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var c,d;const n=uu(e),r=e.run_type??"chain",l={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},l.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,l.inputs=e.inputs.input):(o.input=e.inputs,l.inputs=e.inputs),this.runInfoMap.set(e.id,l),await this.send({event:`on_${r}_start`,data:o,name:n,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},l)}async onChainEnd(e){var d;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,l=e.inputs??n.inputs??{},c={output:((d=e.outputs)==null?void 0:d.output)??e.outputs,input:l};l.input&&Object.keys(l).length===1&&(c.input=l.input,n.inputs=l.input),await this.sendEndEvent({event:r,data:c,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var l,o;const n=uu(e),r={tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(e){var l;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((l=e.outputs)==null?void 0:l.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var o,c;const n=uu(e),l={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,l),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},l)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const l=this.runInfoMap.get(r);if(l===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:l.tags,metadata:l.metadata,data:n},l)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const EO=[400,401,402,403,404,405,406,407,409],TO=i=>{var n,r;if(i.message.startsWith("Cancel")||i.message.startsWith("AbortError")||i.name==="AbortError"||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const e=((n=i==null?void 0:i.response)==null?void 0:n.status)??(i==null?void 0:i.status);if(e&&EO.includes(+e))throw i;if(((r=i==null?void 0:i.error)==null?void 0:r.code)==="insufficient_quota"){const l=new Error(i==null?void 0:i.message);throw l.name="InsufficientQuotaError",l}};class ch{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??TO;const n="default"in Qn?Qn.default:Qn;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>_u(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((l,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class sv extends Is{constructor({config:e,onStart:n,onEnd:r,onError:l}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=l}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function fh(i){return i?i.lc_runnable:!1}class OO{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const l=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||l.some(o=>{var c;return(c=this.includeTags)==null?void 0:c.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&l.every(o=>{var c;return!((c=this.excludeTags)!=null&&c.includes(o))})),r}}function Od(i){return i.replace(/[^a-zA-Z-_0-9]/g,"_")}const xO=["*","_","`"];function AO(i){let e="";for(const[n,r]of Object.entries(i))e+=`	classDef ${n} ${r};
`;return e}function RO(i,e,n){const{firstNode:r,lastNode:l,nodeColors:o,withStyles:c=!0,curveStyle:d="linear",wrapLabelNWords:m=9}=n??{};let h=c?`%%{init: {'flowchart': {'curve': '${d}'}}}%%
graph TD;
`:`graph TD;
`;if(c){const w="default",S={[w]:"{0}({1})"};r!==void 0&&(S[r]="{0}([{1}]):::first"),l!==void 0&&(S[l]="{0}([{1}]):::last");for(const[E,x]of Object.entries(i)){const N=x.name.split(":").pop()??"";let C=xO.some(q=>N.startsWith(q)&&N.endsWith(q))?`<p>${N}</p>`:N;Object.keys(x.metadata??{}).length&&(C+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([q,ee])=>`${q} = ${ee}`).join(`
`)}</em></small>`);const Y=(S[E]??S[w]).replace("{0}",Od(E)).replace("{1}",C);h+=`	${Y}
`}}const g={};for(const w of e){const S=w.source.split(":"),E=w.target.split(":"),x=S.filter((N,I)=>N===E[I]).join(":");g[x]||(g[x]=[]),g[x].push(w)}const y=new Set;function _(w,S){const E=w.length===1&&w[0].source===w[0].target;if(S&&!E){const x=S.split(":").pop();if(y.has(x))throw new Error(`Found duplicate subgraph '${x}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(x),h+=`	subgraph ${x}
`}for(const x of w){const{source:N,target:I,data:C,conditional:Y}=x;let q="";if(C!==void 0){let ee=C;const ae=ee.split(" ");ae.length>m&&(ee=Array.from({length:Math.ceil(ae.length/m)},(K,Be)=>ae.slice(Be*m,(Be+1)*m).join(" ")).join("&nbsp;<br>&nbsp;")),q=Y?` -. &nbsp;${ee}&nbsp; .-> `:` -- &nbsp;${ee}&nbsp; --> `}else q=Y?" -.-> ":" --> ";h+=`	${Od(N)}${q}${Od(I)};
`}for(const x in g)x.startsWith(`${S}:`)&&x!==S&&_(g[x],x);S&&!E&&(h+=`	end
`)}_(g[""]??[],"");for(const w in g)!w.includes(":")&&w!==""&&_(g[w],w);return c&&(h+=AO(o??{})),h}async function NO(i,e){let{backgroundColor:n="white"}=e??{};const r=btoa(i);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const l=`https://mermaid.ink/img/${r}?bgColor=${n}`,o=await fetch(l);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function jO(i,e){if(i!==void 0&&!ys(i))return i;if(fh(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function CO(i){return fh(i.data)?{type:"runnable",data:{id:i.data.lc_id,name:i.data.getName()}}:{type:"schema",data:{...Ds(i.data.schema),title:i.data.name}}}class qu{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=ys(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...CO(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const l=n??xt(),o={id:l,data:e,name:jO(n,e),metadata:r};return this.nodes[l]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,l){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const o={source:e.id,target:n.id,data:r,conditional:l};return this.edges.push(o),o}firstNode(){return d_(this)}lastNode(){return h_(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(h=>h.id).every(ys)&&(r="");const o=h=>r?`${r}:${h}`:h;Object.entries(e.nodes).forEach(([h,g])=>{this.nodes[o(h)]={...g,id:o(h)}});const c=e.edges.map(h=>({...h,source:o(h.source),target:o(h.target)}));this.edges=[...this.edges,...c];const d=e.firstNode(),m=e.lastNode();return[d?{id:o(d.id),data:d.data}:void 0,m?{id:o(m.id),data:m.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&d_(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&h_(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(l=>[l.id,l.name])),n=new Map;Object.values(e).forEach(l=>{n.set(l,(n.get(l)||0)+1)});const r=l=>{const o=e[l];return ys(l)&&n.get(o)===1?o:l};return new qu({nodes:Object.fromEntries(Object.entries(this.nodes).map(([l,o])=>[r(l),{...o,id:r(l)}])),edges:this.edges.map(l=>({...l,source:r(l.source),target:r(l.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:l={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},c=this.reid(),d=c.firstNode(),m=c.lastNode();return RO(c.nodes,c.edges,{firstNode:d==null?void 0:d.id,lastNode:m==null?void 0:m.id,withStyles:n,curveStyle:r,nodeColors:l,wrapLabelNWords:o})}async drawMermaidPng(e){const n=this.drawMermaid(e);return NO(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function d_(i,e=[]){const n=new Set(i.edges.filter(l=>!e.includes(l.source)).map(l=>l.target)),r=[];for(const l of Object.values(i.nodes))!e.includes(l.id)&&!n.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function h_(i,e=[]){const n=new Set(i.edges.filter(l=>!e.includes(l.target)).map(l=>l.source)),r=[];for(const l of Object.values(i.nodes))!e.includes(l.id)&&!n.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function kO(i){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const l of i)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(l)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Xt.fromReadableStream(n)}function m_(i){return typeof i=="object"&&i!==null&&typeof i[Symbol.iterator]=="function"&&typeof i.next=="function"}const LO=i=>i!=null&&typeof i=="object"&&"next"in i&&typeof i.next=="function";function Hd(i){return typeof i=="object"&&i!==null&&typeof i[Symbol.asyncIterator]=="function"}function*p_(i,e){for(;;){const{value:n,done:r}=ka.runWithConfig(ai(i),e.next.bind(e),!0);if(r)break;yield n}}async function*Gd(i,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:l}=await ka.runWithConfig(ai(i),n.next.bind(e),!0);if(l)break;yield r}}function ct(i,e){return i&&!Array.isArray(i)&&!(i instanceof Date)&&typeof i=="object"?i:{[e]:i}}class ft extends nr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new er({bound:this,kwargs:e,config:{}})}map(){return new Ou({bound:this})}withRetry(e){return new lv({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new er({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new $O({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Ne);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([l])=>l!=="runId"));return Array.from({length:n},(l,o)=>Ne(o===0?e:r))}return Array.from({length:n},()=>Ne(e))}async batch(e,n,r){var m;const l=this._getOptionsList(n??{},e.length),o=((m=l[0])==null?void 0:m.maxConcurrency)??(r==null?void 0:r.maxConcurrency),c=new ch({maxConcurrency:o,onFailedAttempt:h=>{throw h}}),d=e.map((h,g)=>c.call(async()=>{try{return await this.invoke(h,l[g])}catch(y){if(r!=null&&r.returnExceptions)return y;throw y}}));return Promise.all(d)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Ne(n),l=new ci({generator:this._streamIterator(e,r),config:r});return await l.setup,Xt.fromAsyncGenerator(l)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Ne(e):n=Ne({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const l=Ne(r),o=await pn(l),c=await(o==null?void 0:o.handleChainStart(this.toJSON(),ct(n,"input"),l.runId,l==null?void 0:l.runType,void 0,void 0,(l==null?void 0:l.runName)??this.getName()));delete l.runId;let d;try{const m=e.call(this,n,l,c);d=await La(m,r==null?void 0:r.signal)}catch(m){throw await(c==null?void 0:c.handleChainError(m)),m}return await(c==null?void 0:c.handleChainEnd(ct(d,"output"))),d}async _batchWithConfig(e,n,r,l){var h;const o=this._getOptionsList(r??{},n.length),c=await Promise.all(o.map(pn)),d=await Promise.all(c.map(async(g,y)=>{const _=await(g==null?void 0:g.handleChainStart(this.toJSON(),ct(n[y],"input"),o[y].runId,o[y].runType,void 0,void 0,o[y].runName??this.getName()));return delete o[y].runId,_}));let m;try{const g=e.call(this,n,o,d,l);m=await La(g,(h=o==null?void 0:o[0])==null?void 0:h.signal)}catch(g){throw await Promise.all(d.map(y=>y==null?void 0:y.handleChainError(g))),g}return await Promise.all(d.map(g=>g==null?void 0:g.handleChainEnd(ct(m,"output")))),m}async*_transformStreamWithConfig(e,n,r){let l,o=!0,c,d=!0;const m=Ne(r),h=await pn(m);async function*g(){for await(const _ of e){if(o)if(l===void 0)l=_;else try{l=gn(l,_)}catch{l=void 0,o=!1}yield _}}let y;try{const _=await bO(n.bind(this),g(),async()=>h==null?void 0:h.handleChainStart(this.toJSON(),{input:""},m.runId,m.runType,void 0,void 0,m.runName??this.getName()),r==null?void 0:r.signal,m);delete m.runId,y=_.setup;const w=y==null?void 0:y.handlers.find(wO);let S=_.output;w!==void 0&&y!==void 0&&(S=w.tapOutputIterable(y.runId,S));const E=y==null?void 0:y.handlers.find(_O);E!==void 0&&y!==void 0&&(S=E.tapOutputIterable(y.runId,S));for await(const x of S)if(yield x,d)if(c===void 0)c=x;else try{c=gn(c,x)}catch{c=void 0,d=!1}}catch(_){throw await(y==null?void 0:y.handleChainError(_,void 0,void 0,void 0,{inputs:ct(l,"input")})),_}await(y==null?void 0:y.handleChainEnd(c??{},void 0,void 0,void 0,{inputs:ct(l,"input")}))}getGraph(e){const n=new qu,r=n.addNode({name:`${this.getName()}Input`,schema:$y()}),l=n.addNode(this),o=n.addNode({name:`${this.getName()}Output`,schema:$y()});return n.addEdge(r,l),n.addEdge(l,o),n}pipe(e){return new Fn({first:this,last:Wa(e)})}pick(e){return this.pipe(new MO(e))}assign(e){return this.pipe(new uv(new fi({steps:e})))}async*transform(e,n){let r;for await(const l of e)r===void 0?r=l:r=gn(r,l);yield*this._streamIterator(r,Ne(n))}async*streamLog(e,n,r){const l=new c_({...r,autoClose:!1,_schemaFormat:"original"}),o=Ne(n);yield*this._streamLog(e,l,o)}async*_streamLog(e,n,r){const{callbacks:l}=r;if(l===void 0)r.callbacks=[n];else if(Array.isArray(l))r.callbacks=l.concat([n]);else{const m=l.copy();m.addHandler(n,!0),r.callbacks=m}const o=this.stream(e,r);async function c(){try{const m=await o;for await(const h of m){const g=new Aa({ops:[{op:"add",path:"/streamed_output/-",value:h}]});await n.writer.write(g)}}finally{await n.writer.close()}}const d=c();try{for await(const m of n)yield m}finally{await d}}streamEvents(e,n,r){let l;if(n.version==="v1")l=this._streamEventsV1(e,n,r);else if(n.version==="v2")l=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?kO(l):Xt.fromAsyncGenerator(l)}async*_streamEventsV2(e,n,r){var S;const l=new SO({...r,autoClose:!1}),o=Ne(n),c=o.runId??xt();o.runId=c;const d=o.callbacks;if(d===void 0)o.callbacks=[l];else if(Array.isArray(d))o.callbacks=d.concat(l);else{const E=d.copy();E.addHandler(l,!0),o.callbacks=E}const m=new AbortController,h=this;async function g(){try{let E;n!=null&&n.signal?"any"in AbortSignal?E=AbortSignal.any([m.signal,n.signal]):(E=n.signal,n.signal.addEventListener("abort",()=>{m.abort()},{once:!0})):E=m.signal;const x=await h.stream(e,{...o,signal:E}),N=l.tapOutputIterable(c,x);for await(const I of N)if(m.signal.aborted)break}finally{await l.finish()}}const y=g();let _=!1,w;try{for await(const E of l){if(!_){E.data.input=e,_=!0,w=E.run_id,yield E;continue}E.run_id===w&&E.event.endsWith("_end")&&(S=E.data)!=null&&S.input&&delete E.data.input,yield E}}finally{m.abort(),await y}}async*_streamEventsV1(e,n,r){let l,o=!1;const c=Ne(n),d=c.tags??[],m=c.metadata??{},h=c.runName??this.getName(),g=new c_({...r,autoClose:!1,_schemaFormat:"streaming_events"}),y=new OO({...r}),_=this._streamLog(e,g,c);for await(const S of _){if(l?l=l.concat(S):l=js.fromRunLogPatch(S),l.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const I={...l.state},C={run_id:I.id,event:`on_${I.type}_start`,name:h,tags:d,metadata:m,data:{input:e}};y.includeEvent(C,I.type)&&(yield C)}const E=S.ops.filter(I=>I.path.startsWith("/logs/")).map(I=>I.path.split("/")[2]),x=[...new Set(E)];for(const I of x){let C,Y={};const q=l.state.logs[I];if(q.end_time===void 0?q.streamed_output.length>0?C="stream":C="start":C="end",C==="start")q.inputs!==void 0&&(Y.input=q.inputs);else if(C==="end")q.inputs!==void 0&&(Y.input=q.inputs),Y.output=q.final_output;else if(C==="stream"){const ee=q.streamed_output.length;if(ee!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${ee} instead. Encountered in: "${q.name}"`);Y={chunk:q.streamed_output[0]},q.streamed_output=[]}yield{event:`on_${q.type}_${C}`,name:q.name,run_id:q.id,tags:q.tags,metadata:q.metadata,data:Y}}const{state:N}=l;if(N.streamed_output.length>0){const I=N.streamed_output.length;if(I!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${I} instead. Encountered in: "${N.name}"`);const C={chunk:N.streamed_output[0]};N.streamed_output=[];const Y={event:`on_${N.type}_stream`,run_id:N.id,tags:d,metadata:m,name:h,data:C};y.includeEvent(Y,N.type)&&(yield Y)}}const w=l==null?void 0:l.state;if(w!==void 0){const S={event:`on_${w.type}_end`,name:h,run_id:w.id,tags:d,metadata:m,data:{output:w.final_output}};y.includeEvent(S,w.type)&&(yield S)}}static isRunnable(e){return fh(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new er({bound:this,config:{},configFactories:[l=>({callbacks:[new sv({config:l,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return IO(this,e)}}class er extends ft{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=l_(this.config,...e);return l_(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new lv({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(Ne(n),this.kwargs))}async batch(e,n,r){const l=Array.isArray(n)?await Promise.all(n.map(async o=>this._mergeConfig(Ne(o),this.kwargs))):await this._mergeConfig(Ne(n),this.kwargs);return this.bound.batch(e,l,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(Ne(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(Ne(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(Ne(n),this.kwargs))}streamEvents(e,n,r){const l=this,o=async function*(){yield*l.bound.streamEvents(e,{...await l._mergeConfig(Ne(n),l.kwargs),version:n.version},r)};return Xt.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&ft.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new er({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[l=>({callbacks:[new sv({config:l,onStart:e,onEnd:n,onError:r})]})]})}}class Ou extends ft{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Ou({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,vt(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new Ou({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class lv extends er{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const l=e>1?`retry:attempt:${e}`:void 0;return vt(n,{callbacks:r==null?void 0:r.getChild(l)})}async _invoke(e,n,r){return _u(l=>super.invoke(e,this._patchConfigForRetry(l,n,r)),{onFailedAttempt:l=>this.onFailedAttempt(l,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,l){const o={};try{await _u(async c=>{const d=e.map((_,w)=>w).filter(_=>o[_.toString()]===void 0||o[_.toString()]instanceof Error),m=d.map(_=>e[_]),h=d.map(_=>this._patchConfigForRetry(c,n==null?void 0:n[_],r==null?void 0:r[_])),g=await super.batch(m,h,{...l,returnExceptions:!0});let y;for(let _=0;_<g.length;_+=1){const w=g[_],S=d[_];w instanceof Error&&y===void 0&&(y=w,y.input=m[_]),o[S.toString()]=w}if(y)throw y;return g},{onFailedAttempt:c=>this.onFailedAttempt(c,c.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(c){if((l==null?void 0:l.returnExceptions)!==!0)throw c}return Object.keys(o).sort((c,d)=>parseInt(c,10)-parseInt(d,10)).map(c=>o[parseInt(c,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class Fn extends ft{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var m;const r=Ne(n),l=await pn(r),o=await(l==null?void 0:l.handleChainStart(this.toJSON(),ct(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let c=e,d;try{const h=[this.first,...this.middle];for(let g=0;g<h.length;g+=1){const _=h[g].invoke(c,vt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${g+1}`)}));c=await La(_,n==null?void 0:n.signal)}if((m=n==null?void 0:n.signal)!=null&&m.aborted)throw new Error("Aborted");d=await this.last.invoke(c,vt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}return await(o==null?void 0:o.handleChainEnd(ct(d,"output"))),d}async batch(e,n,r){var m;const l=this._getOptionsList(n??{},e.length),o=await Promise.all(l.map(pn)),c=await Promise.all(o.map(async(h,g)=>{const y=await(h==null?void 0:h.handleChainStart(this.toJSON(),ct(e[g],"input"),l[g].runId,void 0,void 0,void 0,l[g].runName));return delete l[g].runId,y}));let d=e;try{for(let h=0;h<this.steps.length;h+=1){const y=this.steps[h].batch(d,c.map((_,w)=>{const S=_==null?void 0:_.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`);return vt(l[w],{callbacks:S})}),r);d=await La(y,(m=l[0])==null?void 0:m.signal)}}catch(h){throw await Promise.all(c.map(g=>g==null?void 0:g.handleChainError(h))),h}return await Promise.all(c.map(h=>h==null?void 0:h.handleChainEnd(ct(d,"output")))),d}async*_streamIterator(e,n){var y;const r=await pn(n),{runId:l,...o}=n??{},c=await(r==null?void 0:r.handleChainStart(this.toJSON(),ct(e,"input"),l,void 0,void 0,void 0,o==null?void 0:o.runName)),d=[this.first,...this.middle,this.last];let m=!0,h;async function*g(){yield e}try{let _=d[0].transform(g(),vt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let w=1;w<d.length;w+=1)_=await d[w].transform(_,vt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${w+1}`)}));for await(const w of _)if((y=n==null?void 0:n.signal)==null||y.throwIfAborted(),yield w,m)if(h===void 0)h=w;else try{h=gn(h,w)}catch{h=void 0,m=!1}}catch(_){throw await(c==null?void 0:c.handleChainError(_)),_}await(c==null?void 0:c.handleChainEnd(ct(h,"output")))}getGraph(e){const n=new qu;let r=null;return this.steps.forEach((l,o)=>{const c=l.getGraph(e);o!==0&&c.trimFirstNode(),o!==this.steps.length-1&&c.trimLastNode(),n.extend(c);const d=c.firstNode();if(!d)throw new Error(`Runnable ${l} has no first node`);r&&n.addEdge(r,d),r=c.lastNode()}),n}pipe(e){return Fn.isRunnableSequence(e)?new Fn({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new Fn({first:this.first,middle:[...this.middle,this.last],last:Wa(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&ft.isRunnable(e)}static from([e,...n],r){let l={};return typeof r=="string"?l.name=r:r!==void 0&&(l=r),new Fn({...l,first:Wa(e),middle:n.slice(0,-1).map(Wa),last:Wa(n[n.length-1])})}}class fi extends ft{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Wa(r)}static from(e){return new fi({steps:e})}async invoke(e,n){const r=Ne(n),l=await pn(r),o=await(l==null?void 0:l.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const c={};try{const d=Object.entries(this.steps).map(async([m,h])=>{c[m]=await h.invoke(e,vt(r,{callbacks:o==null?void 0:o.getChild(`map:key:${m}`)}))});await La(Promise.all(d),n==null?void 0:n.signal)}catch(d){throw await(o==null?void 0:o.handleChainError(d)),d}return await(o==null?void 0:o.handleChainEnd(c)),c}async*_transform(e,n,r){const l={...this.steps},o=iv(e,Object.keys(l).length),c=new Map(Object.entries(l).map(([d,m],h)=>{const g=m.transform(o[h],vt(r,{callbacks:n==null?void 0:n.getChild(`map:key:${d}`)}));return[d,g.next().then(y=>({key:d,gen:g,result:y}))]}));for(;c.size;){const d=Promise.race(c.values()),{key:m,result:h,gen:g}=await La(d,r==null?void 0:r.signal);c.delete(m),h.done||(yield{[m]:h.value},c.set(m,g.next().then(y=>({key:m,gen:g,result:y}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new ci({generator:this.transform(r(),l),config:l});return await o.setup,Xt.fromAsyncGenerator(o)}}class dh extends ft{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!uh(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),l=await pn(r),o=this.func(vt(r,{callbacks:l}),e);return La(o,r==null?void 0:r.signal)}async*_streamIterator(e,n){var o,c;const[r]=this._getOptionsList(n??{},1),l=await this.invoke(e,n);if(Hd(l)){for await(const d of l)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield d;return}if(LO(l)){for(;;){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const d=l.next();if(d.done)break;yield d.value}return}yield l}static from(e){return new dh({func:e})}}function DO(i){if(uh(i))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class Ps extends ft{static lc_name(){return"RunnableLambda"}constructor(e){if(uh(e.func))return dh.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),DO(e.func),this.func=e.func}static from(e){return new Ps({func:e})}async _invoke(e,n,r){return new Promise((l,o)=>{const c=vt(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??Td)-1});ka.runWithConfig(ai(c),async()=>{var d,m;try{let h=await this.func(e,{...c});if(h&&ft.isRunnable(h)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");h=await h.invoke(e,{...c,recursionLimit:(c.recursionLimit??Td)-1})}else if(Hd(h)){let g;for await(const y of Gd(c,h))if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),g===void 0)g=y;else try{g=gn(g,y)}catch{g=y}h=g}else if(m_(h)){let g;for(const y of p_(c,h))if((m=n==null?void 0:n.signal)==null||m.throwIfAborted(),g===void 0)g=y;else try{g=gn(g,y)}catch{g=y}h=g}l(h)}catch(h){o(h)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var d,m;let l;for await(const h of e)if(l===void 0)l=h;else try{l=gn(l,h)}catch{l=h}const o=vt(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??Td)-1}),c=await new Promise((h,g)=>{ka.runWithConfig(ai(o),async()=>{try{const y=await this.func(l,{...o,config:o});h(y)}catch(y){g(y)}})});if(c&&ft.isRunnable(c)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const h=await c.stream(l,o);for await(const g of h)yield g}else if(Hd(c))for await(const h of Gd(o,c))(d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield h;else if(m_(c))for(const h of p_(o,c))(m=r==null?void 0:r.signal)==null||m.throwIfAborted(),yield h;else yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new ci({generator:this.transform(r(),l),config:l});return await o.setup,Xt.fromAsyncGenerator(o)}}class $O extends ft{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=Ne(n),l=await pn(r),{runId:o,...c}=r,d=await(l==null?void 0:l.handleChainStart(this.toJSON(),ct(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName)),m=vt(c,{callbacks:d==null?void 0:d.getChild()});return await ka.runWithConfig(m,async()=>{var y;let g;for(const _ of this.runnables()){(y=r==null?void 0:r.signal)==null||y.throwIfAborted();try{const w=await _.invoke(e,m);return await(d==null?void 0:d.handleChainEnd(ct(w,"output"))),w}catch(w){g===void 0&&(g=w)}}throw g===void 0?new Error("No error stored at end of fallback."):(await(d==null?void 0:d.handleChainError(g)),g)})}async*_streamIterator(e,n){var y;const r=Ne(n),l=await pn(r),{runId:o,...c}=r,d=await(l==null?void 0:l.handleChainStart(this.toJSON(),ct(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName));let m,h;for(const _ of this.runnables()){(y=r==null?void 0:r.signal)==null||y.throwIfAborted();const w=vt(c,{callbacks:d==null?void 0:d.getChild()});try{const S=await _.stream(e,w);h=Gd(w,S);break}catch(S){m===void 0&&(m=S)}}if(h===void 0){const _=m??new Error("No error stored at end of fallback.");throw await(d==null?void 0:d.handleChainError(_)),_}let g;try{for await(const _ of h){yield _;try{g=g===void 0?g:gn(g,_)}catch{g=void 0}}}catch(_){throw await(d==null?void 0:d.handleChainError(_)),_}await(d==null?void 0:d.handleChainEnd(ct(g,"output")))}async batch(e,n,r){var m;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const l=this._getOptionsList(n??{},e.length),o=await Promise.all(l.map(h=>pn(h))),c=await Promise.all(o.map(async(h,g)=>{const y=await(h==null?void 0:h.handleChainStart(this.toJSON(),ct(e[g],"input"),l[g].runId,void 0,void 0,void 0,l[g].runName));return delete l[g].runId,y}));let d;for(const h of this.runnables()){(m=l[0].signal)==null||m.throwIfAborted();try{const g=await h.batch(e,c.map((y,_)=>vt(l[_],{callbacks:y==null?void 0:y.getChild()})),r);return await Promise.all(c.map((y,_)=>y==null?void 0:y.handleChainEnd(ct(g[_],"output")))),g}catch(g){d===void 0&&(d=g)}}throw d?(await Promise.all(c.map(h=>h==null?void 0:h.handleChainError(d))),d):new Error("No error stored at end of fallbacks.")}}function Wa(i){if(typeof i=="function")return new Ps({func:i});if(ft.isRunnable(i))return i;if(!Array.isArray(i)&&typeof i=="object"){const e={};for(const[n,r]of Object.entries(i))e[n]=Wa(r);return new fi({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class uv extends ft{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof fi&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const l=this.mapper.getStepsKeys(),[o,c]=iv(e),d=this.mapper.transform(c,vt(r,{callbacks:n==null?void 0:n.getChild()})),m=d.next();for await(const h of o){if(typeof h!="object"||Array.isArray(h))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof h}`);const g=Object.fromEntries(Object.entries(h).filter(([y])=>!l.includes(y)));Object.keys(g).length>0&&(yield g)}yield(await m).value;for await(const h of d)yield h}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new ci({generator:this.transform(r(),l),config:l});return await o.setup,Xt.fromAsyncGenerator(o)}}class MO extends ft{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new ci({generator:this.transform(r(),l),config:l});return await o.setup,Xt.fromAsyncGenerator(o)}}class g_ extends er{constructor(e){const n=Fn.from([Ps.from(async r=>{let l;if(B_(r))try{l=await this.schema.parseAsync(r.args)}catch{throw new d1("Received tool input did not match expected schema",JSON.stringify(r.args))}else l=r;return l}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function IO(i,e){var l;const n=e.name??i.getName(),r=e.description??((l=e.schema)==null?void 0:l.description);return e.schema.constructor===Yn?new g_({name:n,description:r,schema:Ls({input:Au()}).transform(o=>o.input),bound:i}):new g_({name:n,description:r,schema:e.schema,bound:i})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var PO=typeof window=="object"?window:{},be="0123456789abcdef".split(""),UO=[-2147483648,8388608,32768,128],mn=[24,16,8,0],ot=[];function bn(i){i?(ot[0]=ot[16]=ot[1]=ot[2]=ot[3]=ot[4]=ot[5]=ot[6]=ot[7]=ot[8]=ot[9]=ot[10]=ot[11]=ot[12]=ot[13]=ot[14]=ot[15]=0,this.blocks=ot):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}bn.prototype.update=function(i){if(!this.finalized){var e=typeof i!="string";e&&i.constructor===PO.ArrayBuffer&&(i=new Uint8Array(i));for(var n,r=0,l,o=i.length||0,c=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(l=this.start;r<o&&l<64;++r)c[l>>2]|=i[r]<<mn[l++&3];else for(l=this.start;r<o&&l<64;++r)n=i.charCodeAt(r),n<128?c[l>>2]|=n<<mn[l++&3]:n<2048?(c[l>>2]|=(192|n>>6)<<mn[l++&3],c[l>>2]|=(128|n&63)<<mn[l++&3]):n<55296||n>=57344?(c[l>>2]|=(224|n>>12)<<mn[l++&3],c[l>>2]|=(128|n>>6&63)<<mn[l++&3],c[l>>2]|=(128|n&63)<<mn[l++&3]):(n=65536+((n&1023)<<10|i.charCodeAt(++r)&1023),c[l>>2]|=(240|n>>18)<<mn[l++&3],c[l>>2]|=(128|n>>12&63)<<mn[l++&3],c[l>>2]|=(128|n>>6&63)<<mn[l++&3],c[l>>2]|=(128|n&63)<<mn[l++&3]);this.lastByteIndex=l,this.bytes+=l-this.start,l>=64?(this.block=c[16],this.start=l-64,this.hash(),this.hashed=!0):this.start=l}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};bn.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,e=this.lastByteIndex;i[16]=this.block,i[e>>2]|=UO[e&3],this.block=i[16],e>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}};bn.prototype.hash=function(){var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4,o,c,d,m=this.blocks;for(c=16;c<80;++c)d=m[c-3]^m[c-8]^m[c-14]^m[c-16],m[c]=d<<1|d>>>31;for(c=0;c<20;c+=5)o=e&n|~e&r,d=i<<5|i>>>27,l=d+o+l+1518500249+m[c]<<0,e=e<<30|e>>>2,o=i&e|~i&n,d=l<<5|l>>>27,r=d+o+r+1518500249+m[c+1]<<0,i=i<<30|i>>>2,o=l&i|~l&e,d=r<<5|r>>>27,n=d+o+n+1518500249+m[c+2]<<0,l=l<<30|l>>>2,o=r&l|~r&i,d=n<<5|n>>>27,e=d+o+e+1518500249+m[c+3]<<0,r=r<<30|r>>>2,o=n&r|~n&l,d=e<<5|e>>>27,i=d+o+i+1518500249+m[c+4]<<0,n=n<<30|n>>>2;for(;c<40;c+=5)o=e^n^r,d=i<<5|i>>>27,l=d+o+l+1859775393+m[c]<<0,e=e<<30|e>>>2,o=i^e^n,d=l<<5|l>>>27,r=d+o+r+1859775393+m[c+1]<<0,i=i<<30|i>>>2,o=l^i^e,d=r<<5|r>>>27,n=d+o+n+1859775393+m[c+2]<<0,l=l<<30|l>>>2,o=r^l^i,d=n<<5|n>>>27,e=d+o+e+1859775393+m[c+3]<<0,r=r<<30|r>>>2,o=n^r^l,d=e<<5|e>>>27,i=d+o+i+1859775393+m[c+4]<<0,n=n<<30|n>>>2;for(;c<60;c+=5)o=e&n|e&r|n&r,d=i<<5|i>>>27,l=d+o+l-1894007588+m[c]<<0,e=e<<30|e>>>2,o=i&e|i&n|e&n,d=l<<5|l>>>27,r=d+o+r-1894007588+m[c+1]<<0,i=i<<30|i>>>2,o=l&i|l&e|i&e,d=r<<5|r>>>27,n=d+o+n-1894007588+m[c+2]<<0,l=l<<30|l>>>2,o=r&l|r&i|l&i,d=n<<5|n>>>27,e=d+o+e-1894007588+m[c+3]<<0,r=r<<30|r>>>2,o=n&r|n&l|r&l,d=e<<5|e>>>27,i=d+o+i-1894007588+m[c+4]<<0,n=n<<30|n>>>2;for(;c<80;c+=5)o=e^n^r,d=i<<5|i>>>27,l=d+o+l-899497514+m[c]<<0,e=e<<30|e>>>2,o=i^e^n,d=l<<5|l>>>27,r=d+o+r-899497514+m[c+1]<<0,i=i<<30|i>>>2,o=l^i^e,d=r<<5|r>>>27,n=d+o+n-899497514+m[c+2]<<0,l=l<<30|l>>>2,o=r^l^i,d=n<<5|n>>>27,e=d+o+e-899497514+m[c+3]<<0,r=r<<30|r>>>2,o=n^r^l,d=e<<5|e>>>27,i=d+o+i-899497514+m[c+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+l<<0};bn.prototype.hex=function(){this.finalize();var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4;return be[i>>28&15]+be[i>>24&15]+be[i>>20&15]+be[i>>16&15]+be[i>>12&15]+be[i>>8&15]+be[i>>4&15]+be[i&15]+be[e>>28&15]+be[e>>24&15]+be[e>>20&15]+be[e>>16&15]+be[e>>12&15]+be[e>>8&15]+be[e>>4&15]+be[e&15]+be[n>>28&15]+be[n>>24&15]+be[n>>20&15]+be[n>>16&15]+be[n>>12&15]+be[n>>8&15]+be[n>>4&15]+be[n&15]+be[r>>28&15]+be[r>>24&15]+be[r>>20&15]+be[r>>16&15]+be[r>>12&15]+be[r>>8&15]+be[r>>4&15]+be[r&15]+be[l>>28&15]+be[l>>24&15]+be[l>>20&15]+be[l>>16&15]+be[l>>12&15]+be[l>>8&15]+be[l>>4&15]+be[l&15]};bn.prototype.toString=bn.prototype.hex;bn.prototype.digest=function(){this.finalize();var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4;return[i>>24&255,i>>16&255,i>>8&255,i&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,l>>24&255,l>>16&255,l>>8&255,l&255]};bn.prototype.array=bn.prototype.digest;bn.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(20),e=new DataView(i);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),i};const zO=i=>new bn(!0).update(i).hex(),y_=(...i)=>zO(i.join("_"));class qO{}const BO=new Map;class hh extends qO{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(y_(e,n))??null)}async update(e,n,r){this.cache.set(y_(e,n),r)}static global(){return new hh(BO)}}class ov extends nr{}class HO extends ov{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Lu(this.value)]}}class GO extends ov{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return H_(this.messages)}toChatMessages(){return this.messages}}var ms={},b_;function ZO(){if(b_)return ms;b_=1,ms.byteLength=d,ms.toByteArray=h,ms.fromByteArray=_;for(var i=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,o=r.length;l<o;++l)i[l]=r[l],e[r.charCodeAt(l)]=l;e[45]=62,e[95]=63;function c(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=w.indexOf("=");E===-1&&(E=S);var x=E===S?0:4-E%4;return[E,x]}function d(w){var S=c(w),E=S[0],x=S[1];return(E+x)*3/4-x}function m(w,S,E){return(S+E)*3/4-E}function h(w){var S,E=c(w),x=E[0],N=E[1],I=new n(m(w,x,N)),C=0,Y=N>0?x-4:x,q;for(q=0;q<Y;q+=4)S=e[w.charCodeAt(q)]<<18|e[w.charCodeAt(q+1)]<<12|e[w.charCodeAt(q+2)]<<6|e[w.charCodeAt(q+3)],I[C++]=S>>16&255,I[C++]=S>>8&255,I[C++]=S&255;return N===2&&(S=e[w.charCodeAt(q)]<<2|e[w.charCodeAt(q+1)]>>4,I[C++]=S&255),N===1&&(S=e[w.charCodeAt(q)]<<10|e[w.charCodeAt(q+1)]<<4|e[w.charCodeAt(q+2)]>>2,I[C++]=S>>8&255,I[C++]=S&255),I}function g(w){return i[w>>18&63]+i[w>>12&63]+i[w>>6&63]+i[w&63]}function y(w,S,E){for(var x,N=[],I=S;I<E;I+=3)x=(w[I]<<16&16711680)+(w[I+1]<<8&65280)+(w[I+2]&255),N.push(g(x));return N.join("")}function _(w){for(var S,E=w.length,x=E%3,N=[],I=16383,C=0,Y=E-x;C<Y;C+=I)N.push(y(w,C,C+I>Y?Y:C+I));return x===1?(S=w[E-1],N.push(i[S>>2]+i[S<<4&63]+"==")):x===2&&(S=(w[E-2]<<8)+w[E-1],N.push(i[S>>10]+i[S>>4&63]+i[S<<2&63]+"=")),N.join("")}return ms}var VO=ZO();const YO=ks(VO);var FO=Object.defineProperty,XO=(i,e,n)=>e in i?FO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,QO=(i,e,n)=>(XO(i,e+"",n),n);function JO(i,e){let n=Array.from({length:i.length},(r,l)=>({start:l,end:l+1}));for(;n.length>1;){let r=null;for(let l=0;l<n.length-1;l++){const o=i.slice(n[l].start,n[l+1].end),c=e.get(o.join(","));c!=null&&(r==null||c<r[0])&&(r=[c,l])}if(r!=null){const l=r[1];n[l]={start:n[l].start,end:n[l+1].end},n.splice(l+1,1)}else break}return n}function KO(i,e){return i.length===1?[e.get(i.join(","))]:JO(i,e).map(n=>e.get(i.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function WO(i){return i.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Zd=class{constructor(i,e){Ea(this,"specialTokens");Ea(this,"inverseSpecialTokens");Ea(this,"patStr");Ea(this,"textEncoder",new TextEncoder);Ea(this,"textDecoder",new TextDecoder("utf-8"));Ea(this,"rankMap",new Map);Ea(this,"textMap",new Map);this.patStr=i.pat_str;const n=i.bpe_ranks.split(`
`).filter(Boolean).reduce((r,l)=>{const[o,c,...d]=l.split(" "),m=Number.parseInt(c,10);return d.forEach((h,g)=>r[h]=m+g),r},{});for(const[r,l]of Object.entries(n)){const o=YO.toByteArray(r);this.rankMap.set(o.join(","),l),this.textMap.set(l,o)}this.specialTokens={...i.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[l,o])=>(r[o]=this.textEncoder.encode(l),r),{})}encode(i,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),l=Zd.specialTokenRegex(Object.keys(this.specialTokens)),o=[],c=new Set(e==="all"?Object.keys(this.specialTokens):e),d=new Set(n==="all"?Object.keys(this.specialTokens).filter(h=>!c.has(h)):n);if(d.size>0){const h=Zd.specialTokenRegex([...d]),g=i.match(h);if(g!=null)throw new Error(`The text contains a special token that is not allowed: ${g[0]}`)}let m=0;for(;;){let h=null,g=m;for(;l.lastIndex=g,h=l.exec(i),!(h==null||c.has(h[0]));)g=h.index+1;const y=(h==null?void 0:h.index)??i.length;for(const w of i.substring(m,y).matchAll(r)){const S=this.textEncoder.encode(w[0]),E=this.rankMap.get(S.join(","));if(E!=null){o.push(E);continue}o.push(...KO(S,this.rankMap))}if(h==null)break;let _=this.specialTokens[h[0]];o.push(_),m=h.index+h[0].length}return o}decode(i){const e=[];let n=0;for(let o=0;o<i.length;++o){const c=i[o],d=this.textMap.get(c)??this.inverseSpecialTokens[c];d!=null&&(e.push(d),n+=d.length)}const r=new Uint8Array(n);let l=0;for(const o of e)r.set(o,l),l+=o.length;return this.textDecoder.decode(r)}},cv=Zd;QO(cv,"specialTokenRegex",i=>new RegExp(i.map(e=>WO(e)).join("|"),"g"));function ex(i){switch(i){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}const ou={},tx=new ch({});async function nx(i){return i in ou||(ou[i]=tx.fetch(`https://tiktoken.pages.dev/js/${i}.json`).then(e=>e.json()).then(e=>new cv(e)).catch(e=>{throw delete ou[i],e})),await ou[i]}async function ax(i){return nx(ex(i))}const rx=i=>i.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":i.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":i.startsWith("gpt-4-32k")?"gpt-4-32k":i.startsWith("gpt-4-")?"gpt-4":i.startsWith("gpt-4o")?"gpt-4o":i,ix=()=>!1;class sx extends ft{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??ix(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class lx extends sx{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){const{cache:l,...o}=r;super({callbacks:e??n,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof l=="object"?this.cache=l:l?this.cache=hh.global():this.cache=void 0,this.caller=new ch(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await ax("modelName"in this?rx(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new HO(e):Array.isArray(e)?new GO(e.map(gs)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([c,d])=>d!==void 0).map(([c,d])=>`${c}:${JSON.stringify(d)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class xu extends ft{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,n){const r=Ne(n);return this.func&&await this.func(e,r),this._callWithConfig(l=>Promise.resolve(l),e,r)}async*transform(e,n){const r=Ne(n);let l,o=!0;for await(const c of this._transformStreamWithConfig(e,d=>d,r))if(yield c,o)if(l===void 0)l=c;else try{l=gn(l,c)}catch{l=void 0,o=!1}this.func&&l!==void 0&&await this.func(l,r)}static assign(e){return new uv(new fi({steps:e}))}}function Cs(i){var r;if(!i||typeof i!="object"||Array.isArray(i))return!1;const e=i;return e._def||Object.values(Q).includes(((r=e.constructor)==null?void 0:r.name)??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}function xd(i){const e=[];for(const n of i){let r=n;if(Array.isArray(n.content))for(let l=0;l<n.content.length;l++){const o=n.content[l];(n1(o)||a1(o))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,l),r1(o),...n.content.slice(l+1)]}))}e.push(r)}return e}class Ra extends lx{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async invoke(e,n){const r=Ra._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}async*_streamIterator(e,n){var r;if(this._streamResponseChunks===Ra.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,n);else{const o=Ra._convertInputToPromptValue(e).toChatMessages(),[c,d]=this._separateRunnableConfigFromCallOptionsCompat(n),m={...c.metadata,...this.getLsParams(d)},h=await Mt.configure(c.callbacks,this.callbacks,c.tags,this.tags,m,this.metadata,{verbose:this.verbose}),g={options:d,invocation_params:this==null?void 0:this.invocationParams(d),batch_size:1},y=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),[xd(o)],c.runId,void 0,g,void 0,void 0,c.runName));let _,w;try{for await(const S of this._streamResponseChunks(o,d,y==null?void 0:y[0])){if(S.message.id==null){const E=(r=y==null?void 0:y.at(0))==null?void 0:r.runId;E!=null&&S.message._updateId(`run-${E}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata},yield S.message,_?_=_.concat(S):_=S,By(S.message)&&S.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}}catch(S){throw await Promise.all((y??[]).map(E=>E==null?void 0:E.handleLLMError(S))),S}await Promise.all((y??[]).map(S=>S==null?void 0:S.handleLLMEnd({generations:[[_]],llmOutput:w})))}}getLsParams(e){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:n}}async _generateUncached(e,n,r,l){var y,_;const o=e.map(w=>w.map(gs));let c;if(l!==void 0&&l.length===o.length)c=l;else{const w={...r.metadata,...this.getLsParams(n)},S=await Mt.configure(r.callbacks,this.callbacks,r.tags,this.tags,w,this.metadata,{verbose:this.verbose}),E={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1};c=await(S==null?void 0:S.handleChatModelStart(this.toJSON(),o.map(xd),r.runId,void 0,E,void 0,void 0,r.runName))}const d=[],m=[];if(!!(c!=null&&c[0].handlers.find(JT))&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==Ra.prototype._streamResponseChunks)try{const w=await this._streamResponseChunks(o[0],n,c==null?void 0:c[0]);let S,E;for await(const x of w){if(x.message.id==null){const N=(y=c==null?void 0:c.at(0))==null?void 0:y.runId;N!=null&&x.message._updateId(`run-${N}`)}S===void 0?S=x:S=gn(S,x),By(x.message)&&x.message.usage_metadata!==void 0&&(E={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}if(S===void 0)throw new Error("Received empty response from chat model call.");d.push([S]),await(c==null?void 0:c[0].handleLLMEnd({generations:d,llmOutput:E}))}catch(w){throw await(c==null?void 0:c[0].handleLLMError(w)),w}else{const w=await Promise.allSettled(o.map((S,E)=>this._generate(S,{...n,promptIndex:E},c==null?void 0:c[E])));await Promise.all(w.map(async(S,E)=>{var x,N,I;if(S.status==="fulfilled"){const C=S.value;for(const Y of C.generations){if(Y.message.id==null){const q=(x=c==null?void 0:c.at(0))==null?void 0:x.runId;q!=null&&Y.message._updateId(`run-${q}`)}Y.message.response_metadata={...Y.generationInfo,...Y.message.response_metadata}}return C.generations.length===1&&(C.generations[0].message.response_metadata={...C.llmOutput,...C.generations[0].message.response_metadata}),d[E]=C.generations,m[E]=C.llmOutput,(N=c==null?void 0:c[E])==null?void 0:N.handleLLMEnd({generations:[C.generations],llmOutput:C.llmOutput})}else return await((I=c==null?void 0:c[E])==null?void 0:I.handleLLMError(S.reason)),Promise.reject(S.reason)}))}const g={generations:d,llmOutput:m.length?(_=this._combineLLMOutput)==null?void 0:_.call(this,...m):void 0};return Object.defineProperty(g,f_,{value:c?{runIds:c==null?void 0:c.map(w=>w.runId)}:void 0,configurable:!0}),g}async _generateCached({messages:e,cache:n,llmStringKey:r,parsedOptions:l,handledOptions:o}){const c=e.map(x=>x.map(gs)),d={...o.metadata,...this.getLsParams(l)},m=await Mt.configure(o.callbacks,this.callbacks,o.tags,this.tags,d,this.metadata,{verbose:this.verbose}),h={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},g=await(m==null?void 0:m.handleChatModelStart(this.toJSON(),c.map(xd),o.runId,void 0,h,void 0,void 0,o.runName)),y=[],w=(await Promise.allSettled(c.map(async(x,N)=>{const I=Ra._convertInputToPromptValue(x).toString(),C=await n.lookup(I,r);return C==null&&y.push(N),C}))).map((x,N)=>({result:x,runManager:g==null?void 0:g[N]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),S=[];await Promise.all(w.map(async({result:x,runManager:N},I)=>{if(x.status==="fulfilled"){const C=x.value;return S[I]=C.map(Y=>("message"in Y&&Nu(Y.message)&&th(Y.message)&&(Y.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),Y.generationInfo={...Y.generationInfo,tokenUsage:{}},Y)),C.length&&await(N==null?void 0:N.handleLLMNewToken(C[0].text)),N==null?void 0:N.handleLLMEnd({generations:[C]},void 0,void 0,void 0,{cached:!0})}else return await(N==null?void 0:N.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(x.reason)}));const E={generations:S,missingPromptIndices:y,startedRunManagers:g};return Object.defineProperty(E,f_,{value:g?{runIds:g==null?void 0:g.map(x=>x.runId)}:void 0,configurable:!0}),E}async generate(e,n,r){let l;Array.isArray(n)?l={stop:n}:l=n;const o=e.map(S=>S.map(gs)),[c,d]=this._separateRunnableConfigFromCallOptionsCompat(l);if(c.callbacks=c.callbacks??r,!this.cache)return this._generateUncached(o,d,c);const{cache:m}=this,h=this._getSerializedCacheKeyParametersForCall(d),{generations:g,missingPromptIndices:y,startedRunManagers:_}=await this._generateCached({messages:o,cache:m,llmStringKey:h,parsedOptions:d,handledOptions:c});let w={};if(y.length>0){const S=await this._generateUncached(y.map(E=>o[E]),d,c,_!==void 0?y.map(E=>_==null?void 0:_[E]):void 0);await Promise.all(S.generations.map(async(E,x)=>{const N=y[x];g[N]=E;const I=Ra._convertInputToPromptValue(o[N]).toString();return m.update(I,h,E)})),w=S.llmOutput??{}}return{generations:g,llmOutput:w}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,n,r){const l=e.map(o=>o.toChatMessages());return this.generate(l,n,r)}async call(e,n,r){return(await this.generate([e.map(gs)],n,r)).generations[0][0].message}async callPrompt(e,n,r){const l=e.toChatMessages();return this.call(l,n,r)}async predictMessages(e,n,r){return this.call(e,n,r)}async predict(e,n,r){const l=new Lu(e),o=await this.call([l],n,r);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content}withStructuredOutput(e,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,l=n==null?void 0:n.name,o=r.description??"A function available to call.",c=n==null?void 0:n.method,d=n==null?void 0:n.includeRaw;if(c==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let m=l??"extract",h;Cs(r)?h=[{type:"function",function:{name:m,description:o,parameters:Ds(r)}}]:("name"in r&&(m=r.name),h=[{type:"function",function:{name:m,description:o,parameters:r}}]);const g=this.bindTools(h),y=Ps.from(E=>{if(!E.tool_calls||E.tool_calls.length===0)throw new Error("No tool calls found in the response.");const x=E.tool_calls.find(N=>N.name===m);if(!x)throw new Error(`No tool call found with name ${m}.`);return x.args});if(!d)return g.pipe(y).withConfig({runName:"StructuredOutput"});const _=xu.assign({parsed:(E,x)=>y.invoke(E.raw,x)}),w=xu.assign({parsed:()=>null}),S=_.withFallbacks({fallbacks:[w]});return Fn.from([{raw:g},S]).withConfig({runName:"StructuredOutputRunnable"})}}const Yr="0.19.0";let __=!1,Ss,fv,dv,Vd,hv,mv,pv,gv,yv;function ux(i,e={auto:!1}){if(__)throw new Error(`you must \`import 'groq-sdk/shims/${i.kind}'\` before importing anything else from groq-sdk`);if(Ss)throw new Error(`can't \`import 'groq-sdk/shims/${i.kind}'\` after \`import 'groq-sdk/shims/${Ss}'\``);__=e.auto,Ss=i.kind,fv=i.fetch,dv=i.FormData,Vd=i.File,hv=i.ReadableStream,mv=i.getMultipartRequestOptions,pv=i.getDefaultAgent,gv=i.fileFromPath,yv=i.isFsReadStream}class ox{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function cx({manuallyImported:i}={}){const e=i?"You may need to use polyfills":"Add one of these imports before your first `import  from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,r,l,o;try{n=fetch,r=Request,l=Response,o=Headers}catch(c){throw new Error(`this environment is missing the following Web Fetch API type: ${c.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:l,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(c,d)=>({...d,body:new ox(c)}),getDefaultAgent:c=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:c=>!1}}const bv=()=>{Ss||ux(cx(),{auto:!0})};bv();class yn extends Error{}class wt extends yn{constructor(e,n,r,l){super(`${wt.makeMessage(e,n,r)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,r){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,r,l){if(!e||!l)return new Bu({message:r,cause:Xd(n)});const o=n;return e===400?new vv(e,o,r,l):e===401?new wv(e,o,r,l):e===403?new Sv(e,o,r,l):e===404?new Ev(e,o,r,l):e===409?new Tv(e,o,r,l):e===422?new Ov(e,o,r,l):e===429?new xv(e,o,r,l):e>=500?new Av(e,o,r,l):new wt(e,o,r,l)}}class Yd extends wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Bu extends wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class _v extends Bu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vv extends wt{}class wv extends wt{}class Sv extends wt{}class Ev extends wt{}class Tv extends wt{}class Ov extends wt{}class xv extends wt{}class Av extends wt{}class Qr{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;const l=new fx;async function*o(){if(!e.body)throw n.abort(),new yn("Attempted to iterate over a response with no body");const d=new ar,m=v_(e.body);for await(const h of m)for(const g of d.decode(h)){const y=l.decode(g);y&&(yield y)}for(const h of d.flush()){const g=l.decode(h);g&&(yield g)}}async function*c(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let d=!1;try{for await(const m of o())if(!d){if(m.data.startsWith("[DONE]")){d=!0;continue}if(m.event===null||m.event==="error"){let h;try{h=JSON.parse(m.data)}catch(g){throw console.error("Could not parse message into JSON:",m.data),console.error("From chunk:",m.raw),g}if(h&&h.error)throw new wt(h.error.status_code,h.error,h.error.message,void 0);yield h}}d=!0}catch(m){if(m instanceof Error&&m.name==="AbortError")return;throw m}finally{d||n.abort()}}return new Qr(c,n)}static fromReadableStream(e,n){let r=!1;async function*l(){const c=new ar,d=v_(e);for await(const m of d)for(const h of c.decode(m))yield h;for(const m of c.flush())yield m}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of l())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{c||n.abort()}}return new Qr(o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),l=o=>({next:()=>{if(o.length===0){const c=r.next();e.push(c),n.push(c)}return o.shift()}});return[new Qr(()=>l(e),this.controller),new Qr(()=>l(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new hv({async start(){n=e[Symbol.asyncIterator]()},async pull(l){try{const{value:o,done:c}=await n.next();if(c)return l.close();const d=r.encode(JSON.stringify(o)+`
`);l.enqueue(d)}catch(o){l.error(o)}},async cancel(){var l;await((l=n.return)==null?void 0:l.call(n))}})}}class fx{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,l]=dx(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}class ar{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=ar.NEWLINE_CHARS.has(n[n.length-1]||"");let l=n.split(ar.NEWLINE_REGEXP);return l.length===1&&!r?(this.buffer.push(l[0]),[]):(this.buffer.length>0&&(l=[this.buffer.join("")+l[0],...l.slice(1)],this.buffer=[]),r||(this.buffer=[l.pop()||""]),l)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new yn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new yn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new yn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}ar.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);ar.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function dx(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}function v_(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Rv=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function",Nv=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&Hu(i),Hu=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",hx=i=>Nv(i)||Rv(i)||yv(i);async function jv(i,e,n){var l;if(i=await i,Nv(i))return i;if(Rv(i)){const o=await i.blob();e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()??"unknown_file");const c=Hu(o)?[await o.arrayBuffer()]:[o];return new Vd(c,e,n)}const r=await mx(i);if(e||(e=gx(i)??"unknown_file"),!(n!=null&&n.type)){const o=(l=r[0])==null?void 0:l.type;typeof o=="string"&&(n={...n,type:o})}return new Vd(r,e,n)}async function mx(i){var n;let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(Hu(i))e.push(await i.arrayBuffer());else if(yx(i))for await(const r of i)e.push(r);else throw new Error(`Unexpected data type: ${typeof i}; constructor: ${(n=i==null?void 0:i.constructor)==null?void 0:n.name}; props: ${px(i)}`);return e}function px(i){return`[${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}function gx(i){var e;return Ad(i.name)||Ad(i.filename)||((e=Ad(i.path))==null?void 0:e.split(/[\\/]/).pop())}const Ad=i=>{if(typeof i=="string")return i;if(typeof Buffer<"u"&&i instanceof Buffer)return String(i)},yx=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",w_=i=>i&&typeof i=="object"&&i.body&&i[Symbol.toStringTag]==="MultipartBody",mh=async i=>{const e=await bx(i.body);return mv(e,i)},bx=async i=>{const e=new dv;return await Promise.all(Object.entries(i||{}).map(([n,r])=>Fd(e,n,r))),e},Fd=async(i,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")i.append(e,String(n));else if(hx(n)){const r=await jv(n);i.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Fd(i,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,l])=>Fd(i,`${e}[${r}]`,l)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Jr={};bv();async function Cv(i){var c;const{response:e}=i;if(i.options.stream)return Kr("response",e.status,e.url,e.headers,e.body),i.options.__streamClass?i.options.__streamClass.fromSSEResponse(e,i.controller):Qr.fromSSEResponse(e,i.controller);if(e.status===204)return null;if(i.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(c=n==null?void 0:n.split(";")[0])==null?void 0:c.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const d=await e.json();return Kr("response",e.status,e.url,e.headers,d),d}const o=await e.text();return Kr("response",e.status,e.url,e.headers,o),o}class Gu extends Promise{constructor(e,n=Cv){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Gu(this.responsePromise,async n=>e(await this.parseResponse(n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class _x{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e4,httpAgent:l,fetch:o}){this.baseURL=e,this.maxRetries=Rd("maxRetries",n),this.timeout=Rd("timeout",r),this.httpAgent=l,this.fetch=o??fv}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Tx(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Cx()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async l=>{const o=l&&Hu(l==null?void 0:l.body)?new DataView(await l.body.arrayBuffer()):(l==null?void 0:l.body)instanceof DataView?l.body:(l==null?void 0:l.body)instanceof ArrayBuffer?new DataView(l.body):l&&ArrayBuffer.isView(l==null?void 0:l.body)?new DataView(l.body.buffer):l==null?void 0:l.body;return{method:e,path:n,...l,body:o}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var S;e={...e};const{method:r,path:l,query:o,headers:c={}}=e,d=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:w_(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,m=this.calculateContentLength(d),h=this.buildURL(l,o);"timeout"in e&&Rd("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const g=e.httpAgent??this.httpAgent??pv(h),y=e.timeout+1e3;typeof((S=g==null?void 0:g.options)==null?void 0:S.timeout)=="number"&&y>(g.options.timeout??0)&&(g.options.timeout=y),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const _=this.buildHeaders({options:e,headers:c,contentLength:m,retryCount:n});return{req:{method:r,...d&&{body:d},headers:_,...g&&{agent:g},signal:e.signal??null},url:h,timeout:e.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:l}){const o={};r&&(o["content-length"]=r);const c=this.defaultHeaders(e);return x_(o,c),x_(o,n),w_(e.body)&&Ss!=="node"&&delete o["content-type"],cu(c,"x-stainless-retry-count")===void 0&&cu(n,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(l)),cu(c,"x-stainless-timeout")===void 0&&cu(n,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(o,n),o}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,l){return wt.generate(e,n,r,l)}request(e,n=null){return new Gu(this.makeRequest(e,n))}async makeRequest(e,n){var y,_;const r=await e,l=r.maxRetries??this.maxRetries;n==null&&(n=l),await this.prepareOptions(r);const{req:o,url:c,timeout:d}=this.buildRequest(r,{retryCount:l-n});if(await this.prepareRequest(o,{url:c,options:r}),Kr("request",c,r,o.headers),(y=r.signal)!=null&&y.aborted)throw new Yd;const m=new AbortController,h=await this.fetchWithTimeout(c,o,d,m).catch(Xd);if(h instanceof Error){if((_=r.signal)!=null&&_.aborted)throw new Yd;if(n)return this.retryRequest(r,n);throw h.name==="AbortError"?new _v:new Bu({cause:h})}const g=wx(h.headers);if(!h.ok){if(n&&this.shouldRetry(h)){const I=`retrying, ${n} attempts remaining`;return Kr(`response (error; ${I})`,h.status,c,g),this.retryRequest(r,n,g)}const w=await h.text().catch(I=>Xd(I).message),S=Ox(w),E=S?void 0:w;throw Kr(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,h.status,c,g,E),this.makeStatusError(h.status,S,E,g)}return{response:h,options:r,controller:m}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new vx(this,r,e)}buildURL(e,n){const r=Ax(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Nx(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new yn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,l){const{signal:o,...c}=n||{};o&&o.addEventListener("abort",()=>l.abort());const d=setTimeout(()=>l.abort(),r),m={signal:l.signal,...c};return m.method&&(m.method=m.method.toUpperCase()),this.fetch.call(void 0,e,m).finally(()=>{clearTimeout(d)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let l;const o=r==null?void 0:r["retry-after-ms"];if(o){const d=parseFloat(o);Number.isNaN(d)||(l=d)}const c=r==null?void 0:r["retry-after"];if(c&&!l){const d=parseFloat(c);Number.isNaN(d)?l=Date.parse(c)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=e.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Rx(l),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,c=Math.min(.5*Math.pow(2,o),8),d=1-Math.random()*.25;return c*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Yr}`}}class vx extends Gu{constructor(e,n,r){super(n,async l=>new r(e,l.response,await Cv(l),l.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const wx=i=>new Proxy(Object.fromEntries(i.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),Sx=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":E_(Deno.build.os),"X-Stainless-Arch":S_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":E_(process.platform),"X-Stainless-Arch":S_(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const i=Ex();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ex(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const r=n.exec(navigator.userAgent);if(r){const l=r[1]||0,o=r[2]||0,c=r[3]||0;return{browser:e,version:`${l}.${o}.${c}`}}}return null}const S_=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",E_=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let T_;const Tx=()=>T_??(T_=Sx()),Ox=i=>{try{return JSON.parse(i)}catch{return}},xx=/^[a-z][a-z0-9+.-]*:/i,Ax=i=>xx.test(i),Rx=i=>new Promise(e=>setTimeout(e,i)),Rd=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yn(`${i} must be an integer`);if(e<0)throw new yn(`${i} must be a positive integer`);return e},Xd=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null)try{return new Error(JSON.stringify(i))}catch{}return new Error(i)},O_=i=>{var e,n,r,l;if(typeof process<"u")return((e=Jr==null?void 0:Jr[i])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(l=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,i))==null?void 0:l.trim()};function Nx(i){if(!i)return!0;for(const e in i)return!1;return!0}function jx(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function x_(i,e){for(const n in e){if(!jx(e,n))continue;const r=n.toLowerCase();if(!r)continue;const l=e[n];l===null?delete i[r]:l!==void 0&&(i[r]=l)}}function Kr(i,...e){typeof process<"u"&&(Jr==null?void 0:Jr.DEBUG)==="true"&&console.log(`Groq:DEBUG:${i}`,...e)}const Cx=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)}),kx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Lx=i=>typeof(i==null?void 0:i.get)=="function",cu=(i,e)=>{var r;const n=e.toLowerCase();if(Lx(i)){const l=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(o,c,d)=>c+d.toUpperCase());for(const o of[e,n,e.toUpperCase(),l]){const c=i.get(o);if(c)return c}}for(const[l,o]of Object.entries(i))if(l.toLowerCase()===n)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o};class wn{constructor(e){this._client=e}}class kv extends wn{create(e,n){return this._client.post("/openai/v1/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Lv extends wn{create(e,n){return this._client.post("/openai/v1/audio/transcriptions",mh({body:e,...n}))}}class Dv extends wn{create(e,n){return this._client.post("/openai/v1/audio/translations",mh({body:e,...n}))}}class Us extends wn{constructor(){super(...arguments),this.speech=new kv(this._client),this.transcriptions=new Lv(this._client),this.translations=new Dv(this._client)}}Us.Speech=kv;Us.Transcriptions=Lv;Us.Translations=Dv;class $v extends wn{create(e,n){return this._client.post("/openai/v1/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/openai/v1/batches/${e}`,n)}list(e){return this._client.get("/openai/v1/batches",e)}cancel(e,n){return this._client.post(`/openai/v1/batches/${e}/cancel`,n)}}let Mv=class extends wn{create(e,n){return this._client.post("/openai/v1/chat/completions",{body:e,...n,stream:e.stream??!1})}};class ph extends wn{constructor(){super(...arguments),this.completions=new Mv(this._client)}}ph.Completions=Mv;class Iv extends wn{}class Pv extends wn{create(e,n){return this._client.post("/openai/v1/embeddings",{body:e,...n})}}class Uv extends wn{create(e,n){return this._client.post("/openai/v1/files",mh({body:e,...n}))}list(e){return this._client.get("/openai/v1/files",e)}delete(e,n){return this._client.delete(`/openai/v1/files/${e}`,n)}content(e,n){return this._client.get(`/openai/v1/files/${e}/content`,n)}info(e,n){return this._client.get(`/openai/v1/files/${e}`,n)}}class zv extends wn{retrieve(e,n){return this._client.get(`/openai/v1/models/${e}`,n)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,n){return this._client.delete(`/openai/v1/models/${e}`,n)}}var qv;class qe extends _x{constructor({baseURL:e=O_("GROQ_BASE_URL"),apiKey:n=O_("GROQ_API_KEY"),...r}={}){if(n===void 0)throw new yn("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const l={apiKey:n,...r,baseURL:e||"https://api.groq.com"};if(!l.dangerouslyAllowBrowser&&kx())throw new yn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:l.baseURL,timeout:l.timeout??6e4,httpAgent:l.httpAgent,maxRetries:l.maxRetries,fetch:l.fetch}),this.completions=new Iv(this),this.chat=new ph(this),this.embeddings=new Pv(this),this.audio=new Us(this),this.models=new zv(this),this.batches=new $v(this),this.files=new Uv(this),this._options=l,this.apiKey=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}qv=qe;qe.Groq=qv;qe.DEFAULT_TIMEOUT=6e4;qe.GroqError=yn;qe.APIError=wt;qe.APIConnectionError=Bu;qe.APIConnectionTimeoutError=_v;qe.APIUserAbortError=Yd;qe.NotFoundError=Ev;qe.ConflictError=Tv;qe.RateLimitError=xv;qe.BadRequestError=vv;qe.AuthenticationError=wv;qe.InternalServerError=Av;qe.PermissionDeniedError=Sv;qe.UnprocessableEntityError=Ov;qe.toFile=jv;qe.fileFromPath=gv;qe.Completions=Iv;qe.Chat=ph;qe.Embeddings=Pv;qe.Audio=Us;qe.Models=zv;qe.Batches=$v;qe.Files=Uv;class Dx extends ft{parseResultWithPrompt(e,n,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,n){return typeof e=="string"?this._callWithConfig(async(r,l)=>this.parseResult([{text:r}],l==null?void 0:l.callbacks),e,{...n,runType:"parser"}):this._callWithConfig(async(r,l)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],l==null?void 0:l.callbacks),e,{...n,runType:"parser"})}}class Bv extends Dx{parseResult(e,n){return this.parse(e[0].text,n)}async parseWithPrompt(e,n,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class gh extends Error{constructor(e,n,r,l=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=n,this.observation=r,this.sendToLLM=l,l&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");q_(this,"OUTPUT_PARSING_FAILURE")}}function Qd(i,e){const n=typeof i;if(n!==typeof e)return!1;if(Array.isArray(i)){if(!Array.isArray(e))return!1;const r=i.length;if(r!==e.length)return!1;for(let l=0;l<r;l++)if(!Qd(i[l],e[l]))return!1;return!0}if(n==="object"){if(!i||!e)return i===e;const r=Object.keys(i),l=Object.keys(e);if(r.length!==l.length)return!1;for(const c of r)if(!Qd(i[c],e[c]))return!1;return!0}return i===e}class $x extends Bv{async*_transform(e){for await(const n of e)typeof n=="string"?yield this.parseResult([{text:n}]):yield this.parseResult([{message:n,text:this._baseMessageToString(n)}])}async*transform(e,n){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...n,runType:"parser"})}}class Hv extends $x{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const l of e){if(typeof l!="string"&&typeof l.content!="string")throw new Error("Cannot handle non-string output.");let o;if(o1(l)){if(typeof l.content!="string")throw new Error("Cannot handle non-string message output.");o=new ii({message:l,text:l.content})}else if(Nu(l)){if(typeof l.content!="string")throw new Error("Cannot handle non-string message output.");o=new ii({message:p1(l),text:l.content})}else o=new ri({text:l});r===void 0?r=o:r=r.concat(o);const c=await this.parsePartialResult([r]);c!=null&&!Qd(c,n)&&(this.diff?yield this._diff(n,c):yield c,n=c)}}getFormatInstructions(){return""}}class Mx extends Bv{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Ls(Object.fromEntries(Object.entries(e).map(([r,l])=>[r,Au().describe(l)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Ds(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(l,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(r))}catch(n){throw new gh(`Failed to parse. Text: "${e}". Error: ${n}`,e)}}}class Ix extends Hv{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,n){if(n)return e?HT(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return Py(e[0].text)}async parse(e){return Py(e,JSON.parse)}getFormatInstructions(){return""}}function Gv(i,e){if(i.function===void 0)return;let n;if(e!=null&&e.partial)try{n=Wd(i.function.arguments??"{}")}catch{return}else try{n=JSON.parse(i.function.arguments)}catch(l){throw new gh([`Function "${i.function.name}" arguments:`,"",i.function.arguments,"","are not valid JSON.",`Error: ${l.message}`].join(`
`))}const r={name:i.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=i.id),r}function Px(i){if(i.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:i.id,type:"function",function:{name:i.name,arguments:JSON.stringify(i.args)}}}function Ux(i,e){var n,r;return{name:(n=i.function)==null?void 0:n.name,args:(r=i.function)==null?void 0:r.arguments,id:i.id,error:e,type:"invalid_tool_call"}}class zx extends Hv{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var c;const r=e[0].message;let l;if(th(r)&&((c=r.tool_calls)!=null&&c.length)?l=r.tool_calls.map(d=>{const{id:m,...h}=d;return this.returnId?{id:m,...h}:h}):r.additional_kwargs.tool_calls!==void 0&&(l=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(m=>Gv(m,{returnId:this.returnId,partial:n}))),!l)return[];const o=[];for(const d of l)if(d!==void 0){const m={type:d.name,args:d.args,id:d.id};o.push(m)}return o}}class A_ extends zx{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await this.zodSchema.safeParseAsync(e);if(n.success)return n.data;throw new gh(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(o=>o.type===this.keyName);let l=r;if(r.length)return this.returnId||(l=r.map(o=>o.args)),this.returnSingle?l[0]:l}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(c=>c.type===this.keyName);let l=r;return r.length?(this.returnId||(l=r.map(c=>c.args)),this.returnSingle?this._validateResult(l[0]):await Promise.all(l.map(c=>this._validateResult(c)))):void 0}}function qx(i){return i!==void 0&&Array.isArray(i.lc_namespace)}function Bx(i){return i!==void 0&&ft.isRunnable(i)&&"lc_name"in i.constructor&&typeof i.constructor.lc_name=="function"&&i.constructor.lc_name()==="RunnableToolLike"}function Hx(i){return!!i&&typeof i=="object"&&"name"in i&&"schema"in i&&(Cs(i.schema)||i.schema!=null&&typeof i.schema=="object"&&"type"in i.schema&&typeof i.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(i.schema.type))}function Gx(i){return Hx(i)||Bx(i)||qx(i)}function Zx(i){return Cs(i)?Ds(i):i}function Vx(i,e){return{name:i.name,description:i.description,parameters:Zx(i.schema)}}function R_(i,e){let n;return Gx(i)?n={type:"function",function:Vx(i)}:n=i,n}const Yx=["frequency_penalty","function_call","functions","logit_bias","logprobs","max_completion_tokens","max_tokens","n","parallel_tool_calls","presence_penalty","reasoning_format","response_format","seed","service_tier","stop","temperature","tool_choice","top_logprobs","top_p"],Fx=["headers","promptIndex","stream_options","tools"],Xx=[...Yx,...Fx];function Qx(i){const e=i._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";default:throw new Error(`Unknown message type: ${e}`)}}function N_(i){return i.map(e=>{var r;if(typeof e.content!="string")throw new Error("Non string message content not supported");const n={role:Qx(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id};return th(e)&&((r=e.tool_calls)!=null&&r.length)?n.tool_calls=e.tool_calls.map(Px):(e.additional_kwargs.tool_calls!=null&&(n.tool_calls=e.additional_kwargs.tool_calls),e.tool_call_id!=null&&(n.tool_call_id=e.tool_call_id)),n})}function Jx(i,e,n){const r=i.tool_calls;switch(i.role){case"assistant":{const l=[],o=[];for(const c of r??[])try{l.push(Gv(c,{returnId:!0}))}catch(d){o.push(Ux(c,d.message))}return new $d({content:i.content||"",additional_kwargs:{tool_calls:r},tool_calls:l,invalid_tool_calls:o,usage_metadata:e,response_metadata:n})}default:return new ju(i.content||"",i.role??"unknown")}}function Kx(i,e,n,r){var _,w;const l=i.role??e,o=i.content??"";let c;i.function_call?c={function_call:i.function_call}:i.tool_calls?c={tool_calls:i.tool_calls}:c={},i.audio&&(c.audio={...i.audio,index:n.choices[0].index});let d,m=r,h;const g=n.x_groq;g!=null&&g.usage&&(d={input_tokens:g.usage.prompt_tokens,output_tokens:g.usage.completion_tokens,total_tokens:g.usage.total_tokens},h={completion_time:g.usage.completion_time,prompt_time:g.usage.prompt_time,queue_time:g.usage.queue_time,total_time:g.usage.total_time}),g!=null&&g.id&&(m=g.id);const y={usage:d,timing:h};if(l==="user")return new Du({content:o,response_metadata:y});if(l==="assistant"){const S=[];if(Array.isArray(i.tool_calls))for(const E of i.tool_calls)S.push({name:(_=E.function)==null?void 0:_.name,args:(w=E.function)==null?void 0:w.arguments,id:E.id,index:E.index,type:"tool_call_chunk"});return new rr({content:o,tool_call_chunks:S,additional_kwargs:c,id:m,response_metadata:y})}else return l==="system"?new As({content:o,response_metadata:y}):l==="developer"?new As({content:o,response_metadata:y,additional_kwargs:{__openai_role__:"developer"}}):l==="function"?new ku({content:o,additional_kwargs:c,name:i.name,response_metadata:y}):l==="tool"?new eh({content:o,additional_kwargs:c,tool_call_id:i.tool_call_id,response_metadata:y}):new Cu({content:o,role:l,response_metadata:y})}class Zv extends Ra{get lc_serialized_keys(){return["client","model","temperature","stop","stopSequences","maxTokens","streaming","apiKey","streamUsage","topP","frequencyPenalty","presencePenalty","logprobs","n","logitBias","user","reasoningFormat","serviceTier","topLogprobs"]}static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}get callKeys(){return[...super.callKeys,...Xx]}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","groq"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serviceTier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0});const n=e.apiKey||Jn("GROQ_API_KEY");if(!n)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');const r={"User-Agent":"langchainjs",...e.defaultHeaders??{}};this.client=new qe({apiKey:n,dangerouslyAllowBrowser:!0,baseURL:e.baseUrl,timeout:e.timeout,httpAgent:e.httpAgent,fetch:e.fetch,maxRetries:0,defaultHeaders:r,defaultQuery:e.defaultQuery}),this.apiKey=n,this.temperature=e.temperature??this.temperature,this.model=e.model,this.streaming=e.streaming??this.streaming,this.stop=e.stopSequences??(typeof e.stop=="string"?[e.stop]:e.stop)??[],this.stopSequences=this.stop,this.maxTokens=e.maxTokens,this.topP=e.topP,this.frequencyPenalty=e.frequencyPenalty,this.presencePenalty=e.presencePenalty,this.logprobs=e.logprobs,this.n=e.n,this.logitBias=e.logitBias,this.user=e.user}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??this.temperature,ls_max_tokens:n.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,n){return this.caller.call(async()=>this.client.chat.completions.create(e,n))}invocationParams(e,n){var c;const r=super.invocationParams(e);let l={};(e==null?void 0:e.stream_options)!==void 0?l={stream_options:e.stream_options}:(this.streamUsage&&this.streaming||n!=null&&n.streaming)&&(l={stream_options:{include_usage:!0}});const o={model:this.model,frequency_penalty:this.frequencyPenalty,function_call:e==null?void 0:e.function_call,functions:e==null?void 0:e.functions,logit_bias:this.logitBias,logprobs:this.logprobs,n:this.n,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,presence_penalty:this.presencePenalty,reasoning_format:this.reasoningFormat,response_format:e==null?void 0:e.response_format,seed:e==null?void 0:e.seed,service_tier:this.serviceTier,stop:(e==null?void 0:e.stop)??this.stopSequences,temperature:(e==null?void 0:e.temperature)??this.temperature,tool_choice:Wx(e==null?void 0:e.tool_choice),tools:(c=e==null?void 0:e.tools)!=null&&c.length?e.tools.map(d=>R_(d)):void 0,top_logprobs:this.topLogprobs,top_p:this.topP,user:this.user,stream:this.streaming,...r,...l};return o.max_completion_tokens=(e==null?void 0:e.max_completion_tokens)??(e==null?void 0:e.max_tokens)??this.maxTokens,o.max_completion_tokens===-1&&delete o.max_completion_tokens,o}bindTools(e,n){return this.bind({tools:e.map(r=>R_(r)),...n})}async*_streamResponseChunks(e,n,r){var g,y;const l=this.invocationParams(n,{streaming:!0}),o=N_(e),c=await this.completionWithRetry({...l,messages:o,stream:!0},{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers});let d,m,h;for await(const _ of c){h=_;const w=_==null?void 0:_.choices[0];if(!w)continue;(g=w.delta)!=null&&g.role&&(d=w.delta.role);const S=Kx(w.delta,d,_,m),E={prompt:n.promptIndex??0,completion:w.index??0};if(typeof S.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const x={...E};w.finish_reason!=null&&(x.finish_reason=w.finish_reason,x.system_fingerprint=_.system_fingerprint,x.model_name=_.model);const N=new ii({message:S,text:S.content,generationInfo:x});yield N,await(r==null?void 0:r.handleLLMNewToken(N.text??"",E,void 0,void 0,void 0,{chunk:N}))}if(h&&("choices"in h&&delete h.choices,yield new ii({message:new rr({content:"",response_metadata:h}),text:""})),(y=n.signal)!=null&&y.aborted)throw new Error("AbortError")}async _generate(e,n,r){var l;if(this.streaming){const o={},c=this._streamResponseChunks(e,n,r),d={};for await(const h of c){const g=((l=h.generationInfo)==null?void 0:l.completion)??0;d[g]===void 0?d[g]=h:d[g]=d[g].concat(h)}return{generations:Object.entries(d).sort(([h],[g])=>parseInt(h,10)-parseInt(g,10)).map(([h,g])=>g),llmOutput:{estimatedTokenUsage:o}}}else return this._generateNonStreaming(e,n,r)}async _generateNonStreaming(e,n,r){var h;const l={},o=this.invocationParams(n),c=N_(e),d=await this.completionWithRetry({...o,stream:!1,messages:c},{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers});if("usage"in d&&d.usage){const{completion_tokens:g,prompt_tokens:y,total_tokens:_}=d.usage;g&&(l.completionTokens=(l.completionTokens??0)+g),y&&(l.promptTokens=(l.promptTokens??0)+y),_&&(l.totalTokens=(l.totalTokens??0)+_)}const m=[];if("choices"in d&&d.choices)for(const g of d.choices){const y=((h=g.message)==null?void 0:h.content)??"";let _;l.totalTokens!==void 0&&(_={input_tokens:l.promptTokens??0,output_tokens:l.completionTokens??0,total_tokens:l.totalTokens});const{choices:w,...S}=d,E={text:y,message:Jx(g.message??{role:"assistant"},_,S)};E.generationInfo={...g.finish_reason?{finish_reason:g.finish_reason}:{},...g.logprobs?{logprobs:g.logprobs}:{}},m.push(E)}return{generations:m,llmOutput:{tokenUsage:l}}}withStructuredOutput(e,n){const r=e,l=n==null?void 0:n.name,o=n==null?void 0:n.method,c=n==null?void 0:n.includeRaw;let d=l??"extract",m,h;if(o==="jsonMode")h=this.bind({response_format:{type:"json_object"}}),Cs(r)?m=Mx.fromZodSchema(r):m=new Ix;else if(Cs(r)){const w=Ds(r);h=this.bind({tools:[{type:"function",function:{name:d,description:w.description,parameters:w}}],tool_choice:{type:"function",function:{name:d}}}),m=new A_({returnSingle:!0,keyName:d,zodSchema:r})}else{let w;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(w=r,d=r.name):(d=r.title??d,w={name:d,description:r.description??"",parameters:r}),h=this.bind({tools:[{type:"function",function:w}],tool_choice:{type:"function",function:{name:d}}}),m=new A_({returnSingle:!0,keyName:d})}if(!c)return h.pipe(m).withConfig({runName:"ChatGroqStructuredOutput"});const g=xu.assign({parsed:(w,S)=>m.invoke(w.raw,S)}),y=xu.assign({parsed:()=>null}),_=g.withFallbacks({fallbacks:[y]});return Fn.from([{raw:h},_]).withConfig({runName:"ChatGroqStructuredOutput"})}}function Wx(i){if(i)return i==="any"||i==="required"?"required":i==="auto"?"auto":i==="none"?"none":typeof i=="string"?{type:"function",function:{name:i}}:i}const eA=new Zv({model:"llama3-70b-8192",temperature:0,apiKey:""}),tA=({profile_image_url:i,about:e,name:n="Ch.Varun",linkedin:r,children:l})=>{r||(r="");const[o,c]=Ie.useState([{id:1,text:"Feel free to ask me anything about my background or projects. I'm here to help!",sender:"bot",timestamp:new Date}]),[d,m]=Ie.useState(""),[h,g]=Ie.useState(!1),y=Ie.useRef(null),[_,w]=Ie.useState([]),S=()=>{y.current&&y.current.scrollTo({top:y.current.scrollHeight,behavior:"smooth"})};Ie.useEffect(()=>{S()},[o]);const E=async()=>{if(!d.trim())return;const I={id:Date.now(),text:d,sender:"user",timestamp:new Date},C=[..._,{role:"user",content:d}];w(C),c(Y=>[...Y,I]),m(""),g(!0);try{const Y=await eA.invoke([{role:"system",content:N(n,r)},...C]),q=typeof Y.content=="string"?Y.content:Array.isArray(Y.content)?Y.content.map(ae=>typeof ae=="string"?ae:ae.text||"").join(" "):"",ee={id:Date.now()+1,text:q,sender:"bot",timestamp:new Date};c(ae=>[...ae,ee]),w([...C,{role:"assistant",content:q}])}catch(Y){console.error(Y)}finally{g(!1)}},x=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),E())},N=(I,C)=>`You are acting as ${I}. You are answering questions on ${I}'s website, related to their experience, skills, and career. Be friendly, professional, and helpful. Here's their LinkedIn for context:
${C}. Make sure to answer in 1-2 lines for every question.`;return L.jsx("section",{className:"hero-section",id:"home",children:L.jsxs("div",{className:"hero-content",children:[L.jsx("div",{className:"profile-image",children:L.jsx("img",{src:i,alt:"Profile"})}),L.jsxs("div",{className:"profile-info",children:[L.jsx("h1",{className:"profile-name",children:n}),L.jsx("p",{className:"profile-title",children:"Software Developer @ HashedIn by Deloitte"})]}),L.jsxs("div",{className:"welcome-section",children:[L.jsx("h2",{className:"welcome-title",children:"Welcome to my Portfolio-Website"}),L.jsxs("p",{className:"welcome-description",children:[e," Here is my GitHub, you can explore my projects: ",L.jsx("a",{href:"https://github.com/TheCoder30ec4",children:"GitHub"})]})]}),L.jsxs("div",{className:"chat-interface",children:[L.jsx("h3",{className:"chat-title",children:"Live Chat with me "}),L.jsxs("div",{className:"chat-container",children:[L.jsxs("div",{className:"chat-messages",ref:y,children:[o.map(I=>L.jsxs("div",{className:`message ${I.sender}`,children:[L.jsx("div",{className:"message-avatar",children:I.sender==="bot"?L.jsx("img",{src:i,alt:"Bot Avatar",className:"bot-avatar-img"}):L.jsx("div",{className:"user-avatar",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:L.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),L.jsxs("div",{className:"message-content",children:[L.jsx("div",{className:"message-sender-name",children:I.sender==="bot"?n:"You"}),L.jsx("div",{className:"message-bubble",children:I.text})]})]},I.id)),h&&L.jsxs("div",{className:"message bot",children:[L.jsx("div",{className:"message-avatar",children:L.jsx("img",{src:i,alt:"Bot Avatar",className:"bot-avatar-img"})}),L.jsxs("div",{className:"message-content",children:[L.jsx("div",{className:"message-sender-name",children:n}),L.jsx("div",{className:"message-bubble typing",children:L.jsxs("div",{className:"typing-indicator",children:[L.jsx("span",{}),L.jsx("span",{}),L.jsx("span",{})]})})]})]})]}),L.jsx("div",{className:"chat-input-container",children:L.jsxs("div",{className:"chat-input-wrapper",children:[L.jsx("input",{type:"text",placeholder:"Type your message here...",value:d,onChange:I=>m(I.target.value),onKeyPress:x,className:"chat-input"}),L.jsx("button",{onClick:E,className:"send-button",disabled:!d.trim(),"aria-label":"Send message",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:L.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})}),L.jsx("p",{className:"chat-disclaimer",children:"AI-powered responses may take a moment. Please be patient."})]})]})]})})},nA=async({url:i="https://www.linkedin.com/in/ch-varun/",api_token:e="apify_api_khHJAzd0dbHxZSgarkHmhBjDfDlbR803ixV3"}={})=>{var m;const o=(m=(await(await fetch(`https://api.apify.com/v2/acts/VhxlqQXRwhW8H5hNV/runs?token=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i})})).json()).data)==null?void 0:m.defaultDatasetId;if(!o)throw new Error("Dataset ID not found");return await new Promise(h=>setTimeout(h,1e4)),await(await fetch(`https://api.apify.com/v2/datasets/${o}/items?clean=true&format=json`,{headers:{Authorization:`Bearer ${e}`}})).json()},aA=Ls({name:Au()}),rA=Ls({category:Au(),skills:$_(aA)});Ls({categories:$_(rA)});new Zv({model:"llama3-8b-8192",temperature:.2,apiKey:""});const iA=({data:i})=>{const[e,n]=Ie.useState([]),[r,l]=Ie.useState(!0),[o,c]=Ie.useState(null),d=Ie.useRef(null);Ie.useEffect(()=>{(async()=>{let y=[];if(i!=null&&i.skills)y=i.skills;else if(i!=null&&i.experience){const _=i.experience.reduce((S,E)=>E.skills&&Array.isArray(E.skills)?[...S,...E.skills]:S,[]);y=[...new Set(_)].map(S=>({name:S}))}if(!y||y.length===0){l(!1);return}l(!0),c(null);{console.warn("Groq API key is missing. Displaying skills without categorization."),n([{category:"All Skills",skills:y}]),l(!1);return}})()},[i]);const[m,h]=Ie.useState([]);return Ie.useEffect(()=>{if(!d.current)return;const g=d.current.querySelector(".tree-root"),y=Array.from(d.current.querySelectorAll(".tree-category"));if(!g||y.length===0)return;const _=g.getBoundingClientRect(),w=d.current.getBoundingClientRect(),S=[];y.forEach(E=>{const x=E.getBoundingClientRect();S.push({x1:_.left+_.width/2-w.left,y1:_.bottom-w.top,x2:x.left+x.width/2-w.left,y2:x.top-w.top})}),h(S)},[e,r]),r?L.jsx("section",{className:"skills-section",id:"skills",children:L.jsxs("div",{className:"skills-tree-vertical",ref:d,children:[L.jsx("div",{className:"tree-root",children:"MY SKILLS"}),L.jsx("div",{className:"tree-loading",children:"Categorizing skills..."})]})}):L.jsx("section",{className:"skills-section",id:"skills",children:L.jsxs("div",{className:"skills-simple-container animated-section",children:[L.jsx("div",{className:"skills-title-simple",children:"MY SKILLS"}),o&&L.jsx("p",{className:"skills-error",children:o}),L.jsx("div",{className:"skills-category-grid",children:e.map((g,y)=>L.jsxs("div",{className:"skills-category-card",children:[L.jsx("div",{className:"skills-category-header",children:g.category}),L.jsx("div",{className:"skills-tag-list",children:g.skills.map((_,w)=>L.jsx("span",{className:"skill-tag-simple",children:_.name},_.name+w))})]},g.category+y))})]})})};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lA=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),j_=i=>{const e=lA(i);return e.charAt(0).toUpperCase()+e.slice(1)},Vv=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),uA=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Ie.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:o,iconNode:c,...d},m)=>Ie.createElement("svg",{ref:m,...oA,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:Vv("lucide",l),...!o&&!uA(d)&&{"aria-hidden":"true"},...d},[...c.map(([h,g])=>Ie.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=(i,e)=>{const n=Ie.forwardRef(({className:r,...l},o)=>Ie.createElement(cA,{ref:o,iconNode:e,className:Vv(`lucide-${sA(j_(i))}`,`lucide-${i}`,r),...l}));return n.displayName=j_(i),n};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],dA=Yv("clock",fA);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mA=Yv("map-pin",hA),pA=({experience:i})=>L.jsxs("div",{className:"role-card",children:[L.jsxs("div",{className:"role-card-content",children:[L.jsx("h4",{className:"role-card-title",children:i.title}),L.jsxs("div",{className:"role-card-meta",children:[L.jsxs("span",{className:"meta-item",children:[L.jsx(dA,{size:14}),i.duration]}),L.jsxs("span",{className:"meta-item",children:[L.jsx(mA,{size:14}),i.location]})]})]}),L.jsx("div",{className:"glowing-dot"})]}),gA=i=>{if(!i)return[];const e=i.reduce((n,r)=>{const l=r.company||"Unknown Company";return n[l]||(n[l]={company:l,logo:r.company_logo_url||"",roles:[]}),n[l].roles.push(r),n[l].roles.sort((o,c)=>{const d=new Date(o.start_date.year,o.start_date.month?o.start_date.month-1:0);return new Date(c.start_date.year,c.start_date.month?c.start_date.month-1:0).getTime()-d.getTime()}),n},{});return Object.values(e)},yA=({experienceData:i})=>{const e=gA(i);return L.jsxs("section",{className:"experience-section",id:"experience",children:[L.jsx("h2",{className:"experience-title",children:"Experience"}),L.jsxs("div",{className:"timeline-container animated-section",children:[L.jsx("div",{className:"timeline-line"}),L.jsx("div",{className:"timeline-content",children:e.map((n,r)=>L.jsxs("div",{className:"timeline-item",children:[L.jsx("div",{className:"timeline-dot"}),L.jsxs("div",{className:"company-panel",children:[L.jsxs("div",{className:"company-info",children:[n.logo&&L.jsx("img",{src:n.logo,alt:`${n.company} logo`,className:"company-logo"}),L.jsx("h3",{className:"company-name",children:n.company})]}),L.jsx("div",{className:"roles-container",children:n.roles.map((l,o)=>L.jsx(pA,{experience:l,isLastRole:o===n.roles.length-1},o))})]})]},r))})]})]})},bA=({project:i})=>L.jsxs("div",{className:"project-card",children:[L.jsx("h3",{className:"title",children:i.name}),i.associated_with&&L.jsxs("p",{className:"subtitle",children:["Associated with: ",i.associated_with]}),L.jsx("p",{className:"description",children:i.description}),L.jsxs("div",{className:"buttons",children:[L.jsx("a",{href:"https://github.com/TheCoder30ec4",className:"cta-btn",target:"_blank",rel:"noreferrer",children:"View on GitHub"}),L.jsx("a",{href:"https://github.com/TheCoder30ec4",className:"cta-btn secondary",target:"_blank",rel:"noreferrer",children:"View More Projects "})]})]}),_A=({projects:i})=>L.jsxs("section",{className:"projects-section",id:"projects",children:[L.jsx("h2",{className:"section-title",children:"My Projects"}),L.jsx("p",{className:"section-subtitle",children:"Here are some of the projects I've worked on. Feel free to explore them."}),L.jsx("div",{className:"projects-grid",children:i.map((e,n)=>L.jsx(bA,{project:e},n))})]}),vA=({data:i})=>L.jsxs("div",{className:"cert-card",children:[L.jsx("h3",{className:"cert-title",children:i.name}),L.jsx("p",{className:"cert-meta",children:i.issuer}),L.jsx("p",{className:"cert-date",children:i.issued_date})]}),wA=({certifications:i})=>L.jsxs("section",{className:"cert-section",children:[L.jsx("h2",{className:"section-title",children:"Certifications"}),L.jsx("div",{className:"cert-grid",children:i.map((e,n)=>L.jsx(vA,{data:e},n))})]}),SA=()=>L.jsxs("section",{className:"contact-section",children:[L.jsx("h2",{className:"section-title",children:"Get in Touch"}),L.jsxs("p",{className:"contact-description",children:["Feel free to reach out to me for collaboration, project ideas, or just a tech chat! ",L.jsx("br",{}),L.jsx("br",{}),"Made with passion and love  by Varun"]}),L.jsxs("div",{className:"contact-details",children:[L.jsxs("p",{children:[L.jsx("strong",{children:"Email:"})," ",L.jsx("a",{href:"mailto:varun30ec4@gmail.com",children:"varun30ec4@gmail.com"})]}),L.jsxs("p",{children:[L.jsx("strong",{children:"GitHub:"})," ",L.jsx("a",{href:"https://github.com/TheCoder30ec4",target:"_blank",rel:"noreferrer",children:"TheCoder30ec4"})]}),L.jsxs("p",{children:[L.jsx("strong",{children:"LinkedIn:"})," ",L.jsx("a",{href:"https://linkedin.com/in/ch-varun",target:"_blank",rel:"noreferrer",children:"Ch Varun"})]})]})]});class zs{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const EA=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},gt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:EA()},yh=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},TA=(i,e="https://api.emailjs.com")=>{if(!i)return;const n=yh(i);gt.publicKey=n.publicKey,gt.blockHeadless=n.blockHeadless,gt.storageProvider=n.storageProvider,gt.blockList=n.blockList,gt.limitRate=n.limitRate,gt.origin=n.origin||e},Fv=async(i,e,n={})=>{const r=await fetch(gt.origin+i,{method:"POST",headers:n,body:e}),l=await r.text(),o=new zs(r.status,l);if(r.ok)return o;throw o},Xv=(i,e,n)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},OA=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Qv=i=>i.webdriver||!i.languages||i.languages.length===0,Jv=()=>new zs(451,"Unavailable For Headless Browser"),xA=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},AA=i=>{var e;return!((e=i.list)!=null&&e.length)||!i.watchVariable},RA=(i,e)=>i instanceof FormData?i.get(e):i[e],Kv=(i,e)=>{if(AA(i))return!1;xA(i.list,i.watchVariable);const n=RA(e,i.watchVariable);return typeof n!="string"?!1:i.list.includes(n)},Wv=()=>new zs(403,"Forbidden"),NA=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},jA=async(i,e,n)=>{const r=Number(await n.get(i)||0);return e-Date.now()+r},e0=async(i,e,n)=>{if(!e.throttle||!n)return!1;NA(e.throttle,e.id);const r=e.id||i;return await jA(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},t0=()=>new zs(429,"Too Many Requests"),CA=async(i,e,n,r)=>{const l=yh(r),o=l.publicKey||gt.publicKey,c=l.blockHeadless||gt.blockHeadless,d=l.storageProvider||gt.storageProvider,m={...gt.blockList,...l.blockList},h={...gt.limitRate,...l.limitRate};return c&&Qv(navigator)?Promise.reject(Jv()):(Xv(o,i,e),OA(n),n&&Kv(m,n)?Promise.reject(Wv()):await e0(location.pathname,h,d)?Promise.reject(t0()):Fv("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:i,template_id:e,template_params:n}),{"Content-type":"application/json"}))},kA=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},LA=i=>typeof i=="string"?document.querySelector(i):i,DA=async(i,e,n,r)=>{const l=yh(r),o=l.publicKey||gt.publicKey,c=l.blockHeadless||gt.blockHeadless,d=gt.storageProvider||l.storageProvider,m={...gt.blockList,...l.blockList},h={...gt.limitRate,...l.limitRate};if(c&&Qv(navigator))return Promise.reject(Jv());const g=LA(n);Xv(o,i,e),kA(g);const y=new FormData(g);return Kv(m,y)?Promise.reject(Wv()):await e0(location.pathname,h,d)?Promise.reject(t0()):(y.append("lib_version","4.4.1"),y.append("service_id",i),y.append("template_id",e),y.append("user_id",o),Fv("/api/v1.0/email/send-form",y))},$A={init:TA,send:CA,sendForm:DA,EmailJSResponseStatus:zs},MA=()=>{const i=Ie.useRef(null),[e,n]=Ie.useState("idle"),[r,l]=Ie.useState(""),[o,c]=Ie.useState(""),[d,m]=Ie.useState(""),h=g=>{g.preventDefault(),i.current&&$A.sendForm("service_fy86g1u","template_r7wyvll",i.current,"bl-3uhi2T1y2wFxGa").then(()=>{n("sent"),l(""),c(""),m("")},()=>n("error"))};return L.jsxs("section",{className:"contact-form-section",children:[L.jsx("h2",{className:"section-title",children:"Contact Me"}),L.jsx("p",{className:"section-subtitle",children:"Feel free to reach out for collaborations, project inquiries, or just to say hello!"}),L.jsxs("form",{ref:i,onSubmit:h,className:"contact-form",children:[L.jsx("input",{type:"text",name:"user_name",placeholder:"Your Name",required:!0,value:r,onChange:g=>l(g.target.value)}),L.jsx("input",{type:"email",name:"user_email",placeholder:"Your Email",required:!0,value:o,onChange:g=>c(g.target.value)}),L.jsx("textarea",{name:"message",placeholder:"Your Message",rows:5,value:d,onChange:g=>m(g.target.value)}),L.jsx("button",{type:"submit",children:"Send Message"}),e==="sent"&&L.jsx("p",{className:"status success",children:"Message sent successfully!"}),e==="error"&&L.jsx("p",{className:"status error",children:"Something went wrong. Try again!"})]})]})},IA={basic_info:{name:"Ch Varun",headline:"SDE-1@Hashedin by Deloitte | Full Stack Developer | AI Enthusiast | Innovator in Gen AI, MERN Stack & Computer Vision | Driving Real-World Impact through Cutting-Edge Technology",profile_image_url:"https://media.licdn.com/dms/image/v2/D5603AQGtW-0k1r7tSw/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1724755488319?e=1755129600&v=beta&t=kBNVmjLARnBbBE-irTR2YMHVAg3zCbNCc4yATeh9Xco",about:`Turning code into cutting-edge solutions & the future one line at a time!  Educated at Amrita Vishwa Vidyapeetham with a strong footing in Computer and Communication Engineering, my journey has been about more than just gradesit's a story of passion, projects, and impact. From revamping real-time control in Cyber-Physical Systems to pioneering plant disease prediction tools, my work stands at the intersection of innovation and real-world challenges. 

 Fluent in languages like C, Python, and JavaScript, and frameworks such as React Native & Flutter, I bring versatility and depth to the table. Projects like creating a Sensor-fusion-based Elderly Fall Detection System spotlight my team leadership and technical prowess, improving lives while pushing tech boundaries.

 Recognized with 2nd place at Smart India Hackathon for a sustainable city project, my journey reflects a blend of academia and real-life impact. As an enthusiast for Machine Learning, my ventures into AI for agricultural efficiency and environmental management have not only earned accolades but also opened new realms of possibility.

 I'm on the lookout for opportunities to contribute to dynamic teams and make meaningful advancements in technology and society. Let's connect and explore how we can chart new territories together!`,location:{country:"India",city:"Hyderabad, Telangana",full:"Hyderabad, Telangana, India",country_code:"IN"}},experience:[{title:"SDE 1",company:"HashedIn by Deloitte",location:"On-site",description:"Software developer 1",duration:"May 2025 - Present  2 mos"},{title:"Intern",company:"HashedIn by Deloitte",location:"Bengaluru, Karnataka, India",duration:"Feb 2025 - May 2025  4 mos"},{title:"Investor Relations Intern",company:"Zealopia",location:"Mumbai Metropolitan Region",duration:"Dec 2024 - Feb 2025  3 mos",skills:["Business and Program Management"]},{title:"Club Member",company:"CAMHI",location:"Chennai, Tamil Nadu, India",duration:"Sep 2023 - Dec 2024  1 yr 4 mos",skills:["Debugging","Modeling and Simulation"]},{title:"Full Stack Developer",company:"DeepDive",location:"Singapore",description:"Developed backend APIs using AWS Lambda functions and REST APIs, integrated with OpenAI for PDF summarization, and built frontend functionalities including search and OAuth.",duration:"Apr 2024 - Jul 2024  4 mos",skills:["Front-End Development","open ai"]},{title:"Student Intern",company:"Water and Land Management Training and Research Institute",location:"Hyderabad, Telangana, India",description:'Contributed to the research project: "Development of Sensor-Based Real-Time Water Level Measurement and Irrigation Scheduling System in Paddy Fields for Increasing Water Use Efficiency."',duration:"Jul 2022 - Aug 2022  2 mos",skills:["Front-End Development","Management"]}],projects:[{name:"Neural Net from Scratch",description:"A modular implementation of neural networks using NumPy, demonstrating fundamental concepts of deep learning including various layer types and activation functions."},{name:"PDF Summarizer",description:"A full-stack application for summarizing PDF documents using Gemini AI, with a Flask backend and MongoDB for database management."}],certifications:[{name:"Full Stack Web Development",issuer:"Udemy",issued_date:"2024"},{name:"Machine Learning Specialist",issuer:"DeepLearning.AI",issued_date:"2024"},{name:"TypeScript Fundamentals",issuer:"Microsoft",issued_date:"2022"}]};function PA(){const[i,e]=Ie.useState(null),[n,r]=Ie.useState(!0),[l,o]=Ie.useState(null);Ie.useEffect(()=>{(async()=>{try{const m=new Promise((y,_)=>setTimeout(()=>_(new Error("API timeout")),12e4)),h=nA(),g=await Promise.race([h,m]);if(g&&g.length>0)e(g[0]);else throw new Error("No data received from API.")}catch(m){console.warn("API failed, using fallback data:",m.message),e(IA)}finally{r(!1)}})()},[]);const c=JSON.stringify(i);return n?L.jsx("div",{className:"loading-container",children:L.jsxs("div",{className:"loading-content",children:[L.jsx("div",{className:"spinner"}),L.jsx("p",{className:"loading-text",children:"Loading Portfolio..."})]})}):i?L.jsxs(L.Fragment,{children:[L.jsx(MS,{}),L.jsxs("main",{children:[L.jsxs(tA,{profile_image_url:i.basic_info.profile_picture_url,about:i.basic_info.about,linkedin:String(c),children:[L.jsx("h1",{className:"profile-name",children:i.basic_info.name}),L.jsx("p",{className:"profile-title",children:"Software Developer @ HashedIn by Deloitte"})]}),L.jsx(iA,{data:i}),L.jsx(yA,{experienceData:i.experience}),L.jsx(_A,{projects:i.projects}),L.jsx(wA,{certifications:i.certifications}),L.jsxs("section",{id:"contact",children:[L.jsx(MA,{}),L.jsx(SA,{})]})]})]}):L.jsx("div",{className:"error-container",children:L.jsxs("div",{className:"error-content",children:[L.jsx("h2",{className:"error-title",children:"Oops! Something went wrong."}),L.jsx("p",{className:"error-message",children:"Could not load the portfolio data. Please try again later."})]})})}$S.createRoot(document.getElementById("root")).render(L.jsx(Ie.StrictMode,{children:L.jsx(PA,{})}));
