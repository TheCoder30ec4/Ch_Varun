var hS=Object.defineProperty;var mS=(i,e,n)=>e in i?hS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Sa=(i,e,n)=>mS(i,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function js(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var rf={exports:{}},us={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function pS(){if(ly)return us;ly=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:i,type:r,key:c,ref:l!==void 0?l:null,props:o}}return us.Fragment=e,us.jsx=n,us.jsxs=n,us}var uy;function gS(){return uy||(uy=1,rf.exports=pS()),rf.exports}var L=gS(),sf={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function yS(){if(oy)return ge;oy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function _(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(O,U,G){this.props=O,this.context=U,this.refs=E,this.updater=G||w}x.prototype.isReactComponent={},x.prototype.setState=function(O,U){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,U,"setState")},x.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function R(){}R.prototype=x.prototype;function M(O,U,G){this.props=O,this.context=U,this.refs=E,this.updater=G||w}var C=M.prototype=new R;C.constructor=M,S(C,x.prototype),C.isPureReactComponent=!0;var Z=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function ae(O,U,G,Y,te,oe){return G=oe.ref,{$$typeof:i,type:O,key:U,ref:G!==void 0?G:null,props:oe}}function W(O,U){return ae(O.type,U,void 0,void 0,void 0,O.props)}function Be(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function wt(O){var U={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(G){return U[G]})}var rt=/\/+/g;function Ge(O,U){return typeof O=="object"&&O!==null&&O.key!=null?wt(""+O.key):U.toString(36)}function Rt(){}function ee(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Rt,Rt):(O.status="pending",O.then(function(U){O.status==="pending"&&(O.status="fulfilled",O.value=U)},function(U){O.status==="pending"&&(O.status="rejected",O.reason=U)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function F(O,U,G,Y,te){var oe=typeof O;(oe==="undefined"||oe==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(oe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case i:case e:ce=!0;break;case g:return ce=O._init,F(ce(O._payload),U,G,Y,te)}}if(ce)return te=te(O),ce=Y===""?"."+Ge(O,0):Y,Z(te)?(G="",ce!=null&&(G=ce.replace(rt,"$&/")+"/"),F(te,U,G,"",function(Xt){return Xt})):te!=null&&(Be(te)&&(te=W(te,G+(te.key==null||O&&O.key===te.key?"":(""+te.key).replace(rt,"$&/")+"/")+ce)),U.push(te)),1;ce=0;var Qe=Y===""?".":Y+":";if(Z(O))for(var Ue=0;Ue<O.length;Ue++)Y=O[Ue],oe=Qe+Ge(Y,Ue),ce+=F(Y,U,G,oe,te);else if(Ue=_(O),typeof Ue=="function")for(O=Ue.call(O),Ue=0;!(Y=O.next()).done;)Y=Y.value,oe=Qe+Ge(Y,Ue++),ce+=F(Y,U,G,oe,te);else if(oe==="object"){if(typeof O.then=="function")return F(ee(O),U,G,Y,te);throw U=String(O),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ce}function j(O,U,G){if(O==null)return O;var Y=[],te=0;return F(O,Y,"","",function(oe){return U.call(G,oe,te++)}),Y}function P(O){if(O._status===-1){var U=O._result;U=U(),U.then(function(G){(O._status===0||O._status===-1)&&(O._status=1,O._result=G)},function(G){(O._status===0||O._status===-1)&&(O._status=2,O._result=G)}),O._status===-1&&(O._status=0,O._result=U)}if(O._status===1)return O._result.default;throw O._result}var V=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function J(){}return ge.Children={map:j,forEach:function(O,U,G){j(O,function(){U.apply(this,arguments)},G)},count:function(O){var U=0;return j(O,function(){U++}),U},toArray:function(O){return j(O,function(U){return U})||[]},only:function(O){if(!Be(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ge.Component=x,ge.Fragment=n,ge.Profiler=l,ge.PureComponent=M,ge.StrictMode=r,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return z.H.useMemoCache(O)}},ge.cache=function(O){return function(){return O.apply(null,arguments)}},ge.cloneElement=function(O,U,G){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Y=S({},O.props),te=O.key,oe=void 0;if(U!=null)for(ce in U.ref!==void 0&&(oe=void 0),U.key!==void 0&&(te=""+U.key),U)!K.call(U,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&U.ref===void 0||(Y[ce]=U[ce]);var ce=arguments.length-2;if(ce===1)Y.children=G;else if(1<ce){for(var Qe=Array(ce),Ue=0;Ue<ce;Ue++)Qe[Ue]=arguments[Ue+2];Y.children=Qe}return ae(O.type,te,void 0,void 0,oe,Y)},ge.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},ge.createElement=function(O,U,G){var Y,te={},oe=null;if(U!=null)for(Y in U.key!==void 0&&(oe=""+U.key),U)K.call(U,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(te[Y]=U[Y]);var ce=arguments.length-2;if(ce===1)te.children=G;else if(1<ce){for(var Qe=Array(ce),Ue=0;Ue<ce;Ue++)Qe[Ue]=arguments[Ue+2];te.children=Qe}if(O&&O.defaultProps)for(Y in ce=O.defaultProps,ce)te[Y]===void 0&&(te[Y]=ce[Y]);return ae(O,oe,void 0,void 0,null,te)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(O){return{$$typeof:d,render:O}},ge.isValidElement=Be,ge.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:P}},ge.memo=function(O,U){return{$$typeof:h,type:O,compare:U===void 0?null:U}},ge.startTransition=function(O){var U=z.T,G={};z.T=G;try{var Y=O(),te=z.S;te!==null&&te(G,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(J,V)}catch(oe){V(oe)}finally{z.T=U}},ge.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},ge.use=function(O){return z.H.use(O)},ge.useActionState=function(O,U,G){return z.H.useActionState(O,U,G)},ge.useCallback=function(O,U){return z.H.useCallback(O,U)},ge.useContext=function(O){return z.H.useContext(O)},ge.useDebugValue=function(){},ge.useDeferredValue=function(O,U){return z.H.useDeferredValue(O,U)},ge.useEffect=function(O,U,G){var Y=z.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(O,U)},ge.useId=function(){return z.H.useId()},ge.useImperativeHandle=function(O,U,G){return z.H.useImperativeHandle(O,U,G)},ge.useInsertionEffect=function(O,U){return z.H.useInsertionEffect(O,U)},ge.useLayoutEffect=function(O,U){return z.H.useLayoutEffect(O,U)},ge.useMemo=function(O,U){return z.H.useMemo(O,U)},ge.useOptimistic=function(O,U){return z.H.useOptimistic(O,U)},ge.useReducer=function(O,U,G){return z.H.useReducer(O,U,G)},ge.useRef=function(O){return z.H.useRef(O)},ge.useState=function(O){return z.H.useState(O)},ge.useSyncExternalStore=function(O,U,G){return z.H.useSyncExternalStore(O,U,G)},ge.useTransition=function(){return z.H.useTransition()},ge.version="19.1.0",ge}var cy;function Xd(){return cy||(cy=1,sf.exports=yS()),sf.exports}var Ie=Xd(),lf={exports:{}},os={},uf={exports:{}},of={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function bS(){return fy||(fy=1,function(i){function e(j,P){var V=j.length;j.push(P);e:for(;0<V;){var J=V-1>>>1,O=j[J];if(0<l(O,P))j[J]=P,j[V]=O,V=J;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var P=j[0],V=j.pop();if(V!==P){j[0]=V;e:for(var J=0,O=j.length,U=O>>>1;J<U;){var G=2*(J+1)-1,Y=j[G],te=G+1,oe=j[te];if(0>l(Y,V))te<O&&0>l(oe,Y)?(j[J]=oe,j[te]=V,J=te):(j[J]=Y,j[G]=V,J=G);else if(te<O&&0>l(oe,V))j[J]=oe,j[te]=V,J=te;else break e}}return P}function l(j,P){var V=j.sortIndex-P.sortIndex;return V!==0?V:j.id-P.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],h=[],g=1,b=null,_=3,w=!1,S=!1,E=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function Z(j){for(var P=n(h);P!==null;){if(P.callback===null)r(h);else if(P.startTime<=j)r(h),P.sortIndex=P.expirationTime,e(m,P);else break;P=n(h)}}function z(j){if(E=!1,Z(j),!S)if(n(m)!==null)S=!0,K||(K=!0,Ge());else{var P=n(h);P!==null&&F(z,P.startTime-j)}}var K=!1,ae=-1,W=5,Be=-1;function wt(){return x?!0:!(i.unstable_now()-Be<W)}function rt(){if(x=!1,K){var j=i.unstable_now();Be=j;var P=!0;try{e:{S=!1,E&&(E=!1,M(ae),ae=-1),w=!0;var V=_;try{t:{for(Z(j),b=n(m);b!==null&&!(b.expirationTime>j&&wt());){var J=b.callback;if(typeof J=="function"){b.callback=null,_=b.priorityLevel;var O=J(b.expirationTime<=j);if(j=i.unstable_now(),typeof O=="function"){b.callback=O,Z(j),P=!0;break t}b===n(m)&&r(m),Z(j)}else r(m);b=n(m)}if(b!==null)P=!0;else{var U=n(h);U!==null&&F(z,U.startTime-j),P=!1}}break e}finally{b=null,_=V,w=!1}P=void 0}}finally{P?Ge():K=!1}}}var Ge;if(typeof C=="function")Ge=function(){C(rt)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,ee=Rt.port2;Rt.port1.onmessage=rt,Ge=function(){ee.postMessage(null)}}else Ge=function(){R(rt,0)};function F(j,P){ae=R(function(){j(i.unstable_now())},P)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(j){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var V=_;_=P;try{return j()}finally{_=V}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function(j,P){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var V=_;_=j;try{return P()}finally{_=V}},i.unstable_scheduleCallback=function(j,P,V){var J=i.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,j){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=V+O,j={id:g++,callback:P,priorityLevel:j,startTime:V,expirationTime:O,sortIndex:-1},V>J?(j.sortIndex=V,e(h,j),n(m)===null&&j===n(h)&&(E?(M(ae),ae=-1):E=!0,F(z,V-J))):(j.sortIndex=O,e(m,j),S||w||(S=!0,K||(K=!0,Ge()))),j},i.unstable_shouldYield=wt,i.unstable_wrapCallback=function(j){var P=_;return function(){var V=_;_=P;try{return j.apply(this,arguments)}finally{_=V}}}}(of)),of}var dy;function _S(){return dy||(dy=1,uf.exports=bS()),uf.exports}var cf={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function vS(){if(hy)return bt;hy=1;var i=Xd();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(m,h,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:m,containerInfo:h,implementation:g}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,bt.createPortal=function(m,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(m,h,null,g)},bt.flushSync=function(m){var h=c.T,g=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=h,r.p=g,r.d.f()}},bt.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(m,h))},bt.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},bt.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var g=h.as,b=d(g,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?r.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:w}):g==="script"&&r.d.X(m,{crossOrigin:b,integrity:_,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},bt.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=d(h.as,h.crossOrigin);r.d.M(m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(m)},bt.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,b=d(g,h.crossOrigin);r.d.L(m,g,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},bt.preloadModule=function(m,h){if(typeof m=="string")if(h){var g=d(h.as,h.crossOrigin);r.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(m)},bt.requestFormReset=function(m){r.d.r(m)},bt.unstable_batchedUpdates=function(m,h){return m(h)},bt.useFormState=function(m,h,g){return c.H.useFormState(m,h,g)},bt.useFormStatus=function(){return c.H.useHostTransitionStatus()},bt.version="19.1.0",bt}var my;function wS(){if(my)return cf.exports;my=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cf.exports=vS(),cf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function SS(){if(py)return os;py=1;var i=_S(),e=Xd(),n=wS();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function o(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function c(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(o(t)!==t)throw Error(r(188))}function m(t){var a=t.alternate;if(!a){if(a=o(t),a===null)throw Error(r(188));return a!==t?null:t}for(var s=t,u=a;;){var f=s.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===s)return d(f),t;if(p===u)return d(f),a;p=p.sibling}throw Error(r(188))}if(s.return!==u.return)s=f,u=p;else{for(var y=!1,v=f.child;v;){if(v===s){y=!0,s=f,u=p;break}if(v===u){y=!0,u=f,s=p;break}v=v.sibling}if(!y){for(v=p.child;v;){if(v===s){y=!0,s=p,u=f;break}if(v===u){y=!0,u=p,s=f;break}v=v.sibling}if(!y)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:a}function h(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=h(t),a!==null)return a;t=t.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Be=Symbol.for("react.activity"),wt=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function Ge(t){return t===null||typeof t!="object"?null:(t=rt&&t[rt]||t["@@iterator"],typeof t=="function"?t:null)}var Rt=Symbol.for("react.client.reference");function ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Rt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case K:return"SuspenseList";case Be:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case C:return(t.displayName||"Context")+".Provider";case M:return(t._context.displayName||"Context")+".Consumer";case Z:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ae:return a=t.displayName||null,a!==null?a:ee(t.type)||"Memo";case W:a=t._payload,t=t._init;try{return ee(t(a))}catch{}}return null}var F=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},J=[],O=-1;function U(t){return{current:t}}function G(t){0>O||(t.current=J[O],J[O]=null,O--)}function Y(t,a){O++,J[O]=t.current,t.current=a}var te=U(null),oe=U(null),ce=U(null),Qe=U(null);function Ue(t,a){switch(Y(ce,a),Y(oe,t),Y(te,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?$g(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=$g(a),t=Mg(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(te),Y(te,t)}function Xt(){G(te),G(oe),G(ce)}function La(t){t.memoizedState!==null&&Y(Qe,t);var a=te.current,s=Mg(a,t.type);a!==s&&(Y(oe,t),Y(te,s))}function rr(t){oe.current===t&&(G(te),G(oe)),Qe.current===t&&(G(Qe),as._currentValue=V)}var Hu=Object.prototype.hasOwnProperty,Gu=i.unstable_scheduleCallback,Zu=i.unstable_cancelCallback,Zv=i.unstable_shouldYield,Vv=i.unstable_requestPaint,wn=i.unstable_now,Yv=i.unstable_getCurrentPriorityLevel,ph=i.unstable_ImmediatePriority,gh=i.unstable_UserBlockingPriority,Ps=i.unstable_NormalPriority,Fv=i.unstable_LowPriority,yh=i.unstable_IdlePriority,Xv=i.log,Qv=i.unstable_setDisableYieldValue,fi=null,Mt=null;function Kn(t){if(typeof Xv=="function"&&Qv(t),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(fi,t)}catch{}}var It=Math.clz32?Math.clz32:Wv,Jv=Math.log,Kv=Math.LN2;function Wv(t){return t>>>=0,t===0?32:31-(Jv(t)/Kv|0)|0}var zs=256,qs=4194304;function Da(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Bs(t,a,s){var u=t.pendingLanes;if(u===0)return 0;var f=0,p=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var v=u&134217727;return v!==0?(u=v&~p,u!==0?f=Da(u):(y&=v,y!==0?f=Da(y):s||(s=v&~t,s!==0&&(f=Da(s))))):(v=u&~p,v!==0?f=Da(v):y!==0?f=Da(y):s||(s=u&~t,s!==0&&(f=Da(s)))),f===0?0:a!==0&&a!==f&&(a&p)===0&&(p=f&-f,s=a&-a,p>=s||p===32&&(s&4194048)!==0)?a:f}function di(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function e0(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bh(){var t=zs;return zs<<=1,(zs&4194048)===0&&(zs=256),t}function _h(){var t=qs;return qs<<=1,(qs&62914560)===0&&(qs=4194304),t}function Vu(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function hi(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function t0(t,a,s,u,f,p){var y=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var v=t.entanglements,T=t.expirationTimes,D=t.hiddenUpdates;for(s=y&~s;0<s;){var q=31-It(s),H=1<<q;v[q]=0,T[q]=-1;var $=D[q];if($!==null)for(D[q]=null,q=0;q<$.length;q++){var I=$[q];I!==null&&(I.lane&=-536870913)}s&=~H}u!==0&&vh(t,u,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(y&~a))}function vh(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var u=31-It(a);t.entangledLanes|=a,t.entanglements[u]=t.entanglements[u]|1073741824|s&4194090}function wh(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var u=31-It(s),f=1<<u;f&a|t[u]&a&&(t[u]|=a),s&=~f}}function Yu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Sh(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:ty(t.type))}function n0(t,a){var s=P.p;try{return P.p=t,a()}finally{P.p=s}}var Wn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Wn,Nt="__reactProps$"+Wn,ir="__reactContainer$"+Wn,Xu="__reactEvents$"+Wn,a0="__reactListeners$"+Wn,r0="__reactHandles$"+Wn,Eh="__reactResources$"+Wn,mi="__reactMarker$"+Wn;function Qu(t){delete t[gt],delete t[Nt],delete t[Xu],delete t[a0],delete t[r0]}function sr(t){var a=t[gt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[ir]||s[gt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=zg(t);t!==null;){if(s=t[gt])return s;t=zg(t)}return a}t=s,s=t.parentNode}return null}function lr(t){if(t=t[gt]||t[ir]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function pi(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function ur(t){var a=t[Eh];return a||(a=t[Eh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function it(t){t[mi]=!0}var Oh=new Set,Th={};function $a(t,a){or(t,a),or(t+"Capture",a)}function or(t,a){for(Th[t]=a,t=0;t<a.length;t++)Oh.add(a[t])}var i0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xh={},Ah={};function s0(t){return Hu.call(Ah,t)?!0:Hu.call(xh,t)?!1:i0.test(t)?Ah[t]=!0:(xh[t]=!0,!1)}function Hs(t,a,s){if(s0(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function Gs(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Cn(t,a,s,u){if(u===null)t.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+u)}}var Ju,Rh;function cr(t){if(Ju===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Ju=a&&a[1]||"",Rh=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ju+t+Rh}var Ku=!1;function Wu(t,a){if(!t||Ku)return"";Ku=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(I){var $=I}Reflect.construct(t,[],H)}else{try{H.call()}catch(I){$=I}t.call(H.prototype)}}else{try{throw Error()}catch(I){$=I}(H=t())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(I){if(I&&$&&typeof I.stack=="string")return[I.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),y=p[0],v=p[1];if(y&&v){var T=y.split(`
`),D=v.split(`
`);for(f=u=0;u<T.length&&!T[u].includes("DetermineComponentFrameRoot");)u++;for(;f<D.length&&!D[f].includes("DetermineComponentFrameRoot");)f++;if(u===T.length||f===D.length)for(u=T.length-1,f=D.length-1;1<=u&&0<=f&&T[u]!==D[f];)f--;for(;1<=u&&0<=f;u--,f--)if(T[u]!==D[f]){if(u!==1||f!==1)do if(u--,f--,0>f||T[u]!==D[f]){var q=`
`+T[u].replace(" at new "," at ");return t.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",t.displayName)),q}while(1<=u&&0<=f);break}}}finally{Ku=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?cr(s):""}function l0(t){switch(t.tag){case 26:case 27:case 5:return cr(t.type);case 16:return cr("Lazy");case 13:return cr("Suspense");case 19:return cr("SuspenseList");case 0:case 15:return Wu(t.type,!1);case 11:return Wu(t.type.render,!1);case 1:return Wu(t.type,!0);case 31:return cr("Activity");default:return""}}function Nh(t){try{var a="";do a+=l0(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ch(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function u0(t){var a=Ch(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),u=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,p=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Zs(t){t._valueTracker||(t._valueTracker=u0(t))}function jh(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),u="";return t&&(u=Ch(t)?t.checked?"true":"false":t.value),t=u,t!==s?(a.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var o0=/[\n"\\]/g;function Jt(t){return t.replace(o0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function eo(t,a,s,u,f,p,y,v){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),a!=null?y==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Qt(a)):t.value!==""+Qt(a)&&(t.value=""+Qt(a)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),a!=null?to(t,y,Qt(a)):s!=null?to(t,y,Qt(s)):u!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.name=""+Qt(v):t.removeAttribute("name")}function kh(t,a,s,u,f,p,y,v){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;s=s!=null?""+Qt(s):"",a=a!=null?""+Qt(a):s,v||a===t.value||(t.value=a),t.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=v?t.checked:!!u,t.defaultChecked=!!u,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y)}function to(t,a,s){a==="number"&&Vs(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function fr(t,a,s,u){if(t=t.options,a){a={};for(var f=0;f<s.length;f++)a["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=a.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&u&&(t[s].defaultSelected=!0)}else{for(s=""+Qt(s),a=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Lh(t,a,s){if(a!=null&&(a=""+Qt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Qt(s):""}function Dh(t,a,s,u){if(a==null){if(u!=null){if(s!=null)throw Error(r(92));if(F(u)){if(1<u.length)throw Error(r(93));u=u[0]}s=u}s==null&&(s=""),a=s}s=Qt(a),t.defaultValue=s,u=t.textContent,u===s&&u!==""&&u!==null&&(t.value=u)}function dr(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var c0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $h(t,a,s){var u=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":u?t.setProperty(a,s):typeof s!="number"||s===0||c0.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Mh(t,a,s){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&s[f]!==u&&$h(t,f,u)}else for(var p in a)a.hasOwnProperty(p)&&$h(t,p,a[p])}function no(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(t){return d0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ao=null;function ro(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hr=null,mr=null;function Ih(t){var a=lr(t);if(a&&(t=a.stateNode)){var s=t[Nt]||null;e:switch(t=a.stateNode,a.type){case"input":if(eo(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Jt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var u=s[a];if(u!==t&&u.form===t.form){var f=u[Nt]||null;if(!f)throw Error(r(90));eo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<s.length;a++)u=s[a],u.form===t.form&&jh(u)}break e;case"textarea":Lh(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&fr(t,!!s.multiple,a,!1)}}}var io=!1;function Uh(t,a,s){if(io)return t(a,s);io=!0;try{var u=t(a);return u}finally{if(io=!1,(hr!==null||mr!==null)&&(kl(),hr&&(a=hr,t=mr,mr=hr=null,Ih(a),t)))for(a=0;a<t.length;a++)Ih(t[a])}}function gi(t,a){var s=t.stateNode;if(s===null)return null;var u=s[Nt]||null;if(u===null)return null;s=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,a,typeof s));return s}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(jn)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){so=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{so=!1}var ea=null,lo=null,Fs=null;function Ph(){if(Fs)return Fs;var t,a=lo,s=a.length,u,f="value"in ea?ea.value:ea.textContent,p=f.length;for(t=0;t<s&&a[t]===f[t];t++);var y=s-t;for(u=1;u<=y&&a[s-u]===f[p-u];u++);return Fs=f.slice(t,1<u?1-u:void 0)}function Xs(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Qs(){return!0}function zh(){return!1}function Ct(t){function a(s,u,f,p,y){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(s=t[v],this[v]=s?s(p):p[v]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qs:zh,this.isPropagationStopped=zh,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),a}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=Ct(Ma),bi=g({},Ma,{view:0,detail:0}),h0=Ct(bi),uo,oo,_i,Ks=g({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(uo=t.screenX-_i.screenX,oo=t.screenY-_i.screenY):oo=uo=0,_i=t),uo)},movementY:function(t){return"movementY"in t?t.movementY:oo}}),qh=Ct(Ks),m0=g({},Ks,{dataTransfer:0}),p0=Ct(m0),g0=g({},bi,{relatedTarget:0}),co=Ct(g0),y0=g({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),b0=Ct(y0),_0=g({},Ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v0=Ct(_0),w0=g({},Ma,{data:0}),Bh=Ct(w0),S0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T0(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=O0[t])?!!a[t]:!1}function fo(){return T0}var x0=g({},bi,{key:function(t){if(t.key){var a=S0[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fo,charCode:function(t){return t.type==="keypress"?Xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A0=Ct(x0),R0=g({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hh=Ct(R0),N0=g({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fo}),C0=Ct(N0),j0=g({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),k0=Ct(j0),L0=g({},Ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D0=Ct(L0),$0=g({},Ma,{newState:0,oldState:0}),M0=Ct($0),I0=[9,13,27,32],ho=jn&&"CompositionEvent"in window,vi=null;jn&&"documentMode"in document&&(vi=document.documentMode);var U0=jn&&"TextEvent"in window&&!vi,Gh=jn&&(!ho||vi&&8<vi&&11>=vi),Zh=" ",Vh=!1;function Yh(t,a){switch(t){case"keyup":return I0.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function P0(t,a){switch(t){case"compositionend":return Fh(a);case"keypress":return a.which!==32?null:(Vh=!0,Zh);case"textInput":return t=a.data,t===Zh&&Vh?null:t;default:return null}}function z0(t,a){if(pr)return t==="compositionend"||!ho&&Yh(t,a)?(t=Ph(),Fs=lo=ea=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Gh&&a.locale!=="ko"?null:a.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!q0[t.type]:a==="textarea"}function Qh(t,a,s,u){hr?mr?mr.push(u):mr=[u]:hr=u,a=Ul(a,"onChange"),0<a.length&&(s=new Js("onChange","change",null,s,u),t.push({event:s,listeners:a}))}var wi=null,Si=null;function B0(t){Cg(t,0)}function Ws(t){var a=pi(t);if(jh(a))return t}function Jh(t,a){if(t==="change")return a}var Kh=!1;if(jn){var mo;if(jn){var po="oninput"in document;if(!po){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),po=typeof Wh.oninput=="function"}mo=po}else mo=!1;Kh=mo&&(!document.documentMode||9<document.documentMode)}function em(){wi&&(wi.detachEvent("onpropertychange",tm),Si=wi=null)}function tm(t){if(t.propertyName==="value"&&Ws(Si)){var a=[];Qh(a,Si,t,ro(t)),Uh(B0,a)}}function H0(t,a,s){t==="focusin"?(em(),wi=a,Si=s,wi.attachEvent("onpropertychange",tm)):t==="focusout"&&em()}function G0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ws(Si)}function Z0(t,a){if(t==="click")return Ws(a)}function V0(t,a){if(t==="input"||t==="change")return Ws(a)}function Y0(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Ut=typeof Object.is=="function"?Object.is:Y0;function Ei(t,a){if(Ut(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),u=Object.keys(a);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!Hu.call(a,f)||!Ut(t[f],a[f]))return!1}return!0}function nm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,a){var s=nm(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=a&&u>=a)return{node:s,offset:a-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=nm(s)}}function rm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?rm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function im(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Vs(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=Vs(t.document)}return a}function go(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var F0=jn&&"documentMode"in document&&11>=document.documentMode,gr=null,yo=null,Oi=null,bo=!1;function sm(t,a,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bo||gr==null||gr!==Vs(u)||(u=gr,"selectionStart"in u&&go(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oi&&Ei(Oi,u)||(Oi=u,u=Ul(yo,"onSelect"),0<u.length&&(a=new Js("onSelect","select",null,a,s),t.push({event:a,listeners:u}),a.target=gr)))}function Ia(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var yr={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},_o={},lm={};jn&&(lm=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Ua(t){if(_o[t])return _o[t];if(!yr[t])return t;var a=yr[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in lm)return _o[t]=a[s];return t}var um=Ua("animationend"),om=Ua("animationiteration"),cm=Ua("animationstart"),X0=Ua("transitionrun"),Q0=Ua("transitionstart"),J0=Ua("transitioncancel"),fm=Ua("transitionend"),dm=new Map,vo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vo.push("scrollEnd");function un(t,a){dm.set(t,a),$a(a,[t])}var hm=new WeakMap;function Kt(t,a){if(typeof t=="object"&&t!==null){var s=hm.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Nh(a)},hm.set(t,a),a)}return{value:t,source:a,stack:Nh(a)}}var Wt=[],br=0,wo=0;function el(){for(var t=br,a=wo=br=0;a<t;){var s=Wt[a];Wt[a++]=null;var u=Wt[a];Wt[a++]=null;var f=Wt[a];Wt[a++]=null;var p=Wt[a];if(Wt[a++]=null,u!==null&&f!==null){var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}p!==0&&mm(s,f,p)}}function tl(t,a,s,u){Wt[br++]=t,Wt[br++]=a,Wt[br++]=s,Wt[br++]=u,wo|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function So(t,a,s,u){return tl(t,a,s,u),nl(t)}function _r(t,a){return tl(t,null,null,a),nl(t)}function mm(t,a,s){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s);for(var f=!1,p=t.return;p!==null;)p.childLanes|=s,u=p.alternate,u!==null&&(u.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&a!==null&&(f=31-It(s),t=p.hiddenUpdates,u=t[f],u===null?t[f]=[a]:u.push(a),a.lane=s|536870912),p):null}function nl(t){if(50<Xi)throw Xi=0,Rc=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var vr={};function K0(t,a,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,a,s,u){return new K0(t,a,s,u)}function Eo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kn(t,a){var s=t.alternate;return s===null?(s=Pt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function pm(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function al(t,a,s,u,f,p){var y=0;if(u=t,typeof t=="function")Eo(t)&&(y=1);else if(typeof t=="string")y=eS(t,s,te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Be:return t=Pt(31,s,a,f),t.elementType=Be,t.lanes=p,t;case S:return Pa(s.children,f,p,a);case E:y=8,f|=24;break;case x:return t=Pt(12,s,a,f|2),t.elementType=x,t.lanes=p,t;case z:return t=Pt(13,s,a,f),t.elementType=z,t.lanes=p,t;case K:return t=Pt(19,s,a,f),t.elementType=K,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case C:y=10;break e;case M:y=9;break e;case Z:y=11;break e;case ae:y=14;break e;case W:y=16,u=null;break e}y=29,s=Error(r(130,t===null?"null":typeof t,"")),u=null}return a=Pt(y,s,a,f),a.elementType=t,a.type=u,a.lanes=p,a}function Pa(t,a,s,u){return t=Pt(7,t,u,a),t.lanes=s,t}function Oo(t,a,s){return t=Pt(6,t,null,a),t.lanes=s,t}function To(t,a,s){return a=Pt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var wr=[],Sr=0,rl=null,il=0,en=[],tn=0,za=null,Ln=1,Dn="";function qa(t,a){wr[Sr++]=il,wr[Sr++]=rl,rl=t,il=a}function gm(t,a,s){en[tn++]=Ln,en[tn++]=Dn,en[tn++]=za,za=t;var u=Ln;t=Dn;var f=32-It(u)-1;u&=~(1<<f),s+=1;var p=32-It(a)+f;if(30<p){var y=f-f%5;p=(u&(1<<y)-1).toString(32),u>>=y,f-=y,Ln=1<<32-It(a)+f|s<<f|u,Dn=p+t}else Ln=1<<p|s<<f|u,Dn=t}function xo(t){t.return!==null&&(qa(t,1),gm(t,1,0))}function Ao(t){for(;t===rl;)rl=wr[--Sr],wr[Sr]=null,il=wr[--Sr],wr[Sr]=null;for(;t===za;)za=en[--tn],en[tn]=null,Dn=en[--tn],en[tn]=null,Ln=en[--tn],en[tn]=null}var St=null,Ve=null,Re=!1,Ba=null,Sn=!1,Ro=Error(r(519));function Ha(t){var a=Error(r(418,""));throw Ai(Kt(a,t)),Ro}function ym(t){var a=t.stateNode,s=t.type,u=t.memoizedProps;switch(a[gt]=t,a[Nt]=u,s){case"dialog":Ee("cancel",a),Ee("close",a);break;case"iframe":case"object":case"embed":Ee("load",a);break;case"video":case"audio":for(s=0;s<Ji.length;s++)Ee(Ji[s],a);break;case"source":Ee("error",a);break;case"img":case"image":case"link":Ee("error",a),Ee("load",a);break;case"details":Ee("toggle",a);break;case"input":Ee("invalid",a),kh(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Zs(a);break;case"select":Ee("invalid",a);break;case"textarea":Ee("invalid",a),Dh(a,u.value,u.defaultValue,u.children),Zs(a)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||u.suppressHydrationWarning===!0||Dg(a.textContent,s)?(u.popover!=null&&(Ee("beforetoggle",a),Ee("toggle",a)),u.onScroll!=null&&Ee("scroll",a),u.onScrollEnd!=null&&Ee("scrollend",a),u.onClick!=null&&(a.onclick=Pl),a=!0):a=!1,a||Ha(t)}function bm(t){for(St=t.return;St;)switch(St.tag){case 5:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:St=St.return}}function Ti(t){if(t!==St)return!1;if(!Re)return bm(t),Re=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Gc(t.type,t.memoizedProps)),s=!s),s&&Ve&&Ha(t),bm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){Ve=cn(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}Ve=null}}else a===27?(a=Ve,ga(t.type)?(t=Fc,Fc=null,Ve=t):Ve=a):Ve=St?cn(t.stateNode.nextSibling):null;return!0}function xi(){Ve=St=null,Re=!1}function _m(){var t=Ba;return t!==null&&(Lt===null?Lt=t:Lt.push.apply(Lt,t),Ba=null),t}function Ai(t){Ba===null?Ba=[t]:Ba.push(t)}var No=U(null),Ga=null,$n=null;function ta(t,a,s){Y(No,a._currentValue),a._currentValue=s}function Mn(t){t._currentValue=No.current,G(No)}function Co(t,a,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),t===s)break;t=t.return}}function jo(t,a,s,u){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var y=f.child;p=p.firstContext;e:for(;p!==null;){var v=p;p=f;for(var T=0;T<a.length;T++)if(v.context===a[T]){p.lanes|=s,v=p.alternate,v!==null&&(v.lanes|=s),Co(p.return,s,t),u||(y=null);break e}p=v.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=s,p=y.alternate,p!==null&&(p.lanes|=s),Co(y,s,t),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Ri(t,a,s,u){t=null;for(var f=a,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var v=f.type;Ut(f.pendingProps.value,y.value)||(t!==null?t.push(v):t=[v])}}else if(f===Qe.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(as):t=[as])}f=f.return}t!==null&&jo(a,t,s,u),a.flags|=262144}function sl(t){for(t=t.firstContext;t!==null;){if(!Ut(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Za(t){Ga=t,$n=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function yt(t){return vm(Ga,t)}function ll(t,a){return Ga===null&&Za(t),vm(t,a)}function vm(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},$n===null){if(t===null)throw Error(r(308));$n=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else $n=$n.next=a;return s}var W0=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,u){t.push(u)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},ew=i.unstable_scheduleCallback,tw=i.unstable_NormalPriority,tt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ko(){return{controller:new W0,data:new Map,refCount:0}}function Ni(t){t.refCount--,t.refCount===0&&ew(tw,function(){t.controller.abort()})}var Ci=null,Lo=0,Er=0,Or=null;function nw(t,a){if(Ci===null){var s=Ci=[];Lo=0,Er=$c(),Or={status:"pending",value:void 0,then:function(u){s.push(u)}}}return Lo++,a.then(wm,wm),a}function wm(){if(--Lo===0&&Ci!==null){Or!==null&&(Or.status="fulfilled");var t=Ci;Ci=null,Er=0,Or=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function aw(t,a){var s=[],u={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<s.length;f++)(0,s[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),u}var Sm=j.S;j.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&nw(t,a),Sm!==null&&Sm(t,a)};var Va=U(null);function Do(){var t=Va.current;return t!==null?t:ze.pooledCache}function ul(t,a){a===null?Y(Va,Va.current):Y(Va,a.pool)}function Em(){var t=Do();return t===null?null:{parent:tt._currentValue,pool:t}}var ji=Error(r(460)),Om=Error(r(474)),ol=Error(r(542)),$o={then:function(){}};function Tm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cl(){}function xm(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(cl,cl),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Rm(t),t;default:if(typeof a.status=="string")a.then(cl,cl);else{if(t=ze,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Rm(t),t}throw ki=a,ji}}var ki=null;function Am(){if(ki===null)throw Error(r(459));var t=ki;return ki=null,t}function Rm(t){if(t===ji||t===ol)throw Error(r(483))}var na=!1;function Mo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Io(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function aa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ra(t,a,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(je&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=nl(t),mm(t,null,s),a}return tl(t,u,a,s),nl(t)}function Li(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var u=a.lanes;u&=t.pendingLanes,s|=u,a.lanes=s,wh(t,s)}}function Uo(t,a){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?f=p=y:p=p.next=y,s=s.next}while(s!==null);p===null?f=p=a:p=p.next=a}else f=p=a;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Po=!1;function Di(){if(Po){var t=Or;if(t!==null)throw t}}function $i(t,a,s,u){Po=!1;var f=t.updateQueue;na=!1;var p=f.firstBaseUpdate,y=f.lastBaseUpdate,v=f.shared.pending;if(v!==null){f.shared.pending=null;var T=v,D=T.next;T.next=null,y===null?p=D:y.next=D,y=T;var q=t.alternate;q!==null&&(q=q.updateQueue,v=q.lastBaseUpdate,v!==y&&(v===null?q.firstBaseUpdate=D:v.next=D,q.lastBaseUpdate=T))}if(p!==null){var H=f.baseState;y=0,q=D=T=null,v=p;do{var $=v.lane&-536870913,I=$!==v.lane;if(I?(Oe&$)===$:(u&$)===$){$!==0&&$===Er&&(Po=!0),q!==null&&(q=q.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var he=t,fe=v;$=a;var Me=s;switch(fe.tag){case 1:if(he=fe.payload,typeof he=="function"){H=he.call(Me,H,$);break e}H=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,$=typeof he=="function"?he.call(Me,H,$):he,$==null)break e;H=g({},H,$);break e;case 2:na=!0}}$=v.callback,$!==null&&(t.flags|=64,I&&(t.flags|=8192),I=f.callbacks,I===null?f.callbacks=[$]:I.push($))}else I={lane:$,tag:v.tag,payload:v.payload,callback:v.callback,next:null},q===null?(D=q=I,T=H):q=q.next=I,y|=$;if(v=v.next,v===null){if(v=f.shared.pending,v===null)break;I=v,v=I.next,I.next=null,f.lastBaseUpdate=I,f.shared.pending=null}}while(!0);q===null&&(T=H),f.baseState=T,f.firstBaseUpdate=D,f.lastBaseUpdate=q,p===null&&(f.shared.lanes=0),da|=y,t.lanes=y,t.memoizedState=H}}function Nm(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Cm(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Nm(s[t],a)}var Tr=U(null),fl=U(0);function jm(t,a){t=Hn,Y(fl,t),Y(Tr,a),Hn=t|a.baseLanes}function zo(){Y(fl,Hn),Y(Tr,Tr.current)}function qo(){Hn=fl.current,G(Tr),G(fl)}var ia=0,_e=null,De=null,Je=null,dl=!1,xr=!1,Ya=!1,hl=0,Mi=0,Ar=null,rw=0;function Fe(){throw Error(r(321))}function Bo(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Ut(t[s],a[s]))return!1;return!0}function Ho(t,a,s,u,f,p){return ia=p,_e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=t===null||t.memoizedState===null?mp:pp,Ya=!1,p=s(u,f),Ya=!1,xr&&(p=Lm(a,s,u,f)),km(t),p}function km(t){j.H=_l;var a=De!==null&&De.next!==null;if(ia=0,Je=De=_e=null,dl=!1,Mi=0,Ar=null,a)throw Error(r(300));t===null||st||(t=t.dependencies,t!==null&&sl(t)&&(st=!0))}function Lm(t,a,s,u){_e=t;var f=0;do{if(xr&&(Ar=null),Mi=0,xr=!1,25<=f)throw Error(r(301));if(f+=1,Je=De=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}j.H=fw,p=a(s,u)}while(xr);return p}function iw(){var t=j.H,a=t.useState()[0];return a=typeof a.then=="function"?Ii(a):a,t=t.useState()[0],(De!==null?De.memoizedState:null)!==t&&(_e.flags|=1024),a}function Go(){var t=hl!==0;return hl=0,t}function Zo(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Vo(t){if(dl){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}dl=!1}ia=0,Je=De=_e=null,xr=!1,Mi=hl=0,Ar=null}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?_e.memoizedState=Je=t:Je=Je.next=t,Je}function Ke(){if(De===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var a=Je===null?_e.memoizedState:Je.next;if(a!==null)Je=a,De=t;else{if(t===null)throw _e.alternate===null?Error(r(467)):Error(r(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Je===null?_e.memoizedState=Je=t:Je=Je.next=t}return Je}function Yo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ii(t){var a=Mi;return Mi+=1,Ar===null&&(Ar=[]),t=xm(Ar,t,a),a=_e,(Je===null?a.memoizedState:Je.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?mp:pp),t}function ml(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ii(t);if(t.$$typeof===C)return yt(t)}throw Error(r(438,String(t)))}function Fo(t){var a=null,s=_e.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Yo(),_e.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),u=0;u<t;u++)s[u]=wt;return a.index++,s}function In(t,a){return typeof a=="function"?a(t):a}function pl(t){var a=Ke();return Xo(a,De,t)}function Xo(t,a,s){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var f=t.baseQueue,p=u.pending;if(p!==null){if(f!==null){var y=f.next;f.next=p.next,p.next=y}a.baseQueue=f=p,u.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{a=f.next;var v=y=null,T=null,D=a,q=!1;do{var H=D.lane&-536870913;if(H!==D.lane?(Oe&H)===H:(ia&H)===H){var $=D.revertLane;if($===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),H===Er&&(q=!0);else if((ia&$)===$){D=D.next,$===Er&&(q=!0);continue}else H={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},T===null?(v=T=H,y=p):T=T.next=H,_e.lanes|=$,da|=$;H=D.action,Ya&&s(p,H),p=D.hasEagerState?D.eagerState:s(p,H)}else $={lane:H,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},T===null?(v=T=$,y=p):T=T.next=$,_e.lanes|=H,da|=H;D=D.next}while(D!==null&&D!==a);if(T===null?y=p:T.next=v,!Ut(p,t.memoizedState)&&(st=!0,q&&(s=Or,s!==null)))throw s;t.memoizedState=p,t.baseState=y,t.baseQueue=T,u.lastRenderedState=p}return f===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function Qo(t){var a=Ke(),s=a.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,f=s.pending,p=a.memoizedState;if(f!==null){s.pending=null;var y=f=f.next;do p=t(p,y.action),y=y.next;while(y!==f);Ut(p,a.memoizedState)||(st=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),s.lastRenderedState=p}return[p,u]}function Dm(t,a,s){var u=_e,f=Ke(),p=Re;if(p){if(s===void 0)throw Error(r(407));s=s()}else s=a();var y=!Ut((De||f).memoizedState,s);y&&(f.memoizedState=s,st=!0),f=f.queue;var v=Im.bind(null,u,f,t);if(Ui(2048,8,v,[t]),f.getSnapshot!==a||y||Je!==null&&Je.memoizedState.tag&1){if(u.flags|=2048,Rr(9,gl(),Mm.bind(null,u,f,s,a),null),ze===null)throw Error(r(349));p||(ia&124)!==0||$m(u,a,s)}return s}function $m(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=_e.updateQueue,a===null?(a=Yo(),_e.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Mm(t,a,s,u){a.value=s,a.getSnapshot=u,Um(a)&&Pm(t)}function Im(t,a,s){return s(function(){Um(a)&&Pm(t)})}function Um(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Ut(t,s)}catch{return!0}}function Pm(t){var a=_r(t,2);a!==null&&Gt(a,t,2)}function Jo(t){var a=jt();if(typeof t=="function"){var s=t;if(t=s(),Ya){Kn(!0);try{s()}finally{Kn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:t},a}function zm(t,a,s,u){return t.baseState=s,Xo(t,De,typeof u=="function"?u:In)}function sw(t,a,s,u,f){if(bl(t))throw Error(r(485));if(t=a.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){p.listeners.push(y)}};j.T!==null?s(!0):p.isTransition=!1,u(p),s=a.pending,s===null?(p.next=a.pending=p,qm(a,p)):(p.next=s.next,a.pending=s.next=p)}}function qm(t,a){var s=a.action,u=a.payload,f=t.state;if(a.isTransition){var p=j.T,y={};j.T=y;try{var v=s(f,u),T=j.S;T!==null&&T(y,v),Bm(t,a,v)}catch(D){Ko(t,a,D)}finally{j.T=p}}else try{p=s(f,u),Bm(t,a,p)}catch(D){Ko(t,a,D)}}function Bm(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){Hm(t,a,u)},function(u){return Ko(t,a,u)}):Hm(t,a,s)}function Hm(t,a,s){a.status="fulfilled",a.value=s,Gm(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,qm(t,s)))}function Ko(t,a,s){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=s,Gm(a),a=a.next;while(a!==u)}t.action=null}function Gm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Zm(t,a){return a}function Vm(t,a){if(Re){var s=ze.formState;if(s!==null){e:{var u=_e;if(Re){if(Ve){t:{for(var f=Ve,p=Sn;f.nodeType!==8;){if(!p){f=null;break t}if(f=cn(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Ve=cn(f.nextSibling),u=f.data==="F!";break e}}Ha(u)}u=!1}u&&(a=s[0])}}return s=jt(),s.memoizedState=s.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zm,lastRenderedState:a},s.queue=u,s=fp.bind(null,_e,u),u.dispatch=s,u=Jo(!1),p=ac.bind(null,_e,!1,u.queue),u=jt(),f={state:a,dispatch:null,action:t,pending:null},u.queue=f,s=sw.bind(null,_e,f,p,s),f.dispatch=s,u.memoizedState=t,[a,s,!1]}function Ym(t){var a=Ke();return Fm(a,De,t)}function Fm(t,a,s){if(a=Xo(t,a,Zm)[0],t=pl(In)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Ii(a)}catch(y){throw y===ji?ol:y}else u=a;a=Ke();var f=a.queue,p=f.dispatch;return s!==a.memoizedState&&(_e.flags|=2048,Rr(9,gl(),lw.bind(null,f,s),null)),[u,p,t]}function lw(t,a){t.action=a}function Xm(t){var a=Ke(),s=De;if(s!==null)return Fm(a,s,t);Ke(),a=a.memoizedState,s=Ke();var u=s.queue.dispatch;return s.memoizedState=t,[a,u,!1]}function Rr(t,a,s,u){return t={tag:t,create:s,deps:u,inst:a,next:null},a=_e.updateQueue,a===null&&(a=Yo(),_e.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,a.lastEffect=t),t}function gl(){return{destroy:void 0,resource:void 0}}function Qm(){return Ke().memoizedState}function yl(t,a,s,u){var f=jt();u=u===void 0?null:u,_e.flags|=t,f.memoizedState=Rr(1|a,gl(),s,u)}function Ui(t,a,s,u){var f=Ke();u=u===void 0?null:u;var p=f.memoizedState.inst;De!==null&&u!==null&&Bo(u,De.memoizedState.deps)?f.memoizedState=Rr(a,p,s,u):(_e.flags|=t,f.memoizedState=Rr(1|a,p,s,u))}function Jm(t,a){yl(8390656,8,t,a)}function Km(t,a){Ui(2048,8,t,a)}function Wm(t,a){return Ui(4,2,t,a)}function ep(t,a){return Ui(4,4,t,a)}function tp(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function np(t,a,s){s=s!=null?s.concat([t]):null,Ui(4,4,tp.bind(null,a,t),s)}function Wo(){}function ap(t,a){var s=Ke();a=a===void 0?null:a;var u=s.memoizedState;return a!==null&&Bo(a,u[1])?u[0]:(s.memoizedState=[t,a],t)}function rp(t,a){var s=Ke();a=a===void 0?null:a;var u=s.memoizedState;if(a!==null&&Bo(a,u[1]))return u[0];if(u=t(),Ya){Kn(!0);try{t()}finally{Kn(!1)}}return s.memoizedState=[u,a],u}function ec(t,a,s){return s===void 0||(ia&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=lg(),_e.lanes|=t,da|=t,s)}function ip(t,a,s,u){return Ut(s,a)?s:Tr.current!==null?(t=ec(t,s,u),Ut(t,a)||(st=!0),t):(ia&42)===0?(st=!0,t.memoizedState=s):(t=lg(),_e.lanes|=t,da|=t,a)}function sp(t,a,s,u,f){var p=P.p;P.p=p!==0&&8>p?p:8;var y=j.T,v={};j.T=v,ac(t,!1,a,s);try{var T=f(),D=j.S;if(D!==null&&D(v,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var q=aw(T,u);Pi(t,a,q,Ht(t))}else Pi(t,a,u,Ht(t))}catch(H){Pi(t,a,{then:function(){},status:"rejected",reason:H},Ht())}finally{P.p=p,j.T=y}}function uw(){}function tc(t,a,s,u){if(t.tag!==5)throw Error(r(476));var f=lp(t).queue;sp(t,f,a,V,s===null?uw:function(){return up(t),s(u)})}function lp(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:V},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function up(t){var a=lp(t).next.queue;Pi(t,a,{},Ht())}function nc(){return yt(as)}function op(){return Ke().memoizedState}function cp(){return Ke().memoizedState}function ow(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=Ht();t=aa(s);var u=ra(a,t,s);u!==null&&(Gt(u,a,s),Li(u,a,s)),a={cache:ko()},t.payload=a;return}a=a.return}}function cw(t,a,s){var u=Ht();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},bl(t)?dp(a,s):(s=So(t,a,s,u),s!==null&&(Gt(s,t,u),hp(s,a,u)))}function fp(t,a,s){var u=Ht();Pi(t,a,s,u)}function Pi(t,a,s,u){var f={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(bl(t))dp(a,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var y=a.lastRenderedState,v=p(y,s);if(f.hasEagerState=!0,f.eagerState=v,Ut(v,y))return tl(t,a,f,0),ze===null&&el(),!1}catch{}finally{}if(s=So(t,a,f,u),s!==null)return Gt(s,t,u),hp(s,a,u),!0}return!1}function ac(t,a,s,u){if(u={lane:2,revertLane:$c(),action:u,hasEagerState:!1,eagerState:null,next:null},bl(t)){if(a)throw Error(r(479))}else a=So(t,s,u,2),a!==null&&Gt(a,t,2)}function bl(t){var a=t.alternate;return t===_e||a!==null&&a===_e}function dp(t,a){xr=dl=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function hp(t,a,s){if((s&4194048)!==0){var u=a.lanes;u&=t.pendingLanes,s|=u,a.lanes=s,wh(t,s)}}var _l={readContext:yt,use:ml,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe},mp={readContext:yt,use:ml,useCallback:function(t,a){return jt().memoizedState=[t,a===void 0?null:a],t},useContext:yt,useEffect:Jm,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,yl(4194308,4,tp.bind(null,a,t),s)},useLayoutEffect:function(t,a){return yl(4194308,4,t,a)},useInsertionEffect:function(t,a){yl(4,2,t,a)},useMemo:function(t,a){var s=jt();a=a===void 0?null:a;var u=t();if(Ya){Kn(!0);try{t()}finally{Kn(!1)}}return s.memoizedState=[u,a],u},useReducer:function(t,a,s){var u=jt();if(s!==void 0){var f=s(a);if(Ya){Kn(!0);try{s(a)}finally{Kn(!1)}}}else f=a;return u.memoizedState=u.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},u.queue=t,t=t.dispatch=cw.bind(null,_e,t),[u.memoizedState,t]},useRef:function(t){var a=jt();return t={current:t},a.memoizedState=t},useState:function(t){t=Jo(t);var a=t.queue,s=fp.bind(null,_e,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Wo,useDeferredValue:function(t,a){var s=jt();return ec(s,t,a)},useTransition:function(){var t=Jo(!1);return t=sp.bind(null,_e,t.queue,!0,!1),jt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var u=_e,f=jt();if(Re){if(s===void 0)throw Error(r(407));s=s()}else{if(s=a(),ze===null)throw Error(r(349));(Oe&124)!==0||$m(u,a,s)}f.memoizedState=s;var p={value:s,getSnapshot:a};return f.queue=p,Jm(Im.bind(null,u,p,t),[t]),u.flags|=2048,Rr(9,gl(),Mm.bind(null,u,p,s,a),null),s},useId:function(){var t=jt(),a=ze.identifierPrefix;if(Re){var s=Dn,u=Ln;s=(u&~(1<<32-It(u)-1)).toString(32)+s,a="«"+a+"R"+s,s=hl++,0<s&&(a+="H"+s.toString(32)),a+="»"}else s=rw++,a="«"+a+"r"+s.toString(32)+"»";return t.memoizedState=a},useHostTransitionStatus:nc,useFormState:Vm,useActionState:Vm,useOptimistic:function(t){var a=jt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ac.bind(null,_e,!0,s),s.dispatch=a,[t,a]},useMemoCache:Fo,useCacheRefresh:function(){return jt().memoizedState=ow.bind(null,_e)}},pp={readContext:yt,use:ml,useCallback:ap,useContext:yt,useEffect:Km,useImperativeHandle:np,useInsertionEffect:Wm,useLayoutEffect:ep,useMemo:rp,useReducer:pl,useRef:Qm,useState:function(){return pl(In)},useDebugValue:Wo,useDeferredValue:function(t,a){var s=Ke();return ip(s,De.memoizedState,t,a)},useTransition:function(){var t=pl(In)[0],a=Ke().memoizedState;return[typeof t=="boolean"?t:Ii(t),a]},useSyncExternalStore:Dm,useId:op,useHostTransitionStatus:nc,useFormState:Ym,useActionState:Ym,useOptimistic:function(t,a){var s=Ke();return zm(s,De,t,a)},useMemoCache:Fo,useCacheRefresh:cp},fw={readContext:yt,use:ml,useCallback:ap,useContext:yt,useEffect:Km,useImperativeHandle:np,useInsertionEffect:Wm,useLayoutEffect:ep,useMemo:rp,useReducer:Qo,useRef:Qm,useState:function(){return Qo(In)},useDebugValue:Wo,useDeferredValue:function(t,a){var s=Ke();return De===null?ec(s,t,a):ip(s,De.memoizedState,t,a)},useTransition:function(){var t=Qo(In)[0],a=Ke().memoizedState;return[typeof t=="boolean"?t:Ii(t),a]},useSyncExternalStore:Dm,useId:op,useHostTransitionStatus:nc,useFormState:Xm,useActionState:Xm,useOptimistic:function(t,a){var s=Ke();return De!==null?zm(s,De,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Fo,useCacheRefresh:cp},Nr=null,zi=0;function vl(t){var a=zi;return zi+=1,Nr===null&&(Nr=[]),xm(Nr,t,a)}function qi(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function wl(t,a){throw a.$$typeof===b?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function gp(t){var a=t._init;return a(t._payload)}function yp(t){function a(N,A){if(t){var k=N.deletions;k===null?(N.deletions=[A],N.flags|=16):k.push(A)}}function s(N,A){if(!t)return null;for(;A!==null;)a(N,A),A=A.sibling;return null}function u(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function f(N,A){return N=kn(N,A),N.index=0,N.sibling=null,N}function p(N,A,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<A?(N.flags|=67108866,A):k):(N.flags|=67108866,A)):(N.flags|=1048576,A)}function y(N){return t&&N.alternate===null&&(N.flags|=67108866),N}function v(N,A,k,B){return A===null||A.tag!==6?(A=Oo(k,N.mode,B),A.return=N,A):(A=f(A,k),A.return=N,A)}function T(N,A,k,B){var re=k.type;return re===S?q(N,A,k.props.children,B,k.key):A!==null&&(A.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===W&&gp(re)===A.type)?(A=f(A,k.props),qi(A,k),A.return=N,A):(A=al(k.type,k.key,k.props,null,N.mode,B),qi(A,k),A.return=N,A)}function D(N,A,k,B){return A===null||A.tag!==4||A.stateNode.containerInfo!==k.containerInfo||A.stateNode.implementation!==k.implementation?(A=To(k,N.mode,B),A.return=N,A):(A=f(A,k.children||[]),A.return=N,A)}function q(N,A,k,B,re){return A===null||A.tag!==7?(A=Pa(k,N.mode,B,re),A.return=N,A):(A=f(A,k),A.return=N,A)}function H(N,A,k){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Oo(""+A,N.mode,k),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _:return k=al(A.type,A.key,A.props,null,N.mode,k),qi(k,A),k.return=N,k;case w:return A=To(A,N.mode,k),A.return=N,A;case W:var B=A._init;return A=B(A._payload),H(N,A,k)}if(F(A)||Ge(A))return A=Pa(A,N.mode,k,null),A.return=N,A;if(typeof A.then=="function")return H(N,vl(A),k);if(A.$$typeof===C)return H(N,ll(N,A),k);wl(N,A)}return null}function $(N,A,k,B){var re=A!==null?A.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return re!==null?null:v(N,A,""+k,B);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===re?T(N,A,k,B):null;case w:return k.key===re?D(N,A,k,B):null;case W:return re=k._init,k=re(k._payload),$(N,A,k,B)}if(F(k)||Ge(k))return re!==null?null:q(N,A,k,B,null);if(typeof k.then=="function")return $(N,A,vl(k),B);if(k.$$typeof===C)return $(N,A,ll(N,k),B);wl(N,k)}return null}function I(N,A,k,B,re){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return N=N.get(k)||null,v(A,N,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case _:return N=N.get(B.key===null?k:B.key)||null,T(A,N,B,re);case w:return N=N.get(B.key===null?k:B.key)||null,D(A,N,B,re);case W:var ve=B._init;return B=ve(B._payload),I(N,A,k,B,re)}if(F(B)||Ge(B))return N=N.get(k)||null,q(A,N,B,re,null);if(typeof B.then=="function")return I(N,A,k,vl(B),re);if(B.$$typeof===C)return I(N,A,k,ll(A,B),re);wl(A,B)}return null}function he(N,A,k,B){for(var re=null,ve=null,le=A,de=A=0,ut=null;le!==null&&de<k.length;de++){le.index>de?(ut=le,le=null):ut=le.sibling;var xe=$(N,le,k[de],B);if(xe===null){le===null&&(le=ut);break}t&&le&&xe.alternate===null&&a(N,le),A=p(xe,A,de),ve===null?re=xe:ve.sibling=xe,ve=xe,le=ut}if(de===k.length)return s(N,le),Re&&qa(N,de),re;if(le===null){for(;de<k.length;de++)le=H(N,k[de],B),le!==null&&(A=p(le,A,de),ve===null?re=le:ve.sibling=le,ve=le);return Re&&qa(N,de),re}for(le=u(le);de<k.length;de++)ut=I(le,N,de,k[de],B),ut!==null&&(t&&ut.alternate!==null&&le.delete(ut.key===null?de:ut.key),A=p(ut,A,de),ve===null?re=ut:ve.sibling=ut,ve=ut);return t&&le.forEach(function(wa){return a(N,wa)}),Re&&qa(N,de),re}function fe(N,A,k,B){if(k==null)throw Error(r(151));for(var re=null,ve=null,le=A,de=A=0,ut=null,xe=k.next();le!==null&&!xe.done;de++,xe=k.next()){le.index>de?(ut=le,le=null):ut=le.sibling;var wa=$(N,le,xe.value,B);if(wa===null){le===null&&(le=ut);break}t&&le&&wa.alternate===null&&a(N,le),A=p(wa,A,de),ve===null?re=wa:ve.sibling=wa,ve=wa,le=ut}if(xe.done)return s(N,le),Re&&qa(N,de),re;if(le===null){for(;!xe.done;de++,xe=k.next())xe=H(N,xe.value,B),xe!==null&&(A=p(xe,A,de),ve===null?re=xe:ve.sibling=xe,ve=xe);return Re&&qa(N,de),re}for(le=u(le);!xe.done;de++,xe=k.next())xe=I(le,N,de,xe.value,B),xe!==null&&(t&&xe.alternate!==null&&le.delete(xe.key===null?de:xe.key),A=p(xe,A,de),ve===null?re=xe:ve.sibling=xe,ve=xe);return t&&le.forEach(function(dS){return a(N,dS)}),Re&&qa(N,de),re}function Me(N,A,k,B){if(typeof k=="object"&&k!==null&&k.type===S&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:e:{for(var re=k.key;A!==null;){if(A.key===re){if(re=k.type,re===S){if(A.tag===7){s(N,A.sibling),B=f(A,k.props.children),B.return=N,N=B;break e}}else if(A.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===W&&gp(re)===A.type){s(N,A.sibling),B=f(A,k.props),qi(B,k),B.return=N,N=B;break e}s(N,A);break}else a(N,A);A=A.sibling}k.type===S?(B=Pa(k.props.children,N.mode,B,k.key),B.return=N,N=B):(B=al(k.type,k.key,k.props,null,N.mode,B),qi(B,k),B.return=N,N=B)}return y(N);case w:e:{for(re=k.key;A!==null;){if(A.key===re)if(A.tag===4&&A.stateNode.containerInfo===k.containerInfo&&A.stateNode.implementation===k.implementation){s(N,A.sibling),B=f(A,k.children||[]),B.return=N,N=B;break e}else{s(N,A);break}else a(N,A);A=A.sibling}B=To(k,N.mode,B),B.return=N,N=B}return y(N);case W:return re=k._init,k=re(k._payload),Me(N,A,k,B)}if(F(k))return he(N,A,k,B);if(Ge(k)){if(re=Ge(k),typeof re!="function")throw Error(r(150));return k=re.call(k),fe(N,A,k,B)}if(typeof k.then=="function")return Me(N,A,vl(k),B);if(k.$$typeof===C)return Me(N,A,ll(N,k),B);wl(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,A!==null&&A.tag===6?(s(N,A.sibling),B=f(A,k),B.return=N,N=B):(s(N,A),B=Oo(k,N.mode,B),B.return=N,N=B),y(N)):s(N,A)}return function(N,A,k,B){try{zi=0;var re=Me(N,A,k,B);return Nr=null,re}catch(le){if(le===ji||le===ol)throw le;var ve=Pt(29,le,null,N.mode);return ve.lanes=B,ve.return=N,ve}finally{}}}var Cr=yp(!0),bp=yp(!1),nn=U(null),En=null;function sa(t){var a=t.alternate;Y(nt,nt.current&1),Y(nn,t),En===null&&(a===null||Tr.current!==null||a.memoizedState!==null)&&(En=t)}function _p(t){if(t.tag===22){if(Y(nt,nt.current),Y(nn,t),En===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(En=t)}}else la()}function la(){Y(nt,nt.current),Y(nn,nn.current)}function Un(t){G(nn),En===t&&(En=null),G(nt)}var nt=U(0);function Sl(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Yc(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function rc(t,a,s,u){a=t.memoizedState,s=s(u,a),s=s==null?a:g({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ic={enqueueSetState:function(t,a,s){t=t._reactInternals;var u=Ht(),f=aa(u);f.payload=a,s!=null&&(f.callback=s),a=ra(t,f,u),a!==null&&(Gt(a,t,u),Li(a,t,u))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var u=Ht(),f=aa(u);f.tag=1,f.payload=a,s!=null&&(f.callback=s),a=ra(t,f,u),a!==null&&(Gt(a,t,u),Li(a,t,u))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=Ht(),u=aa(s);u.tag=2,a!=null&&(u.callback=a),a=ra(t,u,s),a!==null&&(Gt(a,t,s),Li(a,t,s))}};function vp(t,a,s,u,f,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):a.prototype&&a.prototype.isPureReactComponent?!Ei(s,u)||!Ei(f,p):!0}function wp(t,a,s,u){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,u),a.state!==t&&ic.enqueueReplaceState(a,a.state,null)}function Fa(t,a){var s=a;if("ref"in a){s={};for(var u in a)u!=="ref"&&(s[u]=a[u])}if(t=t.defaultProps){s===a&&(s=g({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}var El=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Sp(t){El(t)}function Ep(t){console.error(t)}function Op(t){El(t)}function Ol(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Tp(t,a,s){try{var u=t.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function sc(t,a,s){return s=aa(s),s.tag=3,s.payload={element:null},s.callback=function(){Ol(t,a)},s}function xp(t){return t=aa(t),t.tag=3,t}function Ap(t,a,s,u){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;t.payload=function(){return f(p)},t.callback=function(){Tp(a,s,u)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Tp(a,s,u),typeof f!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function dw(t,a,s,u,f){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=s.alternate,a!==null&&Ri(a,s,f,!0),s=nn.current,s!==null){switch(s.tag){case 13:return En===null?Cc():s.alternate===null&&Ye===0&&(Ye=3),s.flags&=-257,s.flags|=65536,s.lanes=f,u===$o?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([u]):a.add(u),kc(t,u,f)),!1;case 22:return s.flags|=65536,u===$o?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([u]):s.add(u)),kc(t,u,f)),!1}throw Error(r(435,s.tag))}return kc(t,u,f),Cc(),!1}if(Re)return a=nn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==Ro&&(t=Error(r(422),{cause:u}),Ai(Kt(t,s)))):(u!==Ro&&(a=Error(r(423),{cause:u}),Ai(Kt(a,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,u=Kt(u,s),f=sc(t.stateNode,u,f),Uo(t,f),Ye!==4&&(Ye=2)),!1;var p=Error(r(520),{cause:u});if(p=Kt(p,s),Fi===null?Fi=[p]:Fi.push(p),Ye!==4&&(Ye=2),a===null)return!0;u=Kt(u,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=sc(s.stateNode,u,t),Uo(s,t),!1;case 1:if(a=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ha===null||!ha.has(p))))return s.flags|=65536,f&=-f,s.lanes|=f,f=xp(f),Ap(f,t,s,u),Uo(s,f),!1}s=s.return}while(s!==null);return!1}var Rp=Error(r(461)),st=!1;function dt(t,a,s,u){a.child=t===null?bp(a,null,s,u):Cr(a,t.child,s,u)}function Np(t,a,s,u,f){s=s.render;var p=a.ref;if("ref"in u){var y={};for(var v in u)v!=="ref"&&(y[v]=u[v])}else y=u;return Za(a),u=Ho(t,a,s,y,p,f),v=Go(),t!==null&&!st?(Zo(t,a,f),Pn(t,a,f)):(Re&&v&&xo(a),a.flags|=1,dt(t,a,u,f),a.child)}function Cp(t,a,s,u,f){if(t===null){var p=s.type;return typeof p=="function"&&!Eo(p)&&p.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=p,jp(t,a,p,u,f)):(t=al(s.type,null,u,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!mc(t,f)){var y=p.memoizedProps;if(s=s.compare,s=s!==null?s:Ei,s(y,u)&&t.ref===a.ref)return Pn(t,a,f)}return a.flags|=1,t=kn(p,u),t.ref=a.ref,t.return=a,a.child=t}function jp(t,a,s,u,f){if(t!==null){var p=t.memoizedProps;if(Ei(p,u)&&t.ref===a.ref)if(st=!1,a.pendingProps=u=p,mc(t,f))(t.flags&131072)!==0&&(st=!0);else return a.lanes=t.lanes,Pn(t,a,f)}return lc(t,a,s,u,f)}function kp(t,a,s){var u=a.pendingProps,f=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=p!==null?p.baseLanes|s:s,t!==null){for(f=a.child=t.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;a.childLanes=p&~u}else a.childLanes=0,a.child=null;return Lp(t,a,u,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&ul(a,p!==null?p.cachePool:null),p!==null?jm(a,p):zo(),_p(a);else return a.lanes=a.childLanes=536870912,Lp(t,a,p!==null?p.baseLanes|s:s,s)}else p!==null?(ul(a,p.cachePool),jm(a,p),la(),a.memoizedState=null):(t!==null&&ul(a,null),zo(),la());return dt(t,a,f,s),a.child}function Lp(t,a,s,u){var f=Do();return f=f===null?null:{parent:tt._currentValue,pool:f},a.memoizedState={baseLanes:s,cachePool:f},t!==null&&ul(a,null),zo(),_p(a),t!==null&&Ri(t,a,u,!0),null}function Tl(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function lc(t,a,s,u,f){return Za(a),s=Ho(t,a,s,u,void 0,f),u=Go(),t!==null&&!st?(Zo(t,a,f),Pn(t,a,f)):(Re&&u&&xo(a),a.flags|=1,dt(t,a,s,f),a.child)}function Dp(t,a,s,u,f,p){return Za(a),a.updateQueue=null,s=Lm(a,u,s,f),km(t),u=Go(),t!==null&&!st?(Zo(t,a,p),Pn(t,a,p)):(Re&&u&&xo(a),a.flags|=1,dt(t,a,s,p),a.child)}function $p(t,a,s,u,f){if(Za(a),a.stateNode===null){var p=vr,y=s.contextType;typeof y=="object"&&y!==null&&(p=yt(y)),p=new s(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ic,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},Mo(a),y=s.contextType,p.context=typeof y=="object"&&y!==null?yt(y):vr,p.state=a.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(rc(a,s,y,u),p.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(y=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),y!==p.state&&ic.enqueueReplaceState(p,p.state,null),$i(a,u,p,f),Di(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(t===null){p=a.stateNode;var v=a.memoizedProps,T=Fa(s,v);p.props=T;var D=p.context,q=s.contextType;y=vr,typeof q=="object"&&q!==null&&(y=yt(q));var H=s.getDerivedStateFromProps;q=typeof H=="function"||typeof p.getSnapshotBeforeUpdate=="function",v=a.pendingProps!==v,q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v||D!==y)&&wp(a,p,u,y),na=!1;var $=a.memoizedState;p.state=$,$i(a,u,p,f),Di(),D=a.memoizedState,v||$!==D||na?(typeof H=="function"&&(rc(a,s,H,u),D=a.memoizedState),(T=na||vp(a,s,T,u,$,D,y))?(q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=D),p.props=u,p.state=D,p.context=y,u=T):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,Io(t,a),y=a.memoizedProps,q=Fa(s,y),p.props=q,H=a.pendingProps,$=p.context,D=s.contextType,T=vr,typeof D=="object"&&D!==null&&(T=yt(D)),v=s.getDerivedStateFromProps,(D=typeof v=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==H||$!==T)&&wp(a,p,u,T),na=!1,$=a.memoizedState,p.state=$,$i(a,u,p,f),Di();var I=a.memoizedState;y!==H||$!==I||na||t!==null&&t.dependencies!==null&&sl(t.dependencies)?(typeof v=="function"&&(rc(a,s,v,u),I=a.memoizedState),(q=na||vp(a,s,q,u,$,I,T)||t!==null&&t.dependencies!==null&&sl(t.dependencies))?(D||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,I,T),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,I,T)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=I),p.props=u,p.state=I,p.context=T,u=q):(typeof p.componentDidUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&$===t.memoizedState||(a.flags|=1024),u=!1)}return p=u,Tl(t,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&u?(a.child=Cr(a,t.child,null,f),a.child=Cr(a,null,s,f)):dt(t,a,s,f),a.memoizedState=p.state,t=a.child):t=Pn(t,a,f),t}function Mp(t,a,s,u){return xi(),a.flags|=256,dt(t,a,s,u),a.child}var uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oc(t){return{baseLanes:t,cachePool:Em()}}function cc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=an),t}function Ip(t,a,s){var u=a.pendingProps,f=!1,p=(a.flags&128)!==0,y;if((y=p)||(y=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),y&&(f=!0,a.flags&=-129),y=(a.flags&32)!==0,a.flags&=-33,t===null){if(Re){if(f?sa(a):la(),Re){var v=Ve,T;if(T=v){e:{for(T=v,v=Sn;T.nodeType!==8;){if(!v){v=null;break e}if(T=cn(T.nextSibling),T===null){v=null;break e}}v=T}v!==null?(a.memoizedState={dehydrated:v,treeContext:za!==null?{id:Ln,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},T=Pt(18,null,null,0),T.stateNode=v,T.return=a,a.child=T,St=a,Ve=null,T=!0):T=!1}T||Ha(a)}if(v=a.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Yc(v)?a.lanes=32:a.lanes=536870912,null;Un(a)}return v=u.children,u=u.fallback,f?(la(),f=a.mode,v=xl({mode:"hidden",children:v},f),u=Pa(u,f,s,null),v.return=a,u.return=a,v.sibling=u,a.child=v,f=a.child,f.memoizedState=oc(s),f.childLanes=cc(t,y,s),a.memoizedState=uc,u):(sa(a),fc(a,v))}if(T=t.memoizedState,T!==null&&(v=T.dehydrated,v!==null)){if(p)a.flags&256?(sa(a),a.flags&=-257,a=dc(t,a,s)):a.memoizedState!==null?(la(),a.child=t.child,a.flags|=128,a=null):(la(),f=u.fallback,v=a.mode,u=xl({mode:"visible",children:u.children},v),f=Pa(f,v,s,null),f.flags|=2,u.return=a,f.return=a,u.sibling=f,a.child=u,Cr(a,t.child,null,s),u=a.child,u.memoizedState=oc(s),u.childLanes=cc(t,y,s),a.memoizedState=uc,a=f);else if(sa(a),Yc(v)){if(y=v.nextSibling&&v.nextSibling.dataset,y)var D=y.dgst;y=D,u=Error(r(419)),u.stack="",u.digest=y,Ai({value:u,source:null,stack:null}),a=dc(t,a,s)}else if(st||Ri(t,a,s,!1),y=(s&t.childLanes)!==0,st||y){if(y=ze,y!==null&&(u=s&-s,u=(u&42)!==0?1:Yu(u),u=(u&(y.suspendedLanes|s))!==0?0:u,u!==0&&u!==T.retryLane))throw T.retryLane=u,_r(t,u),Gt(y,t,u),Rp;v.data==="$?"||Cc(),a=dc(t,a,s)}else v.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=T.treeContext,Ve=cn(v.nextSibling),St=a,Re=!0,Ba=null,Sn=!1,t!==null&&(en[tn++]=Ln,en[tn++]=Dn,en[tn++]=za,Ln=t.id,Dn=t.overflow,za=a),a=fc(a,u.children),a.flags|=4096);return a}return f?(la(),f=u.fallback,v=a.mode,T=t.child,D=T.sibling,u=kn(T,{mode:"hidden",children:u.children}),u.subtreeFlags=T.subtreeFlags&65011712,D!==null?f=kn(D,f):(f=Pa(f,v,s,null),f.flags|=2),f.return=a,u.return=a,u.sibling=f,a.child=u,u=f,f=a.child,v=t.child.memoizedState,v===null?v=oc(s):(T=v.cachePool,T!==null?(D=tt._currentValue,T=T.parent!==D?{parent:D,pool:D}:T):T=Em(),v={baseLanes:v.baseLanes|s,cachePool:T}),f.memoizedState=v,f.childLanes=cc(t,y,s),a.memoizedState=uc,u):(sa(a),s=t.child,t=s.sibling,s=kn(s,{mode:"visible",children:u.children}),s.return=a,s.sibling=null,t!==null&&(y=a.deletions,y===null?(a.deletions=[t],a.flags|=16):y.push(t)),a.child=s,a.memoizedState=null,s)}function fc(t,a){return a=xl({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function xl(t,a){return t=Pt(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function dc(t,a,s){return Cr(a,t.child,null,s),t=fc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Up(t,a,s){t.lanes|=a;var u=t.alternate;u!==null&&(u.lanes|=a),Co(t.return,a,s)}function hc(t,a,s,u,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=s,p.tailMode=f)}function Pp(t,a,s){var u=a.pendingProps,f=u.revealOrder,p=u.tail;if(dt(t,a,u.children,s),u=nt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Up(t,s,a);else if(t.tag===19)Up(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(Y(nt,u),f){case"forwards":for(s=a.child,f=null;s!==null;)t=s.alternate,t!==null&&Sl(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=a.child,a.child=null):(f=s.sibling,s.sibling=null),hc(a,!1,f,s,p);break;case"backwards":for(s=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Sl(t)===null){a.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}hc(a,!0,s,null,p);break;case"together":hc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Pn(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),da|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Ri(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,s=kn(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=kn(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function mc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&sl(t)))}function hw(t,a,s){switch(a.tag){case 3:Ue(a,a.stateNode.containerInfo),ta(a,tt,t.memoizedState.cache),xi();break;case 27:case 5:La(a);break;case 4:Ue(a,a.stateNode.containerInfo);break;case 10:ta(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(sa(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Ip(t,a,s):(sa(a),t=Pn(t,a,s),t!==null?t.sibling:null);sa(a);break;case 19:var f=(t.flags&128)!==0;if(u=(s&a.childLanes)!==0,u||(Ri(t,a,s,!1),u=(s&a.childLanes)!==0),f){if(u)return Pp(t,a,s);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Y(nt,nt.current),u)break;return null;case 22:case 23:return a.lanes=0,kp(t,a,s);case 24:ta(a,tt,t.memoizedState.cache)}return Pn(t,a,s)}function zp(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)st=!0;else{if(!mc(t,s)&&(a.flags&128)===0)return st=!1,hw(t,a,s);st=(t.flags&131072)!==0}else st=!1,Re&&(a.flags&1048576)!==0&&gm(a,il,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var u=a.elementType,f=u._init;if(u=f(u._payload),a.type=u,typeof u=="function")Eo(u)?(t=Fa(u,t),a.tag=1,a=$p(null,a,u,t,s)):(a.tag=0,a=lc(null,a,u,t,s));else{if(u!=null){if(f=u.$$typeof,f===Z){a.tag=11,a=Np(null,a,u,t,s);break e}else if(f===ae){a.tag=14,a=Cp(null,a,u,t,s);break e}}throw a=ee(u)||u,Error(r(306,a,""))}}return a;case 0:return lc(t,a,a.type,a.pendingProps,s);case 1:return u=a.type,f=Fa(u,a.pendingProps),$p(t,a,u,f,s);case 3:e:{if(Ue(a,a.stateNode.containerInfo),t===null)throw Error(r(387));u=a.pendingProps;var p=a.memoizedState;f=p.element,Io(t,a),$i(a,u,null,s);var y=a.memoizedState;if(u=y.cache,ta(a,tt,u),u!==p.cache&&jo(a,[tt],s,!0),Di(),u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Mp(t,a,u,s);break e}else if(u!==f){f=Kt(Error(r(424)),a),Ai(f),a=Mp(t,a,u,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ve=cn(t.firstChild),St=a,Re=!0,Ba=null,Sn=!0,s=bp(a,null,u,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(xi(),u===f){a=Pn(t,a,s);break e}dt(t,a,u,s)}a=a.child}return a;case 26:return Tl(t,a),t===null?(s=Gg(a.type,null,a.pendingProps,null))?a.memoizedState=s:Re||(s=a.type,t=a.pendingProps,u=zl(ce.current).createElement(s),u[gt]=a,u[Nt]=t,mt(u,s,t),it(u),a.stateNode=u):a.memoizedState=Gg(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return La(a),t===null&&Re&&(u=a.stateNode=qg(a.type,a.pendingProps,ce.current),St=a,Sn=!0,f=Ve,ga(a.type)?(Fc=f,Ve=cn(u.firstChild)):Ve=f),dt(t,a,a.pendingProps.children,s),Tl(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Re&&((f=u=Ve)&&(u=qw(u,a.type,a.pendingProps,Sn),u!==null?(a.stateNode=u,St=a,Ve=cn(u.firstChild),Sn=!1,f=!0):f=!1),f||Ha(a)),La(a),f=a.type,p=a.pendingProps,y=t!==null?t.memoizedProps:null,u=p.children,Gc(f,p)?u=null:y!==null&&Gc(f,y)&&(a.flags|=32),a.memoizedState!==null&&(f=Ho(t,a,iw,null,null,s),as._currentValue=f),Tl(t,a),dt(t,a,u,s),a.child;case 6:return t===null&&Re&&((t=s=Ve)&&(s=Bw(s,a.pendingProps,Sn),s!==null?(a.stateNode=s,St=a,Ve=null,t=!0):t=!1),t||Ha(a)),null;case 13:return Ip(t,a,s);case 4:return Ue(a,a.stateNode.containerInfo),u=a.pendingProps,t===null?a.child=Cr(a,null,u,s):dt(t,a,u,s),a.child;case 11:return Np(t,a,a.type,a.pendingProps,s);case 7:return dt(t,a,a.pendingProps,s),a.child;case 8:return dt(t,a,a.pendingProps.children,s),a.child;case 12:return dt(t,a,a.pendingProps.children,s),a.child;case 10:return u=a.pendingProps,ta(a,a.type,u.value),dt(t,a,u.children,s),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,Za(a),f=yt(f),u=u(f),a.flags|=1,dt(t,a,u,s),a.child;case 14:return Cp(t,a,a.type,a.pendingProps,s);case 15:return jp(t,a,a.type,a.pendingProps,s);case 19:return Pp(t,a,s);case 31:return u=a.pendingProps,s=a.mode,u={mode:u.mode,children:u.children},t===null?(s=xl(u,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=kn(t.child,u),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return kp(t,a,s);case 24:return Za(a),u=yt(tt),t===null?(f=Do(),f===null&&(f=ze,p=ko(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=s),f=p),a.memoizedState={parent:u,cache:f},Mo(a),ta(a,tt,f)):((t.lanes&s)!==0&&(Io(t,a),$i(a,null,null,s),Di()),f=t.memoizedState,p=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),ta(a,tt,u)):(u=p.cache,ta(a,tt,u),u!==f.cache&&jo(a,[tt],s,!0))),dt(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function zn(t){t.flags|=4}function qp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xg(a)){if(a=nn.current,a!==null&&((Oe&4194048)===Oe?En!==null:(Oe&62914560)!==Oe&&(Oe&536870912)===0||a!==En))throw ki=$o,Om;t.flags|=8192}}function Al(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?_h():536870912,t.lanes|=a,Dr|=a)}function Bi(t,a){if(!Re)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ze(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(a)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=s,a}function mw(t,a,s){var u=a.pendingProps;switch(Ao(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(a),null;case 1:return Ze(a),null;case 3:return s=a.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Mn(tt),Xt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ti(a)?zn(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_m())),Ze(a),null;case 26:return s=a.memoizedState,t===null?(zn(a),s!==null?(Ze(a),qp(a,s)):(Ze(a),a.flags&=-16777217)):s?s!==t.memoizedState?(zn(a),Ze(a),qp(a,s)):(Ze(a),a.flags&=-16777217):(t.memoizedProps!==u&&zn(a),Ze(a),a.flags&=-16777217),null;case 27:rr(a),s=ce.current;var f=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==u&&zn(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Ze(a),null}t=te.current,Ti(a)?ym(a):(t=qg(f,u,s),a.stateNode=t,zn(a))}return Ze(a),null;case 5:if(rr(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==u&&zn(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Ze(a),null}if(t=te.current,Ti(a))ym(a);else{switch(f=zl(ce.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?f.createElement(s,{is:u.is}):f.createElement(s)}}t[gt]=a,t[Nt]=u;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=t;e:switch(mt(t,s,u),s){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&zn(a)}}return Ze(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==u&&zn(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(t=ce.current,Ti(a)){if(t=a.stateNode,s=a.memoizedProps,u=null,f=St,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}t[gt]=a,t=!!(t.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||Dg(t.nodeValue,s)),t||Ha(a)}else t=zl(t).createTextNode(u),t[gt]=a,a.stateNode=t}return Ze(a),null;case 13:if(u=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ti(a),u!==null&&u.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[gt]=a}else xi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ze(a),f=!1}else f=_m(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Un(a),a):(Un(a),null)}if(Un(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=u!==null,t=t!==null&&t.memoizedState!==null,s){u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),Al(a,a.updateQueue),Ze(a),null;case 4:return Xt(),t===null&&Pc(a.stateNode.containerInfo),Ze(a),null;case 10:return Mn(a.type),Ze(a),null;case 19:if(G(nt),f=a.memoizedState,f===null)return Ze(a),null;if(u=(a.flags&128)!==0,p=f.rendering,p===null)if(u)Bi(f,!1);else{if(Ye!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=Sl(t),p!==null){for(a.flags|=128,Bi(f,!1),t=p.updateQueue,a.updateQueue=t,Al(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)pm(s,t),s=s.sibling;return Y(nt,nt.current&1|2),a.child}t=t.sibling}f.tail!==null&&wn()>Cl&&(a.flags|=128,u=!0,Bi(f,!1),a.lanes=4194304)}else{if(!u)if(t=Sl(p),t!==null){if(a.flags|=128,u=!0,t=t.updateQueue,a.updateQueue=t,Al(a,t),Bi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Re)return Ze(a),null}else 2*wn()-f.renderingStartTime>Cl&&s!==536870912&&(a.flags|=128,u=!0,Bi(f,!1),a.lanes=4194304);f.isBackwards?(p.sibling=a.child,a.child=p):(t=f.last,t!==null?t.sibling=p:a.child=p,f.last=p)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=wn(),a.sibling=null,t=nt.current,Y(nt,u?t&1|2:t&1),a):(Ze(a),null);case 22:case 23:return Un(a),qo(),u=a.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(s&536870912)!==0&&(a.flags&128)===0&&(Ze(a),a.subtreeFlags&6&&(a.flags|=8192)):Ze(a),s=a.updateQueue,s!==null&&Al(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==s&&(a.flags|=2048),t!==null&&G(Va),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Mn(tt),Ze(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function pw(t,a){switch(Ao(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Mn(tt),Xt(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return rr(a),null;case 13:if(Un(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));xi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return G(nt),null;case 4:return Xt(),null;case 10:return Mn(a.type),null;case 22:case 23:return Un(a),qo(),t!==null&&G(Va),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Mn(tt),null;case 25:return null;default:return null}}function Bp(t,a){switch(Ao(a),a.tag){case 3:Mn(tt),Xt();break;case 26:case 27:case 5:rr(a);break;case 4:Xt();break;case 13:Un(a);break;case 19:G(nt);break;case 10:Mn(a.type);break;case 22:case 23:Un(a),qo(),t!==null&&G(Va);break;case 24:Mn(tt)}}function Hi(t,a){try{var s=a.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var f=u.next;s=f;do{if((s.tag&t)===t){u=void 0;var p=s.create,y=s.inst;u=p(),y.destroy=u}s=s.next}while(s!==f)}}catch(v){Pe(a,a.return,v)}}function ua(t,a,s){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&t)===t){var y=u.inst,v=y.destroy;if(v!==void 0){y.destroy=void 0,f=a;var T=s,D=v;try{D()}catch(q){Pe(f,T,q)}}}u=u.next}while(u!==p)}}catch(q){Pe(a,a.return,q)}}function Hp(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Cm(a,s)}catch(u){Pe(t,t.return,u)}}}function Gp(t,a,s){s.props=Fa(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(u){Pe(t,a,u)}}function Gi(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof s=="function"?t.refCleanup=s(u):s.current=u}}catch(f){Pe(t,a,f)}}function On(t,a){var s=t.ref,u=t.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(f){Pe(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Pe(t,a,f)}else s.current=null}function Zp(t){var a=t.type,s=t.memoizedProps,u=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(f){Pe(t,t.return,f)}}function pc(t,a,s){try{var u=t.stateNode;Mw(u,t.type,s,a),u[Nt]=a}catch(f){Pe(t,t.return,f)}}function Vp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ga(t.type)||t.tag===4}function gc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ga(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yc(t,a,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Pl));else if(u!==4&&(u===27&&ga(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(yc(t,a,s),t=t.sibling;t!==null;)yc(t,a,s),t=t.sibling}function Rl(t,a,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(u!==4&&(u===27&&ga(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Rl(t,a,s),t=t.sibling;t!==null;)Rl(t,a,s),t=t.sibling}function Yp(t){var a=t.stateNode,s=t.memoizedProps;try{for(var u=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);mt(a,u,s),a[gt]=t,a[Nt]=s}catch(p){Pe(t,t.return,p)}}var qn=!1,Xe=!1,bc=!1,Fp=typeof WeakSet=="function"?WeakSet:Set,lt=null;function gw(t,a){if(t=t.containerInfo,Bc=Vl,t=im(t),go(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var y=0,v=-1,T=-1,D=0,q=0,H=t,$=null;t:for(;;){for(var I;H!==s||f!==0&&H.nodeType!==3||(v=y+f),H!==p||u!==0&&H.nodeType!==3||(T=y+u),H.nodeType===3&&(y+=H.nodeValue.length),(I=H.firstChild)!==null;)$=H,H=I;for(;;){if(H===t)break t;if($===s&&++D===f&&(v=y),$===p&&++q===u&&(T=y),(I=H.nextSibling)!==null)break;H=$,$=H.parentNode}H=I}s=v===-1||T===-1?null:{start:v,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(Hc={focusedElem:t,selectionRange:s},Vl=!1,lt=a;lt!==null;)if(a=lt,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,lt=t;else for(;lt!==null;){switch(a=lt,p=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=a,f=p.memoizedProps,p=p.memoizedState,u=s.stateNode;try{var he=Fa(s.type,f,s.elementType===s.type);t=u.getSnapshotBeforeUpdate(he,p),u.__reactInternalSnapshotBeforeUpdate=t}catch(fe){Pe(s,s.return,fe)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Vc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,lt=t;break}lt=a.return}}function Xp(t,a,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:oa(t,s),u&4&&Hi(5,s);break;case 1:if(oa(t,s),u&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(y){Pe(s,s.return,y)}else{var f=Fa(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(y){Pe(s,s.return,y)}}u&64&&Hp(s),u&512&&Gi(s,s.return);break;case 3:if(oa(t,s),u&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Cm(t,a)}catch(y){Pe(s,s.return,y)}}break;case 27:a===null&&u&4&&Yp(s);case 26:case 5:oa(t,s),a===null&&u&4&&Zp(s),u&512&&Gi(s,s.return);break;case 12:oa(t,s);break;case 13:oa(t,s),u&4&&Kp(t,s),u&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Tw.bind(null,s),Hw(t,s))));break;case 22:if(u=s.memoizedState!==null||qn,!u){a=a!==null&&a.memoizedState!==null||Xe,f=qn;var p=Xe;qn=u,(Xe=a)&&!p?ca(t,s,(s.subtreeFlags&8772)!==0):oa(t,s),qn=f,Xe=p}break;case 30:break;default:oa(t,s)}}function Qp(t){var a=t.alternate;a!==null&&(t.alternate=null,Qp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Qu(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var He=null,kt=!1;function Bn(t,a,s){for(s=s.child;s!==null;)Jp(t,a,s),s=s.sibling}function Jp(t,a,s){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(fi,s)}catch{}switch(s.tag){case 26:Xe||On(s,a),Bn(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Xe||On(s,a);var u=He,f=kt;ga(s.type)&&(He=s.stateNode,kt=!1),Bn(t,a,s),Wi(s.stateNode),He=u,kt=f;break;case 5:Xe||On(s,a);case 6:if(u=He,f=kt,He=null,Bn(t,a,s),He=u,kt=f,He!==null)if(kt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(s.stateNode)}catch(p){Pe(s,a,p)}else try{He.removeChild(s.stateNode)}catch(p){Pe(s,a,p)}break;case 18:He!==null&&(kt?(t=He,Pg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),ls(t)):Pg(He,s.stateNode));break;case 4:u=He,f=kt,He=s.stateNode.containerInfo,kt=!0,Bn(t,a,s),He=u,kt=f;break;case 0:case 11:case 14:case 15:Xe||ua(2,s,a),Xe||ua(4,s,a),Bn(t,a,s);break;case 1:Xe||(On(s,a),u=s.stateNode,typeof u.componentWillUnmount=="function"&&Gp(s,a,u)),Bn(t,a,s);break;case 21:Bn(t,a,s);break;case 22:Xe=(u=Xe)||s.memoizedState!==null,Bn(t,a,s),Xe=u;break;default:Bn(t,a,s)}}function Kp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ls(t)}catch(s){Pe(a,a.return,s)}}function yw(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Fp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Fp),a;default:throw Error(r(435,t.tag))}}function _c(t,a){var s=yw(t);a.forEach(function(u){var f=xw.bind(null,t,u);s.has(u)||(s.add(u),u.then(f,f))})}function zt(t,a){var s=a.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u],p=t,y=a,v=y;e:for(;v!==null;){switch(v.tag){case 27:if(ga(v.type)){He=v.stateNode,kt=!1;break e}break;case 5:He=v.stateNode,kt=!1;break e;case 3:case 4:He=v.stateNode.containerInfo,kt=!0;break e}v=v.return}if(He===null)throw Error(r(160));Jp(p,y,f),He=null,kt=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Wp(a,t),a=a.sibling}var on=null;function Wp(t,a){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zt(a,t),qt(t),u&4&&(ua(3,t,t.return),Hi(3,t),ua(5,t,t.return));break;case 1:zt(a,t),qt(t),u&512&&(Xe||s===null||On(s,s.return)),u&64&&qn&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var f=on;if(zt(a,t),qt(t),u&512&&(Xe||s===null||On(s,s.return)),u&4){var p=s!==null?s.memoizedState:null;if(u=t.memoizedState,s===null)if(u===null)if(t.stateNode===null){e:{u=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[mi]||p[gt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),mt(p,u,s),p[gt]=t,it(p),u=p;break e;case"link":var y=Yg("link","href",f).get(u+(s.href||""));if(y){for(var v=0;v<y.length;v++)if(p=y[v],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(v,1);break t}}p=f.createElement(u),mt(p,u,s),f.head.appendChild(p);break;case"meta":if(y=Yg("meta","content",f).get(u+(s.content||""))){for(v=0;v<y.length;v++)if(p=y[v],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(v,1);break t}}p=f.createElement(u),mt(p,u,s),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[gt]=t,it(p),u=p}t.stateNode=u}else Fg(f,t.type,t.stateNode);else t.stateNode=Vg(f,u,t.memoizedProps);else p!==u?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,u===null?Fg(f,t.type,t.stateNode):Vg(f,u,t.memoizedProps)):u===null&&t.stateNode!==null&&pc(t,t.memoizedProps,s.memoizedProps)}break;case 27:zt(a,t),qt(t),u&512&&(Xe||s===null||On(s,s.return)),s!==null&&u&4&&pc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(zt(a,t),qt(t),u&512&&(Xe||s===null||On(s,s.return)),t.flags&32){f=t.stateNode;try{dr(f,"")}catch(I){Pe(t,t.return,I)}}u&4&&t.stateNode!=null&&(f=t.memoizedProps,pc(t,f,s!==null?s.memoizedProps:f)),u&1024&&(bc=!0);break;case 6:if(zt(a,t),qt(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,s=t.stateNode;try{s.nodeValue=u}catch(I){Pe(t,t.return,I)}}break;case 3:if(Hl=null,f=on,on=ql(a.containerInfo),zt(a,t),on=f,qt(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{ls(a.containerInfo)}catch(I){Pe(t,t.return,I)}bc&&(bc=!1,eg(t));break;case 4:u=on,on=ql(t.stateNode.containerInfo),zt(a,t),qt(t),on=u;break;case 12:zt(a,t),qt(t);break;case 13:zt(a,t),qt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Tc=wn()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,_c(t,u)));break;case 22:f=t.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,D=qn,q=Xe;if(qn=D||f,Xe=q||T,zt(a,t),Xe=q,qn=D,qt(t),u&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(s===null||T||qn||Xe||Xa(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){T=s=a;try{if(p=T.stateNode,f)y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{v=T.stateNode;var H=T.memoizedProps.style,$=H!=null&&H.hasOwnProperty("display")?H.display:null;v.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(I){Pe(T,T.return,I)}}}else if(a.tag===6){if(s===null){T=a;try{T.stateNode.nodeValue=f?"":T.memoizedProps}catch(I){Pe(T,T.return,I)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=t.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,_c(t,s))));break;case 19:zt(a,t),qt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,_c(t,u)));break;case 30:break;case 21:break;default:zt(a,t),qt(t)}}function qt(t){var a=t.flags;if(a&2){try{for(var s,u=t.return;u!==null;){if(Vp(u)){s=u;break}u=u.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var f=s.stateNode,p=gc(t);Rl(t,p,f);break;case 5:var y=s.stateNode;s.flags&32&&(dr(y,""),s.flags&=-33);var v=gc(t);Rl(t,v,y);break;case 3:case 4:var T=s.stateNode.containerInfo,D=gc(t);yc(t,D,T);break;default:throw Error(r(161))}}catch(q){Pe(t,t.return,q)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function eg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;eg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function oa(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xp(t,a.alternate,a),a=a.sibling}function Xa(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:ua(4,a,a.return),Xa(a);break;case 1:On(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Gp(a,a.return,s),Xa(a);break;case 27:Wi(a.stateNode);case 26:case 5:On(a,a.return),Xa(a);break;case 22:a.memoizedState===null&&Xa(a);break;case 30:Xa(a);break;default:Xa(a)}t=t.sibling}}function ca(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=t,p=a,y=p.flags;switch(p.tag){case 0:case 11:case 15:ca(f,p,s),Hi(4,p);break;case 1:if(ca(f,p,s),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(D){Pe(u,u.return,D)}if(u=p,f=u.updateQueue,f!==null){var v=u.stateNode;try{var T=f.shared.hiddenCallbacks;if(T!==null)for(f.shared.hiddenCallbacks=null,f=0;f<T.length;f++)Nm(T[f],v)}catch(D){Pe(u,u.return,D)}}s&&y&64&&Hp(p),Gi(p,p.return);break;case 27:Yp(p);case 26:case 5:ca(f,p,s),s&&u===null&&y&4&&Zp(p),Gi(p,p.return);break;case 12:ca(f,p,s);break;case 13:ca(f,p,s),s&&y&4&&Kp(f,p);break;case 22:p.memoizedState===null&&ca(f,p,s),Gi(p,p.return);break;case 30:break;default:ca(f,p,s)}a=a.sibling}}function vc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Ni(s))}function wc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ni(t))}function Tn(t,a,s,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)tg(t,a,s,u),a=a.sibling}function tg(t,a,s,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Tn(t,a,s,u),f&2048&&Hi(9,a);break;case 1:Tn(t,a,s,u);break;case 3:Tn(t,a,s,u),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ni(t)));break;case 12:if(f&2048){Tn(t,a,s,u),t=a.stateNode;try{var p=a.memoizedProps,y=p.id,v=p.onPostCommit;typeof v=="function"&&v(y,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(T){Pe(a,a.return,T)}}else Tn(t,a,s,u);break;case 13:Tn(t,a,s,u);break;case 23:break;case 22:p=a.stateNode,y=a.alternate,a.memoizedState!==null?p._visibility&2?Tn(t,a,s,u):Zi(t,a):p._visibility&2?Tn(t,a,s,u):(p._visibility|=2,jr(t,a,s,u,(a.subtreeFlags&10256)!==0)),f&2048&&vc(y,a);break;case 24:Tn(t,a,s,u),f&2048&&wc(a.alternate,a);break;default:Tn(t,a,s,u)}}function jr(t,a,s,u,f){for(f=f&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=t,y=a,v=s,T=u,D=y.flags;switch(y.tag){case 0:case 11:case 15:jr(p,y,v,T,f),Hi(8,y);break;case 23:break;case 22:var q=y.stateNode;y.memoizedState!==null?q._visibility&2?jr(p,y,v,T,f):Zi(p,y):(q._visibility|=2,jr(p,y,v,T,f)),f&&D&2048&&vc(y.alternate,y);break;case 24:jr(p,y,v,T,f),f&&D&2048&&wc(y.alternate,y);break;default:jr(p,y,v,T,f)}a=a.sibling}}function Zi(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,u=a,f=u.flags;switch(u.tag){case 22:Zi(s,u),f&2048&&vc(u.alternate,u);break;case 24:Zi(s,u),f&2048&&wc(u.alternate,u);break;default:Zi(s,u)}a=a.sibling}}var Vi=8192;function kr(t){if(t.subtreeFlags&Vi)for(t=t.child;t!==null;)ng(t),t=t.sibling}function ng(t){switch(t.tag){case 26:kr(t),t.flags&Vi&&t.memoizedState!==null&&nS(on,t.memoizedState,t.memoizedProps);break;case 5:kr(t);break;case 3:case 4:var a=on;on=ql(t.stateNode.containerInfo),kr(t),on=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Vi,Vi=16777216,kr(t),Vi=a):kr(t));break;default:kr(t)}}function ag(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Yi(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var u=a[s];lt=u,ig(u,t)}ag(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rg(t),t=t.sibling}function rg(t){switch(t.tag){case 0:case 11:case 15:Yi(t),t.flags&2048&&ua(9,t,t.return);break;case 3:Yi(t);break;case 12:Yi(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Nl(t)):Yi(t);break;default:Yi(t)}}function Nl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var u=a[s];lt=u,ig(u,t)}ag(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:ua(8,a,a.return),Nl(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Nl(a));break;default:Nl(a)}t=t.sibling}}function ig(t,a){for(;lt!==null;){var s=lt;switch(s.tag){case 0:case 11:case 15:ua(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ni(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,lt=u;else e:for(s=t;lt!==null;){u=lt;var f=u.sibling,p=u.return;if(Qp(u),u===s){lt=null;break e}if(f!==null){f.return=p,lt=f;break e}lt=p}}}var bw={getCacheForType:function(t){var a=yt(tt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},_w=typeof WeakMap=="function"?WeakMap:Map,je=0,ze=null,Se=null,Oe=0,ke=0,Bt=null,fa=!1,Lr=!1,Sc=!1,Hn=0,Ye=0,da=0,Qa=0,Ec=0,an=0,Dr=0,Fi=null,Lt=null,Oc=!1,Tc=0,Cl=1/0,jl=null,ha=null,ht=0,ma=null,$r=null,Mr=0,xc=0,Ac=null,sg=null,Xi=0,Rc=null;function Ht(){if((je&2)!==0&&Oe!==0)return Oe&-Oe;if(j.T!==null){var t=Er;return t!==0?t:$c()}return Sh()}function lg(){an===0&&(an=(Oe&536870912)===0||Re?bh():536870912);var t=nn.current;return t!==null&&(t.flags|=32),an}function Gt(t,a,s){(t===ze&&(ke===2||ke===9)||t.cancelPendingCommit!==null)&&(Ir(t,0),pa(t,Oe,an,!1)),hi(t,s),((je&2)===0||t!==ze)&&(t===ze&&((je&2)===0&&(Qa|=s),Ye===4&&pa(t,Oe,an,!1)),xn(t))}function ug(t,a,s){if((je&6)!==0)throw Error(r(327));var u=!s&&(a&124)===0&&(a&t.expiredLanes)===0||di(t,a),f=u?Sw(t,a):jc(t,a,!0),p=u;do{if(f===0){Lr&&!u&&pa(t,a,0,!1);break}else{if(s=t.current.alternate,p&&!vw(s)){f=jc(t,a,!1),p=!1;continue}if(f===2){if(p=a,t.errorRecoveryDisabledLanes&p)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){a=y;e:{var v=t;f=Fi;var T=v.current.memoizedState.isDehydrated;if(T&&(Ir(v,y).flags|=256),y=jc(v,y,!1),y!==2){if(Sc&&!T){v.errorRecoveryDisabledLanes|=p,Qa|=p,f=4;break e}p=Lt,Lt=f,p!==null&&(Lt===null?Lt=p:Lt.push.apply(Lt,p))}f=y}if(p=!1,f!==2)continue}}if(f===1){Ir(t,0),pa(t,a,0,!0);break}e:{switch(u=t,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:pa(u,a,an,!fa);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Tc+300-wn(),10<f)){if(pa(u,a,an,!fa),Bs(u,0,!0)!==0)break e;u.timeoutHandle=Ig(og.bind(null,u,s,Lt,jl,Oc,a,an,Qa,Dr,fa,p,2,-0,0),f);break e}og(u,s,Lt,jl,Oc,a,an,Qa,Dr,fa,p,0,-0,0)}}break}while(!0);xn(t)}function og(t,a,s,u,f,p,y,v,T,D,q,H,$,I){if(t.timeoutHandle=-1,H=a.subtreeFlags,(H&8192||(H&16785408)===16785408)&&(ns={stylesheets:null,count:0,unsuspend:tS},ng(a),H=aS(),H!==null)){t.cancelPendingCommit=H(gg.bind(null,t,a,p,s,u,f,y,v,T,q,1,$,I)),pa(t,p,y,!D);return}gg(t,a,p,s,u,f,y,v,T)}function vw(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var f=s[u],p=f.getSnapshot;f=f.value;try{if(!Ut(p(),f))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function pa(t,a,s,u){a&=~Ec,a&=~Qa,t.suspendedLanes|=a,t.pingedLanes&=~a,u&&(t.warmLanes|=a),u=t.expirationTimes;for(var f=a;0<f;){var p=31-It(f),y=1<<p;u[p]=-1,f&=~y}s!==0&&vh(t,s,a)}function kl(){return(je&6)===0?(Qi(0),!1):!0}function Nc(){if(Se!==null){if(ke===0)var t=Se.return;else t=Se,$n=Ga=null,Vo(t),Nr=null,zi=0,t=Se;for(;t!==null;)Bp(t.alternate,t),t=t.return;Se=null}}function Ir(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Uw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Nc(),ze=t,Se=s=kn(t.current,null),Oe=a,ke=0,Bt=null,fa=!1,Lr=di(t,a),Sc=!1,Dr=an=Ec=Qa=da=Ye=0,Lt=Fi=null,Oc=!1,(a&8)!==0&&(a|=a&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=a;0<u;){var f=31-It(u),p=1<<f;a|=t[f],u&=~p}return Hn=a,el(),s}function cg(t,a){_e=null,j.H=_l,a===ji||a===ol?(a=Am(),ke=3):a===Om?(a=Am(),ke=4):ke=a===Rp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Bt=a,Se===null&&(Ye=1,Ol(t,Kt(a,t.current)))}function fg(){var t=j.H;return j.H=_l,t===null?_l:t}function dg(){var t=j.A;return j.A=bw,t}function Cc(){Ye=4,fa||(Oe&4194048)!==Oe&&nn.current!==null||(Lr=!0),(da&134217727)===0&&(Qa&134217727)===0||ze===null||pa(ze,Oe,an,!1)}function jc(t,a,s){var u=je;je|=2;var f=fg(),p=dg();(ze!==t||Oe!==a)&&(jl=null,Ir(t,a)),a=!1;var y=Ye;e:do try{if(ke!==0&&Se!==null){var v=Se,T=Bt;switch(ke){case 8:Nc(),y=6;break e;case 3:case 2:case 9:case 6:nn.current===null&&(a=!0);var D=ke;if(ke=0,Bt=null,Ur(t,v,T,D),s&&Lr){y=0;break e}break;default:D=ke,ke=0,Bt=null,Ur(t,v,T,D)}}ww(),y=Ye;break}catch(q){cg(t,q)}while(!0);return a&&t.shellSuspendCounter++,$n=Ga=null,je=u,j.H=f,j.A=p,Se===null&&(ze=null,Oe=0,el()),y}function ww(){for(;Se!==null;)hg(Se)}function Sw(t,a){var s=je;je|=2;var u=fg(),f=dg();ze!==t||Oe!==a?(jl=null,Cl=wn()+500,Ir(t,a)):Lr=di(t,a);e:do try{if(ke!==0&&Se!==null){a=Se;var p=Bt;t:switch(ke){case 1:ke=0,Bt=null,Ur(t,a,p,1);break;case 2:case 9:if(Tm(p)){ke=0,Bt=null,mg(a);break}a=function(){ke!==2&&ke!==9||ze!==t||(ke=7),xn(t)},p.then(a,a);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Tm(p)?(ke=0,Bt=null,mg(a)):(ke=0,Bt=null,Ur(t,a,p,7));break;case 5:var y=null;switch(Se.tag){case 26:y=Se.memoizedState;case 5:case 27:var v=Se;if(!y||Xg(y)){ke=0,Bt=null;var T=v.sibling;if(T!==null)Se=T;else{var D=v.return;D!==null?(Se=D,Ll(D)):Se=null}break t}}ke=0,Bt=null,Ur(t,a,p,5);break;case 6:ke=0,Bt=null,Ur(t,a,p,6);break;case 8:Nc(),Ye=6;break e;default:throw Error(r(462))}}Ew();break}catch(q){cg(t,q)}while(!0);return $n=Ga=null,j.H=u,j.A=f,je=s,Se!==null?0:(ze=null,Oe=0,el(),Ye)}function Ew(){for(;Se!==null&&!Zv();)hg(Se)}function hg(t){var a=zp(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,a===null?Ll(t):Se=a}function mg(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=Dp(s,a,a.pendingProps,a.type,void 0,Oe);break;case 11:a=Dp(s,a,a.pendingProps,a.type.render,a.ref,Oe);break;case 5:Vo(a);default:Bp(s,a),a=Se=pm(a,Hn),a=zp(s,a,Hn)}t.memoizedProps=t.pendingProps,a===null?Ll(t):Se=a}function Ur(t,a,s,u){$n=Ga=null,Vo(a),Nr=null,zi=0;var f=a.return;try{if(dw(t,f,a,s,Oe)){Ye=1,Ol(t,Kt(s,t.current)),Se=null;return}}catch(p){if(f!==null)throw Se=f,p;Ye=1,Ol(t,Kt(s,t.current)),Se=null;return}a.flags&32768?(Re||u===1?t=!0:Lr||(Oe&536870912)!==0?t=!1:(fa=t=!0,(u===2||u===9||u===3||u===6)&&(u=nn.current,u!==null&&u.tag===13&&(u.flags|=16384))),pg(a,t)):Ll(a)}function Ll(t){var a=t;do{if((a.flags&32768)!==0){pg(a,fa);return}t=a.return;var s=mw(a.alternate,a,Hn);if(s!==null){Se=s;return}if(a=a.sibling,a!==null){Se=a;return}Se=a=t}while(a!==null);Ye===0&&(Ye=5)}function pg(t,a){do{var s=pw(t.alternate,t);if(s!==null){s.flags&=32767,Se=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Se=t;return}Se=t=s}while(t!==null);Ye=6,Se=null}function gg(t,a,s,u,f,p,y,v,T){t.cancelPendingCommit=null;do Dl();while(ht!==0);if((je&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(p=a.lanes|a.childLanes,p|=wo,t0(t,s,p,y,v,T),t===ze&&(Se=ze=null,Oe=0),$r=a,ma=t,Mr=s,xc=p,Ac=f,sg=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Aw(Ps,function(){return wg(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,f=P.p,P.p=2,y=je,je|=4;try{gw(t,a,s)}finally{je=y,P.p=f,j.T=u}}ht=1,yg(),bg(),_g()}}function yg(){if(ht===1){ht=0;var t=ma,a=$r,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=j.T,j.T=null;var u=P.p;P.p=2;var f=je;je|=4;try{Wp(a,t);var p=Hc,y=im(t.containerInfo),v=p.focusedElem,T=p.selectionRange;if(y!==v&&v&&v.ownerDocument&&rm(v.ownerDocument.documentElement,v)){if(T!==null&&go(v)){var D=T.start,q=T.end;if(q===void 0&&(q=D),"selectionStart"in v)v.selectionStart=D,v.selectionEnd=Math.min(q,v.value.length);else{var H=v.ownerDocument||document,$=H&&H.defaultView||window;if($.getSelection){var I=$.getSelection(),he=v.textContent.length,fe=Math.min(T.start,he),Me=T.end===void 0?fe:Math.min(T.end,he);!I.extend&&fe>Me&&(y=Me,Me=fe,fe=y);var N=am(v,fe),A=am(v,Me);if(N&&A&&(I.rangeCount!==1||I.anchorNode!==N.node||I.anchorOffset!==N.offset||I.focusNode!==A.node||I.focusOffset!==A.offset)){var k=H.createRange();k.setStart(N.node,N.offset),I.removeAllRanges(),fe>Me?(I.addRange(k),I.extend(A.node,A.offset)):(k.setEnd(A.node,A.offset),I.addRange(k))}}}}for(H=[],I=v;I=I.parentNode;)I.nodeType===1&&H.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<H.length;v++){var B=H[v];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}Vl=!!Bc,Hc=Bc=null}finally{je=f,P.p=u,j.T=s}}t.current=a,ht=2}}function bg(){if(ht===2){ht=0;var t=ma,a=$r,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=j.T,j.T=null;var u=P.p;P.p=2;var f=je;je|=4;try{Xp(t,a.alternate,a)}finally{je=f,P.p=u,j.T=s}}ht=3}}function _g(){if(ht===4||ht===3){ht=0,Vv();var t=ma,a=$r,s=Mr,u=sg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ht=5:(ht=0,$r=ma=null,vg(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ha=null),Fu(s),a=a.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(fi,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=j.T,f=P.p,P.p=2,j.T=null;try{for(var p=t.onRecoverableError,y=0;y<u.length;y++){var v=u[y];p(v.value,{componentStack:v.stack})}}finally{j.T=a,P.p=f}}(Mr&3)!==0&&Dl(),xn(t),f=t.pendingLanes,(s&4194090)!==0&&(f&42)!==0?t===Rc?Xi++:(Xi=0,Rc=t):Xi=0,Qi(0)}}function vg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Ni(a)))}function Dl(t){return yg(),bg(),_g(),wg()}function wg(){if(ht!==5)return!1;var t=ma,a=xc;xc=0;var s=Fu(Mr),u=j.T,f=P.p;try{P.p=32>s?32:s,j.T=null,s=Ac,Ac=null;var p=ma,y=Mr;if(ht=0,$r=ma=null,Mr=0,(je&6)!==0)throw Error(r(331));var v=je;if(je|=4,rg(p.current),tg(p,p.current,y,s),je=v,Qi(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(fi,p)}catch{}return!0}finally{P.p=f,j.T=u,vg(t,a)}}function Sg(t,a,s){a=Kt(s,a),a=sc(t.stateNode,a,2),t=ra(t,a,2),t!==null&&(hi(t,2),xn(t))}function Pe(t,a,s){if(t.tag===3)Sg(t,t,s);else for(;a!==null;){if(a.tag===3){Sg(a,t,s);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ha===null||!ha.has(u))){t=Kt(s,t),s=xp(2),u=ra(a,s,2),u!==null&&(Ap(s,u,a,t),hi(u,2),xn(u));break}}a=a.return}}function kc(t,a,s){var u=t.pingCache;if(u===null){u=t.pingCache=new _w;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(s)||(Sc=!0,f.add(s),t=Ow.bind(null,t,a,s),a.then(t,t))}function Ow(t,a,s){var u=t.pingCache;u!==null&&u.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ze===t&&(Oe&s)===s&&(Ye===4||Ye===3&&(Oe&62914560)===Oe&&300>wn()-Tc?(je&2)===0&&Ir(t,0):Ec|=s,Dr===Oe&&(Dr=0)),xn(t)}function Eg(t,a){a===0&&(a=_h()),t=_r(t,a),t!==null&&(hi(t,a),xn(t))}function Tw(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Eg(t,s)}function xw(t,a){var s=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),Eg(t,s)}function Aw(t,a){return Gu(t,a)}var $l=null,Pr=null,Lc=!1,Ml=!1,Dc=!1,Ja=0;function xn(t){t!==Pr&&t.next===null&&(Pr===null?$l=Pr=t:Pr=Pr.next=t),Ml=!0,Lc||(Lc=!0,Nw())}function Qi(t,a){if(!Dc&&Ml){Dc=!0;do for(var s=!1,u=$l;u!==null;){if(t!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var y=u.suspendedLanes,v=u.pingedLanes;p=(1<<31-It(42|t)+1)-1,p&=f&~(y&~v),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,Ag(u,p))}else p=Oe,p=Bs(u,u===ze?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||di(u,p)||(s=!0,Ag(u,p));u=u.next}while(s);Dc=!1}}function Rw(){Og()}function Og(){Ml=Lc=!1;var t=0;Ja!==0&&(Iw()&&(t=Ja),Ja=0);for(var a=wn(),s=null,u=$l;u!==null;){var f=u.next,p=Tg(u,a);p===0?(u.next=null,s===null?$l=f:s.next=f,f===null&&(Pr=s)):(s=u,(t!==0||(p&3)!==0)&&(Ml=!0)),u=f}Qi(t)}function Tg(t,a){for(var s=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var y=31-It(p),v=1<<y,T=f[y];T===-1?((v&s)===0||(v&u)!==0)&&(f[y]=e0(v,a)):T<=a&&(t.expiredLanes|=v),p&=~v}if(a=ze,s=Oe,s=Bs(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,s===0||t===a&&(ke===2||ke===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Zu(u),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||di(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(u!==null&&Zu(u),Fu(s)){case 2:case 8:s=gh;break;case 32:s=Ps;break;case 268435456:s=yh;break;default:s=Ps}return u=xg.bind(null,t),s=Gu(s,u),t.callbackPriority=a,t.callbackNode=s,a}return u!==null&&u!==null&&Zu(u),t.callbackPriority=2,t.callbackNode=null,2}function xg(t,a){if(ht!==0&&ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Dl()&&t.callbackNode!==s)return null;var u=Oe;return u=Bs(t,t===ze?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(ug(t,u,a),Tg(t,wn()),t.callbackNode!=null&&t.callbackNode===s?xg.bind(null,t):null)}function Ag(t,a){if(Dl())return null;ug(t,a,!0)}function Nw(){Pw(function(){(je&6)!==0?Gu(ph,Rw):Og()})}function $c(){return Ja===0&&(Ja=bh()),Ja}function Rg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ys(""+t)}function Ng(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function Cw(t,a,s,u,f){if(a==="submit"&&s&&s.stateNode===f){var p=Rg((f[Nt]||null).action),y=u.submitter;y&&(a=(a=y[Nt]||null)?Rg(a.formAction):y.getAttribute("formAction"),a!==null&&(p=a,y=null));var v=new Js("action","action",null,u,f);t.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ja!==0){var T=y?Ng(f,y):new FormData(f);tc(s,{pending:!0,data:T,method:f.method,action:p},null,T)}}else typeof p=="function"&&(v.preventDefault(),T=y?Ng(f,y):new FormData(f),tc(s,{pending:!0,data:T,method:f.method,action:p},p,T))},currentTarget:f}]})}}for(var Mc=0;Mc<vo.length;Mc++){var Ic=vo[Mc],jw=Ic.toLowerCase(),kw=Ic[0].toUpperCase()+Ic.slice(1);un(jw,"on"+kw)}un(um,"onAnimationEnd"),un(om,"onAnimationIteration"),un(cm,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(X0,"onTransitionRun"),un(Q0,"onTransitionStart"),un(J0,"onTransitionCancel"),un(fm,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),$a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$a("onBeforeInput",["compositionend","keypress","textInput","paste"]),$a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ji));function Cg(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],f=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var y=u.length-1;0<=y;y--){var v=u[y],T=v.instance,D=v.currentTarget;if(v=v.listener,T!==p&&f.isPropagationStopped())break e;p=v,f.currentTarget=D;try{p(f)}catch(q){El(q)}f.currentTarget=null,p=T}else for(y=0;y<u.length;y++){if(v=u[y],T=v.instance,D=v.currentTarget,v=v.listener,T!==p&&f.isPropagationStopped())break e;p=v,f.currentTarget=D;try{p(f)}catch(q){El(q)}f.currentTarget=null,p=T}}}}function Ee(t,a){var s=a[Xu];s===void 0&&(s=a[Xu]=new Set);var u=t+"__bubble";s.has(u)||(jg(a,t,2,!1),s.add(u))}function Uc(t,a,s){var u=0;a&&(u|=4),jg(s,t,u,a)}var Il="_reactListening"+Math.random().toString(36).slice(2);function Pc(t){if(!t[Il]){t[Il]=!0,Oh.forEach(function(s){s!=="selectionchange"&&(Lw.has(s)||Uc(s,!1,t),Uc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Il]||(a[Il]=!0,Uc("selectionchange",!1,a))}}function jg(t,a,s,u){switch(ty(a)){case 2:var f=sS;break;case 8:f=lS;break;default:f=Wc}s=f.bind(null,a,s,t),f=void 0,!so||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(a,s,{capture:!0,passive:f}):t.addEventListener(a,s,!0):f!==void 0?t.addEventListener(a,s,{passive:f}):t.addEventListener(a,s,!1)}function zc(t,a,s,u,f){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var v=u.stateNode.containerInfo;if(v===f)break;if(y===4)for(y=u.return;y!==null;){var T=y.tag;if((T===3||T===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;v!==null;){if(y=sr(v),y===null)return;if(T=y.tag,T===5||T===6||T===26||T===27){u=p=y;continue e}v=v.parentNode}}u=u.return}Uh(function(){var D=p,q=ro(s),H=[];e:{var $=dm.get(t);if($!==void 0){var I=Js,he=t;switch(t){case"keypress":if(Xs(s)===0)break e;case"keydown":case"keyup":I=A0;break;case"focusin":he="focus",I=co;break;case"focusout":he="blur",I=co;break;case"beforeblur":case"afterblur":I=co;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=p0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=C0;break;case um:case om:case cm:I=b0;break;case fm:I=k0;break;case"scroll":case"scrollend":I=h0;break;case"wheel":I=D0;break;case"copy":case"cut":case"paste":I=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Hh;break;case"toggle":case"beforetoggle":I=M0}var fe=(a&4)!==0,Me=!fe&&(t==="scroll"||t==="scrollend"),N=fe?$!==null?$+"Capture":null:$;fe=[];for(var A=D,k;A!==null;){var B=A;if(k=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||k===null||N===null||(B=gi(A,N),B!=null&&fe.push(Ki(A,B,k))),Me)break;A=A.return}0<fe.length&&($=new I($,he,null,s,q),H.push({event:$,listeners:fe}))}}if((a&7)===0){e:{if($=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",$&&s!==ao&&(he=s.relatedTarget||s.fromElement)&&(sr(he)||he[ir]))break e;if((I||$)&&($=q.window===q?q:($=q.ownerDocument)?$.defaultView||$.parentWindow:window,I?(he=s.relatedTarget||s.toElement,I=D,he=he?sr(he):null,he!==null&&(Me=o(he),fe=he.tag,he!==Me||fe!==5&&fe!==27&&fe!==6)&&(he=null)):(I=null,he=D),I!==he)){if(fe=qh,B="onMouseLeave",N="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(fe=Hh,B="onPointerLeave",N="onPointerEnter",A="pointer"),Me=I==null?$:pi(I),k=he==null?$:pi(he),$=new fe(B,A+"leave",I,s,q),$.target=Me,$.relatedTarget=k,B=null,sr(q)===D&&(fe=new fe(N,A+"enter",he,s,q),fe.target=k,fe.relatedTarget=Me,B=fe),Me=B,I&&he)t:{for(fe=I,N=he,A=0,k=fe;k;k=zr(k))A++;for(k=0,B=N;B;B=zr(B))k++;for(;0<A-k;)fe=zr(fe),A--;for(;0<k-A;)N=zr(N),k--;for(;A--;){if(fe===N||N!==null&&fe===N.alternate)break t;fe=zr(fe),N=zr(N)}fe=null}else fe=null;I!==null&&kg(H,$,I,fe,!1),he!==null&&Me!==null&&kg(H,Me,he,fe,!0)}}e:{if($=D?pi(D):window,I=$.nodeName&&$.nodeName.toLowerCase(),I==="select"||I==="input"&&$.type==="file")var re=Jh;else if(Xh($))if(Kh)re=V0;else{re=G0;var ve=H0}else I=$.nodeName,!I||I.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?D&&no(D.elementType)&&(re=Jh):re=Z0;if(re&&(re=re(t,D))){Qh(H,re,s,q);break e}ve&&ve(t,$,D),t==="focusout"&&D&&$.type==="number"&&D.memoizedProps.value!=null&&to($,"number",$.value)}switch(ve=D?pi(D):window,t){case"focusin":(Xh(ve)||ve.contentEditable==="true")&&(gr=ve,yo=D,Oi=null);break;case"focusout":Oi=yo=gr=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,sm(H,s,q);break;case"selectionchange":if(F0)break;case"keydown":case"keyup":sm(H,s,q)}var le;if(ho)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else pr?Yh(t,s)&&(de="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(de="onCompositionStart");de&&(Gh&&s.locale!=="ko"&&(pr||de!=="onCompositionStart"?de==="onCompositionEnd"&&pr&&(le=Ph()):(ea=q,lo="value"in ea?ea.value:ea.textContent,pr=!0)),ve=Ul(D,de),0<ve.length&&(de=new Bh(de,t,null,s,q),H.push({event:de,listeners:ve}),le?de.data=le:(le=Fh(s),le!==null&&(de.data=le)))),(le=U0?P0(t,s):z0(t,s))&&(de=Ul(D,"onBeforeInput"),0<de.length&&(ve=new Bh("onBeforeInput","beforeinput",null,s,q),H.push({event:ve,listeners:de}),ve.data=le)),Cw(H,t,D,s,q)}Cg(H,a)})}function Ki(t,a,s){return{instance:t,listener:a,currentTarget:s}}function Ul(t,a){for(var s=a+"Capture",u=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=gi(t,s),f!=null&&u.unshift(Ki(t,f,p)),f=gi(t,a),f!=null&&u.push(Ki(t,f,p))),t.tag===3)return u;t=t.return}return[]}function zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kg(t,a,s,u,f){for(var p=a._reactName,y=[];s!==null&&s!==u;){var v=s,T=v.alternate,D=v.stateNode;if(v=v.tag,T!==null&&T===u)break;v!==5&&v!==26&&v!==27||D===null||(T=D,f?(D=gi(s,p),D!=null&&y.unshift(Ki(s,D,T))):f||(D=gi(s,p),D!=null&&y.push(Ki(s,D,T)))),s=s.return}y.length!==0&&t.push({event:a,listeners:y})}var Dw=/\r\n?/g,$w=/\u0000|\uFFFD/g;function Lg(t){return(typeof t=="string"?t:""+t).replace(Dw,`
`).replace($w,"")}function Dg(t,a){return a=Lg(a),Lg(t)===a}function Pl(){}function $e(t,a,s,u,f,p){switch(s){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||dr(t,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&dr(t,""+u);break;case"className":Gs(t,"class",u);break;case"tabIndex":Gs(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(t,s,u);break;case"style":Mh(t,u,p);break;case"data":if(a!=="object"){Gs(t,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=Ys(""+u),t.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(a!=="input"&&$e(t,a,"name",f.name,f,null),$e(t,a,"formEncType",f.formEncType,f,null),$e(t,a,"formMethod",f.formMethod,f,null),$e(t,a,"formTarget",f.formTarget,f,null)):($e(t,a,"encType",f.encType,f,null),$e(t,a,"method",f.method,f,null),$e(t,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=Ys(""+u),t.setAttribute(s,u);break;case"onClick":u!=null&&(t.onclick=Pl);break;case"onScroll":u!=null&&Ee("scroll",t);break;case"onScrollEnd":u!=null&&Ee("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}s=Ys(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""+u):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":u===!0?t.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,u):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(s,u):t.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(s):t.setAttribute(s,u);break;case"popover":Ee("beforetoggle",t),Ee("toggle",t),Hs(t,"popover",u);break;case"xlinkActuate":Cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Cn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Cn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Cn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Cn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Hs(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=f0.get(s)||s,Hs(t,s,u))}}function qc(t,a,s,u,f,p){switch(s){case"style":Mh(t,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof u=="string"?dr(t,u):(typeof u=="number"||typeof u=="bigint")&&dr(t,""+u);break;case"onScroll":u!=null&&Ee("scroll",t);break;case"onScrollEnd":u!=null&&Ee("scrollend",t);break;case"onClick":u!=null&&(t.onclick=Pl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Th.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),a=s.slice(2,f?s.length-7:void 0),p=t[Nt]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(a,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,u,f);break e}s in t?t[s]=u:u===!0?t.setAttribute(s,""):Hs(t,s,u)}}}function mt(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",t),Ee("load",t);var u=!1,f=!1,p;for(p in s)if(s.hasOwnProperty(p)){var y=s[p];if(y!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:$e(t,a,p,y,s,null)}}f&&$e(t,a,"srcSet",s.srcSet,s,null),u&&$e(t,a,"src",s.src,s,null);return;case"input":Ee("invalid",t);var v=p=y=f=null,T=null,D=null;for(u in s)if(s.hasOwnProperty(u)){var q=s[u];if(q!=null)switch(u){case"name":f=q;break;case"type":y=q;break;case"checked":T=q;break;case"defaultChecked":D=q;break;case"value":p=q;break;case"defaultValue":v=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,a));break;default:$e(t,a,u,q,s,null)}}kh(t,p,v,T,D,y,f,!1),Zs(t);return;case"select":Ee("invalid",t),u=y=p=null;for(f in s)if(s.hasOwnProperty(f)&&(v=s[f],v!=null))switch(f){case"value":p=v;break;case"defaultValue":y=v;break;case"multiple":u=v;default:$e(t,a,f,v,s,null)}a=p,s=y,t.multiple=!!u,a!=null?fr(t,!!u,a,!1):s!=null&&fr(t,!!u,s,!0);return;case"textarea":Ee("invalid",t),p=f=u=null;for(y in s)if(s.hasOwnProperty(y)&&(v=s[y],v!=null))switch(y){case"value":u=v;break;case"defaultValue":f=v;break;case"children":p=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:$e(t,a,y,v,s,null)}Dh(t,u,f,p),Zs(t);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(u=s[T],u!=null))switch(T){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:$e(t,a,T,u,s,null)}return;case"dialog":Ee("beforetoggle",t),Ee("toggle",t),Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":Ee("load",t);break;case"video":case"audio":for(u=0;u<Ji.length;u++)Ee(Ji[u],t);break;case"image":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"embed":case"source":case"link":Ee("error",t),Ee("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in s)if(s.hasOwnProperty(D)&&(u=s[D],u!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:$e(t,a,D,u,s,null)}return;default:if(no(a)){for(q in s)s.hasOwnProperty(q)&&(u=s[q],u!==void 0&&qc(t,a,q,u,s,void 0));return}}for(v in s)s.hasOwnProperty(v)&&(u=s[v],u!=null&&$e(t,a,v,u,s,null))}function Mw(t,a,s,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,y=null,v=null,T=null,D=null,q=null;for(I in s){var H=s[I];if(s.hasOwnProperty(I)&&H!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":T=H;default:u.hasOwnProperty(I)||$e(t,a,I,null,u,H)}}for(var $ in u){var I=u[$];if(H=s[$],u.hasOwnProperty($)&&(I!=null||H!=null))switch($){case"type":p=I;break;case"name":f=I;break;case"checked":D=I;break;case"defaultChecked":q=I;break;case"value":y=I;break;case"defaultValue":v=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,a));break;default:I!==H&&$e(t,a,$,I,u,H)}}eo(t,y,v,T,D,q,p,f);return;case"select":I=y=v=$=null;for(p in s)if(T=s[p],s.hasOwnProperty(p)&&T!=null)switch(p){case"value":break;case"multiple":I=T;default:u.hasOwnProperty(p)||$e(t,a,p,null,u,T)}for(f in u)if(p=u[f],T=s[f],u.hasOwnProperty(f)&&(p!=null||T!=null))switch(f){case"value":$=p;break;case"defaultValue":v=p;break;case"multiple":y=p;default:p!==T&&$e(t,a,f,p,u,T)}a=v,s=y,u=I,$!=null?fr(t,!!s,$,!1):!!u!=!!s&&(a!=null?fr(t,!!s,a,!0):fr(t,!!s,s?[]:"",!1));return;case"textarea":I=$=null;for(v in s)if(f=s[v],s.hasOwnProperty(v)&&f!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:$e(t,a,v,null,u,f)}for(y in u)if(f=u[y],p=s[y],u.hasOwnProperty(y)&&(f!=null||p!=null))switch(y){case"value":$=f;break;case"defaultValue":I=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&$e(t,a,y,f,u,p)}Lh(t,$,I);return;case"option":for(var he in s)if($=s[he],s.hasOwnProperty(he)&&$!=null&&!u.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:$e(t,a,he,null,u,$)}for(T in u)if($=u[T],I=s[T],u.hasOwnProperty(T)&&$!==I&&($!=null||I!=null))switch(T){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:$e(t,a,T,$,u,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in s)$=s[fe],s.hasOwnProperty(fe)&&$!=null&&!u.hasOwnProperty(fe)&&$e(t,a,fe,null,u,$);for(D in u)if($=u[D],I=s[D],u.hasOwnProperty(D)&&$!==I&&($!=null||I!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,a));break;default:$e(t,a,D,$,u,I)}return;default:if(no(a)){for(var Me in s)$=s[Me],s.hasOwnProperty(Me)&&$!==void 0&&!u.hasOwnProperty(Me)&&qc(t,a,Me,void 0,u,$);for(q in u)$=u[q],I=s[q],!u.hasOwnProperty(q)||$===I||$===void 0&&I===void 0||qc(t,a,q,$,u,I);return}}for(var N in s)$=s[N],s.hasOwnProperty(N)&&$!=null&&!u.hasOwnProperty(N)&&$e(t,a,N,null,u,$);for(H in u)$=u[H],I=s[H],!u.hasOwnProperty(H)||$===I||$==null&&I==null||$e(t,a,H,$,u,I)}var Bc=null,Hc=null;function zl(t){return t.nodeType===9?t:t.ownerDocument}function $g(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mg(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Gc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zc=null;function Iw(){var t=window.event;return t&&t.type==="popstate"?t===Zc?!1:(Zc=t,!0):(Zc=null,!1)}var Ig=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,Ug=typeof Promise=="function"?Promise:void 0,Pw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ug<"u"?function(t){return Ug.resolve(null).then(t).catch(zw)}:Ig;function zw(t){setTimeout(function(){throw t})}function ga(t){return t==="head"}function Pg(t,a){var s=a,u=0,f=0;do{var p=s.nextSibling;if(t.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(0<u&&8>u){s=u;var y=t.ownerDocument;if(s&1&&Wi(y.documentElement),s&2&&Wi(y.body),s&4)for(s=y.head,Wi(s),y=s.firstChild;y;){var v=y.nextSibling,T=y.nodeName;y[mi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||s.removeChild(y),y=v}}if(f===0){t.removeChild(p),ls(a);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:u=s.charCodeAt(0)-48;else u=0;s=p}while(s);ls(a)}function Vc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vc(s),Qu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function qw(t,a,s,u){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[mi])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=cn(t.nextSibling),t===null)break}return null}function Bw(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=cn(t.nextSibling),t===null))return null;return t}function Yc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Hw(t,a){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")a();else{var u=function(){a(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function cn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var Fc=null;function zg(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function qg(t,a,s){switch(a=zl(s),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Wi(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Qu(t)}var rn=new Map,Bg=new Set;function ql(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gn=P.d;P.d={f:Gw,r:Zw,D:Vw,C:Yw,L:Fw,m:Xw,X:Jw,S:Qw,M:Kw};function Gw(){var t=Gn.f(),a=kl();return t||a}function Zw(t){var a=lr(t);a!==null&&a.tag===5&&a.type==="form"?up(a):Gn.r(t)}var qr=typeof document>"u"?null:document;function Hg(t,a,s){var u=qr;if(u&&typeof a=="string"&&a){var f=Jt(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),Bg.has(f)||(Bg.add(f),t={rel:t,crossOrigin:s,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),mt(a,"link",t),it(a),u.head.appendChild(a)))}}function Vw(t){Gn.D(t),Hg("dns-prefetch",t,null)}function Yw(t,a){Gn.C(t,a),Hg("preconnect",t,a)}function Fw(t,a,s){Gn.L(t,a,s);var u=qr;if(u&&t&&a){var f='link[rel="preload"][as="'+Jt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Jt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Jt(s.imageSizes)+'"]')):f+='[href="'+Jt(t)+'"]';var p=f;switch(a){case"style":p=Br(t);break;case"script":p=Hr(t)}rn.has(p)||(t=g({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),rn.set(p,t),u.querySelector(f)!==null||a==="style"&&u.querySelector(es(p))||a==="script"&&u.querySelector(ts(p))||(a=u.createElement("link"),mt(a,"link",t),it(a),u.head.appendChild(a)))}}function Xw(t,a){Gn.m(t,a);var s=qr;if(s&&t){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Jt(u)+'"][href="'+Jt(t)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Hr(t)}if(!rn.has(p)&&(t=g({rel:"modulepreload",href:t},a),rn.set(p,t),s.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ts(p)))return}u=s.createElement("link"),mt(u,"link",t),it(u),s.head.appendChild(u)}}}function Qw(t,a,s){Gn.S(t,a,s);var u=qr;if(u&&t){var f=ur(u).hoistableStyles,p=Br(t);a=a||"default";var y=f.get(p);if(!y){var v={loading:0,preload:null};if(y=u.querySelector(es(p)))v.loading=5;else{t=g({rel:"stylesheet",href:t,"data-precedence":a},s),(s=rn.get(p))&&Xc(t,s);var T=y=u.createElement("link");it(T),mt(T,"link",t),T._p=new Promise(function(D,q){T.onload=D,T.onerror=q}),T.addEventListener("load",function(){v.loading|=1}),T.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Bl(y,a,u)}y={type:"stylesheet",instance:y,count:1,state:v},f.set(p,y)}}}function Jw(t,a){Gn.X(t,a);var s=qr;if(s&&t){var u=ur(s).hoistableScripts,f=Hr(t),p=u.get(f);p||(p=s.querySelector(ts(f)),p||(t=g({src:t,async:!0},a),(a=rn.get(f))&&Qc(t,a),p=s.createElement("script"),it(p),mt(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Kw(t,a){Gn.M(t,a);var s=qr;if(s&&t){var u=ur(s).hoistableScripts,f=Hr(t),p=u.get(f);p||(p=s.querySelector(ts(f)),p||(t=g({src:t,async:!0,type:"module"},a),(a=rn.get(f))&&Qc(t,a),p=s.createElement("script"),it(p),mt(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Gg(t,a,s,u){var f=(f=ce.current)?ql(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Br(s.href),s=ur(f).hoistableStyles,u=s.get(a),u||(u={type:"style",instance:null,count:0,state:null},s.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Br(s.href);var p=ur(f).hoistableStyles,y=p.get(t);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,y),(p=f.querySelector(es(t)))&&!p._p&&(y.instance=p,y.state.loading=5),rn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},rn.set(t,s),p||Ww(f,t,s,y.state))),a&&u===null)throw Error(r(528,""));return y}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Hr(s),s=ur(f).hoistableScripts,u=s.get(a),u||(u={type:"script",instance:null,count:0,state:null},s.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Br(t){return'href="'+Jt(t)+'"'}function es(t){return'link[rel="stylesheet"]['+t+"]"}function Zg(t){return g({},t,{"data-precedence":t.precedence,precedence:null})}function Ww(t,a,s,u){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=t.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),mt(a,"link",s),it(a),t.head.appendChild(a))}function Hr(t){return'[src="'+Jt(t)+'"]'}function ts(t){return"script[async]"+t}function Vg(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var u=t.querySelector('style[data-href~="'+Jt(s.href)+'"]');if(u)return a.instance=u,it(u),u;var f=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),it(u),mt(u,"style",f),Bl(u,s.precedence,t),a.instance=u;case"stylesheet":f=Br(s.href);var p=t.querySelector(es(f));if(p)return a.state.loading|=4,a.instance=p,it(p),p;u=Zg(s),(f=rn.get(f))&&Xc(u,f),p=(t.ownerDocument||t).createElement("link"),it(p);var y=p;return y._p=new Promise(function(v,T){y.onload=v,y.onerror=T}),mt(p,"link",u),a.state.loading|=4,Bl(p,s.precedence,t),a.instance=p;case"script":return p=Hr(s.src),(f=t.querySelector(ts(p)))?(a.instance=f,it(f),f):(u=s,(f=rn.get(p))&&(u=g({},s),Qc(u,f)),t=t.ownerDocument||t,f=t.createElement("script"),it(f),mt(f,"link",u),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Bl(u,s.precedence,t));return a.instance}function Bl(t,a,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,y=0;y<u.length;y++){var v=u[y];if(v.dataset.precedence===a)p=v;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Xc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Qc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Hl=null;function Yg(t,a,s){if(Hl===null){var u=new Map,f=Hl=new Map;f.set(s,u)}else f=Hl,u=f.get(s),u||(u=new Map,f.set(s,u));if(u.has(t))return u;for(u.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var p=s[f];if(!(p[mi]||p[gt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var y=p.getAttribute(a)||"";y=t+y;var v=u.get(y);v?v.push(p):u.set(y,[p])}}return u}function Fg(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function eS(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Xg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ns=null;function tS(){}function nS(t,a,s){if(ns===null)throw Error(r(475));var u=ns;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Br(s.href),p=t.querySelector(es(f));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=Gl.bind(u),t.then(u,u)),a.state.loading|=4,a.instance=p,it(p);return}p=t.ownerDocument||t,s=Zg(s),(f=rn.get(f))&&Xc(s,f),p=p.createElement("link"),it(p);var y=p;y._p=new Promise(function(v,T){y.onload=v,y.onerror=T}),mt(p,"link",s),a.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Gl.bind(u),t.addEventListener("load",a),t.addEventListener("error",a))}}function aS(){if(ns===null)throw Error(r(475));var t=ns;return t.stylesheets&&t.count===0&&Jc(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Gl(){if(this.count--,this.count===0){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zl=null;function Jc(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zl=new Map,a.forEach(rS,t),Zl=null,Gl.call(t))}function rS(t,a){if(!(a.state.loading&4)){var s=Zl.get(t);if(s)var u=s.get(null);else{s=new Map,Zl.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var y=f[p];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),u=y)}u&&s.set(null,u)}f=a.instance,y=f.getAttribute("data-precedence"),p=s.get(y)||u,p===u&&s.set(null,f),s.set(y,f),this.count++,u=Gl.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var as={$$typeof:C,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function iS(t,a,s,u,f,p,y,v){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.hiddenUpdates=Vu(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Qg(t,a,s,u,f,p,y,v,T,D,q,H){return t=new iS(t,a,s,y,v,T,D,H),a=1,p===!0&&(a|=24),p=Pt(3,null,null,a),t.current=p,p.stateNode=t,a=ko(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:s,cache:a},Mo(p),t}function Jg(t){return t?(t=vr,t):vr}function Kg(t,a,s,u,f,p){f=Jg(f),u.context===null?u.context=f:u.pendingContext=f,u=aa(a),u.payload={element:s},p=p===void 0?null:p,p!==null&&(u.callback=p),s=ra(t,u,a),s!==null&&(Gt(s,t,a),Li(s,t,a))}function Wg(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Kc(t,a){Wg(t,a),(t=t.alternate)&&Wg(t,a)}function ey(t){if(t.tag===13){var a=_r(t,67108864);a!==null&&Gt(a,t,67108864),Kc(t,67108864)}}var Vl=!0;function sS(t,a,s,u){var f=j.T;j.T=null;var p=P.p;try{P.p=2,Wc(t,a,s,u)}finally{P.p=p,j.T=f}}function lS(t,a,s,u){var f=j.T;j.T=null;var p=P.p;try{P.p=8,Wc(t,a,s,u)}finally{P.p=p,j.T=f}}function Wc(t,a,s,u){if(Vl){var f=ef(u);if(f===null)zc(t,a,u,Yl,s),ny(t,u);else if(oS(f,t,a,s,u))u.stopPropagation();else if(ny(t,u),a&4&&-1<uS.indexOf(t)){for(;f!==null;){var p=lr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var y=Da(p.pendingLanes);if(y!==0){var v=p;for(v.pendingLanes|=2,v.entangledLanes|=2;y;){var T=1<<31-It(y);v.entanglements[1]|=T,y&=~T}xn(p),(je&6)===0&&(Cl=wn()+500,Qi(0))}}break;case 13:v=_r(p,2),v!==null&&Gt(v,p,2),kl(),Kc(p,2)}if(p=ef(u),p===null&&zc(t,a,u,Yl,s),p===f)break;f=p}f!==null&&u.stopPropagation()}else zc(t,a,u,null,s)}}function ef(t){return t=ro(t),tf(t)}var Yl=null;function tf(t){if(Yl=null,t=sr(t),t!==null){var a=o(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=c(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Yl=t,null}function ty(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yv()){case ph:return 2;case gh:return 8;case Ps:case Fv:return 32;case yh:return 268435456;default:return 32}default:return 32}}var nf=!1,ya=null,ba=null,_a=null,rs=new Map,is=new Map,va=[],uS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ny(t,a){switch(t){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":rs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(a.pointerId)}}function ss(t,a,s,u,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:s,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},a!==null&&(a=lr(a),a!==null&&ey(a)),t):(t.eventSystemFlags|=u,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function oS(t,a,s,u,f){switch(a){case"focusin":return ya=ss(ya,t,a,s,u,f),!0;case"dragenter":return ba=ss(ba,t,a,s,u,f),!0;case"mouseover":return _a=ss(_a,t,a,s,u,f),!0;case"pointerover":var p=f.pointerId;return rs.set(p,ss(rs.get(p)||null,t,a,s,u,f)),!0;case"gotpointercapture":return p=f.pointerId,is.set(p,ss(is.get(p)||null,t,a,s,u,f)),!0}return!1}function ay(t){var a=sr(t.target);if(a!==null){var s=o(a);if(s!==null){if(a=s.tag,a===13){if(a=c(s),a!==null){t.blockedOn=a,n0(t.priority,function(){if(s.tag===13){var u=Ht();u=Yu(u);var f=_r(s,u);f!==null&&Gt(f,s,u),Kc(s,u)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fl(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=ef(t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);ao=u,s.target.dispatchEvent(u),ao=null}else return a=lr(s),a!==null&&ey(a),t.blockedOn=s,!1;a.shift()}return!0}function ry(t,a,s){Fl(t)&&s.delete(a)}function cS(){nf=!1,ya!==null&&Fl(ya)&&(ya=null),ba!==null&&Fl(ba)&&(ba=null),_a!==null&&Fl(_a)&&(_a=null),rs.forEach(ry),is.forEach(ry)}function Xl(t,a){t.blockedOn===a&&(t.blockedOn=null,nf||(nf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,cS)))}var Ql=null;function iy(t){Ql!==t&&(Ql=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ql===t&&(Ql=null);for(var a=0;a<t.length;a+=3){var s=t[a],u=t[a+1],f=t[a+2];if(typeof u!="function"){if(tf(u||s)===null)continue;break}var p=lr(s);p!==null&&(t.splice(a,3),a-=3,tc(p,{pending:!0,data:f,method:s.method,action:u},u,f))}}))}function ls(t){function a(T){return Xl(T,t)}ya!==null&&Xl(ya,t),ba!==null&&Xl(ba,t),_a!==null&&Xl(_a,t),rs.forEach(a),is.forEach(a);for(var s=0;s<va.length;s++){var u=va[s];u.blockedOn===t&&(u.blockedOn=null)}for(;0<va.length&&(s=va[0],s.blockedOn===null);)ay(s),s.blockedOn===null&&va.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var f=s[u],p=s[u+1],y=f[Nt]||null;if(typeof p=="function")y||iy(s);else if(y){var v=null;if(p&&p.hasAttribute("formAction")){if(f=p,y=p[Nt]||null)v=y.formAction;else if(tf(f)!==null)continue}else v=y.action;typeof v=="function"?s[u+1]=v:(s.splice(u,3),u-=3),iy(s)}}}function af(t){this._internalRoot=t}Jl.prototype.render=af.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var s=a.current,u=Ht();Kg(s,u,t,a,null,null)},Jl.prototype.unmount=af.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Kg(t.current,2,null,t,null,null),kl(),a[ir]=null}};function Jl(t){this._internalRoot=t}Jl.prototype.unstable_scheduleHydration=function(t){if(t){var a=Sh();t={blockedOn:null,target:t,priority:a};for(var s=0;s<va.length&&a!==0&&a<va[s].priority;s++);va.splice(s,0,t),s===0&&ay(t)}};var sy=e.version;if(sy!=="19.1.0")throw Error(r(527,sy,"19.1.0"));P.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=m(a),t=t!==null?h(t):null,t=t===null?null:t.stateNode,t};var fS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{fi=Kl.inject(fS),Mt=Kl}catch{}}return os.createRoot=function(t,a){if(!l(t))throw Error(r(299));var s=!1,u="",f=Sp,p=Ep,y=Op,v=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(v=a.unstable_transitionCallbacks)),a=Qg(t,1,!1,null,null,s,u,f,p,y,v,null),t[ir]=a.current,Pc(t),new af(a)},os.hydrateRoot=function(t,a,s){if(!l(t))throw Error(r(299));var u=!1,f="",p=Sp,y=Ep,v=Op,T=null,D=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks),s.formState!==void 0&&(D=s.formState)),a=Qg(t,1,!0,a,s??null,u,f,p,y,v,T,D),a.context=Jg(null),s=a.current,u=Ht(),u=Yu(u),f=aa(u),f.callback=null,ra(s,f,u),s=u,a.current.lanes=s,hi(a,s),xn(a),t[ir]=a.current,Pc(t),new Jl(a)},os.version="19.1.0",os}var gy;function ES(){if(gy)return lf.exports;gy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lf.exports=SS(),lf.exports}var OS=ES();const TS=()=>L.jsxs("header",{className:"navbar",children:[L.jsxs("div",{className:"navbar-left",children:[L.jsx("div",{className:"logo",children:L.jsx("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{d:"M4 4H17.3334V17.3334H30.6666V30.6666H44V44H4V4Z",fill:"currentColor"})})}),L.jsx("h2",{className:"name",children:"Ch Varun"})]}),L.jsxs("div",{className:"navbar-right",children:[L.jsxs("nav",{className:"nav-links",children:[L.jsx("a",{href:"#home",children:"Home"}),L.jsx("a",{href:"#skills",children:"Skills"}),L.jsx("a",{href:"#experience",children:"Experience"}),L.jsx("a",{href:"#projects",children:"Projects"}),L.jsx("a",{href:"#contact",children:"Contact"})]}),L.jsxs("div",{className:"nav-buttons",children:[L.jsx("a",{href:"https://github.com/TheCoder30ec4",target:"_blank",rel:"noopener noreferrer",className:"btn icon-btn","aria-label":"GitHub",children:L.jsx("svg",{viewBox:"0 0 16 16",fill:"currentColor",height:"1em",width:"1em",children:L.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})}),L.jsx("a",{href:"#contact",className:"btn btn-primary",children:"Let's Talk"})]})]})]}),xS=Symbol("Let zodToJsonSchema decide on which parser to use"),AS={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},RS=i=>({...AS,...i}),NS=i=>{const e=RS(i),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,l])=>[l._def,{def:l._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function R_(i,e,n,r){r!=null&&r.errorMessages&&n&&(i.errorMessage={...i.errorMessage,[e]:n})}function Le(i,e,n,r,l){i[e]=n,R_(i,e,r,l)}var Ae;(function(i){i.assertEqual=l=>{};function e(l){}i.assertIs=e;function n(l){throw new Error}i.assertNever=n,i.arrayToEnum=l=>{const o={};for(const c of l)o[c]=c;return o},i.getValidEnumValues=l=>{const o=i.objectKeys(l).filter(d=>typeof l[l[d]]!="number"),c={};for(const d of o)c[d]=l[d];return i.objectValues(c)},i.objectValues=l=>i.objectKeys(l).map(function(o){return l[o]}),i.objectKeys=typeof Object.keys=="function"?l=>Object.keys(l):l=>{const o=[];for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&o.push(c);return o},i.find=(l,o)=>{for(const c of l)if(o(c))return c},i.isInteger=typeof Number.isInteger=="function"?l=>Number.isInteger(l):l=>typeof l=="number"&&Number.isFinite(l)&&Math.floor(l)===l;function r(l,o=" | "){return l.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}i.joinValues=r,i.jsonStringifyReplacer=(l,o)=>typeof o=="bigint"?o.toString():o})(Ae||(Ae={}));var yy;(function(i){i.mergeShapes=(e,n)=>({...e,...n})})(yy||(yy={}));const ie=Ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ta=i=>{switch(typeof i){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return Number.isNaN(i)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(i)?ie.array:i===null?ie.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ie.promise:typeof Map<"u"&&i instanceof Map?ie.map:typeof Set<"u"&&i instanceof Set?ie.set:typeof Date<"u"&&i instanceof Date?ie.date:ie.object;default:return ie.unknown}},X=Ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Jn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},l=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(l);else if(c.code==="invalid_return_type")l(c.returnTypeError);else if(c.code==="invalid_arguments")l(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let d=r,m=0;for(;m<c.path.length;){const h=c.path[m];m===c.path.length-1?(d[h]=d[h]||{_errors:[]},d[h]._errors.push(n(c))):d[h]=d[h]||{_errors:[]},d=d[h],m++}}};return l(this),r}static assert(e){if(!(e instanceof Jn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const l of this.issues)l.path.length>0?(n[l.path[0]]=n[l.path[0]]||[],n[l.path[0]].push(e(l))):r.push(e(l));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Jn.create=i=>new Jn(i);const Ad=(i,e)=>{let n;switch(i.code){case X.invalid_type:i.received===ie.undefined?n="Required":n=`Expected ${i.expected}, received ${i.received}`;break;case X.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(i.expected,Ae.jsonStringifyReplacer)}`;break;case X.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ae.joinValues(i.keys,", ")}`;break;case X.invalid_union:n="Invalid input";break;case X.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ae.joinValues(i.options)}`;break;case X.invalid_enum_value:n=`Invalid enum value. Expected ${Ae.joinValues(i.options)}, received '${i.received}'`;break;case X.invalid_arguments:n="Invalid function arguments";break;case X.invalid_return_type:n="Invalid function return type";break;case X.invalid_date:n="Invalid date";break;case X.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(n=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?n=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?n=`Invalid input: must end with "${i.validation.endsWith}"`:Ae.assertNever(i.validation):i.validation!=="regex"?n=`Invalid ${i.validation}`:n="Invalid";break;case X.too_small:i.type==="array"?n=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?n=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?n=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?n=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:n="Invalid input";break;case X.too_big:i.type==="array"?n=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?n=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?n=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?n=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?n=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:n="Invalid input";break;case X.custom:n="Invalid input";break;case X.invalid_intersection_types:n="Intersection results could not be merged";break;case X.not_multiple_of:n=`Number must be a multiple of ${i.multipleOf}`;break;case X.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ae.assertNever(i)}return{message:n}};let CS=Ad;function jS(){return CS}const kS=i=>{const{data:e,path:n,errorMaps:r,issueData:l}=i,o=[...n,...l.path||[]],c={...l,path:o};if(l.message!==void 0)return{...l,path:o,message:l.message};let d="";const m=r.filter(h=>!!h).slice().reverse();for(const h of m)d=h(c,{data:e,defaultError:d}).message;return{...l,path:o,message:d}};function ne(i,e){const n=jS(),r=kS({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,n,n===Ad?void 0:Ad].filter(l=>!!l)});i.common.issues.push(r)}class Yt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const l of n){if(l.status==="aborted")return me;l.status==="dirty"&&e.dirty(),r.push(l.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const l of n){const o=await l.key,c=await l.value;r.push({key:o,value:c})}return Yt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const l of n){const{key:o,value:c}=l;if(o.status==="aborted"||c.status==="aborted")return me;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||l.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const me=Object.freeze({status:"aborted"}),ms=i=>({status:"dirty",value:i}),ln=i=>({status:"valid",value:i}),by=i=>i.status==="aborted",_y=i=>i.status==="dirty",Kr=i=>i.status==="valid",fu=i=>typeof Promise<"u"&&i instanceof Promise;var se;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(se||(se={}));class Na{constructor(e,n,r,l){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=l}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vy=(i,e)=>{if(Kr(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Jn(i.common.issues);return this._error=n,this._error}}};function we(i){if(!i)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:l}=i;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:l}:{errorMap:(c,d)=>{const{message:m}=i;return c.code==="invalid_enum_value"?{message:m??d.defaultError}:typeof d.data>"u"?{message:m??r??d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:m??n??d.defaultError}},description:l}}class Te{get description(){return this._def.description}_getType(e){return Ta(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Yt,ctx:{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(fu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},l=this._parseSync({data:e,path:r.path,parent:r});return vy(r,l)}"~validate"(e){var r,l;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return Kr(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(l=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&l.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>Kr(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},l=this._parse({data:e,path:r.path,parent:r}),o=await(fu(l)?l:Promise.resolve(l));return vy(r,o)}refine(e,n){const r=l=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(l):n;return this._refinement((l,o)=>{const c=e(l),d=()=>o.addIssue({code:X.custom,...r(l)});return typeof Promise<"u"&&c instanceof Promise?c.then(m=>m?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,n){return this._refinement((r,l)=>e(r)?!0:(l.addIssue(typeof n=="function"?n(r,l):n),!1))}_refinement(e){return new ei({schema:this,typeName:Q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fn.create(this,this._def)}nullable(){return ti.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Nn.create(this)}promise(){return pu.create(this,this._def)}or(e){return hu.create([this,e],this._def)}and(e){return mu.create(this,e,this._def)}transform(e){return new ei({...we(this._def),schema:this,typeName:Q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Cd({...we(this._def),innerType:this,defaultValue:n,typeName:Q.ZodDefault})}brand(){return new tE({typeName:Q.ZodBranded,type:this,...we(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jd({...we(this._def),innerType:this,catchValue:n,typeName:Q.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Qd.create(this,e)}readonly(){return kd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LS=/^c[^\s-]{8,}$/i,DS=/^[0-9a-z]+$/,$S=/^[0-9A-HJKMNP-TV-Z]{26}$/i,MS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,IS=/^[a-z0-9_-]{21}$/i,US=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ff;const BS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,GS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ZS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,YS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,N_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FS=new RegExp(`^${N_}$`);function C_(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const n=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function XS(i){return new RegExp(`^${C_(i)}$`)}function QS(i){let e=`${N_}T${C_(i)}`;const n=[];return n.push(i.local?"Z?":"Z"),i.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function JS(i,e){return!!((e==="v4"||!e)&&BS.test(i)||(e==="v6"||!e)&&GS.test(i))}function KS(i,e){if(!US.test(i))return!1;try{const[n]=i.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),l=JSON.parse(atob(r));return!(typeof l!="object"||l===null||"typ"in l&&(l==null?void 0:l.typ)!=="JWT"||!l.alg||e&&l.alg!==e)}catch{return!1}}function WS(i,e){return!!((e==="v4"||!e)&&HS.test(i)||(e==="v6"||!e)&&ZS.test(i))}class Vn extends Te{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_type,expected:ie.string,received:o.parsedType}),me}const r=new Yt;let l;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,d=e.data.length<o.value;(c||d)&&(l=this._getOrReturnCtx(e,l),c?ne(l,{code:X.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&ne(l,{code:X.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")zS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"email",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")ff||(ff=new RegExp(qS,"u")),ff.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"emoji",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")MS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"uuid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")IS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"nanoid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")LS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"cuid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")DS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"cuid2",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")$S.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"ulid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{l=this._getOrReturnCtx(e,l),ne(l,{validation:"url",code:X.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"regex",code:X.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?QS(o).test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?FS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?XS(o).test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{code:X.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?PS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"duration",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?JS(e.data,o.version)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"ip",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?KS(e.data,o.alg)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"jwt",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?WS(e.data,o.version)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"cidr",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?VS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"base64",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?YS.test(e.data)||(l=this._getOrReturnCtx(e,l),ne(l,{validation:"base64url",code:X.invalid_string,message:o.message}),r.dirty()):Ae.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(l=>e.test(l),{validation:n,code:X.invalid_string,...se.errToObj(r)})}_addCheck(e){return new Vn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...se.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...se.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...se.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...se.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...se.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...se.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...se.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...se.errToObj(n)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new Vn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Vn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Vn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Vn.create=i=>new Vn({checks:[],typeName:Q.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...we(i)});function eE(i,e){const n=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,l=n>r?n:r,o=Number.parseInt(i.toFixed(l).replace(".","")),c=Number.parseInt(e.toFixed(l).replace(".",""));return o%c/10**l}class Ss extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_type,expected:ie.number,received:o.parsedType}),me}let r;const l=new Yt;for(const o of this._def.checks)o.kind==="int"?Ae.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:X.invalid_type,expected:"integer",received:"float",message:o.message}),l.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),l.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),l.dirty()):o.kind==="multipleOf"?eE(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.not_multiple_of,multipleOf:o.value,message:o.message}),l.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:X.not_finite,message:o.message}),l.dirty()):Ae.assertNever(o);return{status:l.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,se.toString(n))}setLimit(e,n,r,l){return new Ss({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:se.toString(l)}]})}_addCheck(e){return new Ss({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ae.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ss.create=i=>new Ss({checks:[],typeName:Q.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...we(i)});class Es extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ie.bigint)return this._getInvalidInput(e);let r;const l=new Yt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),l.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),l.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:X.not_multiple_of,multipleOf:o.value,message:o.message}),l.dirty()):Ae.assertNever(o);return{status:l.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ne(n,{code:X.invalid_type,expected:ie.bigint,received:n.parsedType}),me}gte(e,n){return this.setLimit("min",e,!0,se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,se.toString(n))}setLimit(e,n,r,l){return new Es({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:se.toString(l)}]})}_addCheck(e){return new Es({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Es.create=i=>new Es({checks:[],typeName:Q.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...we(i)});class wy extends Te{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.boolean,received:r.parsedType}),me}return ln(e.data)}}wy.create=i=>new wy({typeName:Q.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...we(i)});class du extends Te{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_type,expected:ie.date,received:o.parsedType}),me}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ne(o,{code:X.invalid_date}),me}const r=new Yt;let l;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(l=this._getOrReturnCtx(e,l),ne(l,{code:X.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Ae.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new du({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}du.create=i=>new du({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:Q.ZodDate,...we(i)});class Sy extends Te{_parse(e){if(this._getType(e)!==ie.symbol){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.symbol,received:r.parsedType}),me}return ln(e.data)}}Sy.create=i=>new Sy({typeName:Q.ZodSymbol,...we(i)});class Ey extends Te{_parse(e){if(this._getType(e)!==ie.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.undefined,received:r.parsedType}),me}return ln(e.data)}}Ey.create=i=>new Ey({typeName:Q.ZodUndefined,...we(i)});class Oy extends Te{_parse(e){if(this._getType(e)!==ie.null){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.null,received:r.parsedType}),me}return ln(e.data)}}Oy.create=i=>new Oy({typeName:Q.ZodNull,...we(i)});class Rd extends Te{constructor(){super(...arguments),this._any=!0}_parse(e){return ln(e.data)}}Rd.create=i=>new Rd({typeName:Q.ZodAny,...we(i)});class Ty extends Te{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ln(e.data)}}Ty.create=i=>new Ty({typeName:Q.ZodUnknown,...we(i)});class Ca extends Te{_parse(e){const n=this._getOrReturnCtx(e);return ne(n,{code:X.invalid_type,expected:ie.never,received:n.parsedType}),me}}Ca.create=i=>new Ca({typeName:Q.ZodNever,...we(i)});class xy extends Te{_parse(e){if(this._getType(e)!==ie.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.void,received:r.parsedType}),me}return ln(e.data)}}xy.create=i=>new xy({typeName:Q.ZodVoid,...we(i)});class Nn extends Te{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),l=this._def;if(n.parsedType!==ie.array)return ne(n,{code:X.invalid_type,expected:ie.array,received:n.parsedType}),me;if(l.exactLength!==null){const c=n.data.length>l.exactLength.value,d=n.data.length<l.exactLength.value;(c||d)&&(ne(n,{code:c?X.too_big:X.too_small,minimum:d?l.exactLength.value:void 0,maximum:c?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),r.dirty())}if(l.minLength!==null&&n.data.length<l.minLength.value&&(ne(n,{code:X.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),r.dirty()),l.maxLength!==null&&n.data.length>l.maxLength.value&&(ne(n,{code:X.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,d)=>l.type._parseAsync(new Na(n,c,n.path,d)))).then(c=>Yt.mergeArray(r,c));const o=[...n.data].map((c,d)=>l.type._parseSync(new Na(n,c,n.path,d)));return Yt.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Nn({...this._def,minLength:{value:e,message:se.toString(n)}})}max(e,n){return new Nn({...this._def,maxLength:{value:e,message:se.toString(n)}})}length(e,n){return new Nn({...this._def,exactLength:{value:e,message:se.toString(n)}})}nonempty(e){return this.min(1,e)}}Nn.create=(i,e)=>new Nn({type:i,minLength:null,maxLength:null,exactLength:null,typeName:Q.ZodArray,...we(e)});function Zr(i){if(i instanceof We){const e={};for(const n in i.shape){const r=i.shape[n];e[n]=Fn.create(Zr(r))}return new We({...i._def,shape:()=>e})}else return i instanceof Nn?new Nn({...i._def,type:Zr(i.element)}):i instanceof Fn?Fn.create(Zr(i.unwrap())):i instanceof ti?ti.create(Zr(i.unwrap())):i instanceof er?er.create(i.items.map(e=>Zr(e))):i}class We extends Te{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ae.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ie.object){const h=this._getOrReturnCtx(e);return ne(h,{code:X.invalid_type,expected:ie.object,received:h.parsedType}),me}const{status:r,ctx:l}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof Ca&&this._def.unknownKeys==="strip"))for(const h in l.data)c.includes(h)||d.push(h);const m=[];for(const h of c){const g=o[h],b=l.data[h];m.push({key:{status:"valid",value:h},value:g._parse(new Na(l,b,l.path,h)),alwaysSet:h in l.data})}if(this._def.catchall instanceof Ca){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of d)m.push({key:{status:"valid",value:g},value:{status:"valid",value:l.data[g]}});else if(h==="strict")d.length>0&&(ne(l,{code:X.unrecognized_keys,keys:d}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of d){const b=l.data[g];m.push({key:{status:"valid",value:g},value:h._parse(new Na(l,b,l.path,g)),alwaysSet:g in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of m){const b=await g.key,_=await g.value;h.push({key:b,value:_,alwaysSet:g.alwaysSet})}return h}).then(h=>Yt.mergeObjectSync(r,h)):Yt.mergeObjectSync(r,m)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new We({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var o,c;const l=((c=(o=this._def).errorMap)==null?void 0:c.call(o,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:se.errToObj(e).message??l}:{message:l}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Q.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const n={};for(const r of Ae.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new We({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ae.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new We({...this._def,shape:()=>n})}deepPartial(){return Zr(this)}partial(e){const n={};for(const r of Ae.objectKeys(this.shape)){const l=this.shape[r];e&&!e[r]?n[r]=l:n[r]=l.optional()}return new We({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ae.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Fn;)o=o._def.innerType;n[r]=o}return new We({...this._def,shape:()=>n})}keyof(){return j_(Ae.objectKeys(this.shape))}}We.create=(i,e)=>new We({shape:()=>i,unknownKeys:"strip",catchall:Ca.create(),typeName:Q.ZodObject,...we(e)});We.strictCreate=(i,e)=>new We({shape:()=>i,unknownKeys:"strict",catchall:Ca.create(),typeName:Q.ZodObject,...we(e)});We.lazycreate=(i,e)=>new We({shape:i,unknownKeys:"strip",catchall:Ca.create(),typeName:Q.ZodObject,...we(e)});class hu extends Te{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function l(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const c=o.map(d=>new Jn(d.ctx.common.issues));return ne(n,{code:X.invalid_union,unionErrors:c}),me}if(n.common.async)return Promise.all(r.map(async o=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(l);{let o;const c=[];for(const m of r){const h={...n,common:{...n.common,issues:[]},parent:null},g=m._parseSync({data:n.data,path:n.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!o&&(o={result:g,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const d=c.map(m=>new Jn(m));return ne(n,{code:X.invalid_union,unionErrors:d}),me}}get options(){return this._def.options}}hu.create=(i,e)=>new hu({options:i,typeName:Q.ZodUnion,...we(e)});function Nd(i,e){const n=Ta(i),r=Ta(e);if(i===e)return{valid:!0,data:i};if(n===ie.object&&r===ie.object){const l=Ae.objectKeys(e),o=Ae.objectKeys(i).filter(d=>l.indexOf(d)!==-1),c={...i,...e};for(const d of o){const m=Nd(i[d],e[d]);if(!m.valid)return{valid:!1};c[d]=m.data}return{valid:!0,data:c}}else if(n===ie.array&&r===ie.array){if(i.length!==e.length)return{valid:!1};const l=[];for(let o=0;o<i.length;o++){const c=i[o],d=e[o],m=Nd(c,d);if(!m.valid)return{valid:!1};l.push(m.data)}return{valid:!0,data:l}}else return n===ie.date&&r===ie.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class mu extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),l=(o,c)=>{if(by(o)||by(c))return me;const d=Nd(o.value,c.value);return d.valid?((_y(o)||_y(c))&&n.dirty(),{status:n.value,value:d.data}):(ne(r,{code:X.invalid_intersection_types}),me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>l(o,c)):l(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}mu.create=(i,e,n)=>new mu({left:i,right:e,typeName:Q.ZodIntersection,...we(n)});class er extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.array)return ne(r,{code:X.invalid_type,expected:ie.array,received:r.parsedType}),me;if(r.data.length<this._def.items.length)return ne(r,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&r.data.length>this._def.items.length&&(ne(r,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((c,d)=>{const m=this._def.items[d]||this._def.rest;return m?m._parse(new Na(r,c,r.path,d)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>Yt.mergeArray(n,c)):Yt.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new er({...this._def,rest:e})}}er.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new er({items:i,typeName:Q.ZodTuple,rest:null,...we(e)})};class Ay extends Te{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.map)return ne(r,{code:X.invalid_type,expected:ie.map,received:r.parsedType}),me;const l=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([d,m],h)=>({key:l._parse(new Na(r,d,r.path,[h,"key"])),value:o._parse(new Na(r,m,r.path,[h,"value"]))}));if(r.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const m of c){const h=await m.key,g=await m.value;if(h.status==="aborted"||g.status==="aborted")return me;(h.status==="dirty"||g.status==="dirty")&&n.dirty(),d.set(h.value,g.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const m of c){const h=m.key,g=m.value;if(h.status==="aborted"||g.status==="aborted")return me;(h.status==="dirty"||g.status==="dirty")&&n.dirty(),d.set(h.value,g.value)}return{status:n.value,value:d}}}}Ay.create=(i,e,n)=>new Ay({valueType:e,keyType:i,typeName:Q.ZodMap,...we(n)});class Os extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.set)return ne(r,{code:X.invalid_type,expected:ie.set,received:r.parsedType}),me;const l=this._def;l.minSize!==null&&r.data.size<l.minSize.value&&(ne(r,{code:X.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),n.dirty()),l.maxSize!==null&&r.data.size>l.maxSize.value&&(ne(r,{code:X.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),n.dirty());const o=this._def.valueType;function c(m){const h=new Set;for(const g of m){if(g.status==="aborted")return me;g.status==="dirty"&&n.dirty(),h.add(g.value)}return{status:n.value,value:h}}const d=[...r.data.values()].map((m,h)=>o._parse(new Na(r,m,r.path,h)));return r.common.async?Promise.all(d).then(m=>c(m)):c(d)}min(e,n){return new Os({...this._def,minSize:{value:e,message:se.toString(n)}})}max(e,n){return new Os({...this._def,maxSize:{value:e,message:se.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Os.create=(i,e)=>new Os({valueType:i,minSize:null,maxSize:null,typeName:Q.ZodSet,...we(e)});class Ry extends Te{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ry.create=(i,e)=>new Ry({getter:i,typeName:Q.ZodLazy,...we(e)});class Ny extends Te{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ne(n,{received:n.data,code:X.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ny.create=(i,e)=>new Ny({value:i,typeName:Q.ZodLiteral,...we(e)});function j_(i,e){return new Wr({values:i,typeName:Q.ZodEnum,...we(e)})}class Wr extends Te{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{expected:Ae.joinValues(r),received:n.parsedType,code:X.invalid_type}),me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ne(n,{received:n.data,code:X.invalid_enum_value,options:r}),me}return ln(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Wr.create(e,{...this._def,...n})}exclude(e,n=this._def){return Wr.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Wr.create=j_;class Cy extends Te{_parse(e){const n=Ae.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ie.string&&r.parsedType!==ie.number){const l=Ae.objectValues(n);return ne(r,{expected:Ae.joinValues(l),received:r.parsedType,code:X.invalid_type}),me}if(this._cache||(this._cache=new Set(Ae.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const l=Ae.objectValues(n);return ne(r,{received:r.data,code:X.invalid_enum_value,options:l}),me}return ln(e.data)}get enum(){return this._def.values}}Cy.create=(i,e)=>new Cy({values:i,typeName:Q.ZodNativeEnum,...we(e)});class pu extends Te{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ie.promise&&n.common.async===!1)return ne(n,{code:X.invalid_type,expected:ie.promise,received:n.parsedType}),me;const r=n.parsedType===ie.promise?n.data:Promise.resolve(n.data);return ln(r.then(l=>this._def.type.parseAsync(l,{path:n.path,errorMap:n.common.contextualErrorMap})))}}pu.create=(i,e)=>new pu({type:i,typeName:Q.ZodPromise,...we(e)});class ei extends Te{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),l=this._def.effect||null,o={addIssue:c=>{ne(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),l.type==="preprocess"){const c=l.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async d=>{if(n.value==="aborted")return me;const m=await this._def.schema._parseAsync({data:d,path:r.path,parent:r});return m.status==="aborted"?me:m.status==="dirty"||n.value==="dirty"?ms(m.value):m});{if(n.value==="aborted")return me;const d=this._def.schema._parseSync({data:c,path:r.path,parent:r});return d.status==="aborted"?me:d.status==="dirty"||n.value==="dirty"?ms(d.value):d}}if(l.type==="refinement"){const c=d=>{const m=l.refinement(d,o);if(r.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(r.common.async===!1){const d=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return d.status==="aborted"?me:(d.status==="dirty"&&n.dirty(),c(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(d=>d.status==="aborted"?me:(d.status==="dirty"&&n.dirty(),c(d.value).then(()=>({status:n.value,value:d.value}))))}if(l.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Kr(c))return me;const d=l.transform(c.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>Kr(c)?Promise.resolve(l.transform(c.value,o)).then(d=>({status:n.value,value:d})):me);Ae.assertNever(l)}}ei.create=(i,e,n)=>new ei({schema:i,typeName:Q.ZodEffects,effect:e,...we(n)});ei.createWithPreprocess=(i,e,n)=>new ei({schema:e,effect:{type:"preprocess",transform:i},typeName:Q.ZodEffects,...we(n)});class Fn extends Te{_parse(e){return this._getType(e)===ie.undefined?ln(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fn.create=(i,e)=>new Fn({innerType:i,typeName:Q.ZodOptional,...we(e)});class ti extends Te{_parse(e){return this._getType(e)===ie.null?ln(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ti.create=(i,e)=>new ti({innerType:i,typeName:Q.ZodNullable,...we(e)});class Cd extends Te{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ie.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Cd.create=(i,e)=>new Cd({innerType:i,typeName:Q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...we(e)});class jd extends Te{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},l=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fu(l)?l.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Jn(r.common.issues)},input:r.data})})):{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Jn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}jd.create=(i,e)=>new jd({innerType:i,typeName:Q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...we(e)});class jy extends Te{_parse(e){if(this._getType(e)!==ie.nan){const r=this._getOrReturnCtx(e);return ne(r,{code:X.invalid_type,expected:ie.nan,received:r.parsedType}),me}return{status:"valid",value:e.data}}}jy.create=i=>new jy({typeName:Q.ZodNaN,...we(i)});class tE extends Te{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Qd extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?me:o.status==="dirty"?(n.dirty(),ms(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const l=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?me:l.status==="dirty"?(n.dirty(),{status:"dirty",value:l.value}):this._def.out._parseSync({data:l.value,path:r.path,parent:r})}}static create(e,n){return new Qd({in:e,out:n,typeName:Q.ZodPipeline})}}class kd extends Te{_parse(e){const n=this._def.innerType._parse(e),r=l=>(Kr(l)&&(l.value=Object.freeze(l.value)),l);return fu(n)?n.then(l=>r(l)):r(n)}unwrap(){return this._def.innerType}}kd.create=(i,e)=>new kd({innerType:i,typeName:Q.ZodReadonly,...we(e)});var Q;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(Q||(Q={}));const Tu=Vn.create,ky=Rd.create;Ca.create;const k_=Nn.create,ks=We.create;hu.create;mu.create;er.create;Wr.create;pu.create;Fn.create;ti.create;function nE(){return{}}function aE(i,e){var r,l,o;const n={type:"array"};return(r=i.type)!=null&&r._def&&((o=(l=i.type)==null?void 0:l._def)==null?void 0:o.typeName)!==Q.ZodAny&&(n.items=Ce(i.type._def,{...e,currentPath:[...e.currentPath,"items"]})),i.minLength&&Le(n,"minItems",i.minLength.value,i.minLength.message,e),i.maxLength&&Le(n,"maxItems",i.maxLength.value,i.maxLength.message,e),i.exactLength&&(Le(n,"minItems",i.exactLength.value,i.exactLength.message,e),Le(n,"maxItems",i.exactLength.value,i.exactLength.message,e)),n}function rE(i,e){const n={type:"integer",format:"int64"};if(!i.checks)return n;for(const r of i.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Le(n,"minimum",r.value,r.message,e):Le(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Le(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Le(n,"maximum",r.value,r.message,e):Le(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Le(n,"maximum",r.value,r.message,e));break;case"multipleOf":Le(n,"multipleOf",r.value,r.message,e);break}return n}function iE(){return{type:"boolean"}}function L_(i,e){return Ce(i.type._def,e)}const sE=(i,e)=>Ce(i.innerType._def,e);function D_(i,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((l,o)=>D_(i,e,l))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return lE(i,e)}}const lE=(i,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of i.checks)switch(r.kind){case"min":Le(n,"minimum",r.value,r.message,e);break;case"max":Le(n,"maximum",r.value,r.message,e);break}return n};function uE(i,e){return{...Ce(i.innerType._def,e),default:i.defaultValue()}}function oE(i,e){return e.effectStrategy==="input"?Ce(i.schema._def,e):{}}function cE(i){return{type:"string",enum:Array.from(i.values)}}const fE=i=>"type"in i&&i.type==="string"?!1:"allOf"in i;function dE(i,e){const n=[Ce(i.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ce(i.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const l=[];return n.forEach(o=>{if(fE(o))l.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:d,...m}=o;c=m}else r=void 0;l.push(c)}}),l.length?{allOf:l,...r}:void 0}function hE(i,e){const n=typeof i.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(i.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[i.value]}:{type:n==="bigint"?"integer":n,const:i.value}}let df;const fn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(df===void 0&&(df=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),df),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function $_(i,e){const n={type:"string"};if(i.checks)for(const r of i.checks)switch(r.kind){case"min":Le(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Le(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":dn(n,"email",r.message,e);break;case"format:idn-email":dn(n,"idn-email",r.message,e);break;case"pattern:zod":Et(n,fn.email,r.message,e);break}break;case"url":dn(n,"uri",r.message,e);break;case"uuid":dn(n,"uuid",r.message,e);break;case"regex":Et(n,r.regex,r.message,e);break;case"cuid":Et(n,fn.cuid,r.message,e);break;case"cuid2":Et(n,fn.cuid2,r.message,e);break;case"startsWith":Et(n,RegExp(`^${hf(r.value,e)}`),r.message,e);break;case"endsWith":Et(n,RegExp(`${hf(r.value,e)}$`),r.message,e);break;case"datetime":dn(n,"date-time",r.message,e);break;case"date":dn(n,"date",r.message,e);break;case"time":dn(n,"time",r.message,e);break;case"duration":dn(n,"duration",r.message,e);break;case"length":Le(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Le(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Et(n,RegExp(hf(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&dn(n,"ipv4",r.message,e),r.version!=="v4"&&dn(n,"ipv6",r.message,e);break}case"base64url":Et(n,fn.base64url,r.message,e);break;case"jwt":Et(n,fn.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Et(n,fn.ipv4Cidr,r.message,e),r.version!=="v4"&&Et(n,fn.ipv6Cidr,r.message,e);break}case"emoji":Et(n,fn.emoji(),r.message,e);break;case"ulid":{Et(n,fn.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{dn(n,"binary",r.message,e);break}case"contentEncoding:base64":{Le(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Et(n,fn.base64,r.message,e);break}}break}case"nanoid":Et(n,fn.nanoid,r.message,e)}return n}function hf(i,e){return e.patternStrategy==="escape"?pE(i):i}const mE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function pE(i){let e="";for(let n=0;n<i.length;n++)mE.has(i[n])||(e+="\\"),e+=i[n];return e}function dn(i,e,n,r){var l;i.format||(l=i.anyOf)!=null&&l.some(o=>o.format)?(i.anyOf||(i.anyOf=[]),i.format&&(i.anyOf.push({format:i.format,...i.errorMessage&&r.errorMessages&&{errorMessage:{format:i.errorMessage.format}}}),delete i.format,i.errorMessage&&(delete i.errorMessage.format,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Le(i,"format",e,n,r)}function Et(i,e,n,r){var l;i.pattern||(l=i.allOf)!=null&&l.some(o=>o.pattern)?(i.allOf||(i.allOf=[]),i.pattern&&(i.allOf.push({pattern:i.pattern,...i.errorMessage&&r.errorMessages&&{errorMessage:{pattern:i.errorMessage.pattern}}}),delete i.pattern,i.errorMessage&&(delete i.errorMessage.pattern,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.allOf.push({pattern:Ly(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Le(i,"pattern",Ly(e,r),n,r)}function Ly(i,e){var m;if(!e.applyRegexFlags||!i.flags)return i.source;const n={i:i.flags.includes("i"),m:i.flags.includes("m"),s:i.flags.includes("s")},r=n.i?i.source.toLowerCase():i.source;let l="",o=!1,c=!1,d=!1;for(let h=0;h<r.length;h++){if(o){l+=r[h],o=!1;continue}if(n.i){if(c){if(r[h].match(/[a-z]/)){d?(l+=r[h],l+=`${r[h-2]}-${r[h]}`.toUpperCase(),d=!1):r[h+1]==="-"&&((m=r[h+2])!=null&&m.match(/[a-z]/))?(l+=r[h],d=!0):l+=`${r[h]}${r[h].toUpperCase()}`;continue}}else if(r[h].match(/[a-z]/)){l+=`[${r[h]}${r[h].toUpperCase()}]`;continue}}if(n.m){if(r[h]==="^"){l+=`(^|(?<=[\r
]))`;continue}else if(r[h]==="$"){l+=`($|(?=[\r
]))`;continue}}if(n.s&&r[h]==="."){l+=c?`${r[h]}\r
`:`[${r[h]}\r
]`;continue}l+=r[h],r[h]==="\\"?o=!0:c&&r[h]==="]"?c=!1:!c&&r[h]==="["&&(c=!0)}try{new RegExp(l)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),i.source}return l}function M_(i,e){var r,l,o,c,d,m;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=i.keyType)==null?void 0:r._def.typeName)===Q.ZodEnum)return{type:"object",required:i.keyType._def.values,properties:i.keyType._def.values.reduce((h,g)=>({...h,[g]:Ce(i.valueType._def,{...e,currentPath:[...e.currentPath,"properties",g]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:Ce(i.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((l=i.keyType)==null?void 0:l._def.typeName)===Q.ZodString&&((o=i.keyType._def.checks)!=null&&o.length)){const{type:h,...g}=$_(i.keyType._def,e);return{...n,propertyNames:g}}else{if(((c=i.keyType)==null?void 0:c._def.typeName)===Q.ZodEnum)return{...n,propertyNames:{enum:i.keyType._def.values}};if(((d=i.keyType)==null?void 0:d._def.typeName)===Q.ZodBranded&&i.keyType._def.type._def.typeName===Q.ZodString&&((m=i.keyType._def.type._def.checks)!=null&&m.length)){const{type:h,...g}=L_(i.keyType._def,e);return{...n,propertyNames:g}}}return n}function gE(i,e){if(e.mapStrategy==="record")return M_(i,e);const n=Ce(i.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Ce(i.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function yE(i){const e=i.values,r=Object.keys(i.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),l=Array.from(new Set(r.map(o=>typeof o)));return{type:l.length===1?l[0]==="string"?"string":"number":["string","number"],enum:r}}function bE(){return{not:{}}}function _E(i){return i.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const gu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function vE(i,e){if(e.target==="openApi3")return Dy(i,e);const n=i.options instanceof Map?Array.from(i.options.values()):i.options;if(n.every(r=>r._def.typeName in gu&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((l,o)=>{const c=gu[o._def.typeName];return c&&!l.includes(c)?[...l,c]:l},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((l,o)=>{const c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...l,c];case"bigint":return[...l,"integer"];case"object":if(o._def.value===null)return[...l,"null"];case"symbol":case"undefined":case"function":default:return l}},[]);if(r.length===n.length){const l=r.filter((o,c,d)=>d.indexOf(o)===c);return{type:l.length>1?l:l[0],enum:n.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,l)=>[...r,...l._def.values.filter(o=>!r.includes(o))],[])};return Dy(i,e)}const Dy=(i,e)=>{const n=(i.options instanceof Map?Array.from(i.options.values()):i.options).map((r,l)=>Ce(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${l}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function wE(i,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(i.innerType._def.typeName)&&(!i.innerType._def.checks||!i.innerType._def.checks.length))return e.target==="openApi3"?{type:gu[i.innerType._def.typeName],nullable:!0}:{type:[gu[i.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Ce(i.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Ce(i.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function SE(i,e){const n={type:"number"};if(!i.checks)return n;for(const r of i.checks)switch(r.kind){case"int":n.type="integer",R_(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Le(n,"minimum",r.value,r.message,e):Le(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Le(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Le(n,"maximum",r.value,r.message,e):Le(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Le(n,"maximum",r.value,r.message,e));break;case"multipleOf":Le(n,"multipleOf",r.value,r.message,e);break}return n}function EE(i,e){const n=e.target==="openAi",r={type:"object",properties:{}},l=[],o=i.shape();for(const d in o){let m=o[d];if(m===void 0||m._def===void 0)continue;let h=TE(m);h&&n&&(m instanceof Fn&&(m=m._def.innerType),m.isNullable()||(m=m.nullable()),h=!1);const g=Ce(m._def,{...e,currentPath:[...e.currentPath,"properties",d],propertyPath:[...e.currentPath,"properties",d]});g!==void 0&&(r.properties[d]=g,h||l.push(d))}l.length&&(r.required=l);const c=OE(i,e);return c!==void 0&&(r.additionalProperties=c),r}function OE(i,e){if(i.catchall._def.typeName!=="ZodNever")return Ce(i.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(i.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function TE(i){try{return i.isOptional()}catch{return!0}}const xE=(i,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Ce(i.innerType._def,e);const n=Ce(i.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},AE=(i,e)=>{if(e.pipeStrategy==="input")return Ce(i.in._def,e);if(e.pipeStrategy==="output")return Ce(i.out._def,e);const n=Ce(i.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Ce(i.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(l=>l!==void 0)}};function RE(i,e){return Ce(i.type._def,e)}function NE(i,e){const r={type:"array",uniqueItems:!0,items:Ce(i.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return i.minSize&&Le(r,"minItems",i.minSize.value,i.minSize.message,e),i.maxSize&&Le(r,"maxItems",i.maxSize.value,i.maxSize.message,e),r}function CE(i,e){return i.rest?{type:"array",minItems:i.items.length,items:i.items.map((n,r)=>Ce(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Ce(i.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:i.items.length,maxItems:i.items.length,items:i.items.map((n,r)=>Ce(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function jE(){return{not:{}}}function kE(){return{}}const LE=(i,e)=>Ce(i.innerType._def,e),DE=(i,e,n)=>{switch(e){case Q.ZodString:return $_(i,n);case Q.ZodNumber:return SE(i,n);case Q.ZodObject:return EE(i,n);case Q.ZodBigInt:return rE(i,n);case Q.ZodBoolean:return iE();case Q.ZodDate:return D_(i,n);case Q.ZodUndefined:return jE();case Q.ZodNull:return _E(n);case Q.ZodArray:return aE(i,n);case Q.ZodUnion:case Q.ZodDiscriminatedUnion:return vE(i,n);case Q.ZodIntersection:return dE(i,n);case Q.ZodTuple:return CE(i,n);case Q.ZodRecord:return M_(i,n);case Q.ZodLiteral:return hE(i,n);case Q.ZodEnum:return cE(i);case Q.ZodNativeEnum:return yE(i);case Q.ZodNullable:return wE(i,n);case Q.ZodOptional:return xE(i,n);case Q.ZodMap:return gE(i,n);case Q.ZodSet:return NE(i,n);case Q.ZodLazy:return()=>i.getter()._def;case Q.ZodPromise:return RE(i,n);case Q.ZodNaN:case Q.ZodNever:return bE();case Q.ZodEffects:return oE(i,n);case Q.ZodAny:return nE();case Q.ZodUnknown:return kE();case Q.ZodDefault:return uE(i,n);case Q.ZodBranded:return L_(i,n);case Q.ZodReadonly:return LE(i,n);case Q.ZodCatch:return sE(i,n);case Q.ZodPipeline:return AE(i,n);case Q.ZodFunction:case Q.ZodVoid:case Q.ZodSymbol:return;default:return(r=>{})()}};function Ce(i,e,n=!1){var d;const r=e.seen.get(i);if(e.override){const m=(d=e.override)==null?void 0:d.call(e,i,e,r,n);if(m!==xS)return m}if(r&&!n){const m=$E(r,e);if(m!==void 0)return m}const l={def:i,path:e.currentPath,jsonSchema:void 0};e.seen.set(i,l);const o=DE(i,i.typeName,e),c=typeof o=="function"?Ce(o(),e):o;if(c&&IE(i,e,c),e.postProcess){const m=e.postProcess(c,i,e);return l.jsonSchema=c,m}return l.jsonSchema=c,c}const $E=(i,e)=>{switch(e.$refStrategy){case"root":return{$ref:i.path.join("/")};case"relative":return{$ref:ME(e.currentPath,i.path)};case"none":case"seen":return i.path.length<e.currentPath.length&&i.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},ME=(i,e)=>{let n=0;for(;n<i.length&&n<e.length&&i[n]===e[n];n++);return[(i.length-n).toString(),...e.slice(n)].join("/")},IE=(i,e,n)=>(i.description&&(n.description=i.description,e.markdownDescription&&(n.markdownDescription=i.description)),n),Ls=(i,e)=>{const n=NS(e),r=void 0,l=e==null?void 0:e.name,o=Ce(i._def,n,!1)??{},c=l===void 0?r?{...o,[n.definitionPath]:r}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,l].join("/"),[n.definitionPath]:{...r,[l]:o}};return n.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c};function $y(i,e=Jd){i=i.trim();const n=i.indexOf("```");if(n===-1)return e(i);let r=i.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const l=r.indexOf("```");let o=r;return l!==-1&&(o=r.substring(0,l)),e(o.trim())}function Jd(i){if(typeof i>"u")return null;try{return JSON.parse(i)}catch{}let e="";const n=[];let r=!1,l=!1;for(let o of i){if(r)o==='"'&&!l?r=!1:o===`
`&&!l?o="\\n":o==="\\"?l=!l:l=!1;else if(o==='"')r=!0,l=!1;else if(o==="{")n.push("}");else if(o==="[")n.push("]");else if(o==="}"||o==="]")if(n&&n[n.length-1]===o)n.pop();else return null;e+=o}r&&(e+='"');for(let o=n.length-1;o>=0;o-=1)e+=n[o];try{return JSON.parse(e)}catch{return null}}var mf,My;function UE(){return My||(My=1,mf=function(i,e){if(typeof i!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,i.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),mf}var PE=UE();const zE=js(PE);var Wl={exports:{}},Iy;function qE(){if(Iy)return Wl.exports;Iy=1;const i=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,l=/[_.\- ]+/,o=new RegExp("^"+l.source),c=new RegExp(l.source+r.source,"gu"),d=new RegExp("\\d+"+r.source,"gu"),m=(_,w,S)=>{let E=!1,x=!1,R=!1;for(let M=0;M<_.length;M++){const C=_[M];E&&i.test(C)?(_=_.slice(0,M)+"-"+_.slice(M),E=!1,R=x,x=!0,M++):x&&R&&e.test(C)?(_=_.slice(0,M-1)+"-"+_.slice(M-1),R=x,x=!1,E=!0):(E=w(C)===C&&S(C)!==C,R=x,x=S(C)===C&&w(C)!==C)}return _},h=(_,w)=>(n.lastIndex=0,_.replace(n,S=>w(S))),g=(_,w)=>(c.lastIndex=0,d.lastIndex=0,_.replace(c,(S,E)=>w(E)).replace(d,S=>w(S))),b=(_,w)=>{if(!(typeof _=="string"||Array.isArray(_)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(_)?_=_.map(R=>R.trim()).filter(R=>R.length).join("-"):_=_.trim(),_.length===0)return"";const S=w.locale===!1?R=>R.toLowerCase():R=>R.toLocaleLowerCase(w.locale),E=w.locale===!1?R=>R.toUpperCase():R=>R.toLocaleUpperCase(w.locale);return _.length===1?w.pascalCase?E(_):S(_):(_!==S(_)&&(_=m(_,S,E)),_=_.replace(o,""),w.preserveConsecutiveUppercase?_=h(_,S):_=S(_),w.pascalCase&&(_=E(_.charAt(0))+_.slice(1)),g(_,E))};return Wl.exports=b,Wl.exports.default=b,Wl.exports}qE();function BE(i,e){return(e==null?void 0:e[i])||zE(i)}function HE(i,e,n){const r={};for(const l in i)Object.hasOwn(i,l)&&(r[e(l,n)]=i[l]);return r}function Uy(i){return Array.isArray(i)?[...i]:{...i}}function GE(i,e){const n=Uy(i);for(const[r,l]of Object.entries(e)){const[o,...c]=r.split(".").reverse();let d=n;for(const m of c.reverse()){if(d[m]===void 0)break;d[m]=Uy(d[m]),d=d[m]}d[o]!==void 0&&(d[o]={lc:1,type:"secret",id:[l]})}return n}function I_(i){const e=Object.getPrototypeOf(i);return typeof i.lc_name=="function"&&(typeof e.lc_name!="function"||i.lc_name()!==e.lc_name())?i.lc_name():i.name}class tr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,I_(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var l;return(l=this.lc_serializable_keys)==null?void 0:l.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof tr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((l,o)=>(l[o]=o in this?this[o]:this.lc_kwargs[o],l),{});for(let l=Object.getPrototypeOf(this);l;l=Object.getPrototypeOf(l))Object.assign(e,Reflect.get(l,"lc_aliases",this)),Object.assign(n,Reflect.get(l,"lc_secrets",this)),Object.assign(r,Reflect.get(l,"lc_attributes",this));return Object.keys(n).forEach(l=>{let o=this,c=r;const[d,...m]=l.split(".").reverse();for(const h of m.reverse()){if(!(h in o)||o[h]===void 0)return;(!(h in c)||c[h]===void 0)&&(typeof o[h]=="object"&&o[h]!=null?c[h]={}:Array.isArray(o[h])&&(c[h]=[])),o=o[h],c=c[h]}d in o&&o[d]!==void 0&&(c[d]=c[d]||o[d])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:HE(Object.keys(n).length?GE(r,n):r,BE,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Ts(i){return typeof i=="object"&&i!==null&&"type"in i&&typeof i.type=="string"&&"source_type"in i&&(i.source_type==="url"||i.source_type==="base64"||i.source_type==="text"||i.source_type==="id")}function ZE(i){return Ts(i)&&i.source_type==="url"&&"url"in i&&typeof i.url=="string"}function VE(i){return Ts(i)&&i.source_type==="base64"&&"data"in i&&typeof i.data=="string"}function YE(i){if(Ts(i)){if(i.source_type==="url")return{type:"image_url",image_url:{url:i.url}};if(i.source_type==="base64"){if(!i.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${i.mime_type};base64,${i.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function ii(i,e){return typeof i=="string"?i===""?e:typeof e=="string"?i+e:Array.isArray(e)&&e.some(n=>Ts(n))?[{type:"text",source_type:"text",text:i},...e]:[{type:"text",text:i},...e]:Array.isArray(e)?xu(i,e)??[...i,...e]:e===""?i:Array.isArray(i)&&i.some(n=>Ts(n))?[...i,{type:"file",source_type:"text",text:e}]:[...i,{type:"text",text:e}]}function FE(i,e){return i==="error"||e==="error"?"error":"success"}function XE(i,e){function n(r,l){if(typeof r!="object"||r===null||r===void 0)return r;if(l>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(c=>n(c,l+1));const o={};for(const c of Object.keys(r))o[c]=n(r[c],l+1);return o}return JSON.stringify(n(i,0),null,2)}class si extends tr{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=XE(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function xt(i,e){const n={...i};for(const[r,l]of Object.entries(e))if(n[r]==null)n[r]=l;else{if(l==null)continue;if(typeof n[r]!=typeof l||Array.isArray(n[r])!==Array.isArray(l))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=l}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=xt(n[r],l);else if(Array.isArray(n[r]))n[r]=xu(n[r],l);else{if(n[r]===l)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function xu(i,e){if(!(i===void 0&&e===void 0)){if(i===void 0||e===void 0)return i||e;{const n=[...i];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const l=n.findIndex(o=>o.index===r.index);l!==-1?n[l]=xt(n[l],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function QE(i,e){if(!i&&!e)throw new Error("Cannot merge two undefined objects.");if(!i||!e)return i||e;if(typeof i!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof i}
Right ${typeof e}`);if(typeof i=="string"&&typeof e=="string")return i+e;if(Array.isArray(i)&&Array.isArray(e))return xu(i,e);if(typeof i=="object"&&typeof e=="object")return xt(i,e);if(i===e)return i;throw new Error(`Can not merge objects of different types.
Left ${i}
Right ${e}`)}class li extends si{}function JE(i){return typeof i.role=="string"}function Au(i){return typeof(i==null?void 0:i._getType)=="function"}function KE(i){return Au(i)&&typeof i.concat=="function"}class WE extends si{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class Kd extends li{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new Kd({content:ii(this.content,e.content),additional_kwargs:xt(this.additional_kwargs,e.additional_kwargs),response_metadata:xt(this.response_metadata,e.response_metadata),artifact:QE(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:FE(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function e1(i){const e=[],n=[];for(const r of i)if(r.function){const l=r.function.name;try{const o=JSON.parse(r.function.arguments),c={name:l||"",args:o||{},id:r.id};e.push(c)}catch{n.push({name:l,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class Ld extends si{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var l;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const o=(l=r.additional_kwargs)==null?void 0:l.tool_calls,c=r.tool_calls;o!=null&&o.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&c===void 0){const[d,m]=e1(o);r.tool_calls=d??[],r.invalid_tool_calls=m??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function Wd(i){return i._getType()==="ai"}function Py(i){return i._getType()==="ai"}class ar extends li{constructor(e){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],l=[];for(const o of e.tool_call_chunks){let c={};try{if(c=Jd(o.args||"{}"),c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:o.name??"",args:c,id:o.id,type:"tool_call"})}catch{l.push({name:o.name,args:o.args,id:o.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:r,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,l,o,c,d,m,h,g,b,_,w,S,E,x,R,M,C,Z,z,K,ae,W,Be,wt,rt,Ge,Rt,ee,F,j,P,V,J,O,U,G,Y,te,oe,ce;const n={content:ii(this.content,e.content),additional_kwargs:xt(this.additional_kwargs,e.additional_kwargs),response_metadata:xt(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Qe=xu(this.tool_call_chunks,e.tool_call_chunks);Qe!==void 0&&Qe.length>0&&(n.tool_call_chunks=Qe)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Qe={...(((l=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:l.audio)!==void 0||((c=(o=e.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:c.audio)!==void 0)&&{audio:(((m=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:m.audio)??0)+(((g=(h=e.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:g.audio)??0)},...(((_=(b=this.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:_.cache_read)!==void 0||((S=(w=e.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:S.cache_read)!==void 0)&&{cache_read:(((x=(E=this.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:x.cache_read)??0)+(((M=(R=e.usage_metadata)==null?void 0:R.input_token_details)==null?void 0:M.cache_read)??0)},...(((Z=(C=this.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:Z.cache_creation)!==void 0||((K=(z=e.usage_metadata)==null?void 0:z.input_token_details)==null?void 0:K.cache_creation)!==void 0)&&{cache_creation:(((W=(ae=this.usage_metadata)==null?void 0:ae.input_token_details)==null?void 0:W.cache_creation)??0)+(((wt=(Be=e.usage_metadata)==null?void 0:Be.input_token_details)==null?void 0:wt.cache_creation)??0)}},Ue={...(((Ge=(rt=this.usage_metadata)==null?void 0:rt.output_token_details)==null?void 0:Ge.audio)!==void 0||((ee=(Rt=e.usage_metadata)==null?void 0:Rt.output_token_details)==null?void 0:ee.audio)!==void 0)&&{audio:(((j=(F=this.usage_metadata)==null?void 0:F.output_token_details)==null?void 0:j.audio)??0)+(((V=(P=e.usage_metadata)==null?void 0:P.output_token_details)==null?void 0:V.audio)??0)},...(((O=(J=this.usage_metadata)==null?void 0:J.output_token_details)==null?void 0:O.reasoning)!==void 0||((G=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:G.reasoning)!==void 0)&&{reasoning:(((te=(Y=this.usage_metadata)==null?void 0:Y.output_token_details)==null?void 0:te.reasoning)??0)+(((ce=(oe=e.usage_metadata)==null?void 0:oe.output_token_details)==null?void 0:ce.reasoning)??0)}},Xt=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},La=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},rr={input_tokens:Xt.input_tokens+La.input_tokens,output_tokens:Xt.output_tokens+La.output_tokens,total_tokens:Xt.total_tokens+La.total_tokens,...Object.keys(Qe).length>0&&{input_token_details:Qe},...Object.keys(Ue).length>0&&{output_token_details:Ue}};n.usage_metadata=rr}return new ar(n)}}class Ru extends si{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Ru}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Nu extends li{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Nu({content:ii(this.content,e.content),additional_kwargs:xt(this.additional_kwargs,e.additional_kwargs),response_metadata:xt(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Cu extends li{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Cu({content:ii(this.content,e.content),additional_kwargs:xt(this.additional_kwargs,e.additional_kwargs),response_metadata:xt(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class ju extends si{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,n){super(e,n)}}class ku extends li{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,n){super(e,n)}concat(e){return new ku({content:ii(this.content,e.content),additional_kwargs:xt(this.additional_kwargs,e.additional_kwargs),response_metadata:xt(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class zy extends si{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,n){super(e,n)}}class xs extends li{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,n){super(e,n)}concat(e){return new xs({content:ii(this.content,e.content),additional_kwargs:xt(this.additional_kwargs,e.additional_kwargs),response_metadata:xt(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function U_(i,e){return i.lc_error_code=e,i.message=`${i.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,i}function P_(i){return!!(i&&typeof i=="object"&&"type"in i&&i.type==="tool_call")}class t1 extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function n1(i){return P_(i)?i:typeof i.id=="string"&&i.type==="function"&&typeof i.function=="object"&&i.function!==null&&"arguments"in i.function&&typeof i.function.arguments=="string"&&"name"in i.function&&typeof i.function.name=="string"?{id:i.id,args:JSON.parse(i.function.arguments),name:i.function.name,type:"tool_call"}:i}function a1(i){return typeof i=="object"&&i!=null&&i.lc===1&&Array.isArray(i.id)&&i.kwargs!=null&&typeof i.kwargs=="object"}function pf(i){let e,n;if(a1(i)){const r=i.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=i.kwargs}else{const{type:r,...l}=i;e=r,n=l}if(e==="human"||e==="user")return new ju(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...l}=n;if(!Array.isArray(r))return new Ld(n);const o=r.map(n1);return new Ld({...l,tool_calls:o})}else{if(e==="system")return new zy(n);if(e==="developer")return new zy({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new WE({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw U_(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(i,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function ps(i){if(typeof i=="string")return new ju(i);if(Au(i))return i;if(Array.isArray(i)){const[e,n]=i;return pf({type:e,content:n})}else if(JE(i)){const{role:e,...n}=i;return pf({...n,type:e})}else return pf(i)}function z_(i,e="Human",n="AI"){const r=[];for(const l of i){let o;if(l._getType()==="human")o=e;else if(l._getType()==="ai")o=n;else if(l._getType()==="system")o="System";else if(l._getType()==="function")o="Function";else if(l._getType()==="tool")o="Tool";else if(l._getType()==="generic")o=l.role;else throw new Error(`Got unsupported message type: ${l._getType()}`);const c=l.name?`${l.name}, `:"",d=typeof l.content=="string"?l.content:JSON.stringify(l.content,null,2);r.push(`${o}: ${c}${d}`)}return r.join(`
`)}function r1(i){var n;const e=i._getType();if(e==="human")return new ku({...i});if(e==="ai"){let r={...i};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(l=>({...l,type:"tool_call_chunk",index:void 0,args:JSON.stringify(l.args)}))}),new ar({...r})}else{if(e==="system")return new xs({...i});if(e==="function")return new Cu({...i});if(Ru.isInstance(i))return new Nu({...i});throw new Error("Unknown message type.")}}var cs={exports:{}},gf={},yf,qy;function i1(){if(qy)return yf;qy=1;function i(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return yf=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var l=this;return this._timer=setTimeout(function(){l._attempts++,l._operationTimeoutCb&&(l._timeout=setTimeout(function(){l._operationTimeoutCb(l._attempts)},l._operationTimeout),l._options.unref&&l._timeout.unref()),l._fn(l._attempts)},r),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},i.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},i.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,r=0,l=0;l<this._errors.length;l++){var o=this._errors[l],c=o.message,d=(e[c]||0)+1;e[c]=d,d>=r&&(n=o,r=d)}return n},yf}var By;function s1(){return By||(By=1,function(i){var e=i1();i.operation=function(n){var r=i.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},i.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var l in n)r[l]=n[l];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],c=0;c<r.retries;c++)o.push(this.createTimeout(c,r));return n&&n.forever&&!o.length&&o.push(this.createTimeout(c,r)),o.sort(function(d,m){return d-m}),o},i.createTimeout=function(n,r){var l=r.randomize?Math.random()+1:1,o=Math.round(l*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return o=Math.min(o,r.maxTimeout),o},i.wrap=function(n,r,l){if(r instanceof Array&&(l=r,r=null),!l){l=[];for(var o in n)typeof n[o]=="function"&&l.push(o)}for(var c=0;c<l.length;c++){var d=l[c],m=n[d];n[d]=(function(g){var b=i.operation(r),_=Array.prototype.slice.call(arguments,1),w=_.pop();_.push(function(S){b.retry(S)||(S&&(arguments[0]=b.mainError()),w.apply(this,arguments))}),b.attempt(function(){g.apply(n,_)})}).bind(n,m),n[d].options=r}}}(gf)),gf}var bf,Hy;function l1(){return Hy||(Hy=1,bf=s1()),bf}var Gy;function u1(){if(Gy)return cs.exports;Gy=1;const i=l1(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const r=(c,d,m)=>{const h=m.retries-(d-1);return c.attemptNumber=d,c.retriesLeft=h,c},l=c=>e.includes(c),o=(c,d)=>new Promise((m,h)=>{d={onFailedAttempt:()=>{},retries:10,...d};const g=i.operation(d);g.attempt(async b=>{try{m(await c(b))}catch(_){if(!(_ instanceof Error)){h(new TypeError(`Non-error was thrown: "${_}". You should only throw errors.`));return}if(_ instanceof n)g.stop(),h(_.originalError);else if(_ instanceof TypeError&&!l(_.message))g.stop(),h(_);else{r(_,b,d);try{await d.onFailedAttempt(_)}catch(w){h(w);return}g.retry(_)||h(g.mainError())}}})});return cs.exports=o,cs.exports.default=o,cs.exports.AbortError=n,cs.exports}var o1=u1();const yu=js(o1),c1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function gs(i){return typeof i=="string"&&c1.test(i)}var pt=[];for(var _f=0;_f<256;++_f)pt.push((_f+256).toString(16).slice(1));function f1(i,e=0){return(pt[i[e+0]]+pt[i[e+1]]+pt[i[e+2]]+pt[i[e+3]]+"-"+pt[i[e+4]]+pt[i[e+5]]+"-"+pt[i[e+6]]+pt[i[e+7]]+"-"+pt[i[e+8]]+pt[i[e+9]]+"-"+pt[i[e+10]]+pt[i[e+11]]+pt[i[e+12]]+pt[i[e+13]]+pt[i[e+14]]+pt[i[e+15]]).toLowerCase()}var eu,d1=new Uint8Array(16);function h1(){if(!eu&&(eu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eu(d1)}var m1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Zy={randomUUID:m1};function Tt(i,e,n){if(Zy.randomUUID&&!i)return Zy.randomUUID();i=i||{};var r=i.random||(i.rng||h1)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,f1(r)}var tu={},vf={exports:{}},Vy;function p1(){return Vy||(Vy=1,function(i){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function l(m,h,g){this.fn=m,this.context=h,this.once=g||!1}function o(m,h,g,b,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var w=new l(g,b||m,_),S=n?n+h:h;return m._events[S]?m._events[S].fn?m._events[S]=[m._events[S],w]:m._events[S].push(w):(m._events[S]=w,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new r:delete m._events[h]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],g,b;if(this._eventsCount===0)return h;for(b in g=this._events)e.call(g,b)&&h.push(n?b.slice(1):b);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},d.prototype.listeners=function(h){var g=n?n+h:h,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var _=0,w=b.length,S=new Array(w);_<w;_++)S[_]=b[_].fn;return S},d.prototype.listenerCount=function(h){var g=n?n+h:h,b=this._events[g];return b?b.fn?1:b.length:0},d.prototype.emit=function(h,g,b,_,w,S){var E=n?n+h:h;if(!this._events[E])return!1;var x=this._events[E],R=arguments.length,M,C;if(x.fn){switch(x.once&&this.removeListener(h,x.fn,void 0,!0),R){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,g),!0;case 3:return x.fn.call(x.context,g,b),!0;case 4:return x.fn.call(x.context,g,b,_),!0;case 5:return x.fn.call(x.context,g,b,_,w),!0;case 6:return x.fn.call(x.context,g,b,_,w,S),!0}for(C=1,M=new Array(R-1);C<R;C++)M[C-1]=arguments[C];x.fn.apply(x.context,M)}else{var Z=x.length,z;for(C=0;C<Z;C++)switch(x[C].once&&this.removeListener(h,x[C].fn,void 0,!0),R){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,g);break;case 3:x[C].fn.call(x[C].context,g,b);break;case 4:x[C].fn.call(x[C].context,g,b,_);break;default:if(!M)for(z=1,M=new Array(R-1);z<R;z++)M[z-1]=arguments[z];x[C].fn.apply(x[C].context,M)}}return!0},d.prototype.on=function(h,g,b){return o(this,h,g,b,!1)},d.prototype.once=function(h,g,b){return o(this,h,g,b,!0)},d.prototype.removeListener=function(h,g,b,_){var w=n?n+h:h;if(!this._events[w])return this;if(!g)return c(this,w),this;var S=this._events[w];if(S.fn)S.fn===g&&(!_||S.once)&&(!b||S.context===b)&&c(this,w);else{for(var E=0,x=[],R=S.length;E<R;E++)(S[E].fn!==g||_&&!S[E].once||b&&S[E].context!==b)&&x.push(S[E]);x.length?this._events[w]=x.length===1?x[0]:x:c(this,w)}return this},d.prototype.removeAllListeners=function(h){var g;return h?(g=n?n+h:h,this._events[g]&&c(this,g)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,i.exports=d}(vf)),vf.exports}var fs={exports:{}},wf,Yy;function g1(){return Yy||(Yy=1,wf=(i,e)=>(e=e||(()=>{}),i.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})))),wf}var Fy;function y1(){if(Fy)return fs.exports;Fy=1;const i=g1();class e extends Error{constructor(l){super(l),this.name="TimeoutError"}}const n=(r,l,o)=>new Promise((c,d)=>{if(typeof l!="number"||l<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(l===1/0){c(r);return}const m=setTimeout(()=>{if(typeof o=="function"){try{c(o())}catch(b){d(b)}return}const h=typeof o=="string"?o:`Promise timed out after ${l} milliseconds`,g=o instanceof Error?o:new e(h);typeof r.cancel=="function"&&r.cancel(),d(g)},l);i(r.then(c,d),()=>{clearTimeout(m)})});return fs.exports=n,fs.exports.default=n,fs.exports.TimeoutError=e,fs.exports}var nu={},au={},Xy;function b1(){if(Xy)return au;Xy=1,Object.defineProperty(au,"__esModule",{value:!0});function i(e,n,r){let l=0,o=e.length;for(;o>0;){const c=o/2|0;let d=l+c;r(e[d],n)<=0?(l=++d,o-=c+1):o=c}return l}return au.default=i,au}var Qy;function _1(){if(Qy)return nu;Qy=1,Object.defineProperty(nu,"__esModule",{value:!0});const i=b1();class e{constructor(){this._queue=[]}enqueue(r,l){l=Object.assign({priority:0},l);const o={priority:l.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=l.priority){this._queue.push(o);return}const c=i.default(this._queue,o,(d,m)=>m.priority-d.priority);this._queue.splice(c,0,o)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(l=>l.priority===r.priority).map(l=>l.run)}get size(){return this._queue.length}}return nu.default=e,nu}var Jy;function v1(){if(Jy)return tu;Jy=1,Object.defineProperty(tu,"__esModule",{value:!0});const i=p1(),e=y1(),n=_1(),r=()=>{},l=new e.TimeoutError;class o extends i{constructor(d){var m,h,g,b;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,d=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},d),!(typeof d.intervalCap=="number"&&d.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(m=d.intervalCap)===null||m===void 0?void 0:m.toString())!==null&&h!==void 0?h:""}\` (${typeof d.intervalCap})`);if(d.interval===void 0||!(Number.isFinite(d.interval)&&d.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(b=(g=d.interval)===null||g===void 0?void 0:g.toString())!==null&&b!==void 0?b:""}\` (${typeof d.interval})`);this._carryoverConcurrencyCount=d.carryoverConcurrencyCount,this._isIntervalIgnored=d.intervalCap===1/0||d.interval===0,this._intervalCap=d.intervalCap,this._interval=d.interval,this._queue=new d.queueClass,this._queueClass=d.queueClass,this.concurrency=d.concurrency,this._timeout=d.timeout,this._throwOnTimeout=d.throwOnTimeout===!0,this._isPaused=d.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const d=Date.now();if(this._intervalId===void 0){const m=this._intervalEnd-d;if(m<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},m)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const d=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const m=this._queue.dequeue();return m?(this.emit("active"),m(),d&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(d){if(!(typeof d=="number"&&d>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${d}\` (${typeof d})`);this._concurrency=d,this._processQueue()}async add(d,m={}){return new Promise((h,g)=>{const b=async()=>{this._pendingCount++,this._intervalCount++;try{const _=this._timeout===void 0&&m.timeout===void 0?d():e.default(Promise.resolve(d()),m.timeout===void 0?this._timeout:m.timeout,()=>{(m.throwOnTimeout===void 0?this._throwOnTimeout:m.throwOnTimeout)&&g(l)});h(await _)}catch(_){g(_)}this._next()};this._queue.enqueue(b,m),this._tryToStartAnother(),this.emit("add")})}async addAll(d,m){return Promise.all(d.map(async h=>this.add(h,m)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(d=>{const m=this._resolveEmpty;this._resolveEmpty=()=>{m(),d()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(d=>{const m=this._resolveIdle;this._resolveIdle=()=>{m(),d()}})}get size(){return this._queue.size}sizeBy(d){return this._queue.filter(d).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(d){this._timeout=d}}return tu.default=o,tu}var w1=v1();const Xn=js(w1),S1=(...i)=>fetch(...i),q_=Symbol.for("ls:fetch_implementation"),E1=()=>{const i=globalThis[q_];return i?typeof i=="function"&&"Headers"in i&&"Request"in i&&"Response"in i:!1},ue=i=>async(...e)=>{if(i||An("DEBUG")==="true"){const[r,l]=e;console.log(`→ ${(l==null?void 0:l.method)||"GET"} ${r}`)}const n=await(globalThis[q_]??S1)(...e);return(i||An("DEBUG")==="true")&&console.log(`← ${n.status} ${n.statusText} ${n.url}`),n},O1=[400,401,403,404,405,406,407,408],T1=[409];let Ky=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in Xn?this.queue=new Xn.default({concurrency:this.maxConcurrency}):this.queue=new Xn({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>yu(()=>e(...n).catch(l=>{throw l instanceof Error?l:new Error(l)}),{async onFailedAttempt(l){if(l.message.startsWith("Cancel")||l.message.startsWith("TimeoutError")||l.message.startsWith("AbortError")||(l==null?void 0:l.code)==="ECONNABORTED")throw l;const o=l==null?void 0:l.response,c=o==null?void 0:o.status;if(c){if(O1.includes(+c))throw l;if(T1.includes(+c))return;r&&await r(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((l,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>ue(this.debug)(...e).then(n=>n.ok?n:Promise.reject(n)))}};function Wy(i){return typeof(i==null?void 0:i._getType)=="function"}function eb(i){const e={type:i._getType(),data:{content:i.content}};return i!=null&&i.additional_kwargs&&Object.keys(i.additional_kwargs).length>0&&(e.data.additional_kwargs={...i.additional_kwargs}),e}function pe(i,e){if(!gs(i)){const n=e!==void 0?`Invalid UUID for ${e}: ${i}`:`Invalid UUID: ${i}`;throw new Error(n)}return i}const tb={};function B_(i){tb[i]||(console.warn(i),tb[i]=!0)}var ru={exports:{}},Sf,nb;function Lu(){if(nb)return Sf;nb=1;const i="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,l=e-6;return Sf={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:l,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:i,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Sf}var Ef,ab;function Du(){if(ab)return Ef;ab=1;var i={};return Ef=typeof process=="object"&&i&&i.NODE_DEBUG&&/\bsemver\b/i.test(i.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Ef}var rb;function Ds(){return rb||(rb=1,function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:l}=Lu(),o=Du();e=i.exports={};const c=e.re=[],d=e.safeRe=[],m=e.src=[],h=e.safeSrc=[],g=e.t={};let b=0;const _="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",l],[_,r]],S=x=>{for(const[R,M]of w)x=x.split(`${R}*`).join(`${R}{0,${M}}`).split(`${R}+`).join(`${R}{1,${M}}`);return x},E=(x,R,M)=>{const C=S(R),Z=b++;o(x,Z,R),g[x]=Z,m[Z]=R,h[Z]=C,c[Z]=new RegExp(R,M?"g":void 0),d[Z]=new RegExp(C,M?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),E("MAINVERSION",`(${m[g.NUMERICIDENTIFIER]})\\.(${m[g.NUMERICIDENTIFIER]})\\.(${m[g.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${m[g.NUMERICIDENTIFIERLOOSE]})\\.(${m[g.NUMERICIDENTIFIERLOOSE]})\\.(${m[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${m[g.NONNUMERICIDENTIFIER]}|${m[g.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${m[g.NONNUMERICIDENTIFIER]}|${m[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${m[g.PRERELEASEIDENTIFIER]}(?:\\.${m[g.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${m[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${m[g.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${_}+`),E("BUILD",`(?:\\+(${m[g.BUILDIDENTIFIER]}(?:\\.${m[g.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${m[g.MAINVERSION]}${m[g.PRERELEASE]}?${m[g.BUILD]}?`),E("FULL",`^${m[g.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${m[g.MAINVERSIONLOOSE]}${m[g.PRERELEASELOOSE]}?${m[g.BUILD]}?`),E("LOOSE",`^${m[g.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${m[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${m[g.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${m[g.XRANGEIDENTIFIER]})(?:\\.(${m[g.XRANGEIDENTIFIER]})(?:\\.(${m[g.XRANGEIDENTIFIER]})(?:${m[g.PRERELEASE]})?${m[g.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${m[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[g.XRANGEIDENTIFIERLOOSE]})(?:${m[g.PRERELEASELOOSE]})?${m[g.BUILD]}?)?)?`),E("XRANGE",`^${m[g.GTLT]}\\s*${m[g.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${m[g.GTLT]}\\s*${m[g.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),E("COERCE",`${m[g.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",m[g.COERCEPLAIN]+`(?:${m[g.PRERELEASE]})?(?:${m[g.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",m[g.COERCE],!0),E("COERCERTLFULL",m[g.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${m[g.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",E("TILDE",`^${m[g.LONETILDE]}${m[g.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${m[g.LONETILDE]}${m[g.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${m[g.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",E("CARET",`^${m[g.LONECARET]}${m[g.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${m[g.LONECARET]}${m[g.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${m[g.GTLT]}\\s*(${m[g.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${m[g.GTLT]}\\s*(${m[g.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${m[g.GTLT]}\\s*(${m[g.LOOSEPLAIN]}|${m[g.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${m[g.XRANGEPLAIN]})\\s+-\\s+(${m[g.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${m[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${m[g.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(ru,ru.exports)),ru.exports}var Of,ib;function eh(){if(ib)return Of;ib=1;const i=Object.freeze({loose:!0}),e=Object.freeze({});return Of=r=>r?typeof r!="object"?i:r:e,Of}var Tf,sb;function H_(){if(sb)return Tf;sb=1;const i=/^[0-9]+$/,e=(r,l)=>{const o=i.test(r),c=i.test(l);return o&&c&&(r=+r,l=+l),r===l?0:o&&!c?-1:c&&!o?1:r<l?-1:1};return Tf={compareIdentifiers:e,rcompareIdentifiers:(r,l)=>e(l,r)},Tf}var xf,lb;function At(){if(lb)return xf;lb=1;const i=Du(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=Lu(),{safeRe:r,t:l}=Ds(),o=eh(),{compareIdentifiers:c}=H_();class d{constructor(h,g){if(g=o(g),h instanceof d){if(h.loose===!!g.loose&&h.includePrerelease===!!g.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>e)throw new TypeError(`version is longer than ${e} characters`);i("SemVer",h,g),this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease;const b=h.trim().match(g.loose?r[l.LOOSE]:r[l.FULL]);if(!b)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const w=+_;if(w>=0&&w<n)return w}return _}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(i("SemVer.compare",this.version,this.options,h),!(h instanceof d)){if(typeof h=="string"&&h===this.version)return 0;h=new d(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof d||(h=new d(h,this.options)),c(this.major,h.major)||c(this.minor,h.minor)||c(this.patch,h.patch)}comparePre(h){if(h instanceof d||(h=new d(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let g=0;do{const b=this.prerelease[g],_=h.prerelease[g];if(i("prerelease compare",g,b,_),b===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(b===void 0)return-1;if(b===_)continue;return c(b,_)}while(++g)}compareBuild(h){h instanceof d||(h=new d(h,this.options));let g=0;do{const b=this.build[g],_=h.build[g];if(i("build compare",g,b,_),b===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(b===void 0)return-1;if(b===_)continue;return c(b,_)}while(++g)}inc(h,g,b){if(h.startsWith("pre")){if(!g&&b===!1)throw new Error("invalid increment argument: identifier is empty");if(g){const _=`-${g}`.match(this.options.loose?r[l.PRERELEASELOOSE]:r[l.PRERELEASE]);if(!_||_[1]!==g)throw new Error(`invalid identifier: ${g}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",g,b);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",g,b);break;case"prepatch":this.prerelease.length=0,this.inc("patch",g,b),this.inc("pre",g,b);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",g,b),this.inc("pre",g,b);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(b)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let w=this.prerelease.length;for(;--w>=0;)typeof this.prerelease[w]=="number"&&(this.prerelease[w]++,w=-2);if(w===-1){if(g===this.prerelease.join(".")&&b===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(g){let w=[g,_];b===!1&&(w=[g]),c(this.prerelease[0],g)===0?isNaN(this.prerelease[1])&&(this.prerelease=w):this.prerelease=w}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return xf=d,xf}var Af,ub;function ui(){if(ub)return Af;ub=1;const i=At();return Af=(n,r,l=!1)=>{if(n instanceof i)return n;try{return new i(n,r)}catch(o){if(!l)return null;throw o}},Af}var Rf,ob;function x1(){if(ob)return Rf;ob=1;const i=ui();return Rf=(n,r)=>{const l=i(n,r);return l?l.version:null},Rf}var Nf,cb;function A1(){if(cb)return Nf;cb=1;const i=ui();return Nf=(n,r)=>{const l=i(n.trim().replace(/^[=v]+/,""),r);return l?l.version:null},Nf}var Cf,fb;function R1(){if(fb)return Cf;fb=1;const i=At();return Cf=(n,r,l,o,c)=>{typeof l=="string"&&(c=o,o=l,l=void 0);try{return new i(n instanceof i?n.version:n,l).inc(r,o,c).version}catch{return null}},Cf}var jf,db;function N1(){if(db)return jf;db=1;const i=ui();return jf=(n,r)=>{const l=i(n,null,!0),o=i(r,null,!0),c=l.compare(o);if(c===0)return null;const d=c>0,m=d?l:o,h=d?o:l,g=!!m.prerelease.length;if(!!h.prerelease.length&&!g){if(!h.patch&&!h.minor)return"major";if(h.compareMain(m)===0)return h.minor&&!h.patch?"minor":"patch"}const _=g?"pre":"";return l.major!==o.major?_+"major":l.minor!==o.minor?_+"minor":l.patch!==o.patch?_+"patch":"prerelease"},jf}var kf,hb;function C1(){if(hb)return kf;hb=1;const i=At();return kf=(n,r)=>new i(n,r).major,kf}var Lf,mb;function j1(){if(mb)return Lf;mb=1;const i=At();return Lf=(n,r)=>new i(n,r).minor,Lf}var Df,pb;function k1(){if(pb)return Df;pb=1;const i=At();return Df=(n,r)=>new i(n,r).patch,Df}var $f,gb;function L1(){if(gb)return $f;gb=1;const i=ui();return $f=(n,r)=>{const l=i(n,r);return l&&l.prerelease.length?l.prerelease:null},$f}var Mf,yb;function bn(){if(yb)return Mf;yb=1;const i=At();return Mf=(n,r,l)=>new i(n,l).compare(new i(r,l)),Mf}var If,bb;function D1(){if(bb)return If;bb=1;const i=bn();return If=(n,r,l)=>i(r,n,l),If}var Uf,_b;function $1(){if(_b)return Uf;_b=1;const i=bn();return Uf=(n,r)=>i(n,r,!0),Uf}var Pf,vb;function th(){if(vb)return Pf;vb=1;const i=At();return Pf=(n,r,l)=>{const o=new i(n,l),c=new i(r,l);return o.compare(c)||o.compareBuild(c)},Pf}var zf,wb;function M1(){if(wb)return zf;wb=1;const i=th();return zf=(n,r)=>n.sort((l,o)=>i(l,o,r)),zf}var qf,Sb;function I1(){if(Sb)return qf;Sb=1;const i=th();return qf=(n,r)=>n.sort((l,o)=>i(o,l,r)),qf}var Bf,Eb;function $u(){if(Eb)return Bf;Eb=1;const i=bn();return Bf=(n,r,l)=>i(n,r,l)>0,Bf}var Hf,Ob;function nh(){if(Ob)return Hf;Ob=1;const i=bn();return Hf=(n,r,l)=>i(n,r,l)<0,Hf}var Gf,Tb;function G_(){if(Tb)return Gf;Tb=1;const i=bn();return Gf=(n,r,l)=>i(n,r,l)===0,Gf}var Zf,xb;function Z_(){if(xb)return Zf;xb=1;const i=bn();return Zf=(n,r,l)=>i(n,r,l)!==0,Zf}var Vf,Ab;function ah(){if(Ab)return Vf;Ab=1;const i=bn();return Vf=(n,r,l)=>i(n,r,l)>=0,Vf}var Yf,Rb;function rh(){if(Rb)return Yf;Rb=1;const i=bn();return Yf=(n,r,l)=>i(n,r,l)<=0,Yf}var Ff,Nb;function V_(){if(Nb)return Ff;Nb=1;const i=G_(),e=Z_(),n=$u(),r=ah(),l=nh(),o=rh();return Ff=(d,m,h,g)=>{switch(m){case"===":return typeof d=="object"&&(d=d.version),typeof h=="object"&&(h=h.version),d===h;case"!==":return typeof d=="object"&&(d=d.version),typeof h=="object"&&(h=h.version),d!==h;case"":case"=":case"==":return i(d,h,g);case"!=":return e(d,h,g);case">":return n(d,h,g);case">=":return r(d,h,g);case"<":return l(d,h,g);case"<=":return o(d,h,g);default:throw new TypeError(`Invalid operator: ${m}`)}},Ff}var Xf,Cb;function U1(){if(Cb)return Xf;Cb=1;const i=At(),e=ui(),{safeRe:n,t:r}=Ds();return Xf=(o,c)=>{if(o instanceof i)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;c=c||{};let d=null;if(!c.rtl)d=o.match(c.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const w=c.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let S;for(;(S=w.exec(o))&&(!d||d.index+d[0].length!==o.length);)(!d||S.index+S[0].length!==d.index+d[0].length)&&(d=S),w.lastIndex=S.index+S[1].length+S[2].length;w.lastIndex=-1}if(d===null)return null;const m=d[2],h=d[3]||"0",g=d[4]||"0",b=c.includePrerelease&&d[5]?`-${d[5]}`:"",_=c.includePrerelease&&d[6]?`+${d[6]}`:"";return e(`${m}.${h}.${g}${b}${_}`,c)},Xf}var Qf,jb;function P1(){if(jb)return Qf;jb=1;class i{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return Qf=i,Qf}var Jf,kb;function _n(){if(kb)return Jf;kb=1;const i=/\s+/g;class e{constructor(F,j){if(j=l(j),F instanceof e)return F.loose===!!j.loose&&F.includePrerelease===!!j.includePrerelease?F:new e(F.raw,j);if(F instanceof o)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=F.trim().replace(i," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(V=>!E(V[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&x(V[0])){this.set=[V];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const j=this.set[F];for(let P=0;P<j.length;P++)P>0&&(this.formatted+=" "),this.formatted+=j[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const P=((this.options.includePrerelease&&w)|(this.options.loose&&S))+":"+F,V=r.get(P);if(V)return V;const J=this.options.loose,O=J?m[h.HYPHENRANGELOOSE]:m[h.HYPHENRANGE];F=F.replace(O,Ge(this.options.includePrerelease)),c("hyphen replace",F),F=F.replace(m[h.COMPARATORTRIM],g),c("comparator trim",F),F=F.replace(m[h.TILDETRIM],b),c("tilde trim",F),F=F.replace(m[h.CARETTRIM],_),c("caret trim",F);let U=F.split(" ").map(oe=>M(oe,this.options)).join(" ").split(/\s+/).map(oe=>rt(oe,this.options));J&&(U=U.filter(oe=>(c("loose invalid filter",oe,this.options),!!oe.match(m[h.COMPARATORLOOSE])))),c("range list",U);const G=new Map,Y=U.map(oe=>new o(oe,this.options));for(const oe of Y){if(E(oe))return[oe];G.set(oe.value,oe)}G.size>1&&G.has("")&&G.delete("");const te=[...G.values()];return r.set(P,te),te}intersects(F,j){if(!(F instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>R(P,j)&&F.set.some(V=>R(V,j)&&P.every(J=>V.every(O=>J.intersects(O,j)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new d(F,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(Rt(this.set[j],F,this.options))return!0;return!1}}Jf=e;const n=P1(),r=new n,l=eh(),o=Mu(),c=Du(),d=At(),{safeRe:m,t:h,comparatorTrimReplace:g,tildeTrimReplace:b,caretTrimReplace:_}=Ds(),{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:S}=Lu(),E=ee=>ee.value==="<0.0.0-0",x=ee=>ee.value==="",R=(ee,F)=>{let j=!0;const P=ee.slice();let V=P.pop();for(;j&&P.length;)j=P.every(J=>V.intersects(J,F)),V=P.pop();return j},M=(ee,F)=>(c("comp",ee,F),ee=K(ee,F),c("caret",ee),ee=Z(ee,F),c("tildes",ee),ee=W(ee,F),c("xrange",ee),ee=wt(ee,F),c("stars",ee),ee),C=ee=>!ee||ee.toLowerCase()==="x"||ee==="*",Z=(ee,F)=>ee.trim().split(/\s+/).map(j=>z(j,F)).join(" "),z=(ee,F)=>{const j=F.loose?m[h.TILDELOOSE]:m[h.TILDE];return ee.replace(j,(P,V,J,O,U)=>{c("tilde",ee,P,V,J,O,U);let G;return C(V)?G="":C(J)?G=`>=${V}.0.0 <${+V+1}.0.0-0`:C(O)?G=`>=${V}.${J}.0 <${V}.${+J+1}.0-0`:U?(c("replaceTilde pr",U),G=`>=${V}.${J}.${O}-${U} <${V}.${+J+1}.0-0`):G=`>=${V}.${J}.${O} <${V}.${+J+1}.0-0`,c("tilde return",G),G})},K=(ee,F)=>ee.trim().split(/\s+/).map(j=>ae(j,F)).join(" "),ae=(ee,F)=>{c("caret",ee,F);const j=F.loose?m[h.CARETLOOSE]:m[h.CARET],P=F.includePrerelease?"-0":"";return ee.replace(j,(V,J,O,U,G)=>{c("caret",ee,V,J,O,U,G);let Y;return C(J)?Y="":C(O)?Y=`>=${J}.0.0${P} <${+J+1}.0.0-0`:C(U)?J==="0"?Y=`>=${J}.${O}.0${P} <${J}.${+O+1}.0-0`:Y=`>=${J}.${O}.0${P} <${+J+1}.0.0-0`:G?(c("replaceCaret pr",G),J==="0"?O==="0"?Y=`>=${J}.${O}.${U}-${G} <${J}.${O}.${+U+1}-0`:Y=`>=${J}.${O}.${U}-${G} <${J}.${+O+1}.0-0`:Y=`>=${J}.${O}.${U}-${G} <${+J+1}.0.0-0`):(c("no pr"),J==="0"?O==="0"?Y=`>=${J}.${O}.${U}${P} <${J}.${O}.${+U+1}-0`:Y=`>=${J}.${O}.${U}${P} <${J}.${+O+1}.0-0`:Y=`>=${J}.${O}.${U} <${+J+1}.0.0-0`),c("caret return",Y),Y})},W=(ee,F)=>(c("replaceXRanges",ee,F),ee.split(/\s+/).map(j=>Be(j,F)).join(" ")),Be=(ee,F)=>{ee=ee.trim();const j=F.loose?m[h.XRANGELOOSE]:m[h.XRANGE];return ee.replace(j,(P,V,J,O,U,G)=>{c("xRange",ee,P,V,J,O,U,G);const Y=C(J),te=Y||C(O),oe=te||C(U),ce=oe;return V==="="&&ce&&(V=""),G=F.includePrerelease?"-0":"",Y?V===">"||V==="<"?P="<0.0.0-0":P="*":V&&ce?(te&&(O=0),U=0,V===">"?(V=">=",te?(J=+J+1,O=0,U=0):(O=+O+1,U=0)):V==="<="&&(V="<",te?J=+J+1:O=+O+1),V==="<"&&(G="-0"),P=`${V+J}.${O}.${U}${G}`):te?P=`>=${J}.0.0${G} <${+J+1}.0.0-0`:oe&&(P=`>=${J}.${O}.0${G} <${J}.${+O+1}.0-0`),c("xRange return",P),P})},wt=(ee,F)=>(c("replaceStars",ee,F),ee.trim().replace(m[h.STAR],"")),rt=(ee,F)=>(c("replaceGTE0",ee,F),ee.trim().replace(m[F.includePrerelease?h.GTE0PRE:h.GTE0],"")),Ge=ee=>(F,j,P,V,J,O,U,G,Y,te,oe,ce)=>(C(P)?j="":C(V)?j=`>=${P}.0.0${ee?"-0":""}`:C(J)?j=`>=${P}.${V}.0${ee?"-0":""}`:O?j=`>=${j}`:j=`>=${j}${ee?"-0":""}`,C(Y)?G="":C(te)?G=`<${+Y+1}.0.0-0`:C(oe)?G=`<${Y}.${+te+1}.0-0`:ce?G=`<=${Y}.${te}.${oe}-${ce}`:ee?G=`<${Y}.${te}.${+oe+1}-0`:G=`<=${G}`,`${j} ${G}`.trim()),Rt=(ee,F,j)=>{for(let P=0;P<ee.length;P++)if(!ee[P].test(F))return!1;if(F.prerelease.length&&!j.includePrerelease){for(let P=0;P<ee.length;P++)if(c(ee[P].semver),ee[P].semver!==o.ANY&&ee[P].semver.prerelease.length>0){const V=ee[P].semver;if(V.major===F.major&&V.minor===F.minor&&V.patch===F.patch)return!0}return!1}return!0};return Jf}var Kf,Lb;function Mu(){if(Lb)return Kf;Lb=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(g,b){if(b=n(b),g instanceof e){if(g.loose===!!b.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),c("comparator",g,b),this.options=b,this.loose=!!b.loose,this.parse(g),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(g){const b=this.options.loose?r[l.COMPARATORLOOSE]:r[l.COMPARATOR],_=g.match(b);if(!_)throw new TypeError(`Invalid comparator: ${g}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new d(_[2],this.options.loose):this.semver=i}toString(){return this.value}test(g){if(c("Comparator.test",g,this.options.loose),this.semver===i||g===i)return!0;if(typeof g=="string")try{g=new d(g,this.options)}catch{return!1}return o(g,this.operator,this.semver,this.options)}intersects(g,b){if(!(g instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new m(g.value,b).test(this.value):g.operator===""?g.value===""?!0:new m(this.value,b).test(g.semver):(b=n(b),b.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!b.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||o(this.semver,"<",g.semver,b)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||o(this.semver,">",g.semver,b)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Kf=e;const n=eh(),{safeRe:r,t:l}=Ds(),o=V_(),c=Du(),d=At(),m=_n();return Kf}var Wf,Db;function Iu(){if(Db)return Wf;Db=1;const i=_n();return Wf=(n,r,l)=>{try{r=new i(r,l)}catch{return!1}return r.test(n)},Wf}var ed,$b;function z1(){if($b)return ed;$b=1;const i=_n();return ed=(n,r)=>new i(n,r).set.map(l=>l.map(o=>o.value).join(" ").trim().split(" ")),ed}var td,Mb;function q1(){if(Mb)return td;Mb=1;const i=At(),e=_n();return td=(r,l,o)=>{let c=null,d=null,m=null;try{m=new e(l,o)}catch{return null}return r.forEach(h=>{m.test(h)&&(!c||d.compare(h)===-1)&&(c=h,d=new i(c,o))}),c},td}var nd,Ib;function B1(){if(Ib)return nd;Ib=1;const i=At(),e=_n();return nd=(r,l,o)=>{let c=null,d=null,m=null;try{m=new e(l,o)}catch{return null}return r.forEach(h=>{m.test(h)&&(!c||d.compare(h)===1)&&(c=h,d=new i(c,o))}),c},nd}var ad,Ub;function H1(){if(Ub)return ad;Ub=1;const i=At(),e=_n(),n=$u();return ad=(l,o)=>{l=new e(l,o);let c=new i("0.0.0");if(l.test(c)||(c=new i("0.0.0-0"),l.test(c)))return c;c=null;for(let d=0;d<l.set.length;++d){const m=l.set[d];let h=null;m.forEach(g=>{const b=new i(g.semver.version);switch(g.operator){case">":b.prerelease.length===0?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!h||n(b,h))&&(h=b);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),h&&(!c||n(c,h))&&(c=h)}return c&&l.test(c)?c:null},ad}var rd,Pb;function G1(){if(Pb)return rd;Pb=1;const i=_n();return rd=(n,r)=>{try{return new i(n,r).range||"*"}catch{return null}},rd}var id,zb;function ih(){if(zb)return id;zb=1;const i=At(),e=Mu(),{ANY:n}=e,r=_n(),l=Iu(),o=$u(),c=nh(),d=rh(),m=ah();return id=(g,b,_,w)=>{g=new i(g,w),b=new r(b,w);let S,E,x,R,M;switch(_){case">":S=o,E=d,x=c,R=">",M=">=";break;case"<":S=c,E=m,x=o,R="<",M="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(g,b,w))return!1;for(let C=0;C<b.set.length;++C){const Z=b.set[C];let z=null,K=null;if(Z.forEach(ae=>{ae.semver===n&&(ae=new e(">=0.0.0")),z=z||ae,K=K||ae,S(ae.semver,z.semver,w)?z=ae:x(ae.semver,K.semver,w)&&(K=ae)}),z.operator===R||z.operator===M||(!K.operator||K.operator===R)&&E(g,K.semver))return!1;if(K.operator===M&&x(g,K.semver))return!1}return!0},id}var sd,qb;function Z1(){if(qb)return sd;qb=1;const i=ih();return sd=(n,r,l)=>i(n,r,">",l),sd}var ld,Bb;function V1(){if(Bb)return ld;Bb=1;const i=ih();return ld=(n,r,l)=>i(n,r,"<",l),ld}var ud,Hb;function Y1(){if(Hb)return ud;Hb=1;const i=_n();return ud=(n,r,l)=>(n=new i(n,l),r=new i(r,l),n.intersects(r,l)),ud}var od,Gb;function F1(){if(Gb)return od;Gb=1;const i=Iu(),e=bn();return od=(n,r,l)=>{const o=[];let c=null,d=null;const m=n.sort((_,w)=>e(_,w,l));for(const _ of m)i(_,r,l)?(d=_,c||(c=_)):(d&&o.push([c,d]),d=null,c=null);c&&o.push([c,null]);const h=[];for(const[_,w]of o)_===w?h.push(_):!w&&_===m[0]?h.push("*"):w?_===m[0]?h.push(`<=${w}`):h.push(`${_} - ${w}`):h.push(`>=${_}`);const g=h.join(" || "),b=typeof r.raw=="string"?r.raw:String(r);return g.length<b.length?g:r},od}var cd,Zb;function X1(){if(Zb)return cd;Zb=1;const i=_n(),e=Mu(),{ANY:n}=e,r=Iu(),l=bn(),o=(b,_,w={})=>{if(b===_)return!0;b=new i(b,w),_=new i(_,w);let S=!1;e:for(const E of b.set){for(const x of _.set){const R=m(E,x,w);if(S=S||R!==null,R)continue e}if(S)return!1}return!0},c=[new e(">=0.0.0-0")],d=[new e(">=0.0.0")],m=(b,_,w)=>{if(b===_)return!0;if(b.length===1&&b[0].semver===n){if(_.length===1&&_[0].semver===n)return!0;w.includePrerelease?b=c:b=d}if(_.length===1&&_[0].semver===n){if(w.includePrerelease)return!0;_=d}const S=new Set;let E,x;for(const W of b)W.operator===">"||W.operator===">="?E=h(E,W,w):W.operator==="<"||W.operator==="<="?x=g(x,W,w):S.add(W.semver);if(S.size>1)return null;let R;if(E&&x){if(R=l(E.semver,x.semver,w),R>0)return null;if(R===0&&(E.operator!==">="||x.operator!=="<="))return null}for(const W of S){if(E&&!r(W,String(E),w)||x&&!r(W,String(x),w))return null;for(const Be of _)if(!r(W,String(Be),w))return!1;return!0}let M,C,Z,z,K=x&&!w.includePrerelease&&x.semver.prerelease.length?x.semver:!1,ae=E&&!w.includePrerelease&&E.semver.prerelease.length?E.semver:!1;K&&K.prerelease.length===1&&x.operator==="<"&&K.prerelease[0]===0&&(K=!1);for(const W of _){if(z=z||W.operator===">"||W.operator===">=",Z=Z||W.operator==="<"||W.operator==="<=",E){if(ae&&W.semver.prerelease&&W.semver.prerelease.length&&W.semver.major===ae.major&&W.semver.minor===ae.minor&&W.semver.patch===ae.patch&&(ae=!1),W.operator===">"||W.operator===">="){if(M=h(E,W,w),M===W&&M!==E)return!1}else if(E.operator===">="&&!r(E.semver,String(W),w))return!1}if(x){if(K&&W.semver.prerelease&&W.semver.prerelease.length&&W.semver.major===K.major&&W.semver.minor===K.minor&&W.semver.patch===K.patch&&(K=!1),W.operator==="<"||W.operator==="<="){if(C=g(x,W,w),C===W&&C!==x)return!1}else if(x.operator==="<="&&!r(x.semver,String(W),w))return!1}if(!W.operator&&(x||E)&&R!==0)return!1}return!(E&&Z&&!x&&R!==0||x&&z&&!E&&R!==0||ae||K)},h=(b,_,w)=>{if(!b)return _;const S=l(b.semver,_.semver,w);return S>0?b:S<0||_.operator===">"&&b.operator===">="?_:b},g=(b,_,w)=>{if(!b)return _;const S=l(b.semver,_.semver,w);return S<0?b:S>0||_.operator==="<"&&b.operator==="<="?_:b};return cd=o,cd}var fd,Vb;function Q1(){if(Vb)return fd;Vb=1;const i=Ds(),e=Lu(),n=At(),r=H_(),l=ui(),o=x1(),c=A1(),d=R1(),m=N1(),h=C1(),g=j1(),b=k1(),_=L1(),w=bn(),S=D1(),E=$1(),x=th(),R=M1(),M=I1(),C=$u(),Z=nh(),z=G_(),K=Z_(),ae=ah(),W=rh(),Be=V_(),wt=U1(),rt=Mu(),Ge=_n(),Rt=Iu(),ee=z1(),F=q1(),j=B1(),P=H1(),V=G1(),J=ih(),O=Z1(),U=V1(),G=Y1(),Y=F1(),te=X1();return fd={parse:l,valid:o,clean:c,inc:d,diff:m,major:h,minor:g,patch:b,prerelease:_,compare:w,rcompare:S,compareLoose:E,compareBuild:x,sort:R,rsort:M,gt:C,lt:Z,eq:z,neq:K,gte:ae,lte:W,cmp:Be,coerce:wt,Comparator:rt,Range:Ge,satisfies:Rt,toComparators:ee,maxSatisfying:F,minSatisfying:j,minVersion:P,validRange:V,outside:J,gtr:O,ltr:U,intersects:G,simplifyRange:Y,subset:te,SemVer:n,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},fd}Q1();function Ea(i){if(!i||i.split("/").length>2||i.startsWith("/")||i.endsWith("/")||i.split(":").length>2)throw new Error(`Invalid identifier format: ${i}`);const[e,n]=i.split(":"),r=n||"latest";if(e.includes("/")){const[l,o]=e.split("/",2);if(!l||!o)throw new Error(`Invalid identifier format: ${i}`);return[l,o,r]}else{if(!e)throw new Error(`Invalid identifier format: ${i}`);return["-",e,r]}}class J1 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function ye(i,e,n){let r;if(i.ok){n&&(r=await i.text());return}r=await i.text();const l=`Failed to ${e}. Received status [${i.status}]: ${i.statusText}. Server response: ${r}`;if(i.status===409)throw new J1(l);const o=new Error(l);throw o.status=i.status,o}var Yb="[...]",K1={result:"[Circular]"},bu=[],Yr=[];const W1=new TextEncoder;function eO(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function iu(i){return W1.encode(i)}function Zt(i,e,n,r,l){var o;try{const c=JSON.stringify(i,n,r);return iu(c)}catch(c){if(!((o=c.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),iu("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof l>"u"&&(l=eO()),Dd(i,"",0,[],void 0,0,l);let d;try{Yr.length===0?d=JSON.stringify(i,n,r):d=JSON.stringify(i,tO(n),r)}catch{return iu("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;bu.length!==0;){const m=bu.pop();m.length===4?Object.defineProperty(m[0],m[1],m[3]):m[0][m[1]]=m[2]}}return iu(d)}}function dd(i,e,n,r){var l=Object.getOwnPropertyDescriptor(r,n);l.get!==void 0?l.configurable?(Object.defineProperty(r,n,{value:i}),bu.push([r,n,e,l])):Yr.push([e,n,i]):(r[n]=i,bu.push([r,n,e]))}function Dd(i,e,n,r,l,o,c){o+=1;var d;if(typeof i=="object"&&i!==null){for(d=0;d<r.length;d++)if(r[d]===i){dd(K1,i,e,l);return}if(typeof c.depthLimit<"u"&&o>c.depthLimit){dd(Yb,i,e,l);return}if(typeof c.edgesLimit<"u"&&n+1>c.edgesLimit){dd(Yb,i,e,l);return}if(r.push(i),Array.isArray(i))for(d=0;d<i.length;d++)Dd(i[d],d,d,r,i,o,c);else{var m=Object.keys(i);for(d=0;d<m.length;d++){var h=m[d];Dd(i[h],h,d,r,i,o,c)}}r.pop()}}function tO(i){return i=typeof i<"u"?i:function(e,n){return n},function(e,n){if(Yr.length>0)for(var r=0;r<Yr.length;r++){var l=Yr[r];if(l[1]===e&&l[0]===n){n=l[2],Yr.splice(r,1);break}}return i.call(this,e,n)}}function Fb(i){const e=X_(),n=mO(),r=i.extra??{},l=r.metadata;return i.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...n,...n.revision_id||i.revision_id?{revision_id:i.revision_id??n.revision_id}:{},...l}},i}const nO=i=>{const e=(i==null?void 0:i.toString())??An("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},aO=i=>{const n=i.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function rO(i){const e=[];for await(const n of i)e.push(n);return e}function hd(i){if(i!==void 0)return i.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const iO=async i=>{if((i==null?void 0:i.status)===429){const e=parseInt(i.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function Xb(i){return typeof i=="number"?Number(i.toFixed(4)):i}class sO{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let n;const r=new Promise(o=>{n=o}),l=Zt(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:n,itemPromise:r,size:l}),this.sizeBytes+=l,r}pop(e){var l;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let r=0;for(;r+(((l=this.peek())==null?void 0:l.size)??0)<e&&this.items.length>0;){const o=this.items.shift();o&&(n.push(o),r+=o.size,this.sizeBytes-=o.size)}if(n.length===0&&this.items.length>0){const o=this.items.shift();n.push(o),r+=o.size,this.sizeBytes-=o.size}return[n.map(o=>({action:o.action,item:o.payload})),()=>n.forEach(o=>o.itemPromiseResolve())]}}const lO=20971520,uO=2500;class As{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new sO}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Ra("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Ra("LANGSMITH_DEBUG")==="true"});const n=As.getDefaultClientConfig();if(this.tracingSampleRate=nO(e.tracingSamplingRate),this.apiUrl=hd(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=hd(e.apiKey??n.apiKey),this.webUrl=hd(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new Ky({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new Ky({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:iO,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=An("API_KEY"),n=An("ENDPOINT")??"https://api.smith.langchain.com",r=An("HIDE_INPUTS")==="true",l=An("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:l}}getHostUrl(){return this.webUrl?this.webUrl:aO(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Y_}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",l=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(ue(this.debug),l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(o,`Failed to fetch ${e}`),o}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let l=Number(n.get("offset"))||0;const o=Number(n.get("limit"))||100;for(;;){n.set("offset",String(l)),n.set("limit",String(o));const c=`${this.apiUrl}${e}?${n}`,d=await this.caller.call(ue(this.debug),c,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(d,`Failed to fetch ${e}`);const m=r?r(await d.json()):await d.json();if(m.length===0||(yield m,m.length<o))break;l+=m.length}}async*_getCursorPaginatedList(e,n=null,r="POST",l="runs"){const o=n?{...n}:{};for(;;){const d=await(await this.caller.call(ue(this.debug),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!d||!d[l])break;yield d[l];const m=d.cursors;if(!m||!m.next)break;o.cursor=m.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const l of e)this.filteredPostUuids.has(l.id)?this.filteredPostUuids.delete(l.id):r.push(l);return r}else{const r=[];for(const l of e){const o=l.trace_id??l.id;this.filteredPostUuids.has(o)||(l.id===o?this._shouldSample()?r.push(l):this.filteredPostUuids.add(o):r.push(l))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??lO}async _getMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const n=[];for(;this.autoBatchQueue.items.length>0;){const[r,l]=this.autoBatchQueue.pop(e);if(!r.length){l();break}const o=this._processBatch(r,l).catch(console.error);n.push(o)}return Promise.all(n)}async _processBatch(e,n){var r;if(!e.length){n();return}try{const l={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();(r=o==null?void 0:o.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(l):await this.batchIngestRuns(l)}finally{n()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=Fb(e.item));const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const e=await this.caller.call(ue(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(uO),...this.fetchOptions});await ye(e,"get server info");const n=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const l=await this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&l.trace_id!==void 0&&l.dotted_order!==void 0){this.processRunOperation({action:"create",item:l}).catch(console.error);return}const o=Fb(l),c=await this.caller.call(ue(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:Zt(o,`Creating run with id: ${o.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;let r=await Promise.all((e==null?void 0:e.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[]),l=await Promise.all((n==null?void 0:n.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[]);if(r.length>0&&l.length>0){const d=r.reduce((h,g)=>(g.id&&(h[g.id]=g),h),{}),m=[];for(const h of l)h.id!==void 0&&d[h.id]?d[h.id]={...d[h.id],...h}:m.push(h);r=Object.values(d),l=m}const o={post:r,patch:l};if(!o.post.length&&!o.patch.length)return;const c={post:[],patch:[]};for(const d of["post","patch"]){const m=d,h=o[m].reverse();let g=h.pop();for(;g!==void 0;)c[m].push(g),g=h.pop()}if(c.post.length>0||c.patch.length>0){const d=c.post.map(m=>m.id).concat(c.patch.map(m=>m.id)).join(",");await this._postBatchIngestRuns(Zt(c,`Ingesting runs with ids: ${d}`))}}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(ue(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;const r={};let l=[];for(const g of e??[]){const b=await this.prepareRunCreateOrUpdateInputs(g);b.id!==void 0&&b.attachments!==void 0&&(r[b.id]=b.attachments),delete b.attachments,l.push(b)}let o=[];for(const g of n??[])o.push(await this.prepareRunCreateOrUpdateInputs(g));if(l.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(g=>g.trace_id===void 0||g.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(l.length>0&&o.length>0){const g=l.reduce((_,w)=>(w.id&&(_[w.id]=w),_),{}),b=[];for(const _ of o)_.id!==void 0&&g[_.id]?g[_.id]={...g[_.id],..._}:b.push(_);l=Object.values(g),o=b}if(l.length===0&&o.length===0)return;const m=[],h=[];for(const[g,b]of[["post",l],["patch",o]])for(const _ of b){const{inputs:w,outputs:S,events:E,attachments:x,...R}=_,M={inputs:w,outputs:S,events:E},C=Zt(R,`Serializing for multipart ingestion of run with id: ${R.id}`);h.push({name:`${g}.${R.id}`,payload:new Blob([C],{type:`application/json; length=${C.length}`})});for(const[Z,z]of Object.entries(M)){if(z===void 0)continue;const K=Zt(z,`Serializing ${Z} for multipart ingestion of run with id: ${R.id}`);h.push({name:`${g}.${R.id}.${Z}`,payload:new Blob([K],{type:`application/json; length=${K.length}`})})}if(R.id!==void 0){const Z=r[R.id];if(Z){delete r[R.id];for(const[z,K]of Object.entries(Z)){let ae,W;if(Array.isArray(K)?[ae,W]=K:(ae=K.mimeType,W=K.data),z.includes(".")){console.warn(`Skipping attachment '${z}' for run ${R.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}h.push({name:`attachment.${R.id}.${z}`,payload:new Blob([W],{type:`${ae}; length=${W.byteLength}`})})}}}m.push(`trace=${R.trace_id},id=${R.id}`)}await this._sendMultipartRequest(h,m.join("; "))}async _createNodeFetchBody(e,n){const r=[];for(const c of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${c.name}"\r
`,`Content-Type: ${c.payload.type}\r
\r
`])),r.push(c.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(o){const c=async d=>{typeof d=="string"?o.enqueue(r.encode(d)):o.enqueue(d)};for(const d of e){await c(`--${n}\r
`),await c(`Content-Disposition: form-data; name="${d.name}"\r
`),await c(`Content-Type: ${d.payload.type}\r
\r
`);const h=d.payload.stream().getReader();try{let g;for(;!(g=await h.read()).done;)o.enqueue(g.value)}finally{h.releaseLock()}await c(`\r
`)}await c(`--${n}--\r
`),o.close()}})}async _sendMultipartRequest(e,n){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),l=await(E1()?this._createNodeFetchBody(e,r):this._createMultipartStream(e,r)),o=await this.batchIngestCaller.call(ue(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:l,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(o,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${n}`)}}async updateRun(e,n){pe(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const l={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:l,body:Zt(n,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(o,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){pe(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let l;n.session_id?l=n.session_id:r!=null&&r.projectName?l=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?l=r==null?void 0:r.projectId:l=(await this.readProject({projectName:An("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${l}/r/${n.id}?poll=true`}else if(e!==void 0){const l=await this.readRun(e);if(!l.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${l.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var o;const n=await rO(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},l={};n.sort((c,d)=>((c==null?void 0:c.dotted_order)??"").localeCompare((d==null?void 0:d.dotted_order)??""));for(const c of n){if(c.parent_run_id===null||c.parent_run_id===void 0)throw new Error(`Child run ${c.id} has no parent`);(o=c.dotted_order)!=null&&o.startsWith(e.dotted_order??"")&&c.id!==e.id&&(c.parent_run_id in r||(r[c.parent_run_id]=[]),r[c.parent_run_id].push(c),l[c.id]=c)}e.child_runs=r[e.id]||[];for(const c in r)c!==e.id&&(l[c].child_runs=r[c]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:l,traceId:o,referenceExampleId:c,startTime:d,executionOrder:m,isRoot:h,runType:g,error:b,id:_,query:w,filter:S,traceFilter:E,treeFilter:x,limit:R,select:M,order:C}=e;let Z=[];if(n&&(Z=Array.isArray(n)?n:[n]),r){const W=Array.isArray(r)?r:[r],Be=await Promise.all(W.map(wt=>this.readProject({projectName:wt}).then(rt=>rt.id)));Z.push(...Be)}const z=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],K={session:Z.length?Z:null,run_type:g,reference_example:c,query:w,filter:S,trace_filter:E,tree_filter:x,execution_order:m,parent_run:l,start_time:d?d.toISOString():null,error:b,id:_,limit:R,trace:o,select:M||z,is_root:h,order:C};let ae=0;for await(const W of this._getCursorPaginatedList("/runs/query",K))if(R){if(ae>=R)break;if(W.length+ae>R){yield*W.slice(0,R-ae);break}ae+=W.length,yield*W}else yield*W}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:l,filter:o,startTime:c,endTime:d,limit:m,offset:h}=e,b={session_id:n||(await this.readProject({projectName:r})).id,group_by:l,filter:o,start_time:c?c.toISOString():null,end_time:d?d.toISOString():null,limit:Number(m)||100};let _=Number(h)||0;const w="/runs/group",S=`${this.apiUrl}${w}`;for(;;){const E={...b,offset:_},x=Object.fromEntries(Object.entries(E).filter(([z,K])=>K!==void 0)),R=await this.caller.call(ue(),S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(x),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(R,`Failed to fetch ${w}`);const M=await R.json(),{groups:C,total:Z}=M;if(C.length===0)break;for(const z of C)yield z;if(_+=C.length,_>=Z)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:l,projectNames:o,projectIds:c,referenceExampleIds:d,startTime:m,endTime:h,error:g,query:b,filter:_,traceFilter:w,treeFilter:S,isRoot:E,dataSourceType:x}){let R=c||[];o&&(R=[...c||[],...await Promise.all(o.map(K=>this.readProject({projectName:K}).then(ae=>ae.id)))]);const C=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:l,session:R,reference_example:d,start_time:m,end_time:h,error:g,query:b,filter:_,trace_filter:w,tree_filter:S,is_root:E,data_source_type:x}).filter(([K,ae])=>ae!==void 0));return await(await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(C),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||Tt()};pe(e);const o=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){pe(e);const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(n,"unshare run",!0)}async readRunSharedLink(e){pe(e);const r=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const c of n)r.append("id",c);return pe(e),await(await this.caller.call(ue(this.debug),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),pe(e);const l=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return l.url=`${this.getHostUrl()}/public/${l.share_token}/d`,l}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};pe(e);const o=await(await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){pe(e);const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(n,"unshare dataset",!0)}async readSharedDataset(e){return pe(e),await(await this.caller.call(ue(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const l=new URLSearchParams;Object.entries(r).forEach(([d,m])=>{Array.isArray(m)?m.forEach(h=>l.append(d,h)):l.append(d,m)});const o=await this.caller.call(ue(this.debug),`${this.apiUrl}/public/${e}/examples?${l.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),c=await o.json();if(!o.ok)throw"detail"in c?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(c.detail)?c.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return c.map(d=>({...d,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:l=!1,projectExtra:o=null,referenceDatasetId:c=null}){const d=l?"?upsert=true":"",m=`${this.apiUrl}/sessions${d}`,h=o||{};r&&(h.metadata=r);const g={name:e,extra:h,description:n};c!==null&&(g.reference_dataset_id=c);const b=await this.caller.call(ue(this.debug),m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(b,"create project"),await b.json()}async updateProject(e,{name:n=null,description:r=null,metadata:l=null,projectExtra:o=null,endTime:c=null}){const d=`${this.apiUrl}/sessions/${e}`;let m=o;l&&(m={...m||{},metadata:l});const h={name:n,extra:m,description:r,end_time:c?new Date(c).toISOString():null},g=await this.caller.call(ue(this.debug),d,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(g,"update project"),await g.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const l=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)pe(e),r+=`/${e}`;else if(n!==void 0)l.append("name",n);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(ue(this.debug),`${this.apiUrl}${r}?${l}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const c=await o.json();return o.ok?Array.isArray(c)?c.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let l="/sessions";const o=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)pe(e),l+=`/${e}`;else if(n!==void 0)o.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const c=await this._get(l,o);let d;if(Array.isArray(c)){if(c.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);d=c[0]}else d=c;return d}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),l=await this._getTenantId();return`${this.getHostUrl()}/o/${l}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:l,referenceDatasetName:o,referenceFree:c,metadata:d}={}){const m=new URLSearchParams;if(e!==void 0)for(const h of e)m.append("id",h);if(n!==void 0&&m.append("name",n),r!==void 0&&m.append("name_contains",r),l!==void 0)m.append("reference_dataset",l);else if(o!==void 0){const h=await this.readDataset({datasetName:o});m.append("reference_dataset",h.id)}c!==void 0&&m.append("reference_free",c.toString()),d!==void 0&&m.append("metadata",JSON.stringify(d));for await(const h of this._getPaginated("/sessions",m))yield*h}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,pe(r);const l=await this.caller.call(ue(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(l,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:l,description:o,dataType:c,name:d}){const m=`${this.apiUrl}/datasets/upload`,h=new FormData;h.append("file",e,n),r.forEach(_=>{h.append("input_keys",_)}),l.forEach(_=>{h.append("output_keys",_)}),o&&h.append("description",o),c&&h.append("data_type",c),d&&h.append("name",d);const g=await this.caller.call(ue(this.debug),m,{method:"POST",headers:this.headers,body:h,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(g,"upload CSV"),await g.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:l,outputsSchema:o,metadata:c}={}){const d={name:e,description:n,extra:c?{metadata:c}:void 0};r&&(d.data_type=r),l&&(d.inputs_schema_definition=l),o&&(d.outputs_schema_definition=o);const m=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(m,"create dataset"),await m.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const l=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)pe(e),r+=`/${e}`;else if(n!==void 0)l.append("name",n);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,l);let c;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);c=o[0]}else c=o;return c}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:l}){let o=e;if(o===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:n})).id);const c=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof l=="string"?l:l.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,c)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(d=>JSON.parse(d))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:l,datasetNameContains:o,metadata:c}={}){const d="/datasets",m=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const h of r)m.append("id",h);l!==void 0&&m.append("name",l),o!==void 0&&m.append("name_contains",o),c!==void 0&&m.append("metadata",JSON.stringify(c));for await(const h of this._getPaginated(d,m))yield*h}async updateDataset(e){const{datasetId:n,datasetName:r,...l}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const o=n??(await this.readDataset({datasetName:r})).id;pe(o);const c=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,"update dataset"),await c.json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:l,tag:o}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const c=n??(await this.readDataset({datasetName:r})).id;pe(c);const d=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${c}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof l=="string"?l:l.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(d,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",l=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(l=(await this.readDataset({datasetName:n})).id),l!==void 0)pe(l),r+=`/${l}`;else throw new Error("Must provide datasetName or datasetId");const o=await this.caller.call(ue(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let l=e;if(!l&&!n)throw new Error("Must provide either datasetName or datasetId");if(l&&n)throw new Error("Must provide either datasetName or datasetId, not both");l||(l=(await this.readDataset({datasetName:n})).id),pe(l);const o={tag:r},c=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${l}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"index dataset"),await c.json()}async similarExamples(e,n,r,{filter:l}={}){const o={limit:r,inputs:e};l!==void 0&&(o.filter=l),pe(n);const c=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,"fetch similar examples"),(await c.json()).examples}async createExample(e,n,r){var g;if(Qb(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let l=n?r==null?void 0:r.datasetId:e.dataset_id;const o=n?r==null?void 0:r.datasetName:e.dataset_name;if(l===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(l!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");l===void 0&&(l=(await this.readDataset({datasetName:o})).id);const c=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let d;Qb(e)?d=e:d={inputs:e,outputs:n,created_at:c==null?void 0:c.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const m=await this._uploadExamplesMultipart(l,[d]);return await this.readExample(((g=m.example_ids)==null?void 0:g[0])??Tt())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const M=e;let C=M[0].dataset_id;const Z=M[0].dataset_name;if(C===void 0&&Z===void 0)throw new Error("Must provide either datasetName or datasetId");if(C!==void 0&&Z!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");C===void 0&&(C=(await this.readDataset({datasetName:Z})).id);const z=await this._uploadExamplesMultipart(C,M);return await Promise.all(z.example_ids.map(ae=>this.readExample(ae)))}const{inputs:n,outputs:r,metadata:l,splits:o,sourceRunIds:c,useSourceRunIOs:d,useSourceRunAttachments:m,attachments:h,exampleIds:g,datasetId:b,datasetName:_}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let w=b;const S=_;if(w===void 0&&S===void 0)throw new Error("Must provide either datasetName or datasetId");if(w!==void 0&&S!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");w===void 0&&(w=(await this.readDataset({datasetName:S})).id);const E=n.map((M,C)=>({dataset_id:w,inputs:M,outputs:r==null?void 0:r[C],metadata:l==null?void 0:l[C],split:o==null?void 0:o[C],id:g==null?void 0:g[C],attachments:h==null?void 0:h[C],source_run_id:c==null?void 0:c[C],use_source_run_io:d==null?void 0:d[C],use_source_run_attachments:m==null?void 0:m[C]})),x=await this._uploadExamplesMultipart(w,E);return await Promise.all(x.example_ids.map(M=>this.readExample(M)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const l=e.map(c=>Wy(c)?eb(c):c),o=Wy(n)?eb(n):n;return this.createExample({input:l},{output:o},r)}async readExample(e){pe(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:l,...o}=r,c=o;return l&&(c.attachments=Object.entries(l).reduce((d,[m,h])=>(d[m.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},d),{})),c}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:l,splits:o,inlineS3Urls:c,metadata:d,limit:m,offset:h,filter:g,includeAttachments:b}={}){let _;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)_=e;else if(n!==void 0)_=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const w=new URLSearchParams({dataset:_}),S=l?typeof l=="string"?l:l==null?void 0:l.toISOString():void 0;S&&w.append("as_of",S);const E=c??!0;if(w.append("inline_s3_urls",E.toString()),r!==void 0)for(const R of r)w.append("id",R);if(o!==void 0)for(const R of o)w.append("splits",R);if(d!==void 0){const R=JSON.stringify(d);w.append("metadata",R)}m!==void 0&&w.append("limit",m.toString()),h!==void 0&&w.append("offset",h.toString()),g!==void 0&&w.append("filter",g),b===!0&&["attachment_urls","outputs","metadata"].forEach(R=>w.append("select",R));let x=0;for await(const R of this._getPaginated("/examples",w)){for(const M of R){const{attachment_urls:C,...Z}=M,z=Z;C&&(z.attachments=Object.entries(C).reduce((K,[ae,W])=>(K[ae.slice(11)]={presigned_url:W.presigned_url,mime_type:W.mime_type||void 0},K),{})),yield z,x++}if(m!==void 0&&x>=m)break}}async deleteExample(e){pe(e);const n=`/examples/${e}`,r=await this.caller.call(ue(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,`delete ${n}`),await r.json()}async updateExample(e,n){let r;n?r=e:r=e.id,pe(r);let l;n?l={id:r,...n}:l=e;let o;return l.dataset_id!==void 0?o=l.dataset_id:o=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(o,[l])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:l}){let o;if(e?o=e:o=(await this.readDataset({datasetName:n})).id,pe(o),r&&l||!r&&!l)throw new Error("Exactly one of asOf and tag must be specified.");const c=new URLSearchParams;r!==void 0&&c.append("as_of",typeof r=="string"?r:r.toISOString()),l!==void 0&&c.append("tag",l);const d=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${o}/version?${c.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(d,"read dataset version"),await d.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let l;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?l=(await this.readDataset({datasetName:n})).id:l=e,pe(l);const o=new URLSearchParams,c=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return c&&o.append("as_of",c),await this._get(`/datasets/${l}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:l,remove:o=!1}){let c;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?c=(await this.readDataset({datasetName:n})).id:c=e,pe(c);const d={split_name:r,examples:l.map(h=>(pe(h),h)),remove:o},m=await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/${c}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(m,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:l,referenceExample:o}={loadChildRuns:!1}){B_("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof e=="string")c=await this.readRun(e,{loadChildRuns:l});else if(typeof e=="object"&&"id"in e)c=e;else throw new Error(`Invalid run type: ${typeof e}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(o=await this.readExample(c.reference_example_id));const d=await n.evaluateRun(c,o),[m,h]=await this._logEvaluationFeedback(d,c,r);return h[0]}async createFeedback(e,n,{score:r,value:l,correction:o,comment:c,sourceInfo:d,feedbackSourceType:m="api",sourceRunId:h,feedbackId:g,feedbackConfig:b,projectId:_,comparativeExperimentId:w}){var M;if(!e&&!_)throw new Error("One of runId or projectId must be provided");if(e&&_)throw new Error("Only one of runId or projectId can be provided");const S={type:m??"api",metadata:d??{}};h!==void 0&&(S==null?void 0:S.metadata)!==void 0&&!S.metadata.__run&&(S.metadata.__run={run_id:h}),(S==null?void 0:S.metadata)!==void 0&&((M=S.metadata.__run)==null?void 0:M.run_id)!==void 0&&pe(S.metadata.__run.run_id);const E={id:g??Tt(),run_id:e,key:n,score:Xb(r),value:l,correction:o,comment:c,feedback_source:S,comparative_experiment_id:w,feedbackConfig:b,session_id:_},x=`${this.apiUrl}/feedback`,R=await this.caller.call(ue(this.debug),x,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(E),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(R,"create feedback",!0),E}async updateFeedback(e,{score:n,value:r,correction:l,comment:o}){const c={};n!=null&&(c.score=Xb(n)),r!=null&&(c.value=r),l!=null&&(c.correction=l),o!=null&&(c.comment=o),pe(e);const d=await this.caller.call(ue(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(d,"update feedback",!0)}async readFeedback(e){pe(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){pe(e);const n=`/feedback/${e}`,r=await this.caller.call(ue(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const l=new URLSearchParams;if(e&&l.append("run",e.join(",")),n)for(const o of n)l.append("key",o);if(r)for(const o of r)l.append("source",o);for await(const o of this._getPaginated("/feedback",l))yield*o}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:l}={}){const o={run_id:e,feedback_key:n,feedback_config:l};return r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3},await(await this.caller.call(ue(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:l,description:o,metadata:c,id:d}){var g;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const m={id:d,name:e,experiment_ids:n,reference_dataset_id:r,description:o,created_at:(g=l??new Date)==null?void 0:g.toISOString(),extra:{}};return c&&(m.extra.metadata=c),await(await this.caller.call(ue(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){pe(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const l=this._selectEvalResults(e),o=[];for(const c of l){let d=r||{};c.evaluatorInfo&&(d={...c.evaluatorInfo,...d});let m=null;c.targetRunId?m=c.targetRunId:n&&(m=n.id),o.push(await this.createFeedback(m,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:d,sourceRunId:c.sourceRunId,feedbackConfig:c.feedbackConfig,feedbackSourceType:"model"}))}return[l,o]}async logEvaluationFeedback(e,n,r){const[l]=await this._logEvaluationFeedback(e,n,r);return l}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:l,limit:o}=e,c=new URLSearchParams;n&&n.forEach((m,h)=>{pe(m,`queueIds[${h}]`),c.append("ids",m)}),r&&c.append("name",r),l&&c.append("name_contains",l),c.append("limit",(o!==void 0?Math.min(o,100):100).toString());let d=0;for await(const m of this._getPaginated("/annotation-queues",c))if(yield*m,d++,o!==void 0&&d>=o)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:l,rubricInstructions:o}=e,c={name:n,description:r,id:l||Tt(),rubric_instructions:o},d=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(c).filter(([h,g])=>g!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(d,"create annotation queue"),await d.json()}async readAnnotationQueue(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(n,"read annotation queue"),await n.json()}async updateAnnotationQueue(e,n){const{name:r,description:l,rubricInstructions:o}=n,c=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:l,rubric_instructions:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((l,o)=>pe(l,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${pe(e,"queueId")}/run`,l=await this.caller.call(ue(this.debug),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(l,"get run from annotation queue"),await l.json()}async deleteRunFromAnnotationQueue(e,n){const r=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}/runs/${pe(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/annotation-queues/${pe(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(n,"get size from annotation queue"),await n.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(ue(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const l=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),o=new Error(`Error ${n.status}: ${n.statusText}
${l}`);throw o.statusCode=n.status,o}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,l,o]=Ea(e),c=await this.caller.call(ue(this.debug),`${this.apiUrl}/likes/${r}/${l}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,`${n?"like":"unlike"} prompt`),await c.json()}async _getPromptUrl(e){const[n,r,l]=Ea(e);if(await this._currentTenantIsOwner(n)){const o=await this._getSettings();return l!=="latest"?`${this.getHostUrl()}/prompts/${r}/${l.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return l!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${l.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,l=>l.repos))yield*r}async getPrompt(e){const[n,r,l]=Ea(e),o=await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await ye(o,"get prompt");const c=await o.json();return c.repo?c.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[l,o,c]=Ea(e);if(!await this._currentTenantIsOwner(l))throw await this._ownerConflictError("create a prompt",l);const d={repo_handle:o,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},m=await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(m,"create prompt");const{repo:h}=await m.json();return h}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[l,o,c]=Ea(e),d=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${l}/${o}`):r==null?void 0:r.parentCommitHash,m={manifest:JSON.parse(JSON.stringify(n)),parent_commit:d},h=await this.caller.call(ue(this.debug),`${this.apiUrl}/commits/${l}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(h,"create commit");const g=await h.json();return this._getPromptUrl(`${l}/${o}${g.commit_hash?`:${g.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var d;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const m of n){const h=m.id,g={...m.metadata&&{metadata:m.metadata},...m.split&&{split:m.split}},b=Zt(g,`Serializing body for example with id: ${h}`),_=new Blob([b],{type:"application/json"});if(r.append(h,_),m.inputs){const w=Zt(m.inputs,`Serializing inputs for example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.inputs`,S)}if(m.outputs){const w=Zt(m.outputs,`Serializing outputs whle updating example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.outputs`,S)}if(m.attachments)for(const[w,S]of Object.entries(m.attachments)){let E,x;Array.isArray(S)?[E,x]=S:(E=S.mimeType,x=S.data);const R=new Blob([x],{type:`${E}; length=${x.byteLength}`});r.append(`${h}.attachment.${w}`,R)}if(m.attachments_operations){const w=Zt(m.attachments_operations,`Serializing attachments while updating example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.attachments_operations`,S)}}const l=e??((d=n[0])==null?void 0:d.dataset_id);return await(await this.caller.call(ue(this.debug),`${this.apiUrl}/v1/platform/datasets/${l}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const c of n){const d=(c.id??Tt()).toString(),m={created_at:c.created_at,...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split},...c.source_run_id&&{source_run_id:c.source_run_id},...c.use_source_run_io&&{use_source_run_io:c.use_source_run_io},...c.use_source_run_attachments&&{use_source_run_attachments:c.use_source_run_attachments}},h=Zt(m,`Serializing body for uploaded example with id: ${d}`),g=new Blob([h],{type:"application/json"});if(r.append(d,g),c.inputs){const b=Zt(c.inputs,`Serializing inputs for uploaded example with id: ${d}`),_=new Blob([b],{type:"application/json"});r.append(`${d}.inputs`,_)}if(c.outputs){const b=Zt(c.outputs,`Serializing outputs for uploaded example with id: ${d}`),_=new Blob([b],{type:"application/json"});r.append(`${d}.outputs`,_)}if(c.attachments)for(const[b,_]of Object.entries(c.attachments)){let w,S;Array.isArray(_)?[w,S]=_:(w=_.mimeType,S=_.data);const E=new Blob([S],{type:`${w}; length=${S.byteLength}`});r.append(`${d}.attachment.${b}`,E)}}const l=await this.caller.call(ue(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r});return await ye(l,"upload examples"),await l.json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,l]=Ea(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((n==null?void 0:n.description)!==void 0&&(o.description=n.description),(n==null?void 0:n.readme)!==void 0&&(o.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(o.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(o.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(o.is_archived=n.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const c=await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/${r}/${l}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ye(c,"update prompt"),c.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,l]=Ea(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(ue(this.debug),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,l,o]=Ea(e),c=await this.caller.call(ue(this.debug),`${this.apiUrl}/commits/${r}/${l}/${o}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ye(c,"pull prompt commit");const d=await c.json();return{owner:r,repo:l,commit_hash:d.commit_hash,manifest:d.manifest,examples:d.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(l=>l!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:l}=n,[o,c]=this.parseTokenOrUrl(e,r),d=new As({apiUrl:o,apiKey:"placeholder"}),m=await d.readSharedDataset(c),h=l||m.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const g=await d.listSharedExamples(c),b=await this.createDataset(h,{description:m.description,dataType:m.data_type||"kv",inputsSchema:m.inputs_schema_definition??void 0,outputsSchema:m.outputs_schema_definition??void 0});try{await this.createExamples({inputs:g.map(_=>_.inputs),outputs:g.flatMap(_=>_.outputs?[_.outputs]:[]),datasetId:b.id})}catch(_){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),_}}parseTokenOrUrl(e,n,r=2,l="dataset"){try{return pe(e),[n,e]}catch{}try{const c=new URL(e).pathname.split("/").filter(d=>d!=="");if(c.length>=r){const d=c[c.length-r];return[n,d]}else throw new Error(`Invalid public ${l} URL: ${e}`)}catch{throw new Error(`Invalid public ${l} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}function Qb(i){return"dataset_id"in i||"dataset_name"in i}const Y_="0.3.30";var ys={};let Zn;const oO=()=>typeof window<"u"&&typeof window.document<"u",cO=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",fO=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),F_=()=>typeof Deno<"u",dO=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!F_(),hO=()=>Zn||(oO()?Zn="browser":dO()?Zn="node":cO()?Zn="webworker":fO()?Zn="jsdom":F_()?Zn="deno":Zn="other",Zn);let md;function X_(){if(md===void 0){const i=hO(),e=gO();md={library:"langsmith",runtime:i,sdk:"langsmith-js",sdk_version:Y_,...e}}return md}function mO(){const i=pO()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,l]of Object.entries(i))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof l=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=l:e[r]=l);return e}function pO(){try{return typeof process<"u"&&ys?Object.entries(ys).reduce((i,[e,n])=>(i[e]=String(n),i),{}):void 0}catch{return}}function Ra(i){try{return typeof process<"u"?ys==null?void 0:ys[i]:void 0}catch{return}}function An(i){return Ra(`LANGSMITH_${i}`)||Ra(`LANGCHAIN_${i}`)}let pd;function gO(){if(pd!==void 0)return pd;const i=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of i){const r=Ra(n);r!==void 0&&(e[n]=r)}return pd=e,e}const yO=i=>!!["TRACING_V2","TRACING"].find(n=>An(n)==="true"),gd=Symbol.for("lc:context_variables");function bO(i){return i.replace(/[-:.]/g,"")}function _O(i,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return bO(`${new Date(i).toISOString().slice(0,-1)}${r}Z`)+e}class _u{constructor(e,n,r){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r}static fromHeader(e){const n=e.split(",");let r={},l=[],o;for(const c of n){const[d,m]=c.split("="),h=decodeURIComponent(m);d==="langsmith-metadata"?r=JSON.parse(h):d==="langsmith-tags"?l=h.split(","):d==="langsmith-project"&&(o=h)}return new _u(r,l,o)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class Vt{constructor(e){var d;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Q_(e)){Object.assign(this,{...e});return}const n=Vt.getDefaultConfig(),{metadata:r,...l}=e,o=l.client??Vt.getSharedClient(),c={...r,...(d=l==null?void 0:l.extra)==null?void 0:d.metadata};if(l.extra={...l.extra,metadata:c},Object.assign(this,{...n,...l,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const m=_O(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+m:this.dotted_order=m}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:Tt(),run_type:"chain",project_name:An("PROJECT")??Ra("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:Ra("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Ra("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Vt.sharedClient||(Vt.sharedClient=new As),Vt.sharedClient}createChild(e){var m,h,g,b,_,w;const n=this.child_execution_order+1,r=new Vt({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});gd in this&&(r[gd]=this[gd]);const l=Symbol.for("lc:child_config"),o=((m=e.extra)==null?void 0:m[l])??this.extra[l];if(wO(o)){const S={...o},E=vO(S.callbacks)?(g=(h=S.callbacks).copy)==null?void 0:g.call(h):void 0;E&&(Object.assign(E,{_parentRunId:r.id}),(w=(_=(b=E.handlers)==null?void 0:b.find(J_))==null?void 0:_.updateFromRunTree)==null||w.call(_,r),S.callbacks=E),r.extra[l]=S}const c=new Set;let d=this;for(;d!=null&&!c.has(d.id);)c.add(d.id),d.child_execution_order=Math.max(d.child_execution_order,n),d=d.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),l){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,l&&Object.keys(l).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...l}}:{metadata:l})}_convertToCreate(e,n,r=!0){var m;const l=e.extra??{};if(l.runtime||(l.runtime={}),n)for(const[h,g]of Object.entries(n))l.runtime[h]||(l.runtime[h]=g);let o,c;return r?(c=(m=e.parent_run)==null?void 0:m.id,o=[]):(o=e.child_runs.map(h=>this._convertToCreate(h,n,r)),c=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:l,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:c,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const n=X_(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){B_("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const l of this.child_runs)await l.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var h,g,b,_;const r=e==null?void 0:e.callbacks;let l,o,c,d=yO();if(r){const w=((h=r==null?void 0:r.getParentRunId)==null?void 0:h.call(r))??"",S=(g=r==null?void 0:r.handlers)==null?void 0:g.find(E=>(E==null?void 0:E.name)=="langchain_tracer");l=(b=S==null?void 0:S.getRun)==null?void 0:b.call(S,w),o=S==null?void 0:S.projectName,c=S==null?void 0:S.client,d=d||!!S}return l?new Vt({name:l.name,id:l.id,trace_id:l.trace_id,dotted_order:l.dotted_order,client:c,tracingEnabled:d,project_name:o,tags:[...new Set(((l==null?void 0:l.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(_=l==null?void 0:l.extra)==null?void 0:_.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new Vt({...n,client:c,tracingEnabled:d,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var h;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,l=r["langsmith-trace"];if(!l||typeof l!="string")return;const o=l.trim(),c=o.split(".").map(g=>{const[b,_]=g.split("Z");return{strTime:b,time:Date.parse(b+"Z"),uuid:_}}),d=c[0].uuid,m={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(h=c.at(-1))==null?void 0:h.uuid,trace_id:d,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const g=_u.fromHeader(r.baggage);m.metadata=g.metadata,m.tags=g.tags,m.project_name=g.project_name}return new Vt(m)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new _u((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name).toHeader()};if(e)for(const[l,o]of Object.entries(n))e.set(l,o);return n}}Object.defineProperty(Vt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function Q_(i){return i!==void 0&&typeof i.createChild=="function"&&typeof i.postRun=="function"}function J_(i){return typeof i=="object"&&i!=null&&typeof i.name=="string"&&i.name==="langchain_tracer"}function Jb(i){return Array.isArray(i)&&i.some(e=>J_(e))}function vO(i){return typeof i=="object"&&i!=null&&Array.isArray(i.handlers)}function wO(i){var e;return i!==void 0&&typeof i.callbacks=="object"&&(Jb((e=i.callbacks)==null?void 0:e.handlers)||Jb(i.callbacks))}let SO=class{getStore(){}run(e,n){return n()}};const yd=Symbol.for("ls:tracing_async_local_storage"),EO=new SO;let OO=class{getInstance(){return globalThis[yd]??EO}initializeGlobalInstance(e){globalThis[yd]===void 0&&(globalThis[yd]=e)}};const TO=new OO;function xO(i=!1){const e=TO.getInstance().getStore();if(!i&&!Q_(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function sh(i){return typeof i=="function"&&"langsmith:traceable"in i}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const AO=Object.prototype.hasOwnProperty;function $d(i,e){return AO.call(i,e)}function Md(i){if(Array.isArray(i)){const n=new Array(i.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(i);let e=[];for(let n in i)$d(i,n)&&e.push(n);return e}function Rn(i){switch(typeof i){case"object":return JSON.parse(JSON.stringify(i));case"undefined":return null;default:return i}}function Id(i){let e=0;const n=i.length;let r;for(;e<n;){if(r=i.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Gr(i){return i.indexOf("/")===-1&&i.indexOf("~")===-1?i:i.replace(/~/g,"~0").replace(/\//g,"~1")}function RO(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}function Ud(i){if(i===void 0)return!0;if(i){if(Array.isArray(i)){for(let n=0,r=i.length;n<r;n++)if(Ud(i[n]))return!0}else if(typeof i=="object"){const n=Md(i),r=n.length;for(var e=0;e<r;e++)if(Ud(i[n[e]]))return!0}}return!1}function Kb(i,e){const n=[i];for(const r in e){const l=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof l<"u"&&n.push(`${r}: ${l}`)}return n.join(`
`)}class NO extends Error{constructor(e,n,r,l,o){super(Kb(e,{name:n,index:r,operation:l,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=Kb(e,{name:n,index:r,operation:l,tree:o})}}const et=NO,Fr={add:function(i,e,n){return i[e]=this.value,{newDocument:n}},remove:function(i,e,n){var r=i[e];return delete i[e],{newDocument:n,removed:r}},replace:function(i,e,n){var r=i[e];return i[e]=this.value,{newDocument:n,removed:r}},move:function(i,e,n){let r=Pd(n,this.path);r&&(r=Rn(r));const l=bs(n,{op:"remove",path:this.from}).removed;return bs(n,{op:"add",path:this.path,value:l}),{newDocument:n,removed:r}},copy:function(i,e,n){const r=Pd(n,this.from);return bs(n,{op:"add",path:this.path,value:Rn(r)}),{newDocument:n}},test:function(i,e,n){return{newDocument:n,test:wu(i[e],this.value)}},_get:function(i,e,n){return this.value=i[e],{newDocument:n}}};var CO={add:function(i,e,n){return Id(e)?i.splice(e,0,this.value):i[e]=this.value,{newDocument:n,index:e}},remove:function(i,e,n){var r=i.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(i,e,n){var r=i[e];return i[e]=this.value,{newDocument:n,removed:r}},move:Fr.move,copy:Fr.copy,test:Fr.test,_get:Fr._get};function Pd(i,e){if(e=="")return i;var n={op:"_get",path:e};return bs(i,n),n.value}function bs(i,e,n=!1,r=!0,l=!0,o=0){if(n&&(typeof n=="function"?n(e,0,i,e.path):zd(e,0)),e.path===""){let c={newDocument:i};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=i,c;if(e.op==="move"||e.op==="copy")return c.newDocument=Pd(i,e.from),e.op==="move"&&(c.removed=i),c;if(e.op==="test"){if(c.test=wu(i,e.value),c.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,e,i);return c.newDocument=i,c}else{if(e.op==="remove")return c.removed=i,c.newDocument=null,c;if(e.op==="_get")return e.value=i,c;if(n)throw new et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,i);return c}}else{r||(i=Rn(i));const d=(e.path||"").split("/");let m=i,h=1,g=d.length,b,_,w;for(typeof n=="function"?w=n:w=zd;;){if(_=d[h],_&&_.indexOf("~")!=-1&&(_=RO(_)),l&&(_=="__proto__"||_=="prototype"&&h>0&&d[h-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&b===void 0&&(m[_]===void 0?b=d.slice(0,h).join("/"):h==g-1&&(b=e.path),b!==void 0&&w(e,0,i,b)),h++,Array.isArray(m)){if(_==="-")_=m.length;else{if(n&&!Id(_))throw new et("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,i);Id(_)&&(_=~~_)}if(h>=g){if(n&&e.op==="add"&&_>m.length)throw new et("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,i);const S=CO[e.op].call(e,m,_,i);if(S.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,e,i);return S}}else if(h>=g){const S=Fr[e.op].call(e,m,_,i);if(S.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,e,i);return S}if(m=m[_],n&&h<g&&(!m||typeof m!="object"))throw new et("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,i)}}}function vu(i,e,n,r=!0,l=!0){if(n&&!Array.isArray(e))throw new et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(i=Rn(i));const o=new Array(e.length);for(let c=0,d=e.length;c<d;c++)o[c]=bs(i,e[c],n,!0,l,c),i=o[c].newDocument;return o.newDocument=i,o}function zd(i,e,n,r){if(typeof i!="object"||i===null||Array.isArray(i))throw new et("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,i,n);if(Fr[i.op]){if(typeof i.path!="string")throw new et("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,i,n);if(i.path.indexOf("/")!==0&&i.path.length>0)throw new et('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,i,n);if((i.op==="move"||i.op==="copy")&&typeof i.from!="string")throw new et("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,i,n);if((i.op==="add"||i.op==="replace"||i.op==="test")&&i.value===void 0)throw new et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,i,n);if((i.op==="add"||i.op==="replace"||i.op==="test")&&Ud(i.value))throw new et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,i,n);if(n){if(i.op=="add"){var l=i.path.split("/").length,o=r.split("/").length;if(l!==o+1&&l!==o)throw new et("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,i,n)}else if(i.op==="replace"||i.op==="remove"||i.op==="_get"){if(i.path!==r)throw new et("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,i,n)}else if(i.op==="move"||i.op==="copy"){var c={op:"_get",path:i.from,value:void 0},d=jO([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new et("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,i,n)}}}else throw new et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,i,n)}function jO(i,e,n){try{if(!Array.isArray(i))throw new et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)vu(Rn(e),Rn(i),n||!0);else{n=n||zd;for(var r=0;r<i.length;r++)n(i[r],r,e,void 0)}}catch(l){if(l instanceof et)return l;throw l}}function wu(i,e){if(i===e)return!0;if(i&&e&&typeof i=="object"&&typeof e=="object"){var n=Array.isArray(i),r=Array.isArray(e),l,o,c;if(n&&r){if(o=i.length,o!=e.length)return!1;for(l=o;l--!==0;)if(!wu(i[l],e[l]))return!1;return!0}if(n!=r)return!1;var d=Object.keys(i);if(o=d.length,o!==Object.keys(e).length)return!1;for(l=o;l--!==0;)if(!e.hasOwnProperty(d[l]))return!1;for(l=o;l--!==0;)if(c=d[l],!wu(i[c],e[c]))return!1;return!0}return i!==i&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function K_(i,e,n,r,l){if(e!==i){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=Md(e),c=Md(i),d=!1,m=c.length-1;m>=0;m--){var h=c[m],g=i[h];if($d(e,h)&&!(e[h]===void 0&&g!==void 0&&Array.isArray(e)===!1)){var b=e[h];typeof g=="object"&&g!=null&&typeof b=="object"&&b!=null&&Array.isArray(g)===Array.isArray(b)?K_(g,b,n,r+"/"+Gr(h),l):g!==b&&(l&&n.push({op:"test",path:r+"/"+Gr(h),value:Rn(g)}),n.push({op:"replace",path:r+"/"+Gr(h),value:Rn(b)}))}else Array.isArray(i)===Array.isArray(e)?(l&&n.push({op:"test",path:r+"/"+Gr(h),value:Rn(g)}),n.push({op:"remove",path:r+"/"+Gr(h)}),d=!0):(l&&n.push({op:"test",path:r,value:i}),n.push({op:"replace",path:r,value:e}))}if(!(!d&&o.length==c.length))for(var m=0;m<o.length;m++){var h=o[m];!$d(i,h)&&e[h]!==void 0&&n.push({op:"add",path:r+"/"+Gr(h),value:Rn(e[h])})}}}function kO(i,e,n=!1){var r=[];return K_(i,e,r,"",n),r}var bd={};const LO=()=>typeof window<"u"&&typeof window.document<"u",DO=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",$O=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),lh=()=>typeof Deno<"u",MO=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!lh(),IO=()=>{let i;return LO()?i="browser":MO()?i="node":DO()?i="webworker":$O()?i="jsdom":lh()?i="deno":i="other",i};let _d;async function UO(){return _d===void 0&&(_d={library:"langchain-js",runtime:IO()}),_d}function Qn(i){try{return typeof process<"u"?bd==null?void 0:bd[i]:lh()?Deno==null?void 0:Deno.env.get(i):void 0}catch{return}}class PO{}function zO(i){return"lc_prefer_streaming"in i&&i.lc_prefer_streaming}class $s extends PO{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,I_(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Qn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return tr.prototype.toJSON.call(this)}toJSONNotImplemented(){return tr.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends $s{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Tt()}),Object.assign(this,e)}}return new n}}const qO=i=>{const e=i;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function vd(i,e){return i&&!Array.isArray(i)&&typeof i=="object"?i:{[e]:i}}function BO(i){return i.replace(/[-:.]/g,"")}function HO(i,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return BO(`${new Date(i).toISOString().slice(0,-1)}${r}Z`)+e}function ds(i){return typeof i._addRunToRunMap=="function"}class Ms extends $s{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=HO(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const l=this.runMap.get(r.parent_run_id);l&&(this._addChildRun(l,r),l.child_execution_order=Math.max(l.child_execution_order,r.child_execution_order),r.trace_id=l.trace_id,l.dotted_order!==void 0&&(r.dotted_order=[l.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,l,o,c,d,m){const h=this._getExecutionOrder(l),g=Date.now(),b=d?{...o,metadata:d}:o,_={id:r,name:m??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{prompts:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:b??{},tags:c||[]};return this._addRunToRunMap(_)}async handleLLMStart(e,n,r,l,o,c,d,m){var g,b;const h=this.runMap.get(r)??this._createRunForLLMStart(e,n,r,l,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,h)),await((b=this.onLLMStart)==null?void 0:b.call(this,h)),h}_createRunForChatModelStart(e,n,r,l,o,c,d,m){const h=this._getExecutionOrder(l),g=Date.now(),b=d?{...o,metadata:d}:o,_={id:r,name:m??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:{messages:n},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:b??{},tags:c||[]};return this._addRunToRunMap(_)}async handleChatModelStart(e,n,r,l,o,c,d,m){var g,b;const h=this.runMap.get(r)??this._createRunForChatModelStart(e,n,r,l,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,h)),await((b=this.onLLMStart)==null?void 0:b.call(this,h)),h}async handleLLMEnd(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.outputs=e,c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleLLMError(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForChainStart(e,n,r,l,o,c,d,m){const h=this._getExecutionOrder(l),g=Date.now(),b={id:r,name:m??e.id[e.id.length-1],parent_run_id:l,start_time:g,serialized:e,events:[{name:"start",time:new Date(g).toISOString()}],inputs:n,execution_order:h,child_execution_order:h,run_type:d??"chain",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(b)}async handleChainStart(e,n,r,l,o,c,d,m){var g,b;const h=this.runMap.get(r)??this._createRunForChainStart(e,n,r,l,o,c,d,m);return await((g=this.onRunCreate)==null?void 0:g.call(this,h)),await((b=this.onChainStart)==null?void 0:b.call(this,h)),h}async handleChainEnd(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.outputs=vd(e,"output"),c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=vd(o.inputs,"input")),await((d=this.onChainEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleChainError(e,n,r,l,o){var d;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=vd(o.inputs,"input")),await((d=this.onChainError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForToolStart(e,n,r,l,o,c,d){const m=this._getExecutionOrder(l),h=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:l,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{input:n},execution_order:m,child_execution_order:m,run_type:"tool",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleToolStart(e,n,r,l,o,c,d){var h,g;const m=this.runMap.get(r)??this._createRunForToolStart(e,n,r,l,o,c,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,m)),await((g=this.onToolStart)==null?void 0:g.call(this,m)),m}async handleToolEnd(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onToolEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onToolError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var o;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const l=r;l.actions=l.actions||[],l.actions.push(e),l.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(e,n){var l;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((l=this.onAgentEnd)==null?void 0:l.call(this,r)))}_createRunForRetrieverStart(e,n,r,l,o,c,d){const m=this._getExecutionOrder(l),h=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:l,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{query:n},execution_order:m,child_execution_order:m,run_type:"retriever",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleRetrieverStart(e,n,r,l,o,c,d){var h,g;const m=this.runMap.get(r)??this._createRunForRetrieverStart(e,n,r,l,o,c,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,m)),await((g=this.onRetrieverStart)==null?void 0:g.call(this,m)),m}async handleRetrieverEnd(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverEnd)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var l;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((l=this.onRetrieverError)==null?void 0:l.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var l;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((l=this.onText)==null?void 0:l.call(this,r)))}async handleLLMNewToken(e,n,r,l,o,c){var m;const d=this.runMap.get(r);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return d.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:c==null?void 0:c.chunk}}),await((m=this.onLLMNewToken)==null?void 0:m.call(this,d,e,{chunk:c==null?void 0:c.chunk})),d}}var ou={exports:{}};ou.exports;var Wb;function GO(){return Wb||(Wb=1,function(i){const n=(o=0)=>c=>`\x1B[${38+o};5;${c}m`,r=(o=0)=>(c,d,m)=>`\x1B[${38+o};2;${c};${d};${m}m`;function l(){const o=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[d,m]of Object.entries(c)){for(const[h,g]of Object.entries(m))c[h]={open:`\x1B[${g[0]}m`,close:`\x1B[${g[1]}m`},m[h]=c[h],o.set(g[0],g[1]);Object.defineProperty(c,d,{value:m,enumerable:!1})}return Object.defineProperty(c,"codes",{value:o,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi256=n(),c.color.ansi16m=r(),c.bgColor.ansi256=n(10),c.bgColor.ansi16m=r(10),Object.defineProperties(c,{rgbToAnsi256:{value:(d,m,h)=>d===m&&m===h?d<8?16:d>248?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(m/255*5)+Math.round(h/255*5),enumerable:!1},hexToRgb:{value:d=>{const m=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(d.toString(16));if(!m)return[0,0,0];let{colorString:h}=m.groups;h.length===3&&(h=h.split("").map(b=>b+b).join(""));const g=Number.parseInt(h,16);return[g>>16&255,g>>8&255,g&255]},enumerable:!1},hexToAnsi256:{value:d=>c.rgbToAnsi256(...c.hexToRgb(d)),enumerable:!1}}),c}Object.defineProperty(i,"exports",{enumerable:!0,get:l})}(ou)),ou.exports}var ZO=GO();const W_=js(ZO);function Ot(i,e){return`${i.open}${e}${i.close}`}function sn(i,e){try{return JSON.stringify(i,null,2)}catch{return e}}function e_(i){return typeof i=="string"?i.trim():i==null?i:sn(i,i.toString())}function Oa(i){if(!i.end_time)return"";const e=i.end_time-i.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Dt}=W_;class t_ extends Ms{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const l=this.runMap.get(r.parent_run_id);if(l)n.push(l),r=l;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((l,o,c)=>{const d=`${l.execution_order}:${l.run_type}:${l.name}`;return o===c.length-1?Ot(W_.bold,d):d}).join(" > ");return Ot(Dt.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.green,"[chain/start]")} [${n}] Entering Chain run with input: ${sn(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.cyan,"[chain/end]")} [${n}] [${Oa(e)}] Exiting Chain run with output: ${sn(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.red,"[chain/error]")} [${n}] [${Oa(e)}] Chain run errored with error: ${sn(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(l=>l.trim())}:e.inputs;console.log(`${Ot(Dt.green,"[llm/start]")} [${n}] Entering LLM run with input: ${sn(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.cyan,"[llm/end]")} [${n}] [${Oa(e)}] Exiting LLM run with output: ${sn(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.red,"[llm/error]")} [${n}] [${Oa(e)}] LLM run errored with error: ${sn(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.green,"[tool/start]")} [${n}] Entering Tool run with input: "${e_(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.cyan,"[tool/end]")} [${n}] [${Oa(e)}] Exiting Tool run with output: "${e_((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.red,"[tool/error]")} [${n}] [${Oa(e)}] Tool run errored with error: ${sn(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${sn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.cyan,"[retriever/end]")} [${n}] [${Oa(e)}] Exiting Retriever run with output: ${sn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot(Dt.red,"[retriever/error]")} [${n}] [${Oa(e)}] Retriever run errored with error: ${sn(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Ot(Dt.blue,"[agent/action]")} [${r}] Agent selected action: ${sn(n.actions[n.actions.length-1],"[action]")}`)}}let wd;const VO=()=>{if(wd===void 0){const i=Qn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};wd=new As(i)}return wd};class _s extends Ms{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:l}=e;this.projectName=r??Qn("LANGCHAIN_PROJECT")??Qn("LANGCHAIN_SESSION"),this.exampleId=n,this.client=l??VO();const o=_s.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await UO()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const l=[n];for(;l.length>0;){const o=l.shift();!o||r.has(o.id)||(r.add(o.id),this.runMap.set(o.id,o),o.child_runs&&l.push(...o.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const n={},r=[];for(const[l,o]of this.runMap){const c=new Vt({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[l]=c,r.push([l,o.dotted_order])}r.sort((l,o)=>!l[1]||!o[1]?0:l[1].localeCompare(o[1]));for(const[l]of r){const o=this.runMap.get(l),c=n[l];if(!(!o||!c)&&o.parent_run_id){const d=n[o.parent_run_id];d&&(d.child_runs.push(c),c.parent_run=d)}}return n[e]}static getTraceableRunTree(){try{return xO(!0)}catch{return}}}const ev=Symbol.for("ls:tracing_async_local_storage"),cu=Symbol.for("lc:context_variables"),YO=i=>{globalThis[ev]=i},Rs=()=>globalThis[ev];let vs;function FO(){const i="default"in Xn?Xn.default:Xn;return new i({autoStart:!0,concurrency:1})}function XO(){return typeof vs>"u"&&(vs=FO()),vs}async function at(i,e){if(e===!0){const n=Rs();n!==void 0?await n.run(void 0,async()=>i()):await i()}else vs=XO(),vs.add(async()=>{const n=Rs();n!==void 0?await n.run(void 0,async()=>i()):await i()})}const QO=i=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Qn(n)==="true");function tv(i){var r;const e=Rs();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[cu])==null?void 0:r[i]}const JO=Symbol("lc:configure_hooks"),KO=()=>tv(JO)||[];class WO{setHandler(e){return this.setHandlers([e])}}class Uu{constructor(e,n,r,l,o,c,d,m){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:m})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,n,this.runId,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class eT extends Uu{getChild(e){const n=new $t(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw l}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${l}`),n.raiseError)throw e}},n.awaitHandlers)))}}class n_ extends Uu{async handleLLMNewToken(e,n,r,l,o,c){await Promise.all(this.handlers.map(d=>at(async()=>{var m;if(!d.ignoreLLM)try{await((m=d.handleLLMNewToken)==null?void 0:m.call(d,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,c))}catch(h){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMNewToken: ${h}`),d.raiseError)throw h}},d.awaitHandlers)))}async handleLLMError(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleLLMEnd(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class tT extends Uu{getChild(e){const n=new $t(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleChainEnd(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}}class nT extends Uu{getChild(e){const n=new $t(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(l){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${l}`),n.raiseError)throw l}},n.awaitHandlers)))}}class $t extends WO{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,l=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(n.map(async(h,g)=>{const b=g===0&&r?r:Tt();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return ds(_)&&_._createRunForLLMStart(e,[h],b,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w;try{await((w=_.handleLLMStart)==null?void 0:w.call(_,e,[h],b,this._parentRunId,o,this.tags,this.metadata,m))}catch(S){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${S}`),_.raiseError)throw S}},_.awaitHandlers)})),new n_(b,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,l=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(n.map(async(h,g)=>{const b=g===0&&r?r:Tt();return await Promise.all(this.handlers.map(_=>{if(!_.ignoreLLM)return ds(_)&&_._createRunForChatModelStart(e,[h],b,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w,S;try{if(_.handleChatModelStart)await((w=_.handleChatModelStart)==null?void 0:w.call(_,e,[h],b,this._parentRunId,o,this.tags,this.metadata,m));else if(_.handleLLMStart){const E=z_(h);await((S=_.handleLLMStart)==null?void 0:S.call(_,e,[E],b,this._parentRunId,o,this.tags,this.metadata,m))}}catch(E){if((_.raiseError?console.error:console.warn)(`Error in handler ${_.constructor.name}, handleLLMStart: ${E}`),_.raiseError)throw E}},_.awaitHandlers)})),new n_(b,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=Tt(),l=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreChain)return ds(m)&&m._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,l,d),at(async()=>{var h;try{await((h=m.handleChainStart)==null?void 0:h.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,l,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleChainStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new tT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=Tt(),l=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreAgent)return ds(m)&&m._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var h;try{await((h=m.handleToolStart)==null?void 0:h.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleToolStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new nT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=Tt(),l=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreRetriever)return ds(m)&&m._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var h;try{await((h=m.handleRetrieverStart)==null?void 0:h.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,d))}catch(g){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleRetrieverStart: ${g}`),m.raiseError)throw g}},m.awaitHandlers)})),new eT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,l,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreCustomEvent)try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,n,r,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new $t(this._parentRunId);for(const l of this.handlers){const o=this.inheritableHandlers.includes(l);r.addHandler(l,o)}for(const l of this.tags){const o=this.inheritableTags.includes(l);r.addTags([l],o)}for(const l of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(l);r.addMetadata({[l]:this.metadata[l]},o)}for(const l of e)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===l.name)||r.addHandler(l,n);return r}static fromHandlers(e){class n extends $s{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Tt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,l,o,c,d){return this._configureSync(e,n,r,l,o,c,d)}static _configureSync(e,n,r,l,o,c,d){var _,w;let m;(e||n)&&(Array.isArray(e)||!e?(m=new $t,m.setHandlers((e==null?void 0:e.map(Su))??[],!0)):m=e,m=m.copy(Array.isArray(n)?n.map(Su):n==null?void 0:n.handlers,!1));const h=Qn("LANGCHAIN_VERBOSE")==="true"||(d==null?void 0:d.verbose),g=((_=_s.getTraceableRunTree())==null?void 0:_.tracingEnabled)||QO(),b=g||(Qn("LANGCHAIN_TRACING")??!1);if(h||b){if(m||(m=new $t),h&&!m.handlers.some(S=>S.name===t_.prototype.name)){const S=new t_;m.addHandler(S,!0)}if(b&&!m.handlers.some(S=>S.name==="langchain_tracer")&&g){const S=new _s;m.addHandler(S,!0),m._parentRunId=((w=_s.getTraceableRunTree())==null?void 0:w.id)??m._parentRunId}}for(const{contextVar:S,inheritable:E=!0,handlerClass:x,envVar:R}of KO()){const M=R&&Qn(R)==="true"&&x;let C;const Z=S!==void 0?tv(S):void 0;Z&&qO(Z)?C=Z:M&&(C=new x({})),C!==void 0&&(m||(m=new $t),m.handlers.some(z=>z.name===C.name)||m.addHandler(C,E))}return(r||l)&&m&&(m.addTags(r??[]),m.addTags(l??[],!1)),(o||c)&&m&&(m.addMetadata(o??{}),m.addMetadata(c??{},!1)),m}}function Su(i){return"name"in i?i:$s.fromMethods(i)}class aT{getStore(){}run(e,n){return n()}enterWith(e){}}const rT=new aT,a_=Symbol.for("lc:child_config");class iT{getInstance(){return Rs()??rT}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[a_]}runWithConfig(e,n,r){var g;const l=$t._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),c=o.getStore(),d=l==null?void 0:l.getParentRunId(),m=(g=l==null?void 0:l.handlers)==null?void 0:g.find(b=>(b==null?void 0:b.name)==="langchain_tracer");let h;return m&&d?h=m.convertToRunTree(d):r||(h=new Vt({name:"<runnable_lambda>",tracingEnabled:!1})),h&&(h.extra={...h.extra,[a_]:e}),c!==void 0&&c[cu]!==void 0&&(h===void 0&&(h={}),h[cu]=c[cu]),o.run(h,n)}initializeGlobalInstance(e){Rs()===void 0&&YO(e)}}const ja=new iT,Sd=25;async function mn(i){return $t._configureSync(i==null?void 0:i.callbacks,void 0,i==null?void 0:i.tags,void 0,i==null?void 0:i.metadata)}function r_(...i){const e={};for(const n of i.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const l=e[r]??[];e[r]=[...new Set(l.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const l=e.callbacks,o=n.callbacks;if(Array.isArray(o))if(!l)e.callbacks=o;else if(Array.isArray(l))e.callbacks=l.concat(o);else{const c=l.copy();for(const d of o)c.addHandler(Su(d),!0);e.callbacks=c}else if(o)if(!l)e.callbacks=o;else if(Array.isArray(l)){const c=o.copy();for(const d of l)c.addHandler(Su(d),!0);e.callbacks=c}else e.callbacks=new $t(o._parentRunId,{handlers:l.handlers.concat(o.handlers),inheritableHandlers:l.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(l.tags.concat(o.tags))),inheritableTags:Array.from(new Set(l.inheritableTags.concat(o.inheritableTags))),metadata:{...l.metadata,...o.metadata}})}else{const l=r;e[l]=n[l]??e[l]}return e}const sT=new Set(["string","number","boolean"]);function Ne(i){var r;const e=ja.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:l,runName:o,...c}=e;n=Object.entries(c).reduce((d,[m,h])=>(h!==void 0&&(d[m]=h),d),n)}if(i&&(n=Object.entries(i).reduce((l,[o,c])=>(c!==void 0&&(l[o]=c),l),n)),n!=null&&n.configurable)for(const l of Object.keys(n.configurable))sT.has(typeof n.configurable[l])&&!((r=n.metadata)!=null&&r[l])&&(n.metadata||(n.metadata={}),n.metadata[l]=n.configurable[l]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const l=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,l])):n.signal=l,delete n.timeout}return n}function _t(i={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:l,configurable:o,runId:c}={}){const d=Ne(i);return e!==void 0&&(delete d.runName,d.callbacks=e),r!==void 0&&(d.recursionLimit=r),n!==void 0&&(d.maxConcurrency=n),l!==void 0&&(d.runName=l),o!==void 0&&(d.configurable={...d.configurable,...o}),c!==void 0&&delete d.runId,d}function ni(i){return i?{configurable:i.configurable,recursionLimit:i.recursionLimit,callbacks:i.callbacks,tags:i.tags,metadata:i.metadata,maxConcurrency:i.maxConcurrency,timeout:i.timeout,signal:i.signal}:void 0}async function ka(i,e){if(e===void 0)return i;let n;return Promise.race([i.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,l)=>{n=()=>{l(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&l(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class Ft extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new Ft({start(r){return l();function l(){return n.read().then(({done:o,value:c})=>{if(o){r.close();return}return r.enqueue(c),l()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new Ft({async pull(n){const{value:r,done:l}=await e.next();l&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function nv(i,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(l){for(;;)if(l.length===0){const o=await i.next();for(const c of n)c.push(o)}else{if(l[0].done)return;yield l.shift().value}})}function pn(i,e){if(Array.isArray(i)&&Array.isArray(e))return i.concat(e);if(typeof i=="string"&&typeof e=="string")return i+e;if(typeof i=="number"&&typeof e=="number")return i+e;if("concat"in i&&typeof i.concat=="function")return i.concat(e);if(typeof i=="object"&&typeof e=="object"){const n={...i};for(const[r,l]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=pn(n[r],l):n[r]=l;return n}else throw new Error(`Cannot concat ${typeof i} and ${typeof e}`)}class oi{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,l)=>{ja.runWithConfig(ni(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,l):this.firstResult.then(o=>r(void 0),l)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?ja.runWithConfig(ni(this.config),this.signal?async()=>ka(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function lT(i,e,n,r,...l){const o=new oi({generator:e,startSetup:n,signal:r}),c=await o.setup;return{output:i(o,c,...l),setup:c}}class xa{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=vu({},n);return new Ns({ops:n,state:r[r.length-1].newDocument})}}class Ns extends xa{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=vu(this.state,e.ops);return new Ns({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=vu({},e.ops);return new Ns({ops:e.ops,state:n[n.length-1].newDocument})}}const uT=i=>i.name==="log_stream_tracer";async function i_(i,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=i;if(["retriever","llm","prompt"].includes(i.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function s_(i,e){const{outputs:n}=i;return e==="original"||["retriever","llm","prompt"].includes(i.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function oT(i){return i!==void 0&&i.message!==void 0}class l_ extends Ms{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ft.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(l=>{var o;return(o=this.includeTags)==null?void 0:o.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(l=>{var o;return!((o=this.excludeTags)!=null&&o.includes(l))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const l=this.keyMapByRunId[e];l&&await this.writer.write(new xa({ops:[{op:"add",path:`/logs/${l}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var l;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new xa({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await i_(e,this._schemaFormat)),await this.writer.write(new xa({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await i_(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await s_(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const l=new xa({ops:r});await this.writer.write(l)}finally{if(e.id===this.rootId){const n=new xa({ops:[{op:"replace",path:"/final_output",value:await s_(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const l=this.keyMapByRunId[e.id];if(l===void 0)return;const o=e.inputs.messages!==void 0;let c;o?oT(r==null?void 0:r.chunk)?c=r==null?void 0:r.chunk:c=new ar({id:`run-${e.id}`,content:n}):c=n;const d=new xa({ops:[{op:"add",path:`/logs/${l}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${l}/streamed_output/-`,value:c}]});await this.writer.write(d)}}const u_="__run";class ai{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new ai({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class ri extends ai{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new ri({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function su({name:i,serialized:e}){return i!==void 0?i:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const cT=i=>i.name==="event_stream_tracer";class fT extends Ms{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ft.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(l=>{var o;return(o=this.includeTags)==null?void 0:o.includes(l)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(l=>{var o;return!((o=this.excludeTags)!=null&&o.includes(l))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const l=this.runInfoMap.get(e);if(l===void 0){yield r.value;return}function o(d,m){return d==="llm"&&typeof m=="string"?new ai({text:m}):m}let c=this.tappedPromises.get(e);if(c===void 0){let d;c=new Promise(m=>{d=m}),this.tappedPromises.set(e,c);try{const m={event:`on_${l.runType}_stream`,run_id:e,name:l.name,tags:l.tags,metadata:l.metadata,data:{}};await this.send({...m,data:{chunk:o(l.runType,r.value)}},l),yield r.value;for await(const h of n)l.runType!=="tool"&&l.runType!=="retriever"&&await this.send({...m,data:{chunk:o(l.runType,h)}},l),yield h}finally{d()}}else{yield r.value;for await(const d of n)yield d}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var c,d;const n=su(e),r=e.inputs.messages!==void 0?"chat_model":"llm",l={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,l);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},l)}async onLLMNewToken(e,n,r){const l=this.runInfoMap.get(e.id);let o,c;if(l===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(l.runType==="chat_model")c="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new ar({content:n,id:`run-${e.id}`}):o=r.chunk.message;else if(l.runType==="llm")c="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new ai({text:n}):o=r.chunk;else throw new Error(`Unexpected run type ${l.runType}`);await this.send({event:c,data:{chunk:o},run_id:e.id,name:l.name,tags:l.tags,metadata:l.metadata},l)}}async onLLMEnd(e){var c,d,m;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const l=(c=e.outputs)==null?void 0:c.generations;let o;if(n.runType==="chat_model"){for(const h of l??[]){if(o!==void 0)break;o=(d=h[0])==null?void 0:d.message}r="on_chat_model_end"}else if(n.runType==="llm")o={generations:l==null?void 0:l.map(h=>h.map(g=>({text:g.text,generationInfo:g.generationInfo}))),llmOutput:((m=e.outputs)==null?void 0:m.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var c,d;const n=su(e),r=e.run_type??"chain",l={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},l.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,l.inputs=e.inputs.input):(o.input=e.inputs,l.inputs=e.inputs),this.runInfoMap.set(e.id,l),await this.send({event:`on_${r}_start`,data:o,name:n,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},l)}async onChainEnd(e){var d;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,l=e.inputs??n.inputs??{},c={output:((d=e.outputs)==null?void 0:d.output)??e.outputs,input:l};l.input&&Object.keys(l).length===1&&(c.input=l.input,n.inputs=l.input),await this.sendEndEvent({event:r,data:c,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var l,o;const n=su(e),r={tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(e){var l;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((l=e.outputs)==null?void 0:l.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var o,c;const n=su(e),l={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,l),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},l)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const l=this.runInfoMap.get(r);if(l===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:l.tags,metadata:l.metadata,data:n},l)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const dT=[400,401,402,403,404,405,406,407,409],hT=i=>{var n,r;if(i.message.startsWith("Cancel")||i.message.startsWith("AbortError")||i.name==="AbortError"||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const e=((n=i==null?void 0:i.response)==null?void 0:n.status)??(i==null?void 0:i.status);if(e&&dT.includes(+e))throw i;if(((r=i==null?void 0:i.error)==null?void 0:r.code)==="insufficient_quota"){const l=new Error(i==null?void 0:i.message);throw l.name="InsufficientQuotaError",l}};class uh{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??hT;const n="default"in Xn?Xn.default:Xn;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>yu(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((l,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class av extends Ms{constructor({config:e,onStart:n,onEnd:r,onError:l}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=l}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function oh(i){return i?i.lc_runnable:!1}class mT{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const l=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||l.some(o=>{var c;return(c=this.includeTags)==null?void 0:c.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&l.every(o=>{var c;return!((c=this.excludeTags)!=null&&c.includes(o))})),r}}function Ed(i){return i.replace(/[^a-zA-Z-_0-9]/g,"_")}const pT=["*","_","`"];function gT(i){let e="";for(const[n,r]of Object.entries(i))e+=`	classDef ${n} ${r};
`;return e}function yT(i,e,n){const{firstNode:r,lastNode:l,nodeColors:o,withStyles:c=!0,curveStyle:d="linear",wrapLabelNWords:m=9}=n??{};let h=c?`%%{init: {'flowchart': {'curve': '${d}'}}}%%
graph TD;
`:`graph TD;
`;if(c){const w="default",S={[w]:"{0}({1})"};r!==void 0&&(S[r]="{0}([{1}]):::first"),l!==void 0&&(S[l]="{0}([{1}]):::last");for(const[E,x]of Object.entries(i)){const R=x.name.split(":").pop()??"";let C=pT.some(z=>R.startsWith(z)&&R.endsWith(z))?`<p>${R}</p>`:R;Object.keys(x.metadata??{}).length&&(C+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([z,K])=>`${z} = ${K}`).join(`
`)}</em></small>`);const Z=(S[E]??S[w]).replace("{0}",Ed(E)).replace("{1}",C);h+=`	${Z}
`}}const g={};for(const w of e){const S=w.source.split(":"),E=w.target.split(":"),x=S.filter((R,M)=>R===E[M]).join(":");g[x]||(g[x]=[]),g[x].push(w)}const b=new Set;function _(w,S){const E=w.length===1&&w[0].source===w[0].target;if(S&&!E){const x=S.split(":").pop();if(b.has(x))throw new Error(`Found duplicate subgraph '${x}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);b.add(x),h+=`	subgraph ${x}
`}for(const x of w){const{source:R,target:M,data:C,conditional:Z}=x;let z="";if(C!==void 0){let K=C;const ae=K.split(" ");ae.length>m&&(K=Array.from({length:Math.ceil(ae.length/m)},(W,Be)=>ae.slice(Be*m,(Be+1)*m).join(" ")).join("&nbsp;<br>&nbsp;")),z=Z?` -. &nbsp;${K}&nbsp; .-> `:` -- &nbsp;${K}&nbsp; --> `}else z=Z?" -.-> ":" --> ";h+=`	${Ed(R)}${z}${Ed(M)};
`}for(const x in g)x.startsWith(`${S}:`)&&x!==S&&_(g[x],x);S&&!E&&(h+=`	end
`)}_(g[""]??[],"");for(const w in g)!w.includes(":")&&w!==""&&_(g[w],w);return c&&(h+=gT(o??{})),h}async function bT(i,e){let{backgroundColor:n="white"}=e??{};const r=btoa(i);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const l=`https://mermaid.ink/img/${r}?bgColor=${n}`,o=await fetch(l);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function _T(i,e){if(i!==void 0&&!gs(i))return i;if(oh(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function vT(i){return oh(i.data)?{type:"runnable",data:{id:i.data.lc_id,name:i.data.getName()}}:{type:"schema",data:{...Ls(i.data.schema),title:i.data.name}}}class Pu{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=gs(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...vT(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const l=n??Tt(),o={id:l,data:e,name:_T(n,e),metadata:r};return this.nodes[l]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,l){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const o={source:e.id,target:n.id,data:r,conditional:l};return this.edges.push(o),o}firstNode(){return o_(this)}lastNode(){return c_(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(h=>h.id).every(gs)&&(r="");const o=h=>r?`${r}:${h}`:h;Object.entries(e.nodes).forEach(([h,g])=>{this.nodes[o(h)]={...g,id:o(h)}});const c=e.edges.map(h=>({...h,source:o(h.source),target:o(h.target)}));this.edges=[...this.edges,...c];const d=e.firstNode(),m=e.lastNode();return[d?{id:o(d.id),data:d.data}:void 0,m?{id:o(m.id),data:m.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&o_(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&c_(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(l=>[l.id,l.name])),n=new Map;Object.values(e).forEach(l=>{n.set(l,(n.get(l)||0)+1)});const r=l=>{const o=e[l];return gs(l)&&n.get(o)===1?o:l};return new Pu({nodes:Object.fromEntries(Object.entries(this.nodes).map(([l,o])=>[r(l),{...o,id:r(l)}])),edges:this.edges.map(l=>({...l,source:r(l.source),target:r(l.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:l={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},c=this.reid(),d=c.firstNode(),m=c.lastNode();return yT(c.nodes,c.edges,{firstNode:d==null?void 0:d.id,lastNode:m==null?void 0:m.id,withStyles:n,curveStyle:r,nodeColors:l,wrapLabelNWords:o})}async drawMermaidPng(e){const n=this.drawMermaid(e);return bT(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function o_(i,e=[]){const n=new Set(i.edges.filter(l=>!e.includes(l.source)).map(l=>l.target)),r=[];for(const l of Object.values(i.nodes))!e.includes(l.id)&&!n.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function c_(i,e=[]){const n=new Set(i.edges.filter(l=>!e.includes(l.target)).map(l=>l.source)),r=[];for(const l of Object.values(i.nodes))!e.includes(l.id)&&!n.has(l.id)&&r.push(l);return r.length===1?r[0]:void 0}function wT(i){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const l of i)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(l)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Ft.fromReadableStream(n)}function f_(i){return typeof i=="object"&&i!==null&&typeof i[Symbol.iterator]=="function"&&typeof i.next=="function"}const ST=i=>i!=null&&typeof i=="object"&&"next"in i&&typeof i.next=="function";function qd(i){return typeof i=="object"&&i!==null&&typeof i[Symbol.asyncIterator]=="function"}function*d_(i,e){for(;;){const{value:n,done:r}=ja.runWithConfig(ni(i),e.next.bind(e),!0);if(r)break;yield n}}async function*Bd(i,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:l}=await ja.runWithConfig(ni(i),n.next.bind(e),!0);if(l)break;yield r}}function ct(i,e){return i&&!Array.isArray(i)&&!(i instanceof Date)&&typeof i=="object"?i:{[e]:i}}class ft extends tr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new Wa({bound:this,kwargs:e,config:{}})}map(){return new Eu({bound:this})}withRetry(e){return new rv({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Wa({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new OT({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Ne);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([l])=>l!=="runId"));return Array.from({length:n},(l,o)=>Ne(o===0?e:r))}return Array.from({length:n},()=>Ne(e))}async batch(e,n,r){var m;const l=this._getOptionsList(n??{},e.length),o=((m=l[0])==null?void 0:m.maxConcurrency)??(r==null?void 0:r.maxConcurrency),c=new uh({maxConcurrency:o,onFailedAttempt:h=>{throw h}}),d=e.map((h,g)=>c.call(async()=>{try{return await this.invoke(h,l[g])}catch(b){if(r!=null&&r.returnExceptions)return b;throw b}}));return Promise.all(d)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Ne(n),l=new oi({generator:this._streamIterator(e,r),config:r});return await l.setup,Ft.fromAsyncGenerator(l)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Ne(e):n=Ne({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const l=Ne(r),o=await mn(l),c=await(o==null?void 0:o.handleChainStart(this.toJSON(),ct(n,"input"),l.runId,l==null?void 0:l.runType,void 0,void 0,(l==null?void 0:l.runName)??this.getName()));delete l.runId;let d;try{const m=e.call(this,n,l,c);d=await ka(m,r==null?void 0:r.signal)}catch(m){throw await(c==null?void 0:c.handleChainError(m)),m}return await(c==null?void 0:c.handleChainEnd(ct(d,"output"))),d}async _batchWithConfig(e,n,r,l){var h;const o=this._getOptionsList(r??{},n.length),c=await Promise.all(o.map(mn)),d=await Promise.all(c.map(async(g,b)=>{const _=await(g==null?void 0:g.handleChainStart(this.toJSON(),ct(n[b],"input"),o[b].runId,o[b].runType,void 0,void 0,o[b].runName??this.getName()));return delete o[b].runId,_}));let m;try{const g=e.call(this,n,o,d,l);m=await ka(g,(h=o==null?void 0:o[0])==null?void 0:h.signal)}catch(g){throw await Promise.all(d.map(b=>b==null?void 0:b.handleChainError(g))),g}return await Promise.all(d.map(g=>g==null?void 0:g.handleChainEnd(ct(m,"output")))),m}async*_transformStreamWithConfig(e,n,r){let l,o=!0,c,d=!0;const m=Ne(r),h=await mn(m);async function*g(){for await(const _ of e){if(o)if(l===void 0)l=_;else try{l=pn(l,_)}catch{l=void 0,o=!1}yield _}}let b;try{const _=await lT(n.bind(this),g(),async()=>h==null?void 0:h.handleChainStart(this.toJSON(),{input:""},m.runId,m.runType,void 0,void 0,m.runName??this.getName()),r==null?void 0:r.signal,m);delete m.runId,b=_.setup;const w=b==null?void 0:b.handlers.find(cT);let S=_.output;w!==void 0&&b!==void 0&&(S=w.tapOutputIterable(b.runId,S));const E=b==null?void 0:b.handlers.find(uT);E!==void 0&&b!==void 0&&(S=E.tapOutputIterable(b.runId,S));for await(const x of S)if(yield x,d)if(c===void 0)c=x;else try{c=pn(c,x)}catch{c=void 0,d=!1}}catch(_){throw await(b==null?void 0:b.handleChainError(_,void 0,void 0,void 0,{inputs:ct(l,"input")})),_}await(b==null?void 0:b.handleChainEnd(c??{},void 0,void 0,void 0,{inputs:ct(l,"input")}))}getGraph(e){const n=new Pu,r=n.addNode({name:`${this.getName()}Input`,schema:ky()}),l=n.addNode(this),o=n.addNode({name:`${this.getName()}Output`,schema:ky()});return n.addEdge(r,l),n.addEdge(l,o),n}pipe(e){return new Yn({first:this,last:Ka(e)})}pick(e){return this.pipe(new TT(e))}assign(e){return this.pipe(new iv(new ci({steps:e})))}async*transform(e,n){let r;for await(const l of e)r===void 0?r=l:r=pn(r,l);yield*this._streamIterator(r,Ne(n))}async*streamLog(e,n,r){const l=new l_({...r,autoClose:!1,_schemaFormat:"original"}),o=Ne(n);yield*this._streamLog(e,l,o)}async*_streamLog(e,n,r){const{callbacks:l}=r;if(l===void 0)r.callbacks=[n];else if(Array.isArray(l))r.callbacks=l.concat([n]);else{const m=l.copy();m.addHandler(n,!0),r.callbacks=m}const o=this.stream(e,r);async function c(){try{const m=await o;for await(const h of m){const g=new xa({ops:[{op:"add",path:"/streamed_output/-",value:h}]});await n.writer.write(g)}}finally{await n.writer.close()}}const d=c();try{for await(const m of n)yield m}finally{await d}}streamEvents(e,n,r){let l;if(n.version==="v1")l=this._streamEventsV1(e,n,r);else if(n.version==="v2")l=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?wT(l):Ft.fromAsyncGenerator(l)}async*_streamEventsV2(e,n,r){var S;const l=new fT({...r,autoClose:!1}),o=Ne(n),c=o.runId??Tt();o.runId=c;const d=o.callbacks;if(d===void 0)o.callbacks=[l];else if(Array.isArray(d))o.callbacks=d.concat(l);else{const E=d.copy();E.addHandler(l,!0),o.callbacks=E}const m=new AbortController,h=this;async function g(){try{let E;n!=null&&n.signal?"any"in AbortSignal?E=AbortSignal.any([m.signal,n.signal]):(E=n.signal,n.signal.addEventListener("abort",()=>{m.abort()},{once:!0})):E=m.signal;const x=await h.stream(e,{...o,signal:E}),R=l.tapOutputIterable(c,x);for await(const M of R)if(m.signal.aborted)break}finally{await l.finish()}}const b=g();let _=!1,w;try{for await(const E of l){if(!_){E.data.input=e,_=!0,w=E.run_id,yield E;continue}E.run_id===w&&E.event.endsWith("_end")&&(S=E.data)!=null&&S.input&&delete E.data.input,yield E}}finally{m.abort(),await b}}async*_streamEventsV1(e,n,r){let l,o=!1;const c=Ne(n),d=c.tags??[],m=c.metadata??{},h=c.runName??this.getName(),g=new l_({...r,autoClose:!1,_schemaFormat:"streaming_events"}),b=new mT({...r}),_=this._streamLog(e,g,c);for await(const S of _){if(l?l=l.concat(S):l=Ns.fromRunLogPatch(S),l.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const M={...l.state},C={run_id:M.id,event:`on_${M.type}_start`,name:h,tags:d,metadata:m,data:{input:e}};b.includeEvent(C,M.type)&&(yield C)}const E=S.ops.filter(M=>M.path.startsWith("/logs/")).map(M=>M.path.split("/")[2]),x=[...new Set(E)];for(const M of x){let C,Z={};const z=l.state.logs[M];if(z.end_time===void 0?z.streamed_output.length>0?C="stream":C="start":C="end",C==="start")z.inputs!==void 0&&(Z.input=z.inputs);else if(C==="end")z.inputs!==void 0&&(Z.input=z.inputs),Z.output=z.final_output;else if(C==="stream"){const K=z.streamed_output.length;if(K!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${K} instead. Encountered in: "${z.name}"`);Z={chunk:z.streamed_output[0]},z.streamed_output=[]}yield{event:`on_${z.type}_${C}`,name:z.name,run_id:z.id,tags:z.tags,metadata:z.metadata,data:Z}}const{state:R}=l;if(R.streamed_output.length>0){const M=R.streamed_output.length;if(M!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${M} instead. Encountered in: "${R.name}"`);const C={chunk:R.streamed_output[0]};R.streamed_output=[];const Z={event:`on_${R.type}_stream`,run_id:R.id,tags:d,metadata:m,name:h,data:C};b.includeEvent(Z,R.type)&&(yield Z)}}const w=l==null?void 0:l.state;if(w!==void 0){const S={event:`on_${w.type}_end`,name:h,run_id:w.id,tags:d,metadata:m,data:{output:w.final_output}};b.includeEvent(S,w.type)&&(yield S)}}static isRunnable(e){return oh(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new Wa({bound:this,config:{},configFactories:[l=>({callbacks:[new av({config:l,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return xT(this,e)}}class Wa extends ft{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=r_(this.config,...e);return r_(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new rv({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(Ne(n),this.kwargs))}async batch(e,n,r){const l=Array.isArray(n)?await Promise.all(n.map(async o=>this._mergeConfig(Ne(o),this.kwargs))):await this._mergeConfig(Ne(n),this.kwargs);return this.bound.batch(e,l,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(Ne(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(Ne(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(Ne(n),this.kwargs))}streamEvents(e,n,r){const l=this,o=async function*(){yield*l.bound.streamEvents(e,{...await l._mergeConfig(Ne(n),l.kwargs),version:n.version},r)};return Ft.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&ft.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new Wa({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[l=>({callbacks:[new av({config:l,onStart:e,onEnd:n,onError:r})]})]})}}class Eu extends ft{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Eu({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,_t(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new Eu({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class rv extends Wa{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const l=e>1?`retry:attempt:${e}`:void 0;return _t(n,{callbacks:r==null?void 0:r.getChild(l)})}async _invoke(e,n,r){return yu(l=>super.invoke(e,this._patchConfigForRetry(l,n,r)),{onFailedAttempt:l=>this.onFailedAttempt(l,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,l){const o={};try{await yu(async c=>{const d=e.map((_,w)=>w).filter(_=>o[_.toString()]===void 0||o[_.toString()]instanceof Error),m=d.map(_=>e[_]),h=d.map(_=>this._patchConfigForRetry(c,n==null?void 0:n[_],r==null?void 0:r[_])),g=await super.batch(m,h,{...l,returnExceptions:!0});let b;for(let _=0;_<g.length;_+=1){const w=g[_],S=d[_];w instanceof Error&&b===void 0&&(b=w,b.input=m[_]),o[S.toString()]=w}if(b)throw b;return g},{onFailedAttempt:c=>this.onFailedAttempt(c,c.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(c){if((l==null?void 0:l.returnExceptions)!==!0)throw c}return Object.keys(o).sort((c,d)=>parseInt(c,10)-parseInt(d,10)).map(c=>o[parseInt(c,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class Yn extends ft{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var m;const r=Ne(n),l=await mn(r),o=await(l==null?void 0:l.handleChainStart(this.toJSON(),ct(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let c=e,d;try{const h=[this.first,...this.middle];for(let g=0;g<h.length;g+=1){const _=h[g].invoke(c,_t(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${g+1}`)}));c=await ka(_,n==null?void 0:n.signal)}if((m=n==null?void 0:n.signal)!=null&&m.aborted)throw new Error("Aborted");d=await this.last.invoke(c,_t(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}return await(o==null?void 0:o.handleChainEnd(ct(d,"output"))),d}async batch(e,n,r){var m;const l=this._getOptionsList(n??{},e.length),o=await Promise.all(l.map(mn)),c=await Promise.all(o.map(async(h,g)=>{const b=await(h==null?void 0:h.handleChainStart(this.toJSON(),ct(e[g],"input"),l[g].runId,void 0,void 0,void 0,l[g].runName));return delete l[g].runId,b}));let d=e;try{for(let h=0;h<this.steps.length;h+=1){const b=this.steps[h].batch(d,c.map((_,w)=>{const S=_==null?void 0:_.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`);return _t(l[w],{callbacks:S})}),r);d=await ka(b,(m=l[0])==null?void 0:m.signal)}}catch(h){throw await Promise.all(c.map(g=>g==null?void 0:g.handleChainError(h))),h}return await Promise.all(c.map(h=>h==null?void 0:h.handleChainEnd(ct(d,"output")))),d}async*_streamIterator(e,n){var b;const r=await mn(n),{runId:l,...o}=n??{},c=await(r==null?void 0:r.handleChainStart(this.toJSON(),ct(e,"input"),l,void 0,void 0,void 0,o==null?void 0:o.runName)),d=[this.first,...this.middle,this.last];let m=!0,h;async function*g(){yield e}try{let _=d[0].transform(g(),_t(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let w=1;w<d.length;w+=1)_=await d[w].transform(_,_t(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${w+1}`)}));for await(const w of _)if((b=n==null?void 0:n.signal)==null||b.throwIfAborted(),yield w,m)if(h===void 0)h=w;else try{h=pn(h,w)}catch{h=void 0,m=!1}}catch(_){throw await(c==null?void 0:c.handleChainError(_)),_}await(c==null?void 0:c.handleChainEnd(ct(h,"output")))}getGraph(e){const n=new Pu;let r=null;return this.steps.forEach((l,o)=>{const c=l.getGraph(e);o!==0&&c.trimFirstNode(),o!==this.steps.length-1&&c.trimLastNode(),n.extend(c);const d=c.firstNode();if(!d)throw new Error(`Runnable ${l} has no first node`);r&&n.addEdge(r,d),r=c.lastNode()}),n}pipe(e){return Yn.isRunnableSequence(e)?new Yn({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new Yn({first:this.first,middle:[...this.middle,this.last],last:Ka(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&ft.isRunnable(e)}static from([e,...n],r){let l={};return typeof r=="string"?l.name=r:r!==void 0&&(l=r),new Yn({...l,first:Ka(e),middle:n.slice(0,-1).map(Ka),last:Ka(n[n.length-1])})}}class ci extends ft{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Ka(r)}static from(e){return new ci({steps:e})}async invoke(e,n){const r=Ne(n),l=await mn(r),o=await(l==null?void 0:l.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const c={};try{const d=Object.entries(this.steps).map(async([m,h])=>{c[m]=await h.invoke(e,_t(r,{callbacks:o==null?void 0:o.getChild(`map:key:${m}`)}))});await ka(Promise.all(d),n==null?void 0:n.signal)}catch(d){throw await(o==null?void 0:o.handleChainError(d)),d}return await(o==null?void 0:o.handleChainEnd(c)),c}async*_transform(e,n,r){const l={...this.steps},o=nv(e,Object.keys(l).length),c=new Map(Object.entries(l).map(([d,m],h)=>{const g=m.transform(o[h],_t(r,{callbacks:n==null?void 0:n.getChild(`map:key:${d}`)}));return[d,g.next().then(b=>({key:d,gen:g,result:b}))]}));for(;c.size;){const d=Promise.race(c.values()),{key:m,result:h,gen:g}=await ka(d,r==null?void 0:r.signal);c.delete(m),h.done||(yield{[m]:h.value},c.set(m,g.next().then(b=>({key:m,gen:g,result:b}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new oi({generator:this.transform(r(),l),config:l});return await o.setup,Ft.fromAsyncGenerator(o)}}class ch extends ft{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!sh(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),l=await mn(r),o=this.func(_t(r,{callbacks:l}),e);return ka(o,r==null?void 0:r.signal)}async*_streamIterator(e,n){var o,c;const[r]=this._getOptionsList(n??{},1),l=await this.invoke(e,n);if(qd(l)){for await(const d of l)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield d;return}if(ST(l)){for(;;){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const d=l.next();if(d.done)break;yield d.value}return}yield l}static from(e){return new ch({func:e})}}function ET(i){if(sh(i))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class Is extends ft{static lc_name(){return"RunnableLambda"}constructor(e){if(sh(e.func))return ch.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ET(e.func),this.func=e.func}static from(e){return new Is({func:e})}async _invoke(e,n,r){return new Promise((l,o)=>{const c=_t(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??Sd)-1});ja.runWithConfig(ni(c),async()=>{var d,m;try{let h=await this.func(e,{...c});if(h&&ft.isRunnable(h)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");h=await h.invoke(e,{...c,recursionLimit:(c.recursionLimit??Sd)-1})}else if(qd(h)){let g;for await(const b of Bd(c,h))if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),g===void 0)g=b;else try{g=pn(g,b)}catch{g=b}h=g}else if(f_(h)){let g;for(const b of d_(c,h))if((m=n==null?void 0:n.signal)==null||m.throwIfAborted(),g===void 0)g=b;else try{g=pn(g,b)}catch{g=b}h=g}l(h)}catch(h){o(h)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var d,m;let l;for await(const h of e)if(l===void 0)l=h;else try{l=pn(l,h)}catch{l=h}const o=_t(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??Sd)-1}),c=await new Promise((h,g)=>{ja.runWithConfig(ni(o),async()=>{try{const b=await this.func(l,{...o,config:o});h(b)}catch(b){g(b)}})});if(c&&ft.isRunnable(c)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const h=await c.stream(l,o);for await(const g of h)yield g}else if(qd(c))for await(const h of Bd(o,c))(d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield h;else if(f_(c))for(const h of d_(o,c))(m=r==null?void 0:r.signal)==null||m.throwIfAborted(),yield h;else yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new oi({generator:this.transform(r(),l),config:l});return await o.setup,Ft.fromAsyncGenerator(o)}}class OT extends ft{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=Ne(n),l=await mn(r),{runId:o,...c}=r,d=await(l==null?void 0:l.handleChainStart(this.toJSON(),ct(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName)),m=_t(c,{callbacks:d==null?void 0:d.getChild()});return await ja.runWithConfig(m,async()=>{var b;let g;for(const _ of this.runnables()){(b=r==null?void 0:r.signal)==null||b.throwIfAborted();try{const w=await _.invoke(e,m);return await(d==null?void 0:d.handleChainEnd(ct(w,"output"))),w}catch(w){g===void 0&&(g=w)}}throw g===void 0?new Error("No error stored at end of fallback."):(await(d==null?void 0:d.handleChainError(g)),g)})}async*_streamIterator(e,n){var b;const r=Ne(n),l=await mn(r),{runId:o,...c}=r,d=await(l==null?void 0:l.handleChainStart(this.toJSON(),ct(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName));let m,h;for(const _ of this.runnables()){(b=r==null?void 0:r.signal)==null||b.throwIfAborted();const w=_t(c,{callbacks:d==null?void 0:d.getChild()});try{const S=await _.stream(e,w);h=Bd(w,S);break}catch(S){m===void 0&&(m=S)}}if(h===void 0){const _=m??new Error("No error stored at end of fallback.");throw await(d==null?void 0:d.handleChainError(_)),_}let g;try{for await(const _ of h){yield _;try{g=g===void 0?g:pn(g,_)}catch{g=void 0}}}catch(_){throw await(d==null?void 0:d.handleChainError(_)),_}await(d==null?void 0:d.handleChainEnd(ct(g,"output")))}async batch(e,n,r){var m;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const l=this._getOptionsList(n??{},e.length),o=await Promise.all(l.map(h=>mn(h))),c=await Promise.all(o.map(async(h,g)=>{const b=await(h==null?void 0:h.handleChainStart(this.toJSON(),ct(e[g],"input"),l[g].runId,void 0,void 0,void 0,l[g].runName));return delete l[g].runId,b}));let d;for(const h of this.runnables()){(m=l[0].signal)==null||m.throwIfAborted();try{const g=await h.batch(e,c.map((b,_)=>_t(l[_],{callbacks:b==null?void 0:b.getChild()})),r);return await Promise.all(c.map((b,_)=>b==null?void 0:b.handleChainEnd(ct(g[_],"output")))),g}catch(g){d===void 0&&(d=g)}}throw d?(await Promise.all(c.map(h=>h==null?void 0:h.handleChainError(d))),d):new Error("No error stored at end of fallbacks.")}}function Ka(i){if(typeof i=="function")return new Is({func:i});if(ft.isRunnable(i))return i;if(!Array.isArray(i)&&typeof i=="object"){const e={};for(const[n,r]of Object.entries(i))e[n]=Ka(r);return new ci({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class iv extends ft{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof ci&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const l=this.mapper.getStepsKeys(),[o,c]=nv(e),d=this.mapper.transform(c,_t(r,{callbacks:n==null?void 0:n.getChild()})),m=d.next();for await(const h of o){if(typeof h!="object"||Array.isArray(h))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof h}`);const g=Object.fromEntries(Object.entries(h).filter(([b])=>!l.includes(b)));Object.keys(g).length>0&&(yield g)}yield(await m).value;for await(const h of d)yield h}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new oi({generator:this.transform(r(),l),config:l});return await o.setup,Ft.fromAsyncGenerator(o)}}class TT extends ft{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const l=Ne(n),o=new oi({generator:this.transform(r(),l),config:l});return await o.setup,Ft.fromAsyncGenerator(o)}}class h_ extends Wa{constructor(e){const n=Yn.from([Is.from(async r=>{let l;if(P_(r))try{l=await this.schema.parseAsync(r.args)}catch{throw new t1("Received tool input did not match expected schema",JSON.stringify(r.args))}else l=r;return l}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function xT(i,e){var l;const n=e.name??i.getName(),r=e.description??((l=e.schema)==null?void 0:l.description);return e.schema.constructor===Vn?new h_({name:n,description:r,schema:ks({input:Tu()}).transform(o=>o.input),bound:i}):new h_({name:n,description:r,schema:e.schema,bound:i})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var AT=typeof window=="object"?window:{},be="0123456789abcdef".split(""),RT=[-2147483648,8388608,32768,128],hn=[24,16,8,0],ot=[];function yn(i){i?(ot[0]=ot[16]=ot[1]=ot[2]=ot[3]=ot[4]=ot[5]=ot[6]=ot[7]=ot[8]=ot[9]=ot[10]=ot[11]=ot[12]=ot[13]=ot[14]=ot[15]=0,this.blocks=ot):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}yn.prototype.update=function(i){if(!this.finalized){var e=typeof i!="string";e&&i.constructor===AT.ArrayBuffer&&(i=new Uint8Array(i));for(var n,r=0,l,o=i.length||0,c=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(l=this.start;r<o&&l<64;++r)c[l>>2]|=i[r]<<hn[l++&3];else for(l=this.start;r<o&&l<64;++r)n=i.charCodeAt(r),n<128?c[l>>2]|=n<<hn[l++&3]:n<2048?(c[l>>2]|=(192|n>>6)<<hn[l++&3],c[l>>2]|=(128|n&63)<<hn[l++&3]):n<55296||n>=57344?(c[l>>2]|=(224|n>>12)<<hn[l++&3],c[l>>2]|=(128|n>>6&63)<<hn[l++&3],c[l>>2]|=(128|n&63)<<hn[l++&3]):(n=65536+((n&1023)<<10|i.charCodeAt(++r)&1023),c[l>>2]|=(240|n>>18)<<hn[l++&3],c[l>>2]|=(128|n>>12&63)<<hn[l++&3],c[l>>2]|=(128|n>>6&63)<<hn[l++&3],c[l>>2]|=(128|n&63)<<hn[l++&3]);this.lastByteIndex=l,this.bytes+=l-this.start,l>=64?(this.block=c[16],this.start=l-64,this.hash(),this.hashed=!0):this.start=l}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};yn.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,e=this.lastByteIndex;i[16]=this.block,i[e>>2]|=RT[e&3],this.block=i[16],e>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}};yn.prototype.hash=function(){var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4,o,c,d,m=this.blocks;for(c=16;c<80;++c)d=m[c-3]^m[c-8]^m[c-14]^m[c-16],m[c]=d<<1|d>>>31;for(c=0;c<20;c+=5)o=e&n|~e&r,d=i<<5|i>>>27,l=d+o+l+1518500249+m[c]<<0,e=e<<30|e>>>2,o=i&e|~i&n,d=l<<5|l>>>27,r=d+o+r+1518500249+m[c+1]<<0,i=i<<30|i>>>2,o=l&i|~l&e,d=r<<5|r>>>27,n=d+o+n+1518500249+m[c+2]<<0,l=l<<30|l>>>2,o=r&l|~r&i,d=n<<5|n>>>27,e=d+o+e+1518500249+m[c+3]<<0,r=r<<30|r>>>2,o=n&r|~n&l,d=e<<5|e>>>27,i=d+o+i+1518500249+m[c+4]<<0,n=n<<30|n>>>2;for(;c<40;c+=5)o=e^n^r,d=i<<5|i>>>27,l=d+o+l+1859775393+m[c]<<0,e=e<<30|e>>>2,o=i^e^n,d=l<<5|l>>>27,r=d+o+r+1859775393+m[c+1]<<0,i=i<<30|i>>>2,o=l^i^e,d=r<<5|r>>>27,n=d+o+n+1859775393+m[c+2]<<0,l=l<<30|l>>>2,o=r^l^i,d=n<<5|n>>>27,e=d+o+e+1859775393+m[c+3]<<0,r=r<<30|r>>>2,o=n^r^l,d=e<<5|e>>>27,i=d+o+i+1859775393+m[c+4]<<0,n=n<<30|n>>>2;for(;c<60;c+=5)o=e&n|e&r|n&r,d=i<<5|i>>>27,l=d+o+l-1894007588+m[c]<<0,e=e<<30|e>>>2,o=i&e|i&n|e&n,d=l<<5|l>>>27,r=d+o+r-1894007588+m[c+1]<<0,i=i<<30|i>>>2,o=l&i|l&e|i&e,d=r<<5|r>>>27,n=d+o+n-1894007588+m[c+2]<<0,l=l<<30|l>>>2,o=r&l|r&i|l&i,d=n<<5|n>>>27,e=d+o+e-1894007588+m[c+3]<<0,r=r<<30|r>>>2,o=n&r|n&l|r&l,d=e<<5|e>>>27,i=d+o+i-1894007588+m[c+4]<<0,n=n<<30|n>>>2;for(;c<80;c+=5)o=e^n^r,d=i<<5|i>>>27,l=d+o+l-899497514+m[c]<<0,e=e<<30|e>>>2,o=i^e^n,d=l<<5|l>>>27,r=d+o+r-899497514+m[c+1]<<0,i=i<<30|i>>>2,o=l^i^e,d=r<<5|r>>>27,n=d+o+n-899497514+m[c+2]<<0,l=l<<30|l>>>2,o=r^l^i,d=n<<5|n>>>27,e=d+o+e-899497514+m[c+3]<<0,r=r<<30|r>>>2,o=n^r^l,d=e<<5|e>>>27,i=d+o+i-899497514+m[c+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+l<<0};yn.prototype.hex=function(){this.finalize();var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4;return be[i>>28&15]+be[i>>24&15]+be[i>>20&15]+be[i>>16&15]+be[i>>12&15]+be[i>>8&15]+be[i>>4&15]+be[i&15]+be[e>>28&15]+be[e>>24&15]+be[e>>20&15]+be[e>>16&15]+be[e>>12&15]+be[e>>8&15]+be[e>>4&15]+be[e&15]+be[n>>28&15]+be[n>>24&15]+be[n>>20&15]+be[n>>16&15]+be[n>>12&15]+be[n>>8&15]+be[n>>4&15]+be[n&15]+be[r>>28&15]+be[r>>24&15]+be[r>>20&15]+be[r>>16&15]+be[r>>12&15]+be[r>>8&15]+be[r>>4&15]+be[r&15]+be[l>>28&15]+be[l>>24&15]+be[l>>20&15]+be[l>>16&15]+be[l>>12&15]+be[l>>8&15]+be[l>>4&15]+be[l&15]};yn.prototype.toString=yn.prototype.hex;yn.prototype.digest=function(){this.finalize();var i=this.h0,e=this.h1,n=this.h2,r=this.h3,l=this.h4;return[i>>24&255,i>>16&255,i>>8&255,i&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,l>>24&255,l>>16&255,l>>8&255,l&255]};yn.prototype.array=yn.prototype.digest;yn.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(20),e=new DataView(i);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),i};const NT=i=>new yn(!0).update(i).hex(),m_=(...i)=>NT(i.join("_"));class CT{}const jT=new Map;class fh extends CT{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(m_(e,n))??null)}async update(e,n,r){this.cache.set(m_(e,n),r)}static global(){return new fh(jT)}}class sv extends tr{}class kT extends sv{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new ju(this.value)]}}class LT extends sv{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return z_(this.messages)}toChatMessages(){return this.messages}}var hs={},p_;function DT(){if(p_)return hs;p_=1,hs.byteLength=d,hs.toByteArray=h,hs.fromByteArray=_;for(var i=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,o=r.length;l<o;++l)i[l]=r[l],e[r.charCodeAt(l)]=l;e[45]=62,e[95]=63;function c(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=w.indexOf("=");E===-1&&(E=S);var x=E===S?0:4-E%4;return[E,x]}function d(w){var S=c(w),E=S[0],x=S[1];return(E+x)*3/4-x}function m(w,S,E){return(S+E)*3/4-E}function h(w){var S,E=c(w),x=E[0],R=E[1],M=new n(m(w,x,R)),C=0,Z=R>0?x-4:x,z;for(z=0;z<Z;z+=4)S=e[w.charCodeAt(z)]<<18|e[w.charCodeAt(z+1)]<<12|e[w.charCodeAt(z+2)]<<6|e[w.charCodeAt(z+3)],M[C++]=S>>16&255,M[C++]=S>>8&255,M[C++]=S&255;return R===2&&(S=e[w.charCodeAt(z)]<<2|e[w.charCodeAt(z+1)]>>4,M[C++]=S&255),R===1&&(S=e[w.charCodeAt(z)]<<10|e[w.charCodeAt(z+1)]<<4|e[w.charCodeAt(z+2)]>>2,M[C++]=S>>8&255,M[C++]=S&255),M}function g(w){return i[w>>18&63]+i[w>>12&63]+i[w>>6&63]+i[w&63]}function b(w,S,E){for(var x,R=[],M=S;M<E;M+=3)x=(w[M]<<16&16711680)+(w[M+1]<<8&65280)+(w[M+2]&255),R.push(g(x));return R.join("")}function _(w){for(var S,E=w.length,x=E%3,R=[],M=16383,C=0,Z=E-x;C<Z;C+=M)R.push(b(w,C,C+M>Z?Z:C+M));return x===1?(S=w[E-1],R.push(i[S>>2]+i[S<<4&63]+"==")):x===2&&(S=(w[E-2]<<8)+w[E-1],R.push(i[S>>10]+i[S>>4&63]+i[S<<2&63]+"=")),R.join("")}return hs}var $T=DT();const MT=js($T);var IT=Object.defineProperty,UT=(i,e,n)=>e in i?IT(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,PT=(i,e,n)=>(UT(i,e+"",n),n);function zT(i,e){let n=Array.from({length:i.length},(r,l)=>({start:l,end:l+1}));for(;n.length>1;){let r=null;for(let l=0;l<n.length-1;l++){const o=i.slice(n[l].start,n[l+1].end),c=e.get(o.join(","));c!=null&&(r==null||c<r[0])&&(r=[c,l])}if(r!=null){const l=r[1];n[l]={start:n[l].start,end:n[l+1].end},n.splice(l+1,1)}else break}return n}function qT(i,e){return i.length===1?[e.get(i.join(","))]:zT(i,e).map(n=>e.get(i.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function BT(i){return i.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Hd=class{constructor(i,e){Sa(this,"specialTokens");Sa(this,"inverseSpecialTokens");Sa(this,"patStr");Sa(this,"textEncoder",new TextEncoder);Sa(this,"textDecoder",new TextDecoder("utf-8"));Sa(this,"rankMap",new Map);Sa(this,"textMap",new Map);this.patStr=i.pat_str;const n=i.bpe_ranks.split(`
`).filter(Boolean).reduce((r,l)=>{const[o,c,...d]=l.split(" "),m=Number.parseInt(c,10);return d.forEach((h,g)=>r[h]=m+g),r},{});for(const[r,l]of Object.entries(n)){const o=MT.toByteArray(r);this.rankMap.set(o.join(","),l),this.textMap.set(l,o)}this.specialTokens={...i.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[l,o])=>(r[o]=this.textEncoder.encode(l),r),{})}encode(i,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),l=Hd.specialTokenRegex(Object.keys(this.specialTokens)),o=[],c=new Set(e==="all"?Object.keys(this.specialTokens):e),d=new Set(n==="all"?Object.keys(this.specialTokens).filter(h=>!c.has(h)):n);if(d.size>0){const h=Hd.specialTokenRegex([...d]),g=i.match(h);if(g!=null)throw new Error(`The text contains a special token that is not allowed: ${g[0]}`)}let m=0;for(;;){let h=null,g=m;for(;l.lastIndex=g,h=l.exec(i),!(h==null||c.has(h[0]));)g=h.index+1;const b=(h==null?void 0:h.index)??i.length;for(const w of i.substring(m,b).matchAll(r)){const S=this.textEncoder.encode(w[0]),E=this.rankMap.get(S.join(","));if(E!=null){o.push(E);continue}o.push(...qT(S,this.rankMap))}if(h==null)break;let _=this.specialTokens[h[0]];o.push(_),m=h.index+h[0].length}return o}decode(i){const e=[];let n=0;for(let o=0;o<i.length;++o){const c=i[o],d=this.textMap.get(c)??this.inverseSpecialTokens[c];d!=null&&(e.push(d),n+=d.length)}const r=new Uint8Array(n);let l=0;for(const o of e)r.set(o,l),l+=o.length;return this.textDecoder.decode(r)}},lv=Hd;PT(lv,"specialTokenRegex",i=>new RegExp(i.map(e=>BT(e)).join("|"),"g"));function HT(i){switch(i){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}const lu={},GT=new uh({});async function ZT(i){return i in lu||(lu[i]=GT.fetch(`https://tiktoken.pages.dev/js/${i}.json`).then(e=>e.json()).then(e=>new lv(e)).catch(e=>{throw delete lu[i],e})),await lu[i]}async function VT(i){return ZT(HT(i))}const YT=i=>i.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":i.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":i.startsWith("gpt-4-32k")?"gpt-4-32k":i.startsWith("gpt-4-")?"gpt-4":i.startsWith("gpt-4o")?"gpt-4o":i,FT=()=>!1;class XT extends ft{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??FT(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class QT extends XT{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){const{cache:l,...o}=r;super({callbacks:e??n,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof l=="object"?this.cache=l:l?this.cache=fh.global():this.cache=void 0,this.caller=new uh(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await VT("modelName"in this?YT(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new kT(e):Array.isArray(e)?new LT(e.map(ps)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([c,d])=>d!==void 0).map(([c,d])=>`${c}:${JSON.stringify(d)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Ou extends ft{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,n){const r=Ne(n);return this.func&&await this.func(e,r),this._callWithConfig(l=>Promise.resolve(l),e,r)}async*transform(e,n){const r=Ne(n);let l,o=!0;for await(const c of this._transformStreamWithConfig(e,d=>d,r))if(yield c,o)if(l===void 0)l=c;else try{l=pn(l,c)}catch{l=void 0,o=!1}this.func&&l!==void 0&&await this.func(l,r)}static assign(e){return new iv(new ci({steps:e}))}}function Cs(i){var r;if(!i||typeof i!="object"||Array.isArray(i))return!1;const e=i;return e._def||Object.values(Q).includes(((r=e.constructor)==null?void 0:r.name)??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}function Od(i){const e=[];for(const n of i){let r=n;if(Array.isArray(n.content))for(let l=0;l<n.content.length;l++){const o=n.content[l];(ZE(o)||VE(o))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,l),YE(o),...n.content.slice(l+1)]}))}e.push(r)}return e}class Aa extends QT{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async invoke(e,n){const r=Aa._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}async*_streamIterator(e,n){var r;if(this._streamResponseChunks===Aa.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,n);else{const o=Aa._convertInputToPromptValue(e).toChatMessages(),[c,d]=this._separateRunnableConfigFromCallOptionsCompat(n),m={...c.metadata,...this.getLsParams(d)},h=await $t.configure(c.callbacks,this.callbacks,c.tags,this.tags,m,this.metadata,{verbose:this.verbose}),g={options:d,invocation_params:this==null?void 0:this.invocationParams(d),batch_size:1},b=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),[Od(o)],c.runId,void 0,g,void 0,void 0,c.runName));let _,w;try{for await(const S of this._streamResponseChunks(o,d,b==null?void 0:b[0])){if(S.message.id==null){const E=(r=b==null?void 0:b.at(0))==null?void 0:r.runId;E!=null&&S.message._updateId(`run-${E}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata},yield S.message,_?_=_.concat(S):_=S,Py(S.message)&&S.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}}catch(S){throw await Promise.all((b??[]).map(E=>E==null?void 0:E.handleLLMError(S))),S}await Promise.all((b??[]).map(S=>S==null?void 0:S.handleLLMEnd({generations:[[_]],llmOutput:w})))}}getLsParams(e){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:n}}async _generateUncached(e,n,r,l){var b,_;const o=e.map(w=>w.map(ps));let c;if(l!==void 0&&l.length===o.length)c=l;else{const w={...r.metadata,...this.getLsParams(n)},S=await $t.configure(r.callbacks,this.callbacks,r.tags,this.tags,w,this.metadata,{verbose:this.verbose}),E={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1};c=await(S==null?void 0:S.handleChatModelStart(this.toJSON(),o.map(Od),r.runId,void 0,E,void 0,void 0,r.runName))}const d=[],m=[];if(!!(c!=null&&c[0].handlers.find(zO))&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==Aa.prototype._streamResponseChunks)try{const w=await this._streamResponseChunks(o[0],n,c==null?void 0:c[0]);let S,E;for await(const x of w){if(x.message.id==null){const R=(b=c==null?void 0:c.at(0))==null?void 0:b.runId;R!=null&&x.message._updateId(`run-${R}`)}S===void 0?S=x:S=pn(S,x),Py(x.message)&&x.message.usage_metadata!==void 0&&(E={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}if(S===void 0)throw new Error("Received empty response from chat model call.");d.push([S]),await(c==null?void 0:c[0].handleLLMEnd({generations:d,llmOutput:E}))}catch(w){throw await(c==null?void 0:c[0].handleLLMError(w)),w}else{const w=await Promise.allSettled(o.map((S,E)=>this._generate(S,{...n,promptIndex:E},c==null?void 0:c[E])));await Promise.all(w.map(async(S,E)=>{var x,R,M;if(S.status==="fulfilled"){const C=S.value;for(const Z of C.generations){if(Z.message.id==null){const z=(x=c==null?void 0:c.at(0))==null?void 0:x.runId;z!=null&&Z.message._updateId(`run-${z}`)}Z.message.response_metadata={...Z.generationInfo,...Z.message.response_metadata}}return C.generations.length===1&&(C.generations[0].message.response_metadata={...C.llmOutput,...C.generations[0].message.response_metadata}),d[E]=C.generations,m[E]=C.llmOutput,(R=c==null?void 0:c[E])==null?void 0:R.handleLLMEnd({generations:[C.generations],llmOutput:C.llmOutput})}else return await((M=c==null?void 0:c[E])==null?void 0:M.handleLLMError(S.reason)),Promise.reject(S.reason)}))}const g={generations:d,llmOutput:m.length?(_=this._combineLLMOutput)==null?void 0:_.call(this,...m):void 0};return Object.defineProperty(g,u_,{value:c?{runIds:c==null?void 0:c.map(w=>w.runId)}:void 0,configurable:!0}),g}async _generateCached({messages:e,cache:n,llmStringKey:r,parsedOptions:l,handledOptions:o}){const c=e.map(x=>x.map(ps)),d={...o.metadata,...this.getLsParams(l)},m=await $t.configure(o.callbacks,this.callbacks,o.tags,this.tags,d,this.metadata,{verbose:this.verbose}),h={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},g=await(m==null?void 0:m.handleChatModelStart(this.toJSON(),c.map(Od),o.runId,void 0,h,void 0,void 0,o.runName)),b=[],w=(await Promise.allSettled(c.map(async(x,R)=>{const M=Aa._convertInputToPromptValue(x).toString(),C=await n.lookup(M,r);return C==null&&b.push(R),C}))).map((x,R)=>({result:x,runManager:g==null?void 0:g[R]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),S=[];await Promise.all(w.map(async({result:x,runManager:R},M)=>{if(x.status==="fulfilled"){const C=x.value;return S[M]=C.map(Z=>("message"in Z&&Au(Z.message)&&Wd(Z.message)&&(Z.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),Z.generationInfo={...Z.generationInfo,tokenUsage:{}},Z)),C.length&&await(R==null?void 0:R.handleLLMNewToken(C[0].text)),R==null?void 0:R.handleLLMEnd({generations:[C]},void 0,void 0,void 0,{cached:!0})}else return await(R==null?void 0:R.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(x.reason)}));const E={generations:S,missingPromptIndices:b,startedRunManagers:g};return Object.defineProperty(E,u_,{value:g?{runIds:g==null?void 0:g.map(x=>x.runId)}:void 0,configurable:!0}),E}async generate(e,n,r){let l;Array.isArray(n)?l={stop:n}:l=n;const o=e.map(S=>S.map(ps)),[c,d]=this._separateRunnableConfigFromCallOptionsCompat(l);if(c.callbacks=c.callbacks??r,!this.cache)return this._generateUncached(o,d,c);const{cache:m}=this,h=this._getSerializedCacheKeyParametersForCall(d),{generations:g,missingPromptIndices:b,startedRunManagers:_}=await this._generateCached({messages:o,cache:m,llmStringKey:h,parsedOptions:d,handledOptions:c});let w={};if(b.length>0){const S=await this._generateUncached(b.map(E=>o[E]),d,c,_!==void 0?b.map(E=>_==null?void 0:_[E]):void 0);await Promise.all(S.generations.map(async(E,x)=>{const R=b[x];g[R]=E;const M=Aa._convertInputToPromptValue(o[R]).toString();return m.update(M,h,E)})),w=S.llmOutput??{}}return{generations:g,llmOutput:w}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,n,r){const l=e.map(o=>o.toChatMessages());return this.generate(l,n,r)}async call(e,n,r){return(await this.generate([e.map(ps)],n,r)).generations[0][0].message}async callPrompt(e,n,r){const l=e.toChatMessages();return this.call(l,n,r)}async predictMessages(e,n,r){return this.call(e,n,r)}async predict(e,n,r){const l=new ju(e),o=await this.call([l],n,r);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content}withStructuredOutput(e,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,l=n==null?void 0:n.name,o=r.description??"A function available to call.",c=n==null?void 0:n.method,d=n==null?void 0:n.includeRaw;if(c==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let m=l??"extract",h;Cs(r)?h=[{type:"function",function:{name:m,description:o,parameters:Ls(r)}}]:("name"in r&&(m=r.name),h=[{type:"function",function:{name:m,description:o,parameters:r}}]);const g=this.bindTools(h),b=Is.from(E=>{if(!E.tool_calls||E.tool_calls.length===0)throw new Error("No tool calls found in the response.");const x=E.tool_calls.find(R=>R.name===m);if(!x)throw new Error(`No tool call found with name ${m}.`);return x.args});if(!d)return g.pipe(b).withConfig({runName:"StructuredOutput"});const _=Ou.assign({parsed:(E,x)=>b.invoke(E.raw,x)}),w=Ou.assign({parsed:()=>null}),S=_.withFallbacks({fallbacks:[w]});return Yn.from([{raw:g},S]).withConfig({runName:"StructuredOutputRunnable"})}}const Vr="0.19.0";let g_=!1,ws,uv,ov,Gd,cv,fv,dv,hv,mv;function JT(i,e={auto:!1}){if(g_)throw new Error(`you must \`import 'groq-sdk/shims/${i.kind}'\` before importing anything else from groq-sdk`);if(ws)throw new Error(`can't \`import 'groq-sdk/shims/${i.kind}'\` after \`import 'groq-sdk/shims/${ws}'\``);g_=e.auto,ws=i.kind,uv=i.fetch,ov=i.FormData,Gd=i.File,cv=i.ReadableStream,fv=i.getMultipartRequestOptions,dv=i.getDefaultAgent,hv=i.fileFromPath,mv=i.isFsReadStream}class KT{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function WT({manuallyImported:i}={}){const e=i?"You may need to use polyfills":"Add one of these imports before your first `import … from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,r,l,o;try{n=fetch,r=Request,l=Response,o=Headers}catch(c){throw new Error(`this environment is missing the following Web Fetch API type: ${c.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:l,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(c,d)=>({...d,body:new KT(c)}),getDefaultAgent:c=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:c=>!1}}const pv=()=>{ws||JT(WT(),{auto:!0})};pv();class gn extends Error{}class vt extends gn{constructor(e,n,r,l){super(`${vt.makeMessage(e,n,r)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,r){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,r,l){if(!e||!l)return new zu({message:r,cause:Yd(n)});const o=n;return e===400?new yv(e,o,r,l):e===401?new bv(e,o,r,l):e===403?new _v(e,o,r,l):e===404?new vv(e,o,r,l):e===409?new wv(e,o,r,l):e===422?new Sv(e,o,r,l):e===429?new Ev(e,o,r,l):e>=500?new Ov(e,o,r,l):new vt(e,o,r,l)}}class Zd extends vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class zu extends vt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class gv extends zu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class yv extends vt{}class bv extends vt{}class _v extends vt{}class vv extends vt{}class wv extends vt{}class Sv extends vt{}class Ev extends vt{}class Ov extends vt{}class Xr{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;const l=new ex;async function*o(){if(!e.body)throw n.abort(),new gn("Attempted to iterate over a response with no body");const d=new nr,m=y_(e.body);for await(const h of m)for(const g of d.decode(h)){const b=l.decode(g);b&&(yield b)}for(const h of d.flush()){const g=l.decode(h);g&&(yield g)}}async function*c(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let d=!1;try{for await(const m of o())if(!d){if(m.data.startsWith("[DONE]")){d=!0;continue}if(m.event===null||m.event==="error"){let h;try{h=JSON.parse(m.data)}catch(g){throw console.error("Could not parse message into JSON:",m.data),console.error("From chunk:",m.raw),g}if(h&&h.error)throw new vt(h.error.status_code,h.error,h.error.message,void 0);yield h}}d=!0}catch(m){if(m instanceof Error&&m.name==="AbortError")return;throw m}finally{d||n.abort()}}return new Xr(c,n)}static fromReadableStream(e,n){let r=!1;async function*l(){const c=new nr,d=y_(e);for await(const m of d)for(const h of c.decode(m))yield h;for(const m of c.flush())yield m}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of l())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{c||n.abort()}}return new Xr(o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),l=o=>({next:()=>{if(o.length===0){const c=r.next();e.push(c),n.push(c)}return o.shift()}});return[new Xr(()=>l(e),this.controller),new Xr(()=>l(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new cv({async start(){n=e[Symbol.asyncIterator]()},async pull(l){try{const{value:o,done:c}=await n.next();if(c)return l.close();const d=r.encode(JSON.stringify(o)+`
`);l.enqueue(d)}catch(o){l.error(o)}},async cancel(){var l;await((l=n.return)==null?void 0:l.call(n))}})}}class ex{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,l]=tx(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}class nr{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=nr.NEWLINE_CHARS.has(n[n.length-1]||"");let l=n.split(nr.NEWLINE_REGEXP);return l.length===1&&!r?(this.buffer.push(l[0]),[]):(this.buffer.length>0&&(l=[this.buffer.join("")+l[0],...l.slice(1)],this.buffer=[]),r||(this.buffer=[l.pop()||""]),l)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new gn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new gn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new gn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}nr.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);nr.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function tx(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}function y_(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Tv=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function",xv=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&qu(i),qu=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",nx=i=>xv(i)||Tv(i)||mv(i);async function Av(i,e,n){var l;if(i=await i,xv(i))return i;if(Tv(i)){const o=await i.blob();e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()??"unknown_file");const c=qu(o)?[await o.arrayBuffer()]:[o];return new Gd(c,e,n)}const r=await ax(i);if(e||(e=ix(i)??"unknown_file"),!(n!=null&&n.type)){const o=(l=r[0])==null?void 0:l.type;typeof o=="string"&&(n={...n,type:o})}return new Gd(r,e,n)}async function ax(i){var n;let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(qu(i))e.push(await i.arrayBuffer());else if(sx(i))for await(const r of i)e.push(r);else throw new Error(`Unexpected data type: ${typeof i}; constructor: ${(n=i==null?void 0:i.constructor)==null?void 0:n.name}; props: ${rx(i)}`);return e}function rx(i){return`[${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}function ix(i){var e;return Td(i.name)||Td(i.filename)||((e=Td(i.path))==null?void 0:e.split(/[\\/]/).pop())}const Td=i=>{if(typeof i=="string")return i;if(typeof Buffer<"u"&&i instanceof Buffer)return String(i)},sx=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",b_=i=>i&&typeof i=="object"&&i.body&&i[Symbol.toStringTag]==="MultipartBody",dh=async i=>{const e=await lx(i.body);return fv(e,i)},lx=async i=>{const e=new ov;return await Promise.all(Object.entries(i||{}).map(([n,r])=>Vd(e,n,r))),e},Vd=async(i,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")i.append(e,String(n));else if(nx(n)){const r=await Av(n);i.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Vd(i,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,l])=>Vd(i,`${e}[${r}]`,l)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Qr={};pv();async function Rv(i){var c;const{response:e}=i;if(i.options.stream)return Jr("response",e.status,e.url,e.headers,e.body),i.options.__streamClass?i.options.__streamClass.fromSSEResponse(e,i.controller):Xr.fromSSEResponse(e,i.controller);if(e.status===204)return null;if(i.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(c=n==null?void 0:n.split(";")[0])==null?void 0:c.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const d=await e.json();return Jr("response",e.status,e.url,e.headers,d),d}const o=await e.text();return Jr("response",e.status,e.url,e.headers,o),o}class Bu extends Promise{constructor(e,n=Rv){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Bu(this.responsePromise,async n=>e(await this.parseResponse(n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ux{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e4,httpAgent:l,fetch:o}){this.baseURL=e,this.maxRetries=xd("maxRetries",n),this.timeout=xd("timeout",r),this.httpAgent=l,this.fetch=o??uv}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...hx(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${vx()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async l=>{const o=l&&qu(l==null?void 0:l.body)?new DataView(await l.body.arrayBuffer()):(l==null?void 0:l.body)instanceof DataView?l.body:(l==null?void 0:l.body)instanceof ArrayBuffer?new DataView(l.body):l&&ArrayBuffer.isView(l==null?void 0:l.body)?new DataView(l.body.buffer):l==null?void 0:l.body;return{method:e,path:n,...l,body:o}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var S;e={...e};const{method:r,path:l,query:o,headers:c={}}=e,d=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:b_(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,m=this.calculateContentLength(d),h=this.buildURL(l,o);"timeout"in e&&xd("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const g=e.httpAgent??this.httpAgent??dv(h),b=e.timeout+1e3;typeof((S=g==null?void 0:g.options)==null?void 0:S.timeout)=="number"&&b>(g.options.timeout??0)&&(g.options.timeout=b),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const _=this.buildHeaders({options:e,headers:c,contentLength:m,retryCount:n});return{req:{method:r,...d&&{body:d},headers:_,...g&&{agent:g},signal:e.signal??null},url:h,timeout:e.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:l}){const o={};r&&(o["content-length"]=r);const c=this.defaultHeaders(e);return E_(o,c),E_(o,n),b_(e.body)&&ws!=="node"&&delete o["content-type"],uu(c,"x-stainless-retry-count")===void 0&&uu(n,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(l)),uu(c,"x-stainless-timeout")===void 0&&uu(n,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(o,n),o}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,l){return vt.generate(e,n,r,l)}request(e,n=null){return new Bu(this.makeRequest(e,n))}async makeRequest(e,n){var b,_;const r=await e,l=r.maxRetries??this.maxRetries;n==null&&(n=l),await this.prepareOptions(r);const{req:o,url:c,timeout:d}=this.buildRequest(r,{retryCount:l-n});if(await this.prepareRequest(o,{url:c,options:r}),Jr("request",c,r,o.headers),(b=r.signal)!=null&&b.aborted)throw new Zd;const m=new AbortController,h=await this.fetchWithTimeout(c,o,d,m).catch(Yd);if(h instanceof Error){if((_=r.signal)!=null&&_.aborted)throw new Zd;if(n)return this.retryRequest(r,n);throw h.name==="AbortError"?new gv:new zu({cause:h})}const g=cx(h.headers);if(!h.ok){if(n&&this.shouldRetry(h)){const M=`retrying, ${n} attempts remaining`;return Jr(`response (error; ${M})`,h.status,c,g),this.retryRequest(r,n,g)}const w=await h.text().catch(M=>Yd(M).message),S=mx(w),E=S?void 0:w;throw Jr(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,h.status,c,g,E),this.makeStatusError(h.status,S,E,g)}return{response:h,options:r,controller:m}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new ox(this,r,e)}buildURL(e,n){const r=gx(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return bx(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new gn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,l){const{signal:o,...c}=n||{};o&&o.addEventListener("abort",()=>l.abort());const d=setTimeout(()=>l.abort(),r),m={signal:l.signal,...c};return m.method&&(m.method=m.method.toUpperCase()),this.fetch.call(void 0,e,m).finally(()=>{clearTimeout(d)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let l;const o=r==null?void 0:r["retry-after-ms"];if(o){const d=parseFloat(o);Number.isNaN(d)||(l=d)}const c=r==null?void 0:r["retry-after"];if(c&&!l){const d=parseFloat(c);Number.isNaN(d)?l=Date.parse(c)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=e.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await yx(l),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,c=Math.min(.5*Math.pow(2,o),8),d=1-Math.random()*.25;return c*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Vr}`}}class ox extends Bu{constructor(e,n,r){super(n,async l=>new r(e,l.response,await Rv(l),l.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const cx=i=>new Proxy(Object.fromEntries(i.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),fx=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vr,"X-Stainless-OS":v_(Deno.build.os),"X-Stainless-Arch":__(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vr,"X-Stainless-OS":v_(process.platform),"X-Stainless-Arch":__(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const i=dx();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function dx(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const r=n.exec(navigator.userAgent);if(r){const l=r[1]||0,o=r[2]||0,c=r[3]||0;return{browser:e,version:`${l}.${o}.${c}`}}}return null}const __=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",v_=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let w_;const hx=()=>w_??(w_=fx()),mx=i=>{try{return JSON.parse(i)}catch{return}},px=/^[a-z][a-z0-9+.-]*:/i,gx=i=>px.test(i),yx=i=>new Promise(e=>setTimeout(e,i)),xd=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gn(`${i} must be an integer`);if(e<0)throw new gn(`${i} must be a positive integer`);return e},Yd=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null)try{return new Error(JSON.stringify(i))}catch{}return new Error(i)},S_=i=>{var e,n,r,l;if(typeof process<"u")return((e=Qr==null?void 0:Qr[i])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(l=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,i))==null?void 0:l.trim()};function bx(i){if(!i)return!0;for(const e in i)return!1;return!0}function _x(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function E_(i,e){for(const n in e){if(!_x(e,n))continue;const r=n.toLowerCase();if(!r)continue;const l=e[n];l===null?delete i[r]:l!==void 0&&(i[r]=l)}}function Jr(i,...e){typeof process<"u"&&(Qr==null?void 0:Qr.DEBUG)==="true"&&console.log(`Groq:DEBUG:${i}`,...e)}const vx=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)}),wx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Sx=i=>typeof(i==null?void 0:i.get)=="function",uu=(i,e)=>{var r;const n=e.toLowerCase();if(Sx(i)){const l=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(o,c,d)=>c+d.toUpperCase());for(const o of[e,n,e.toUpperCase(),l]){const c=i.get(o);if(c)return c}}for(const[l,o]of Object.entries(i))if(l.toLowerCase()===n)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o};class vn{constructor(e){this._client=e}}class Nv extends vn{create(e,n){return this._client.post("/openai/v1/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Cv extends vn{create(e,n){return this._client.post("/openai/v1/audio/transcriptions",dh({body:e,...n}))}}class jv extends vn{create(e,n){return this._client.post("/openai/v1/audio/translations",dh({body:e,...n}))}}class Us extends vn{constructor(){super(...arguments),this.speech=new Nv(this._client),this.transcriptions=new Cv(this._client),this.translations=new jv(this._client)}}Us.Speech=Nv;Us.Transcriptions=Cv;Us.Translations=jv;class kv extends vn{create(e,n){return this._client.post("/openai/v1/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/openai/v1/batches/${e}`,n)}list(e){return this._client.get("/openai/v1/batches",e)}cancel(e,n){return this._client.post(`/openai/v1/batches/${e}/cancel`,n)}}let Lv=class extends vn{create(e,n){return this._client.post("/openai/v1/chat/completions",{body:e,...n,stream:e.stream??!1})}};class hh extends vn{constructor(){super(...arguments),this.completions=new Lv(this._client)}}hh.Completions=Lv;class Dv extends vn{}class $v extends vn{create(e,n){return this._client.post("/openai/v1/embeddings",{body:e,...n})}}class Mv extends vn{create(e,n){return this._client.post("/openai/v1/files",dh({body:e,...n}))}list(e){return this._client.get("/openai/v1/files",e)}delete(e,n){return this._client.delete(`/openai/v1/files/${e}`,n)}content(e,n){return this._client.get(`/openai/v1/files/${e}/content`,n)}info(e,n){return this._client.get(`/openai/v1/files/${e}`,n)}}class Iv extends vn{retrieve(e,n){return this._client.get(`/openai/v1/models/${e}`,n)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,n){return this._client.delete(`/openai/v1/models/${e}`,n)}}var Uv;class qe extends ux{constructor({baseURL:e=S_("GROQ_BASE_URL"),apiKey:n=S_("GROQ_API_KEY"),...r}={}){if(n===void 0)throw new gn("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const l={apiKey:n,...r,baseURL:e||"https://api.groq.com"};if(!l.dangerouslyAllowBrowser&&wx())throw new gn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:l.baseURL,timeout:l.timeout??6e4,httpAgent:l.httpAgent,maxRetries:l.maxRetries,fetch:l.fetch}),this.completions=new Dv(this),this.chat=new hh(this),this.embeddings=new $v(this),this.audio=new Us(this),this.models=new Iv(this),this.batches=new kv(this),this.files=new Mv(this),this._options=l,this.apiKey=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}Uv=qe;qe.Groq=Uv;qe.DEFAULT_TIMEOUT=6e4;qe.GroqError=gn;qe.APIError=vt;qe.APIConnectionError=zu;qe.APIConnectionTimeoutError=gv;qe.APIUserAbortError=Zd;qe.NotFoundError=vv;qe.ConflictError=wv;qe.RateLimitError=Ev;qe.BadRequestError=yv;qe.AuthenticationError=bv;qe.InternalServerError=Ov;qe.PermissionDeniedError=_v;qe.UnprocessableEntityError=Sv;qe.toFile=Av;qe.fileFromPath=hv;qe.Completions=Dv;qe.Chat=hh;qe.Embeddings=$v;qe.Audio=Us;qe.Models=Iv;qe.Batches=kv;qe.Files=Mv;class Ex extends ft{parseResultWithPrompt(e,n,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,n){return typeof e=="string"?this._callWithConfig(async(r,l)=>this.parseResult([{text:r}],l==null?void 0:l.callbacks),e,{...n,runType:"parser"}):this._callWithConfig(async(r,l)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],l==null?void 0:l.callbacks),e,{...n,runType:"parser"})}}class Pv extends Ex{parseResult(e,n){return this.parse(e[0].text,n)}async parseWithPrompt(e,n,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class mh extends Error{constructor(e,n,r,l=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=n,this.observation=r,this.sendToLLM=l,l&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");U_(this,"OUTPUT_PARSING_FAILURE")}}function Fd(i,e){const n=typeof i;if(n!==typeof e)return!1;if(Array.isArray(i)){if(!Array.isArray(e))return!1;const r=i.length;if(r!==e.length)return!1;for(let l=0;l<r;l++)if(!Fd(i[l],e[l]))return!1;return!0}if(n==="object"){if(!i||!e)return i===e;const r=Object.keys(i),l=Object.keys(e);if(r.length!==l.length)return!1;for(const c of r)if(!Fd(i[c],e[c]))return!1;return!0}return i===e}class Ox extends Pv{async*_transform(e){for await(const n of e)typeof n=="string"?yield this.parseResult([{text:n}]):yield this.parseResult([{message:n,text:this._baseMessageToString(n)}])}async*transform(e,n){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...n,runType:"parser"})}}class zv extends Ox{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const l of e){if(typeof l!="string"&&typeof l.content!="string")throw new Error("Cannot handle non-string output.");let o;if(KE(l)){if(typeof l.content!="string")throw new Error("Cannot handle non-string message output.");o=new ri({message:l,text:l.content})}else if(Au(l)){if(typeof l.content!="string")throw new Error("Cannot handle non-string message output.");o=new ri({message:r1(l),text:l.content})}else o=new ai({text:l});r===void 0?r=o:r=r.concat(o);const c=await this.parsePartialResult([r]);c!=null&&!Fd(c,n)&&(this.diff?yield this._diff(n,c):yield c,n=c)}}getFormatInstructions(){return""}}class Tx extends Pv{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=ks(Object.fromEntries(Object.entries(e).map(([r,l])=>[r,Tu().describe(l)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Ls(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(l,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(r))}catch(n){throw new mh(`Failed to parse. Text: "${e}". Error: ${n}`,e)}}}class xx extends zv{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,n){if(n)return e?kO(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return $y(e[0].text)}async parse(e){return $y(e,JSON.parse)}getFormatInstructions(){return""}}function qv(i,e){if(i.function===void 0)return;let n;if(e!=null&&e.partial)try{n=Jd(i.function.arguments??"{}")}catch{return}else try{n=JSON.parse(i.function.arguments)}catch(l){throw new mh([`Function "${i.function.name}" arguments:`,"",i.function.arguments,"","are not valid JSON.",`Error: ${l.message}`].join(`
`))}const r={name:i.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=i.id),r}function Ax(i){if(i.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:i.id,type:"function",function:{name:i.name,arguments:JSON.stringify(i.args)}}}function Rx(i,e){var n,r;return{name:(n=i.function)==null?void 0:n.name,args:(r=i.function)==null?void 0:r.arguments,id:i.id,error:e,type:"invalid_tool_call"}}class Nx extends zv{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var c;const r=e[0].message;let l;if(Wd(r)&&((c=r.tool_calls)!=null&&c.length)?l=r.tool_calls.map(d=>{const{id:m,...h}=d;return this.returnId?{id:m,...h}:h}):r.additional_kwargs.tool_calls!==void 0&&(l=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(m=>qv(m,{returnId:this.returnId,partial:n}))),!l)return[];const o=[];for(const d of l)if(d!==void 0){const m={type:d.name,args:d.args,id:d.id};o.push(m)}return o}}class O_ extends Nx{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await this.zodSchema.safeParseAsync(e);if(n.success)return n.data;throw new mh(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(o=>o.type===this.keyName);let l=r;if(r.length)return this.returnId||(l=r.map(o=>o.args)),this.returnSingle?l[0]:l}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(c=>c.type===this.keyName);let l=r;return r.length?(this.returnId||(l=r.map(c=>c.args)),this.returnSingle?this._validateResult(l[0]):await Promise.all(l.map(c=>this._validateResult(c)))):void 0}}function Cx(i){return i!==void 0&&Array.isArray(i.lc_namespace)}function jx(i){return i!==void 0&&ft.isRunnable(i)&&"lc_name"in i.constructor&&typeof i.constructor.lc_name=="function"&&i.constructor.lc_name()==="RunnableToolLike"}function kx(i){return!!i&&typeof i=="object"&&"name"in i&&"schema"in i&&(Cs(i.schema)||i.schema!=null&&typeof i.schema=="object"&&"type"in i.schema&&typeof i.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(i.schema.type))}function Lx(i){return kx(i)||jx(i)||Cx(i)}function Dx(i){return Cs(i)?Ls(i):i}function $x(i,e){return{name:i.name,description:i.description,parameters:Dx(i.schema)}}function T_(i,e){let n;return Lx(i)?n={type:"function",function:$x(i)}:n=i,n}const Mx=["frequency_penalty","function_call","functions","logit_bias","logprobs","max_completion_tokens","max_tokens","n","parallel_tool_calls","presence_penalty","reasoning_format","response_format","seed","service_tier","stop","temperature","tool_choice","top_logprobs","top_p"],Ix=["headers","promptIndex","stream_options","tools"],Ux=[...Mx,...Ix];function Px(i){const e=i._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";default:throw new Error(`Unknown message type: ${e}`)}}function x_(i){return i.map(e=>{var r;if(typeof e.content!="string")throw new Error("Non string message content not supported");const n={role:Px(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id};return Wd(e)&&((r=e.tool_calls)!=null&&r.length)?n.tool_calls=e.tool_calls.map(Ax):(e.additional_kwargs.tool_calls!=null&&(n.tool_calls=e.additional_kwargs.tool_calls),e.tool_call_id!=null&&(n.tool_call_id=e.tool_call_id)),n})}function zx(i,e,n){const r=i.tool_calls;switch(i.role){case"assistant":{const l=[],o=[];for(const c of r??[])try{l.push(qv(c,{returnId:!0}))}catch(d){o.push(Rx(c,d.message))}return new Ld({content:i.content||"",additional_kwargs:{tool_calls:r},tool_calls:l,invalid_tool_calls:o,usage_metadata:e,response_metadata:n})}default:return new Ru(i.content||"",i.role??"unknown")}}function qx(i,e,n,r){var _,w;const l=i.role??e,o=i.content??"";let c;i.function_call?c={function_call:i.function_call}:i.tool_calls?c={tool_calls:i.tool_calls}:c={},i.audio&&(c.audio={...i.audio,index:n.choices[0].index});let d,m=r,h;const g=n.x_groq;g!=null&&g.usage&&(d={input_tokens:g.usage.prompt_tokens,output_tokens:g.usage.completion_tokens,total_tokens:g.usage.total_tokens},h={completion_time:g.usage.completion_time,prompt_time:g.usage.prompt_time,queue_time:g.usage.queue_time,total_time:g.usage.total_time}),g!=null&&g.id&&(m=g.id);const b={usage:d,timing:h};if(l==="user")return new ku({content:o,response_metadata:b});if(l==="assistant"){const S=[];if(Array.isArray(i.tool_calls))for(const E of i.tool_calls)S.push({name:(_=E.function)==null?void 0:_.name,args:(w=E.function)==null?void 0:w.arguments,id:E.id,index:E.index,type:"tool_call_chunk"});return new ar({content:o,tool_call_chunks:S,additional_kwargs:c,id:m,response_metadata:b})}else return l==="system"?new xs({content:o,response_metadata:b}):l==="developer"?new xs({content:o,response_metadata:b,additional_kwargs:{__openai_role__:"developer"}}):l==="function"?new Cu({content:o,additional_kwargs:c,name:i.name,response_metadata:b}):l==="tool"?new Kd({content:o,additional_kwargs:c,tool_call_id:i.tool_call_id,response_metadata:b}):new Nu({content:o,role:l,response_metadata:b})}class Bv extends Aa{get lc_serialized_keys(){return["client","model","temperature","stop","stopSequences","maxTokens","streaming","apiKey","streamUsage","topP","frequencyPenalty","presencePenalty","logprobs","n","logitBias","user","reasoningFormat","serviceTier","topLogprobs"]}static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}get callKeys(){return[...super.callKeys,...Ux]}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","groq"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serviceTier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0});const n=e.apiKey||Qn("GROQ_API_KEY");if(!n)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');const r={"User-Agent":"langchainjs",...e.defaultHeaders??{}};this.client=new qe({apiKey:n,dangerouslyAllowBrowser:!0,baseURL:e.baseUrl,timeout:e.timeout,httpAgent:e.httpAgent,fetch:e.fetch,maxRetries:0,defaultHeaders:r,defaultQuery:e.defaultQuery}),this.apiKey=n,this.temperature=e.temperature??this.temperature,this.model=e.model,this.streaming=e.streaming??this.streaming,this.stop=e.stopSequences??(typeof e.stop=="string"?[e.stop]:e.stop)??[],this.stopSequences=this.stop,this.maxTokens=e.maxTokens,this.topP=e.topP,this.frequencyPenalty=e.frequencyPenalty,this.presencePenalty=e.presencePenalty,this.logprobs=e.logprobs,this.n=e.n,this.logitBias=e.logitBias,this.user=e.user}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??this.temperature,ls_max_tokens:n.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,n){return this.caller.call(async()=>this.client.chat.completions.create(e,n))}invocationParams(e,n){var c;const r=super.invocationParams(e);let l={};(e==null?void 0:e.stream_options)!==void 0?l={stream_options:e.stream_options}:(this.streamUsage&&this.streaming||n!=null&&n.streaming)&&(l={stream_options:{include_usage:!0}});const o={model:this.model,frequency_penalty:this.frequencyPenalty,function_call:e==null?void 0:e.function_call,functions:e==null?void 0:e.functions,logit_bias:this.logitBias,logprobs:this.logprobs,n:this.n,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,presence_penalty:this.presencePenalty,reasoning_format:this.reasoningFormat,response_format:e==null?void 0:e.response_format,seed:e==null?void 0:e.seed,service_tier:this.serviceTier,stop:(e==null?void 0:e.stop)??this.stopSequences,temperature:(e==null?void 0:e.temperature)??this.temperature,tool_choice:Bx(e==null?void 0:e.tool_choice),tools:(c=e==null?void 0:e.tools)!=null&&c.length?e.tools.map(d=>T_(d)):void 0,top_logprobs:this.topLogprobs,top_p:this.topP,user:this.user,stream:this.streaming,...r,...l};return o.max_completion_tokens=(e==null?void 0:e.max_completion_tokens)??(e==null?void 0:e.max_tokens)??this.maxTokens,o.max_completion_tokens===-1&&delete o.max_completion_tokens,o}bindTools(e,n){return this.bind({tools:e.map(r=>T_(r)),...n})}async*_streamResponseChunks(e,n,r){var g,b;const l=this.invocationParams(n,{streaming:!0}),o=x_(e),c=await this.completionWithRetry({...l,messages:o,stream:!0},{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers});let d,m,h;for await(const _ of c){h=_;const w=_==null?void 0:_.choices[0];if(!w)continue;(g=w.delta)!=null&&g.role&&(d=w.delta.role);const S=qx(w.delta,d,_,m),E={prompt:n.promptIndex??0,completion:w.index??0};if(typeof S.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const x={...E};w.finish_reason!=null&&(x.finish_reason=w.finish_reason,x.system_fingerprint=_.system_fingerprint,x.model_name=_.model);const R=new ri({message:S,text:S.content,generationInfo:x});yield R,await(r==null?void 0:r.handleLLMNewToken(R.text??"",E,void 0,void 0,void 0,{chunk:R}))}if(h&&("choices"in h&&delete h.choices,yield new ri({message:new ar({content:"",response_metadata:h}),text:""})),(b=n.signal)!=null&&b.aborted)throw new Error("AbortError")}async _generate(e,n,r){var l;if(this.streaming){const o={},c=this._streamResponseChunks(e,n,r),d={};for await(const h of c){const g=((l=h.generationInfo)==null?void 0:l.completion)??0;d[g]===void 0?d[g]=h:d[g]=d[g].concat(h)}return{generations:Object.entries(d).sort(([h],[g])=>parseInt(h,10)-parseInt(g,10)).map(([h,g])=>g),llmOutput:{estimatedTokenUsage:o}}}else return this._generateNonStreaming(e,n,r)}async _generateNonStreaming(e,n,r){var h;const l={},o=this.invocationParams(n),c=x_(e),d=await this.completionWithRetry({...o,stream:!1,messages:c},{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers});if("usage"in d&&d.usage){const{completion_tokens:g,prompt_tokens:b,total_tokens:_}=d.usage;g&&(l.completionTokens=(l.completionTokens??0)+g),b&&(l.promptTokens=(l.promptTokens??0)+b),_&&(l.totalTokens=(l.totalTokens??0)+_)}const m=[];if("choices"in d&&d.choices)for(const g of d.choices){const b=((h=g.message)==null?void 0:h.content)??"";let _;l.totalTokens!==void 0&&(_={input_tokens:l.promptTokens??0,output_tokens:l.completionTokens??0,total_tokens:l.totalTokens});const{choices:w,...S}=d,E={text:b,message:zx(g.message??{role:"assistant"},_,S)};E.generationInfo={...g.finish_reason?{finish_reason:g.finish_reason}:{},...g.logprobs?{logprobs:g.logprobs}:{}},m.push(E)}return{generations:m,llmOutput:{tokenUsage:l}}}withStructuredOutput(e,n){const r=e,l=n==null?void 0:n.name,o=n==null?void 0:n.method,c=n==null?void 0:n.includeRaw;let d=l??"extract",m,h;if(o==="jsonMode")h=this.bind({response_format:{type:"json_object"}}),Cs(r)?m=Tx.fromZodSchema(r):m=new xx;else if(Cs(r)){const w=Ls(r);h=this.bind({tools:[{type:"function",function:{name:d,description:w.description,parameters:w}}],tool_choice:{type:"function",function:{name:d}}}),m=new O_({returnSingle:!0,keyName:d,zodSchema:r})}else{let w;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(w=r,d=r.name):(d=r.title??d,w={name:d,description:r.description??"",parameters:r}),h=this.bind({tools:[{type:"function",function:w}],tool_choice:{type:"function",function:{name:d}}}),m=new O_({returnSingle:!0,keyName:d})}if(!c)return h.pipe(m).withConfig({runName:"ChatGroqStructuredOutput"});const g=Ou.assign({parsed:(w,S)=>m.invoke(w.raw,S)}),b=Ou.assign({parsed:()=>null}),_=g.withFallbacks({fallbacks:[b]});return Yn.from([{raw:h},_]).withConfig({runName:"ChatGroqStructuredOutput"})}}function Bx(i){if(i)return i==="any"||i==="required"?"required":i==="auto"?"auto":i==="none"?"none":typeof i=="string"?{type:"function",function:{name:i}}:i}const Hx=new Bv({model:"llama3-70b-8192",temperature:0,apiKey:"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"}),Gx=({profile_image_url:i,about:e,name:n="Ch.Varun",linkedin:r,children:l})=>{r||(r="");const[o,c]=Ie.useState([{id:1,text:"Feel free to ask me anything about my background or projects. I'm here to help!",sender:"bot",timestamp:new Date}]),[d,m]=Ie.useState(""),[h,g]=Ie.useState(!1),b=Ie.useRef(null),[_,w]=Ie.useState([]),S=()=>{b.current&&b.current.scrollTo({top:b.current.scrollHeight,behavior:"smooth"})};Ie.useEffect(()=>{S()},[o]);const E=async()=>{if(!d.trim())return;const M={id:Date.now(),text:d,sender:"user",timestamp:new Date},C=[..._,{role:"user",content:d}];w(C),c(Z=>[...Z,M]),m(""),g(!0);try{const Z=await Hx.invoke([{role:"system",content:R(n,r)},...C]),z=typeof Z.content=="string"?Z.content:Array.isArray(Z.content)?Z.content.map(ae=>typeof ae=="string"?ae:ae.text||"").join(" "):"",K={id:Date.now()+1,text:z,sender:"bot",timestamp:new Date};c(ae=>[...ae,K]),w([...C,{role:"assistant",content:z}])}catch(Z){console.error(Z)}finally{g(!1)}},x=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),E())},R=(M,C)=>`You are acting as ${M}. You are answering questions on ${M}'s website, related to their experience, skills, and career. Be friendly, professional, and helpful. Here's their LinkedIn for context:
${C}. Make sure to answer in 1-2 lines for every question.`;return L.jsx("section",{className:"hero-section",id:"home",children:L.jsxs("div",{className:"hero-content",children:[L.jsx("div",{className:"profile-image",children:L.jsx("img",{src:i,alt:"Profile"})}),L.jsxs("div",{className:"profile-info",children:[L.jsx("h1",{className:"profile-name",children:n}),L.jsx("p",{className:"profile-title",children:"Software Developer @ HashedIn by Deloitte"})]}),L.jsxs("div",{className:"welcome-section",children:[L.jsx("h2",{className:"welcome-title",children:"Welcome to my Portfolio-Website"}),L.jsxs("p",{className:"welcome-description",children:[e," Here is my GitHub, you can explore my projects: ",L.jsx("a",{href:"https://github.com/TheCoder30ec4",children:"GitHub"})]})]}),L.jsxs("div",{className:"chat-interface",children:[L.jsx("h3",{className:"chat-title",children:"Live Chat with me 🙂"}),L.jsxs("div",{className:"chat-container",children:[L.jsxs("div",{className:"chat-messages",ref:b,children:[o.map(M=>L.jsxs("div",{className:`message ${M.sender}`,children:[L.jsx("div",{className:"message-avatar",children:M.sender==="bot"?L.jsx("img",{src:i,alt:"Bot Avatar",className:"bot-avatar-img"}):L.jsx("div",{className:"user-avatar",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:L.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),L.jsxs("div",{className:"message-content",children:[L.jsx("div",{className:"message-sender-name",children:M.sender==="bot"?n:"You"}),L.jsx("div",{className:"message-bubble",children:M.text})]})]},M.id)),h&&L.jsxs("div",{className:"message bot",children:[L.jsx("div",{className:"message-avatar",children:L.jsx("img",{src:i,alt:"Bot Avatar",className:"bot-avatar-img"})}),L.jsxs("div",{className:"message-content",children:[L.jsx("div",{className:"message-sender-name",children:n}),L.jsx("div",{className:"message-bubble typing",children:L.jsxs("div",{className:"typing-indicator",children:[L.jsx("span",{}),L.jsx("span",{}),L.jsx("span",{})]})})]})]})]}),L.jsx("div",{className:"chat-input-container",children:L.jsxs("div",{className:"chat-input-wrapper",children:[L.jsx("input",{type:"text",placeholder:"Type your message here...",value:d,onChange:M=>m(M.target.value),onKeyPress:x,className:"chat-input"}),L.jsx("button",{onClick:E,className:"send-button",disabled:!d.trim(),"aria-label":"Send message",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:L.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})}),L.jsx("p",{className:"chat-disclaimer",children:"AI-powered responses may take a moment. Please be patient."})]})]})]})})},Zx=async({url:i="https://www.linkedin.com/in/ch-varun/",api_token:e="apify_api_khHJAzd0dbHxZSgarkHmhBjDfDlbR803ixV3"}={})=>{var m;const o=(m=(await(await fetch(`https://api.apify.com/v2/acts/VhxlqQXRwhW8H5hNV/runs?token=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i})})).json()).data)==null?void 0:m.defaultDatasetId;if(!o)throw new Error("Dataset ID not found");return await new Promise(h=>setTimeout(h,1e4)),await(await fetch(`https://api.apify.com/v2/datasets/${o}/items?clean=true&format=json`,{headers:{Authorization:`Bearer ${e}`}})).json()},Vx=ks({name:Tu()}),Yx=ks({category:Tu(),skills:k_(Vx)});ks({categories:k_(Yx)});const Fx=new Bv({model:"llama3-8b-8192",temperature:.2,apiKey:"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"}),Xx=({data:i})=>{const[e,n]=Ie.useState([]),[r,l]=Ie.useState(!0),[o,c]=Ie.useState(null),d=Ie.useRef(null);Ie.useEffect(()=>{(async()=>{let b=[];if(i!=null&&i.skills)b=i.skills;else if(i!=null&&i.experience){const S=i.experience.reduce((x,R)=>R.skills&&Array.isArray(R.skills)?[...x,...R.skills]:x,[]);b=[...new Set(S)].map(x=>({name:x}))}if(!b||b.length===0){l(!1);return}l(!0),c(null);const w=`You are an expert tech hiring manager. Your task is to categorize a list of software development skills into logical groups.
      Given the list of skills: [${b.map(S=>S.name).join(", ")}].
      Categorize them into relevant groups such as "Frontend", "Backend", "Languages", "Databases", "DevOps", "Testing", and "Tools".
      You MUST return ONLY a single valid JSON object in the following format: { "categories": [{ "category": "CategoryName", "skills": [{ "name": "SkillName" }] }] }.
      Do NOT include any introductory text, backticks, or explanations outside of the JSON object.
      Do NOT omit any closing brackets or braces. Only output valid JSON. Also from the projects if you get another skills feel free to mention`;try{let E=(await Fx.invoke(w)).content;console.log("Raw LLM Content:",E);const x=E.indexOf("{"),R=E.lastIndexOf("}");if(x===-1||R===-1||R<x)throw new Error("No valid JSON object found in LLM response.");let M=E.substring(x,R+1);console.log("JSON String being parsed:",M);const C=(M.match(/{/g)||[]).length,Z=(M.match(/}/g)||[]).length,z=(M.match(/\[/g)||[]).length,K=(M.match(/\]/g)||[]).length;C>Z&&(M+="}".repeat(C-Z)),z>K&&(M+="]".repeat(z-K));const ae=JSON.parse(M);if(ae.categories&&ae.categories.length>0)n(ae.categories);else throw new Error("Invalid JSON structure from LLM.")}catch(S){console.error("Failed to categorize skills:",S),c("Could not categorize skills. Displaying in a simple list."),n([{category:"All Skills",skills:b}])}finally{l(!1)}})()},[i]);const[m,h]=Ie.useState([]);return Ie.useEffect(()=>{if(!d.current)return;const g=d.current.querySelector(".tree-root"),b=Array.from(d.current.querySelectorAll(".tree-category"));if(!g||b.length===0)return;const _=g.getBoundingClientRect(),w=d.current.getBoundingClientRect(),S=[];b.forEach(E=>{const x=E.getBoundingClientRect();S.push({x1:_.left+_.width/2-w.left,y1:_.bottom-w.top,x2:x.left+x.width/2-w.left,y2:x.top-w.top})}),h(S)},[e,r]),r?L.jsx("section",{className:"skills-section",id:"skills",children:L.jsxs("div",{className:"skills-tree-vertical",ref:d,children:[L.jsx("div",{className:"tree-root",children:"MY SKILLS"}),L.jsx("div",{className:"tree-loading",children:"Categorizing skills..."})]})}):L.jsx("section",{className:"skills-section",id:"skills",children:L.jsxs("div",{className:"skills-simple-container animated-section",children:[L.jsx("div",{className:"skills-title-simple",children:"MY SKILLS"}),o&&L.jsx("p",{className:"skills-error",children:o}),L.jsx("div",{className:"skills-category-grid",children:e.map((g,b)=>L.jsxs("div",{className:"skills-category-card",children:[L.jsx("div",{className:"skills-category-header",children:g.category}),L.jsx("div",{className:"skills-tag-list",children:g.skills.map((_,w)=>L.jsx("span",{className:"skill-tag-simple",children:_.name},_.name+w))})]},g.category+b))})]})})};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jx=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),A_=i=>{const e=Jx(i);return e.charAt(0).toUpperCase()+e.slice(1)},Hv=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Kx=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Ie.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:o,iconNode:c,...d},m)=>Ie.createElement("svg",{ref:m,...Wx,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:Hv("lucide",l),...!o&&!Kx(d)&&{"aria-hidden":"true"},...d},[...c.map(([h,g])=>Ie.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=(i,e)=>{const n=Ie.forwardRef(({className:r,...l},o)=>Ie.createElement(eA,{ref:o,iconNode:e,className:Hv(`lucide-${Qx(A_(i))}`,`lucide-${i}`,r),...l}));return n.displayName=A_(i),n};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],nA=Gv("clock",tA);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rA=Gv("map-pin",aA),iA=({experience:i})=>L.jsxs("div",{className:"role-card",children:[L.jsxs("div",{className:"role-card-content",children:[L.jsx("h4",{className:"role-card-title",children:i.title}),L.jsxs("div",{className:"role-card-meta",children:[L.jsxs("span",{className:"meta-item",children:[L.jsx(nA,{size:14}),i.duration]}),L.jsxs("span",{className:"meta-item",children:[L.jsx(rA,{size:14}),i.location]})]})]}),L.jsx("div",{className:"glowing-dot"})]}),sA=i=>{if(!i)return[];const e=i.reduce((n,r)=>{const l=r.company||"Unknown Company";return n[l]||(n[l]={company:l,logo:r.company_logo_url||"",roles:[]}),n[l].roles.push(r),n[l].roles.sort((o,c)=>{const d=new Date(o.start_date.year,o.start_date.month?o.start_date.month-1:0);return new Date(c.start_date.year,c.start_date.month?c.start_date.month-1:0).getTime()-d.getTime()}),n},{});return Object.values(e)},lA=({experienceData:i})=>{const e=sA(i);return L.jsxs("section",{className:"experience-section",id:"experience",children:[L.jsx("h2",{className:"experience-title",children:"Experience"}),L.jsxs("div",{className:"timeline-container animated-section",children:[L.jsx("div",{className:"timeline-line"}),L.jsx("div",{className:"timeline-content",children:e.map((n,r)=>L.jsxs("div",{className:"timeline-item",children:[L.jsx("div",{className:"timeline-dot"}),L.jsxs("div",{className:"company-panel",children:[L.jsxs("div",{className:"company-info",children:[n.logo&&L.jsx("img",{src:n.logo,alt:`${n.company} logo`,className:"company-logo"}),L.jsx("h3",{className:"company-name",children:n.company})]}),L.jsx("div",{className:"roles-container",children:n.roles.map((l,o)=>L.jsx(iA,{experience:l,isLastRole:o===n.roles.length-1},o))})]})]},r))})]})]})},uA=({project:i})=>L.jsxs("div",{className:"project-card",children:[L.jsx("h3",{className:"title",children:i.name}),i.associated_with&&L.jsxs("p",{className:"subtitle",children:["Associated with: ",i.associated_with]}),L.jsx("p",{className:"description",children:i.description}),L.jsxs("div",{className:"buttons",children:[L.jsx("a",{href:"https://github.com/TheCoder30ec4",className:"cta-btn",target:"_blank",rel:"noreferrer",children:"View on GitHub"}),L.jsx("a",{href:"https://github.com/TheCoder30ec4",className:"cta-btn secondary",target:"_blank",rel:"noreferrer",children:"View More Projects →"})]})]}),oA=({projects:i})=>L.jsxs("section",{className:"projects-section",id:"projects",children:[L.jsx("h2",{className:"section-title",children:"My Projects"}),L.jsx("p",{className:"section-subtitle",children:"Here are some of the projects I've worked on. Feel free to explore them."}),L.jsx("div",{className:"projects-grid",children:i.map((e,n)=>L.jsx(uA,{project:e},n))})]}),cA=({data:i})=>L.jsxs("div",{className:"cert-card",children:[L.jsx("h3",{className:"cert-title",children:i.name}),L.jsx("p",{className:"cert-meta",children:i.issuer}),L.jsx("p",{className:"cert-date",children:i.issued_date})]}),fA=({certifications:i})=>L.jsxs("section",{className:"cert-section",children:[L.jsx("h2",{className:"section-title",children:"Certifications"}),L.jsx("div",{className:"cert-grid",children:i.map((e,n)=>L.jsx(cA,{data:e},n))})]}),dA=()=>L.jsxs("section",{className:"contact-section",children:[L.jsx("h2",{className:"section-title",children:"Get in Touch"}),L.jsxs("p",{className:"contact-description",children:["Feel free to reach out to me for collaboration, project ideas, or just a tech chat! ",L.jsx("br",{}),L.jsx("br",{}),"Made with passion and love ❤️ by Varun"]}),L.jsxs("div",{className:"contact-details",children:[L.jsxs("p",{children:[L.jsx("strong",{children:"Email:"})," ",L.jsx("a",{href:"mailto:varun30ec4@gmail.com",children:"varun30ec4@gmail.com"})]}),L.jsxs("p",{children:[L.jsx("strong",{children:"GitHub:"})," ",L.jsx("a",{href:"https://github.com/TheCoder30ec4",target:"_blank",rel:"noreferrer",children:"TheCoder30ec4"})]}),L.jsxs("p",{children:[L.jsx("strong",{children:"LinkedIn:"})," ",L.jsx("a",{href:"https://linkedin.com/in/ch-varun",target:"_blank",rel:"noreferrer",children:"Ch Varun"})]})]})]}),hA="http://localhost:5678/webhook/09e33cc3-6ed0-496d-abab-8199b5bacceb",mA=()=>{const i=Ie.useRef(null),[e,n]=Ie.useState("idle"),[r,l]=Ie.useState(""),[o,c]=Ie.useState(""),[d,m]=Ie.useState(""),h=async g=>{g.preventDefault(),n("idle");try{(await fetch(hA,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,name:r,Note:d})})).ok?(n("sent"),l(""),c(""),m("")):n("error")}catch{n("error")}};return L.jsxs("section",{className:"contact-form-section",children:[L.jsx("h2",{className:"section-title",children:"Contact Me"}),L.jsx("p",{className:"section-subtitle",children:"I also do freelance work. Feel free to reach out for collaborations, project inquiries, or just to say hello!"}),L.jsxs("form",{ref:i,onSubmit:h,className:"contact-form",children:[L.jsx("input",{type:"text",name:"user_name",placeholder:"Your Name",required:!0,value:r,onChange:g=>l(g.target.value)}),L.jsx("input",{type:"email",name:"user_email",placeholder:"Your Email",required:!0,value:o,onChange:g=>c(g.target.value)}),L.jsx("textarea",{name:"message",placeholder:"Your Message",rows:5,value:d,onChange:g=>m(g.target.value),required:!0}),L.jsx("button",{type:"submit",children:"Send Message"}),e==="sent"&&L.jsx("p",{className:"status success",children:"Message sent successfully!"}),e==="error"&&L.jsx("p",{className:"status error",children:"Something went wrong. Try again!"})]})]})},pA={basic_info:{name:"Ch Varun",headline:"SDE-1@Hashedin by Deloitte | Full Stack Developer | AI Enthusiast | Innovator in Gen AI, MERN Stack & Computer Vision | Driving Real-World Impact through Cutting-Edge Technology",profile_image_url:"https://media.licdn.com/dms/image/v2/D5603AQGtW-0k1r7tSw/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1724755488319?e=1755129600&v=beta&t=kBNVmjLARnBbBE-irTR2YMHVAg3zCbNCc4yATeh9Xco",about:`🚀Turning code into cutting-edge solutions & the future one line at a time! 🌐 Educated at Amrita Vishwa Vidyapeetham with a strong footing in Computer and Communication Engineering, my journey has been about more than just grades—it's a story of passion, projects, and impact. From revamping real-time control in Cyber-Physical Systems to pioneering plant disease prediction tools, my work stands at the intersection of innovation and real-world challenges. 🌿

👩‍💻 Fluent in languages like C, Python, and JavaScript, and frameworks such as React Native & Flutter, I bring versatility and depth to the table. Projects like creating a Sensor-fusion-based Elderly Fall Detection System spotlight my team leadership and technical prowess, improving lives while pushing tech boundaries.

🏆 Recognized with 2nd place at Smart India Hackathon for a sustainable city project, my journey reflects a blend of academia and real-life impact. As an enthusiast for Machine Learning, my ventures into AI for agricultural efficiency and environmental management have not only earned accolades but also opened new realms of possibility.

🌱 I'm on the lookout for opportunities to contribute to dynamic teams and make meaningful advancements in technology and society. Let's connect and explore how we can chart new territories together!`,location:{country:"India",city:"Hyderabad, Telangana",full:"Hyderabad, Telangana, India",country_code:"IN"}},experience:[{title:"SDE 1",company:"HashedIn by Deloitte",location:"On-site",description:"Software developer 1",duration:"May 2025 - Present · 2 mos"},{title:"Intern",company:"HashedIn by Deloitte",location:"Bengaluru, Karnataka, India",duration:"Feb 2025 - May 2025 · 4 mos"},{title:"Investor Relations Intern",company:"Zealopia",location:"Mumbai Metropolitan Region",duration:"Dec 2024 - Feb 2025 · 3 mos",skills:["Business and Program Management"]},{title:"Club Member",company:"CAMHI",location:"Chennai, Tamil Nadu, India",duration:"Sep 2023 - Dec 2024 · 1 yr 4 mos",skills:["Debugging","Modeling and Simulation"]},{title:"Full Stack Developer",company:"DeepDive",location:"Singapore",description:"Developed backend APIs using AWS Lambda functions and REST APIs, integrated with OpenAI for PDF summarization, and built frontend functionalities including search and OAuth.",duration:"Apr 2024 - Jul 2024 · 4 mos",skills:["Front-End Development","open ai"]},{title:"Student Intern",company:"Water and Land Management Training and Research Institute",location:"Hyderabad, Telangana, India",description:'Contributed to the research project: "Development of Sensor-Based Real-Time Water Level Measurement and Irrigation Scheduling System in Paddy Fields for Increasing Water Use Efficiency."',duration:"Jul 2022 - Aug 2022 · 2 mos",skills:["Front-End Development","Management"]}],projects:[{name:"Neural Net from Scratch",description:"A modular implementation of neural networks using NumPy, demonstrating fundamental concepts of deep learning including various layer types and activation functions."},{name:"PDF Summarizer",description:"A full-stack application for summarizing PDF documents using Gemini AI, with a Flask backend and MongoDB for database management."}],certifications:[{name:"Full Stack Web Development",issuer:"Udemy",issued_date:"2024"},{name:"Machine Learning Specialist",issuer:"DeepLearning.AI",issued_date:"2024"},{name:"TypeScript Fundamentals",issuer:"Microsoft",issued_date:"2022"}]};function gA(){const[i,e]=Ie.useState(null),[n,r]=Ie.useState(!0),[l,o]=Ie.useState(null);Ie.useEffect(()=>{(async()=>{try{const m=new Promise((b,_)=>setTimeout(()=>_(new Error("API timeout")),12e4)),h=Zx(),g=await Promise.race([h,m]);if(g&&g.length>0)e(g[0]);else throw new Error("No data received from API.")}catch(m){console.warn("API failed, using fallback data:",m.message),e(pA)}finally{r(!1)}})()},[]);const c=JSON.stringify(i);return n?L.jsx("div",{className:"loading-container",children:L.jsxs("div",{className:"loading-content",children:[L.jsx("div",{className:"spinner"}),L.jsx("p",{className:"loading-text",children:"Loading Portfolio..."})]})}):i?L.jsxs(L.Fragment,{children:[L.jsx(TS,{}),L.jsxs("main",{children:[L.jsxs(Gx,{profile_image_url:i.basic_info.profile_picture_url,about:i.basic_info.about,linkedin:String(c),children:[L.jsx("h1",{className:"profile-name",children:i.basic_info.name}),L.jsx("p",{className:"profile-title",children:"Software Developer @ HashedIn by Deloitte"})]}),L.jsx(Xx,{data:i}),L.jsx(lA,{experienceData:i.experience}),L.jsx(oA,{projects:i.projects}),L.jsx(fA,{certifications:i.certifications}),L.jsxs("section",{id:"contact",children:[L.jsx(mA,{}),L.jsx(dA,{})]})]})]}):L.jsx("div",{className:"error-container",children:L.jsxs("div",{className:"error-content",children:[L.jsx("h2",{className:"error-title",children:"Oops! Something went wrong."}),L.jsx("p",{className:"error-message",children:"Could not load the portfolio data. Please try again later."})]})})}OS.createRoot(document.getElementById("root")).render(L.jsx(Ie.StrictMode,{children:L.jsx(gA,{})}));
